<html xmlns:v="urn:schemas-microsoft-com:vml"
xmlns:o="urn:schemas-microsoft-com:office:office"
xmlns:w="urn:schemas-microsoft-com:office:word"
xmlns:dt="uuid:C2F41010-65B3-11d1-A29F-00AA00C14882"
xmlns:m="http://schemas.microsoft.com/office/2004/12/omml"
xmlns="http://www.w3.org/TR/REC-html40">

<head>
<meta http-equiv=Content-Type content="text/html; charset=utf-8">
<meta name=ProgId content=Word.Document>
<meta name=Generator content="Microsoft Word 15">
<meta name=Originator content="Microsoft Word 15">
<link rel=File-List href="Hadoop_02HDFS.files/filelist.xml">
<link rel=Edit-Time-Data href="Hadoop_02HDFS.files/editdata.mso">
<link rel=OLE-Object-Data href="Hadoop_02HDFS.files/oledata.mso">
<link rel=dataStoreItem href="Hadoop_02HDFS.files/item0001.xml"
target="Hadoop_02HDFS.files/props002.xml">
<link rel=themeData href="Hadoop_02HDFS.files/themedata.thmx">
<link rel=colorSchemeMapping href="Hadoop_02HDFS.files/colorschememapping.xml">

<link href="./css/treemenu.css" rel="stylesheet" type="text/css">
<!-- GitHub Pages只认./js/xxx这种相对定位，不认js/xxx这种 -->
<script src="./js/jquery-3.4.1.min.js"></script>
<script src="./js/test.js"></script>
<script src="./js/treemenu.js"></script>
</head>

<body lang=ZH-CN link=blue vlink=purple style='tab-interval:21.0pt;text-justify-trim:
punctuation'>

<div class=WordSection1 style='layout-grid:15.6pt'>

<div id="noScroll" class="divcss5-right">
	<ul id="menuId" class="tree">
	</ul>
	<div style="font-size: 10px; color: #161FB0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
 （Ctrl+滚动鼠标可缩放页面）</div>
</div> 

<p class=MsoNormal align=center style='text-align:center;mso-line-height-alt:
11.0pt'><span lang=EN-US style='font-size:22.0pt'>Hadoop</span><span
style='font-size:22.0pt;font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>（</span><span lang=EN-US
style='font-size:22.0pt'>HDFS</span><span style='font-size:22.0pt;font-family:
宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:"Times New Roman"'>）</span><span
lang=EN-US style='font-size:22.0pt'><o:p></o:p></span></p>

<p class=MsoNormal align=right style='text-align:right;mso-line-height-alt:
11.0pt'><span style='font-size:12.0pt;font-family:宋体;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>作者：尚硅谷大数据研发部</span><span
lang=EN-US style='font-size:12.0pt'><o:p></o:p></span></p>

<p class=MsoNormal align=right style='text-align:right;mso-line-height-alt:
11.0pt'><span style='font-size:12.0pt;mso-bidi-font-size:11.0pt;font-family:
宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:"Times New Roman"'>整理：小邹</span><span
lang=EN-US style='font-size:12.0pt;mso-bidi-font-size:11.0pt'>[yw_forgit@163.com]</span><span
lang=EN-US style='font-size:12.0pt'><o:p></o:p></span></p>

<p class=MsoNormal style='mso-line-height-alt:11.0pt'><span lang=EN-US
style='font-size:12.0pt;mso-fareast-font-family:微软雅黑;mso-bidi-font-family:微软雅黑;
mso-font-kerning:0pt'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal align=center style='text-align:center;mso-line-height-alt:
11.0pt'><span style='font-size:12.0pt;font-family:"微软雅黑","sans-serif";
mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:"Times New Roman";
mso-bidi-font-family:微软雅黑;mso-font-kerning:0pt'>版本：</span><span lang=EN-US
style='font-size:12.0pt;mso-fareast-font-family:微软雅黑;mso-bidi-font-family:微软雅黑;
mso-font-kerning:0pt'>V2.0<o:p></o:p></span></p>

<h1 style='margin:0cm;margin-bottom:.0001pt'><span style='font-size:15.0pt;
line-height:240%;font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>第</span><span lang=EN-US
style='font-size:15.0pt;line-height:240%'>1</span><span style='font-size:15.0pt;
line-height:240%;font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>章</span><span lang=EN-US
style='font-size:15.0pt;line-height:240%'> HDFS</span><span style='font-size:
15.0pt;line-height:240%;font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>概述</span><span lang=EN-US
style='font-size:15.0pt;line-height:240%'><o:p></o:p></span></h1>

<h2 style='margin:0cm;margin-bottom:.0001pt'><span lang=EN-US style='font-size:
14.0pt;line-height:172%;font-family:"Times New Roman","serif"'>1.1 HDFS</span><span
style='font-size:14.0pt;line-height:172%;font-family:黑体;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>产出背景及定义</span><span
lang=EN-US style='font-size:14.0pt;line-height:172%;font-family:"Times New Roman","serif"'><o:p></o:p></span></h2>

<p class=MsoNormal><span lang=EN-US><v:shapetype id="_x0000_t75" coordsize="21600,21600"
 o:spt="75" o:preferrelative="t" path="m@4@5l@4@11@9@11@9@5xe" filled="f"
 stroked="f">
 <v:stroke joinstyle="miter"/>
 <v:formulas>
  <v:f eqn="if lineDrawn pixelLineWidth 0"/>
  <v:f eqn="sum @0 1 0"/>
  <v:f eqn="sum 0 0 @1"/>
  <v:f eqn="prod @2 1 2"/>
  <v:f eqn="prod @3 21600 pixelWidth"/>
  <v:f eqn="prod @3 21600 pixelHeight"/>
  <v:f eqn="sum @0 0 1"/>
  <v:f eqn="prod @6 1 2"/>
  <v:f eqn="prod @7 21600 pixelWidth"/>
  <v:f eqn="sum @8 21600 0"/>
  <v:f eqn="prod @7 21600 pixelHeight"/>
  <v:f eqn="sum @10 21600 0"/>
 </v:formulas>
 <v:path o:extrusionok="f" gradientshapeok="t" o:connecttype="rect"/>
 <o:lock v:ext="edit" aspectratio="t"/>
</v:shapetype><v:shape id="_x0000_i1025" type="#_x0000_t75" style='width:489pt;
 height:276pt' o:ole="">
 <img src="Hadoop_02HDFS.files/image001.png" o:title=""/>
</v:shape><!--[if gte mso 9]><xml>
 <o:OLEObject Type="Embed" ProgID="PowerPoint.Show.12" ShapeID="_x0000_i1025"
  DrawAspect="Content" ObjectID="_1629747782">
 </o:OLEObject>
</xml><![endif]--></span></p>

<h2 style='margin:0cm;margin-bottom:.0001pt'><span lang=EN-US style='font-size:
14.0pt;line-height:172%;font-family:"Times New Roman","serif"'>1.2 HDFS</span><span
style='font-size:14.0pt;line-height:172%;font-family:黑体;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>优缺点</span><span
lang=EN-US style='font-size:14.0pt;line-height:172%;font-family:"Times New Roman","serif"'><o:p></o:p></span></h2>

<p class=MsoNormal><span lang=EN-US><v:shape id="_x0000_i1026" type="#_x0000_t75"
 style='width:507pt;height:285pt' o:ole="">
 <img src="Hadoop_02HDFS.files/image002.png" o:title=""/>
</v:shape><!--[if gte mso 9]><xml>
 <o:OLEObject Type="Embed" ProgID="PowerPoint.Show.12" ShapeID="_x0000_i1026"
  DrawAspect="Content" ObjectID="_1629747784">
 </o:OLEObject>
</xml><![endif]--></span></p>

<p class=MsoNormal><span lang=EN-US><v:shape id="_x0000_i1027" type="#_x0000_t75"
 style='width:527.4pt;height:295.8pt' o:ole="">
 <img src="Hadoop_02HDFS.files/image003.png" o:title=""/>
</v:shape><!--[if gte mso 9]><xml>
 <o:OLEObject Type="Embed" ProgID="PowerPoint.Show.12" ShapeID="_x0000_i1027"
  DrawAspect="Content" ObjectID="_1629747785">
 </o:OLEObject>
</xml><![endif]--></span></p>

<h2 style='margin:0cm;margin-bottom:.0001pt'><span lang=EN-US style='font-size:
14.0pt;line-height:172%;font-family:"Times New Roman","serif"'>1.3 HDFS</span><span
style='font-size:14.0pt;line-height:172%;font-family:黑体;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>组成架构</span><span
lang=EN-US style='font-size:14.0pt;line-height:172%;font-family:"Times New Roman","serif"'><o:p></o:p></span></h2>

<p class=MsoNormal><span style='font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>使用</span><span lang=EN-US>hadoop fs</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>或</span><span lang=EN-US>dfs -put</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>这些命令的都是</span><span lang=EN-US>Client</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>。</span></p>

<p class=1 style='text-indent:0cm;mso-char-indent-count:0;line-height:150%'><span
lang=EN-US style='font-family:"Times New Roman","serif";color:black'><v:shape
 id="_x0000_i1028" type="#_x0000_t75" style='width:534pt;height:301.2pt' o:ole="">
 <img src="Hadoop_02HDFS.files/image004.png" o:title=""/>
</v:shape><!--[if gte mso 9]><xml>
 <o:OLEObject Type="Embed" ProgID="PowerPoint.Show.12" ShapeID="_x0000_i1028"
  DrawAspect="Content" ObjectID="_1629747786">
 </o:OLEObject>
</xml><![endif]--><o:p></o:p></span></p>

<p class=1 style='text-indent:0cm;mso-char-indent-count:0;line-height:150%'><span
lang=EN-US style='font-family:"Times New Roman","serif";color:black'><v:shape
 id="_x0000_i1029" type="#_x0000_t75" style='width:547.2pt;height:309pt' o:ole="">
 <img src="Hadoop_02HDFS.files/image005.png" o:title=""/>
</v:shape><!--[if gte mso 9]><xml>
 <o:OLEObject Type="Embed" ProgID="PowerPoint.Show.12" ShapeID="_x0000_i1029"
  DrawAspect="Content" ObjectID="_1629747787">
 </o:OLEObject>
</xml><![endif]--><o:p></o:p></span></p>

<h2 style='margin:0cm;margin-bottom:.0001pt'><span lang=EN-US style='font-size:
14.0pt;line-height:172%;font-family:"Times New Roman","serif"'>1.4 HDFS</span><span
style='font-size:14.0pt;line-height:172%;font-family:黑体;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>文件块大小（面试重点）</span><span
lang=EN-US style='font-size:14.0pt;line-height:172%;font-family:"Times New Roman","serif"'><o:p></o:p></span></h2>

<p class=MsoNormal style='line-height:150%'><span lang=EN-US><v:shape id="_x0000_i1030"
 type="#_x0000_t75" style='width:544.2pt;height:304.8pt' o:ole="">
 <v:fill o:detectmouseclick="t"/>
 <img src="Hadoop_02HDFS.files/image006.png" o:title=""/>
</v:shape><!--[if gte mso 9]><xml>
 <o:OLEObject Type="Embed" ProgID="PowerPoint.Show.12" ShapeID="_x0000_i1030"
  DrawAspect="Content" ObjectID="_1629747788">
  <o:WordFieldCodes>\* MERGEFORMAT</o:WordFieldCodes>
 </o:OLEObject>
</xml><![endif]--></span></p>

<p class=MsoNormal style='line-height:150%'><span lang=EN-US>128M</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>是一个整数，机械键盘用</span><span lang=EN-US>128M</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>刚好差不多，而固态硬盘很多都是分块</span><span lang=EN-US>256M</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>，主要看硬盘的传输速率。</span></p>

<p class=MsoNormal style='line-height:150%'><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='line-height:150%'><span lang=EN-US>hdfs-default.xml</span></p>

<p class=MsoNormal style='line-height:150%'><span lang=EN-US style='mso-no-proof:
yes'><v:shape id="图片_x0020_8" o:spid="_x0000_i1121" type="#_x0000_t75" style='width:567pt;
 height:124.8pt;visibility:visible;mso-wrap-style:square'>
 <img src="Hadoop_02HDFS.files/image007.png" o:title=""/>
</v:shape></span></p>

<p class=MsoNormal align=center style='text-align:center;line-height:150%'><span
lang=EN-US style='color:black'><v:shape id="_x0000_i1031" type="#_x0000_t75"
 style='width:414pt;height:234pt' o:ole="">
 <img src="Hadoop_02HDFS.files/image008.png" o:title=""/>
</v:shape><!--[if gte mso 9]><xml>
 <o:OLEObject Type="Embed" ProgID="PowerPoint.Show.12" ShapeID="_x0000_i1031"
  DrawAspect="Content" ObjectID="_1629747789">
 </o:OLEObject>
</xml><![endif]--></span></p>

<h1 style='margin:0cm;margin-bottom:.0001pt'><span style='font-size:15.0pt;
line-height:240%;font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>第</span><span lang=EN-US
style='font-size:15.0pt;line-height:240%'>2</span><span style='font-size:15.0pt;
line-height:240%;font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>章</span><span style='font-size:15.0pt;
line-height:240%'> <span lang=EN-US>HDFS</span></span><span style='font-size:
15.0pt;line-height:240%;font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>的</span><span lang=EN-US
style='font-size:15.0pt;line-height:240%'>Shell</span><span style='font-size:
15.0pt;line-height:240%;font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>操作（开发重点）</span><span lang=EN-US
style='font-size:15.0pt;line-height:240%'><o:p></o:p></span></h1>

<p class=10 style='margin-top:6.2pt;text-indent:22.0pt'><span lang=EN-US>1</span><span
style='font-family:黑体;mso-ascii-font-family:Arial;mso-hansi-font-family:Arial'>．基本语法</span></p>

<p class=MsoNormal style='text-indent:21.0pt;mso-char-indent-count:2.0;
line-height:150%;mso-layout-grid-align:none;punctuation-trim:leading'><span
lang=EN-US>bin/hadoop fs </span><span style='font-family:宋体;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>具体命令</span><span
lang=EN-US><span style='mso-spacerun:yes'>   </span>OR<span
style='mso-spacerun:yes'>  </span>bin/hdfs dfs </span><span style='font-family:
宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:"Times New Roman"'>具体命令</span></p>

<p class=MsoNormal style='text-indent:21.0pt;mso-char-indent-count:2.0;
line-height:150%;mso-layout-grid-align:none;punctuation-trim:leading'><span
lang=EN-US>dfs</span><span style='font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>是</span><span lang=EN-US>fs</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>的实现类。</span></p>

<p class=10 style='margin-top:6.2pt;text-indent:22.0pt'><span lang=EN-US>2</span><span
style='font-family:黑体;mso-ascii-font-family:Arial;mso-hansi-font-family:Arial'>．命令大全</span></p>

<p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'>[atguigu@hadoop102
hadoop-2.7.2]$ bin/hadoop fs<o:p></o:p></span></p>

<p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'><o:p>&nbsp;</o:p></span></p>

<p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'>[-appendToFile
&lt;localsrc&gt; ... &lt;dst&gt;]<o:p></o:p></span></p>

<p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'><span
style='mso-spacerun:yes'>        </span>[-cat [-ignoreCrc] &lt;src&gt; ...]<o:p></o:p></span></p>

<p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'><span
style='mso-spacerun:yes'>        </span>[-checksum &lt;src&gt; ...]<o:p></o:p></span></p>

<p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'><span
style='mso-spacerun:yes'>        </span>[-chgrp [-R] GROUP PATH...]<o:p></o:p></span></p>

<p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'><span
style='mso-spacerun:yes'>        </span>[-chmod [-R] &lt;MODE[,MODE]... |
OCTALMODE&gt; PATH...]<o:p></o:p></span></p>

<p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'><span
style='mso-spacerun:yes'>        </span>[-chown [-R] [OWNER][:[GROUP]] PATH...]<o:p></o:p></span></p>

<p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'><span
style='mso-spacerun:yes'>        </span>[-copyFromLocal [-f] [-p]
&lt;localsrc&gt; ... &lt;dst&gt;]<o:p></o:p></span></p>

<p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'><span
style='mso-spacerun:yes'>        </span>[-copyToLocal [-p] [-ignoreCrc] [-crc]
&lt;src&gt; ... &lt;localdst&gt;]<o:p></o:p></span></p>

<p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'><span
style='mso-spacerun:yes'>        </span>[-count [-q] &lt;path&gt; ...]<o:p></o:p></span></p>

<p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'><span
style='mso-spacerun:yes'>        </span>[-cp [-f] [-p] &lt;src&gt; ...
&lt;dst&gt;]<o:p></o:p></span></p>

<p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'><span
style='mso-spacerun:yes'>        </span>[-createSnapshot &lt;snapshotDir&gt;
[&lt;snapshotName&gt;]]<o:p></o:p></span></p>

<p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'><span
style='mso-spacerun:yes'>        </span>[-deleteSnapshot &lt;snapshotDir&gt;
&lt;snapshotName&gt;]<o:p></o:p></span></p>

<p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'><span
style='mso-spacerun:yes'>        </span>[-df [-h] [&lt;path&gt; ...]]<o:p></o:p></span></p>

<p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'><span
style='mso-spacerun:yes'>        </span>[-du [-s] [-h] &lt;path&gt; ...]<o:p></o:p></span></p>

<p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'><span
style='mso-spacerun:yes'>        </span>[-expunge]<o:p></o:p></span></p>

<p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'><span
style='mso-spacerun:yes'>        </span>[-get [-p] [-ignoreCrc] [-crc]
&lt;src&gt; ... &lt;localdst&gt;]<o:p></o:p></span></p>

<p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'><span
style='mso-spacerun:yes'>        </span>[-getfacl [-R] &lt;path&gt;]<o:p></o:p></span></p>

<p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'><span
style='mso-spacerun:yes'>        </span>[-getmerge [-nl] &lt;src&gt;
&lt;localdst&gt;]<o:p></o:p></span></p>

<p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'><span
style='mso-spacerun:yes'>        </span>[-help [cmd ...]]<o:p></o:p></span></p>

<p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'><span
style='mso-spacerun:yes'>        </span>[-ls [-d] [-h] [-R] [&lt;path&gt; ...]]<o:p></o:p></span></p>

<p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'><span
style='mso-spacerun:yes'>        </span>[-mkdir [-p] &lt;path&gt; ...]<o:p></o:p></span></p>

<p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'><span
style='mso-spacerun:yes'>        </span>[-moveFromLocal &lt;localsrc&gt; ...
&lt;dst&gt;]<o:p></o:p></span></p>

<p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'><span
style='mso-spacerun:yes'>        </span>[-moveToLocal &lt;src&gt;
&lt;localdst&gt;]<o:p></o:p></span></p>

<p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'><span
style='mso-spacerun:yes'>        </span>[-mv &lt;src&gt; ... &lt;dst&gt;]<o:p></o:p></span></p>

<p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'><span
style='mso-spacerun:yes'>        </span>[-put [-f] [-p] &lt;localsrc&gt; ...
&lt;dst&gt;]<o:p></o:p></span></p>

<p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'><span
style='mso-spacerun:yes'>        </span>[-renameSnapshot &lt;snapshotDir&gt;
&lt;oldName&gt; &lt;newName&gt;]<o:p></o:p></span></p>

<p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'><span
style='mso-spacerun:yes'>        </span>[-rm [-f] [-r|-R] [-skipTrash]
&lt;src&gt; ...]<o:p></o:p></span></p>

<p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'><span
style='mso-spacerun:yes'>        </span>[-rmdir [--ignore-fail-on-non-empty]
&lt;dir&gt; ...]<o:p></o:p></span></p>

<p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'><span
style='mso-spacerun:yes'>        </span>[-setfacl [-R] [{-b|-k} {-m|-x
&lt;acl_spec&gt;} &lt;path&gt;]|[--set &lt;acl_spec&gt; &lt;path&gt;]]<o:p></o:p></span></p>

<p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'><span
style='mso-spacerun:yes'>        </span>[-setrep [-R] [-w] &lt;rep&gt;
&lt;path&gt; ...]<o:p></o:p></span></p>

<p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'><span
style='mso-spacerun:yes'>        </span>[-stat [format] &lt;path&gt; ...]<o:p></o:p></span></p>

<p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'><span
style='mso-spacerun:yes'>        </span>[-tail [-f] &lt;file&gt;]<o:p></o:p></span></p>

<p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'><span
style='mso-spacerun:yes'>        </span>[-test -[defsz] &lt;path&gt;]<o:p></o:p></span></p>

<p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'><span
style='mso-spacerun:yes'>        </span>[-text [-ignoreCrc] &lt;src&gt; ...]<o:p></o:p></span></p>

<p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'><span
style='mso-spacerun:yes'>        </span>[-touchz &lt;path&gt; ...]<o:p></o:p></span></p>

<p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'><span
style='mso-spacerun:yes'>        </span>[-usage [cmd ...]]<o:p></o:p></span></p>

<p class=10 style='margin-top:6.2pt;text-indent:22.0pt'><span lang=EN-US>3</span><span
style='font-family:黑体;mso-ascii-font-family:Arial;mso-hansi-font-family:Arial'>．常用命令实操</span></p>

<p class=MsoNormal style='text-indent:21.0pt;mso-char-indent-count:2.0;
line-height:150%;mso-layout-grid-align:none;punctuation-trim:leading'><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>（</span><span lang=EN-US>0</span><span style='font-family:
宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:"Times New Roman"'>）启动</span><span
lang=EN-US>Hadoop</span><span style='font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>集群（方便后续的测试）</span></p>

<p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'>[atguigu@hadoop102
hadoop-2.7.2]$ sbin/start-dfs.sh<o:p></o:p></span></p>

<p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'>[atguigu@hadoop103
hadoop-2.7.2]$ sbin/start-yarn.sh<o:p></o:p></span></p>

<p class=MsoNormal style='text-indent:21.0pt;mso-char-indent-count:2.0;
line-height:150%;mso-layout-grid-align:none;punctuation-trim:leading'><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>（</span><span lang=EN-US>1</span><span style='font-family:
宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:"Times New Roman"'>）</span><span
lang=EN-US>-help</span><span style='font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>：输出这个命令参数</span></p>

<p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'>[atguigu@hadoop102
hadoop-2.7.2]$ hadoop fs -help rm<o:p></o:p></span></p>

<p class=MsoNormal style='text-indent:21.0pt;mso-char-indent-count:2.0;
line-height:150%;mso-layout-grid-align:none;punctuation-trim:leading'><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>（</span><span lang=EN-US>2</span><span style='font-family:
宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:"Times New Roman"'>）</span><span
lang=EN-US>-ls: </span><span style='font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>显示目录信息</span></p>

<p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'>[atguigu@hadoop102
hadoop-2.7.2]$ hadoop fs -ls /<o:p></o:p></span></p>

<p class=MsoNormal style='text-indent:21.0pt;mso-char-indent-count:2.0;
line-height:150%;mso-layout-grid-align:none;punctuation-trim:leading'><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>（</span><span lang=EN-US>3</span><span style='font-family:
宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:"Times New Roman"'>）</span><span
lang=EN-US>-mkdir</span><span style='font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>：在</span><span lang=EN-US>HDFS</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>上创建目录</span></p>

<p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'>[atguigu@hadoop102
hadoop-2.7.2]$ hadoop fs -mkdir -p /sanguo/shuguo<o:p></o:p></span></p>

<p class=MsoNormal style='text-indent:21.0pt;mso-char-indent-count:2.0;
line-height:150%;mso-layout-grid-align:none;punctuation-trim:leading'><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>（</span><span lang=EN-US>4</span><span style='font-family:
宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:"Times New Roman"'>）</span><span
lang=EN-US>-moveFromLocal</span><span style='font-family:宋体;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>：从本地剪切粘贴到</span><span
lang=EN-US>HDFS</span></p>

<p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'>[atguigu@hadoop102
hadoop-2.7.2]$ touch kongming.txt<o:p></o:p></span></p>

<p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'>[atguigu@hadoop102
hadoop-2.7.2]$ hadoop fs<span style='mso-spacerun:yes'> 
</span>-moveFromLocal<span style='mso-spacerun:yes'> 
</span>./kongming.txt<span style='mso-spacerun:yes'>  </span>/sanguo/shuguo<o:p></o:p></span></p>

<p class=MsoNormal style='text-indent:21.0pt;mso-char-indent-count:2.0;
line-height:150%;mso-layout-grid-align:none;punctuation-trim:leading'><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>（</span><span lang=EN-US>5</span><span style='font-family:
宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:"Times New Roman"'>）</span><span
lang=EN-US>-appendToFile</span><span style='font-family:宋体;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>：追加一个文件到已经存在的文件末尾</span></p>

<p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'>[atguigu@hadoop102
hadoop-2.7.2]$ touch liubei.txt<o:p></o:p></span></p>

<p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'>[atguigu@hadoop102
hadoop-2.7.2]$ vi liubei.txt<o:p></o:p></span></p>

<p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span style='font-size:10.5pt;font-family:宋体;
mso-ascii-font-family:"Courier New";mso-hansi-font-family:"Courier New"'>输入</span><span
lang=EN-US style='font-size:10.5pt'><o:p></o:p></span></p>

<p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'>san gu
mao lu<o:p></o:p></span></p>

<p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'>[atguigu@hadoop102
hadoop-2.7.2]$ hadoop fs -appendToFile liubei.txt /sanguo/shuguo/kongming.txt<o:p></o:p></span></p>

<p class=MsoNormal style='text-indent:21.0pt;mso-char-indent-count:2.0;
line-height:150%;mso-layout-grid-align:none;punctuation-trim:leading'><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>（</span><span lang=EN-US>6</span><span style='font-family:
宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:"Times New Roman"'>）</span><span
lang=EN-US>-cat</span><span style='font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>：显示文件内容</span></p>

<p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'>[atguigu@hadoop102
hadoop-2.7.2]$ hadoop fs -cat /sanguo/shuguo/kongming.txt<o:p></o:p></span></p>

<p class=MsoNormal style='text-indent:21.0pt;mso-char-indent-count:2.0;
line-height:150%;mso-layout-grid-align:none;punctuation-trim:leading'><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>（</span><span lang=EN-US>7</span><span style='font-family:
宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:"Times New Roman"'>）</span><span
lang=EN-US>-chgrp </span><span style='font-family:宋体;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>、</span><span
lang=EN-US>-chmod</span><span style='font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>、</span><span lang=EN-US>-chown</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>：</span><span lang=EN-US>Linux</span><span style='font-family:
宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:"Times New Roman"'>文件系统中的用法一样，修改文件所属权限</span></p>

<p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'>[atguigu@hadoop102
hadoop-2.7.2]$ hadoop fs<span style='mso-spacerun:yes'>  </span>-chmod<span
style='mso-spacerun:yes'>  </span>666<span style='mso-spacerun:yes'> 
</span>/sanguo/shuguo/kongming.txt<o:p></o:p></span></p>

<p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'>[atguigu@hadoop102
hadoop-2.7.2]$ hadoop fs<span style='mso-spacerun:yes'>  </span>-chown<span
style='mso-spacerun:yes'>  </span>atguigu:atguigu<span
style='mso-spacerun:yes'>   </span>/sanguo/shuguo/kongming.txt<o:p></o:p></span></p>

<p class=MsoNormal style='text-indent:21.0pt;mso-char-indent-count:2.0;
line-height:150%;mso-layout-grid-align:none;punctuation-trim:leading'><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>（</span><span lang=EN-US>8</span><span style='font-family:
宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:"Times New Roman"'>）</span><span
lang=EN-US>-copyFromLocal</span><span style='font-family:宋体;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>：从本地文件系统中拷贝文件到</span><span
lang=EN-US>HDFS</span><span style='font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>路径去</span></p>

<p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'>[atguigu@hadoop102
hadoop-2.7.2]$ hadoop fs -copyFromLocal README.txt /<o:p></o:p></span></p>

<p class=MsoNormal style='text-indent:21.0pt;mso-char-indent-count:2.0;
line-height:150%;mso-layout-grid-align:none;punctuation-trim:leading'><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>（</span><span lang=EN-US>9</span><span style='font-family:
宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:"Times New Roman"'>）</span><span
lang=EN-US>-copyToLocal</span><span style='font-family:宋体;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>：从</span><span
lang=EN-US>HDFS</span><span style='font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>拷贝到本地</span></p>

<p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'>[atguigu@hadoop102
hadoop-2.7.2]$ hadoop fs -copyToLocal /sanguo/shuguo/kongming.txt ./<o:p></o:p></span></p>

<p class=MsoNormal style='text-indent:21.0pt;mso-char-indent-count:2.0;
line-height:150%;mso-layout-grid-align:none;punctuation-trim:leading'><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>（</span><span lang=EN-US>10</span><span style='font-family:
宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:"Times New Roman"'>）</span><span
lang=EN-US>-cp </span><span style='font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>：从</span><span lang=EN-US>HDFS</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>的一个路径拷贝到</span><span lang=EN-US>HDFS</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>的另一个路径</span></p>

<p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'>[atguigu@hadoop102
hadoop-2.7.2]$ hadoop fs -cp /sanguo/shuguo/kongming.txt /zhuge.txt<o:p></o:p></span></p>

<p class=MsoNormal style='text-indent:21.0pt;mso-char-indent-count:2.0;
line-height:150%;mso-layout-grid-align:none;punctuation-trim:leading'><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>（</span><span lang=EN-US>11</span><span style='font-family:
宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:"Times New Roman"'>）</span><span
lang=EN-US>-mv</span><span style='font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>：在</span><span lang=EN-US>HDFS</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>目录中移动文件</span></p>

<p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'>[atguigu@hadoop102
hadoop-2.7.2]$ hadoop fs -mv /zhuge.txt /sanguo/shuguo/<o:p></o:p></span></p>

<p class=MsoNormal style='text-indent:21.0pt;mso-char-indent-count:2.0;
line-height:150%;mso-layout-grid-align:none;punctuation-trim:leading'><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>（</span><span lang=EN-US>12</span><span style='font-family:
宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:"Times New Roman"'>）</span><span
lang=EN-US>-get</span><span style='font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>：等同于</span><span lang=EN-US>copyToLocal</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>，就是从</span><span lang=EN-US>HDFS</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>下载文件到本地</span></p>

<p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'>[atguigu@hadoop102
hadoop-2.7.2]$ hadoop fs -get /sanguo/shuguo/kongming.txt ./<o:p></o:p></span></p>

<p class=MsoNormal style='text-indent:21.0pt;mso-char-indent-count:2.0;
line-height:150%;mso-layout-grid-align:none;punctuation-trim:leading'><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>（</span><span lang=EN-US>13</span><span style='font-family:
宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:"Times New Roman"'>）</span><span
lang=EN-US>-getmerge</span><span style='font-family:宋体;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>：合并下载多个文件，比如</span><span
lang=EN-US>HDFS</span><span style='font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>的目录</span><span lang=EN-US> /user/atguigu/test</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>下有多个文件</span><span lang=EN-US>:log.1, log.2,log.3,...</span></p>

<p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'>[atguigu@hadoop102
hadoop-2.7.2]$ hadoop fs -getmerge /user/atguigu/test/* ./zaiyiqi.txt<o:p></o:p></span></p>

<p class=MsoNormal style='text-indent:21.0pt;mso-char-indent-count:2.0;
line-height:150%;mso-layout-grid-align:none;punctuation-trim:leading'><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>（</span><span lang=EN-US>14</span><span style='font-family:
宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:"Times New Roman"'>）</span><span
lang=EN-US>-put</span><span style='font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>：等同于</span><span lang=EN-US>copyFromLocal</span></p>

<p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'>[atguigu@hadoop102
hadoop-2.7.2]$ hadoop fs -put ./zaiyiqi.txt /user/atguigu/test/<o:p></o:p></span></p>

<p class=MsoNormal style='text-indent:21.0pt;mso-char-indent-count:2.0;
line-height:150%;mso-layout-grid-align:none;punctuation-trim:leading'><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>（</span><span lang=EN-US>15</span><span style='font-family:
宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:"Times New Roman"'>）</span><span
lang=EN-US>-tail</span><span style='font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>：显示一个文件的末尾</span></p>

<p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'>[atguigu@hadoop102
hadoop-2.7.2]$ hadoop fs -tail /sanguo/shuguo/kongming.txt<o:p></o:p></span></p>

<p class=MsoNormal style='text-indent:21.0pt;mso-char-indent-count:2.0;
line-height:150%;mso-layout-grid-align:none;punctuation-trim:leading'><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>（</span><span lang=EN-US>16</span><span style='font-family:
宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:"Times New Roman"'>）</span><span
lang=EN-US>-rm</span><span style='font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>：删除文件或文件夹</span></p>

<p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'>[atguigu@hadoop102
hadoop-2.7.2]$ hadoop fs -rm /user/atguigu/test/jinlian2.txt<o:p></o:p></span></p>

<p class=MsoNormal style='text-indent:21.0pt;mso-char-indent-count:2.0;
line-height:150%;mso-layout-grid-align:none;punctuation-trim:leading'><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>（</span><span lang=EN-US>17</span><span style='font-family:
宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:"Times New Roman"'>）</span><span
lang=EN-US>-rmdir</span><span style='font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>：删除空目录</span></p>

<p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'>[atguigu@hadoop102
hadoop-2.7.2]$ hadoop fs -mkdir /test<o:p></o:p></span></p>

<p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'>[atguigu@hadoop102
hadoop-2.7.2]$ hadoop fs -rmdir /test<o:p></o:p></span></p>

<p class=MsoNormal style='text-indent:21.0pt;mso-char-indent-count:2.0;
line-height:150%;mso-layout-grid-align:none;punctuation-trim:leading'><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>（</span><span lang=EN-US>18</span><span style='font-family:
宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:"Times New Roman"'>）</span><span
lang=EN-US>-du</span><span style='font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>统计文件夹的大小信息</span></p>

<p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'>[atguigu@hadoop102
hadoop-2.7.2]$ hadoop fs -du -s -h /user/atguigu/test<o:p></o:p></span></p>

<p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt;
color:#00B050'>// </span><span style='font-size:10.5pt;font-family:宋体;
mso-ascii-font-family:"Courier New";mso-hansi-font-family:"Courier New";
color:#00B050'>单位是</span><span lang=EN-US style='font-size:10.5pt;color:#00B050'>K<o:p></o:p></span></p>

<p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'>2.7 <span
style='color:red'>K </span><span
style='mso-spacerun:yes'> </span>/user/atguigu/test<o:p></o:p></span></p>

<p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'><o:p>&nbsp;</o:p></span></p>

<p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'>[atguigu@hadoop102
hadoop-2.7.2]$ hadoop fs -du<span style='mso-spacerun:yes'>  </span>-h
/user/atguigu/test<o:p></o:p></span></p>

<p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'>1.3<span
style='color:red'> K</span><span style='mso-spacerun:yes'> 
</span>/user/atguigu/test/README.txt<o:p></o:p></span></p>

<p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'>15 <span
style='color:red'>K</span><span style='mso-spacerun:yes'>   
</span>/user/atguigu/test/jinlian.txt<o:p></o:p></span></p>

<p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'>1.4 <span
style='color:red'>K</span><span style='mso-spacerun:yes'>  </span>/user/atguigu/test/zaiyiqi.txt<o:p></o:p></span></p>

<p class=MsoNormal style='text-indent:21.0pt;mso-char-indent-count:2.0;
line-height:150%;mso-layout-grid-align:none;punctuation-trim:leading'><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>（</span><span lang=EN-US>19</span><span style='font-family:
宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:"Times New Roman"'>）</span><span
lang=EN-US>-setrep</span><span style='font-family:宋体;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>：设置</span><span
lang=EN-US>HDFS</span><span style='font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>中文件的副本数量</span></p>

<p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'>[atguigu@hadoop102
hadoop-2.7.2]$ hadoop fs -setrep 10 /sanguo/shuguo/kongming.txt<o:p></o:p></span></p>

<p class=MsoNormal style='line-height:150%'><span lang=EN-US style='mso-no-proof:
yes'><v:shape id="_x0000_i1120" type="#_x0000_t75" alt="1516695160(1)" style='width:414.6pt;
 height:30.6pt;visibility:visible;mso-wrap-style:square'>
 <img src="Hadoop_02HDFS.files/image009.png" o:title="1516695160(1)"/>
</v:shape></span></p>

<p class=MsoNormal align=center style='text-align:center;line-height:150%'><span
style='font-size:9.0pt;line-height:150%;font-family:宋体;mso-ascii-font-family:
Calibri;mso-hansi-font-family:Calibri;mso-bidi-font-family:Calibri'>图</span><span
lang=EN-US style='font-size:9.0pt;line-height:150%;font-family:"Calibri","sans-serif"'>3-3<span
style='mso-spacerun:yes'>  </span>HDFS</span><span style='font-size:9.0pt;
line-height:150%;font-family:宋体;mso-ascii-font-family:Calibri;mso-hansi-font-family:
Calibri;mso-bidi-font-family:Calibri'>副本数量</span></p>

<p class=MsoNormal style='text-indent:21.0pt;line-height:150%'><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>这里设置的副本数只是记录在</span><span lang=EN-US>NameNode</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>的元数据中，是否真的会有这么多副本，还得看</span><span lang=EN-US>DataNode</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>的数量。因为目前只有</span><span lang=EN-US>3</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>台设备，最多也就</span><span lang=EN-US>3</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>个副本，只有节点数的增加到</span><span lang=EN-US>10</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>台时，副本数才能达到</span><span lang=EN-US>10</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>。</span><span lang=EN-US style='color:#7030A0;mso-bidi-font-style:
italic'><o:p></o:p></span></p>

<h1 style='margin:0cm;margin-bottom:.0001pt'><span style='font-size:15.0pt;
line-height:240%;font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>第</span><span lang=EN-US
style='font-size:15.0pt;line-height:240%'>3</span><span style='font-size:15.0pt;
line-height:240%;font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>章</span><span style='font-size:15.0pt;
line-height:240%'> <span lang=EN-US>HDFS</span></span><span style='font-size:
15.0pt;line-height:240%;font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>客户端操作（开发重点）</span><span lang=EN-US
style='font-size:15.0pt;line-height:240%'><o:p></o:p></span></h1>

<h2 style='margin:0cm;margin-bottom:.0001pt'><span lang=EN-US style='font-size:
14.0pt;line-height:172%;font-family:"Times New Roman","serif"'>3.1 HDFS</span><span
style='font-size:14.0pt;line-height:172%;font-family:黑体;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>客户端环境准备</span><span
lang=EN-US style='font-size:14.0pt;line-height:172%;font-family:"Times New Roman","serif"'><o:p></o:p></span></h2>

<p class=10 style='margin-top:6.2pt;text-indent:22.0pt'><span lang=EN-US>1</span><span
style='font-family:黑体;mso-ascii-font-family:Arial;mso-hansi-font-family:Arial'>．根据自己电脑的操作系统拷贝对应的编译后的</span><span
lang=EN-US>hadoop jar</span><span style='font-family:黑体;mso-ascii-font-family:
Arial;mso-hansi-font-family:Arial'>包到非中文路径（例如：</span><span lang=EN-US>D:\Develop\hadoop-2.7.2</span><span
style='font-family:黑体;mso-ascii-font-family:Arial;mso-hansi-font-family:Arial'>），如图</span><span
lang=EN-US>3-4</span><span style='font-family:黑体;mso-ascii-font-family:Arial;
mso-hansi-font-family:Arial'>所示。</span></p>

<p class=MsoNormal align=center style='text-align:center;text-indent:21.0pt;
line-height:150%'><span lang=EN-US style='mso-no-proof:yes'><v:shape id="_x0000_i1119"
 type="#_x0000_t75" style='width:349.2pt;height:155.4pt;visibility:visible;
 mso-wrap-style:square'>
 <img src="Hadoop_02HDFS.files/image010.png" o:title=""/>
</v:shape></span></p>

<p class=MsoNormal align=center style='text-align:center;text-indent:21.0pt;
line-height:150%'><span style='font-size:9.0pt;line-height:150%;font-family:
宋体;mso-ascii-font-family:Calibri;mso-hansi-font-family:Calibri;mso-bidi-font-family:
Calibri'>图</span><span lang=EN-US style='font-size:9.0pt;line-height:150%;
font-family:"Calibri","sans-serif"'>3-4<span style='mso-spacerun:yes'>  </span></span><span
style='font-size:9.0pt;line-height:150%;font-family:宋体;mso-ascii-font-family:
Calibri;mso-hansi-font-family:Calibri;mso-bidi-font-family:Calibri'>编译后的</span><span
lang=EN-US style='font-size:9.0pt;line-height:150%;font-family:"Calibri","sans-serif"'>hadoop
jar</span><span style='font-size:9.0pt;line-height:150%;font-family:宋体;
mso-ascii-font-family:Calibri;mso-hansi-font-family:Calibri;mso-bidi-font-family:
Calibri'>包</span><span lang=EN-US style='font-size:9.0pt;line-height:150%;
font-family:"Calibri","sans-serif"'><o:p></o:p></span></p>

<p class=10 style='margin-top:6.2pt;text-indent:22.0pt'><span lang=EN-US>2</span><span
style='font-family:黑体;mso-ascii-font-family:Arial;mso-hansi-font-family:Arial'>．配置</span><span
lang=EN-US>HADOOP_HOME</span><span style='font-family:黑体;mso-ascii-font-family:
Arial;mso-hansi-font-family:Arial'>环境变量，如图</span><span lang=EN-US>3-5</span><span
style='font-family:黑体;mso-ascii-font-family:Arial;mso-hansi-font-family:Arial'>所示。</span></p>

<p class=MsoNormal align=center style='text-align:center;text-indent:21.0pt;
line-height:150%'><span lang=EN-US style='mso-no-proof:yes'><v:shape id="_x0000_i1118"
 type="#_x0000_t75" style='width:355.8pt;height:143.4pt;visibility:visible;
 mso-wrap-style:square'>
 <img src="Hadoop_02HDFS.files/image011.png" o:title=""/>
</v:shape></span></p>

<p class=MsoNormal align=center style='text-align:center;text-indent:21.0pt;
line-height:150%'><span style='font-size:9.0pt;line-height:150%;font-family:
宋体;mso-ascii-font-family:Calibri;mso-hansi-font-family:Calibri;mso-bidi-font-family:
Calibri'>图</span><span lang=EN-US style='font-size:9.0pt;line-height:150%;
font-family:"Calibri","sans-serif"'>3-5<span style='mso-spacerun:yes'>  </span></span><span
style='font-size:9.0pt;line-height:150%;font-family:宋体;mso-ascii-font-family:
Calibri;mso-hansi-font-family:Calibri;mso-bidi-font-family:Calibri'>配置</span><span
lang=EN-US style='font-size:9.0pt;line-height:150%;font-family:"Calibri","sans-serif"'>HADOOP_HOME</span><span
style='font-size:9.0pt;line-height:150%;font-family:宋体;mso-ascii-font-family:
Calibri;mso-hansi-font-family:Calibri;mso-bidi-font-family:Calibri'>环境变量</span><span
lang=EN-US style='font-size:9.0pt;line-height:150%;font-family:"Calibri","sans-serif"'><o:p></o:p></span></p>

<p class=10 style='margin-top:6.2pt;text-indent:22.0pt'><span lang=EN-US>3. </span><span
style='font-family:黑体;mso-ascii-font-family:Arial;mso-hansi-font-family:Arial'>配置</span><span
lang=EN-US>Path</span><span style='font-family:黑体;mso-ascii-font-family:Arial;
mso-hansi-font-family:Arial'>环境变量，如图</span><span lang=EN-US>3-6</span><span
style='font-family:黑体;mso-ascii-font-family:Arial;mso-hansi-font-family:Arial'>所示。</span></p>

<p class=MsoNormal align=center style='text-align:center;text-indent:21.0pt;
line-height:150%'><span lang=EN-US style='mso-no-proof:yes'><v:shape id="_x0000_i1117"
 type="#_x0000_t75" alt="1516417967(1)" style='width:355.2pt;height:265.2pt;
 visibility:visible;mso-wrap-style:square'>
 <img src="Hadoop_02HDFS.files/image012.png" o:title="1516417967(1)"
  cropbottom="6007f"/>
</v:shape></span></p>

<p class=MsoNormal align=center style='text-align:center;text-indent:21.0pt;
line-height:150%'><span style='font-size:9.0pt;line-height:150%;font-family:
宋体;mso-ascii-font-family:Calibri;mso-hansi-font-family:Calibri;mso-bidi-font-family:
Calibri'>图</span><span lang=EN-US style='font-size:9.0pt;line-height:150%;
font-family:"Calibri","sans-serif"'>3-6<span style='mso-spacerun:yes'>  </span></span><span
style='font-size:9.0pt;line-height:150%;font-family:宋体;mso-ascii-font-family:
Calibri;mso-hansi-font-family:Calibri;mso-bidi-font-family:Calibri'>配置</span><span
lang=EN-US style='font-size:9.0pt;line-height:150%;font-family:"Calibri","sans-serif"'>Path</span><span
style='font-size:9.0pt;line-height:150%;font-family:宋体;mso-ascii-font-family:
Calibri;mso-hansi-font-family:Calibri;mso-bidi-font-family:Calibri'>环境变量</span></p>

<p class=10 style='margin-top:6.2pt;text-indent:22.0pt'><span lang=EN-US>4</span><span
style='font-family:黑体;mso-ascii-font-family:Arial;mso-hansi-font-family:Arial'>．创建一个</span><span
lang=EN-US>Maven</span><span style='font-family:黑体;mso-ascii-font-family:Arial;
mso-hansi-font-family:Arial'>工程</span><span lang=EN-US>HdfsClientDemo</span></p>

<p class=10 style='margin-top:6.2pt;text-indent:22.0pt'><span lang=EN-US>5</span><span
style='font-family:黑体;mso-ascii-font-family:Arial;mso-hansi-font-family:Arial'>．导入相应的依赖坐标</span><span
lang=EN-US>+</span><span style='font-family:黑体;mso-ascii-font-family:Arial;
mso-hansi-font-family:Arial'>日志添加</span></p>

<p class=a style='margin-left:21.0pt;mso-para-margin-left:2.0gd;mso-layout-grid-align:
none;punctuation-trim:leading'><a name="OLE_LINK33"></a><a name="OLE_LINK51"></a><a
name="OLE_LINK50"></a><a name="OLE_LINK49"><span style='mso-bookmark:OLE_LINK50'><span
style='mso-bookmark:OLE_LINK51'><span style='mso-bookmark:OLE_LINK33'><span
lang=EN-US style='font-size:10.5pt'>&lt;dependencies&gt;<o:p></o:p></span></span></span></span></a></p>

<p class=a style='margin-left:21.0pt;mso-para-margin-left:2.0gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span style='mso-bookmark:OLE_LINK49'><span
style='mso-bookmark:OLE_LINK50'><span style='mso-bookmark:OLE_LINK51'><span
style='mso-bookmark:OLE_LINK33'><span lang=EN-US style='font-size:10.5pt'><span
style='mso-tab-count:2'>      </span>&lt;dependency&gt;<o:p></o:p></span></span></span></span></span></p>

<p class=a style='margin-left:21.0pt;mso-para-margin-left:2.0gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span style='mso-bookmark:OLE_LINK49'><span
style='mso-bookmark:OLE_LINK50'><span style='mso-bookmark:OLE_LINK51'><span
style='mso-bookmark:OLE_LINK33'><span lang=EN-US style='font-size:10.5pt'><span
style='mso-tab-count:3'>          </span>&lt;groupId&gt;junit&lt;/groupId&gt;<o:p></o:p></span></span></span></span></span></p>

<p class=a style='margin-left:21.0pt;mso-para-margin-left:2.0gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span style='mso-bookmark:OLE_LINK49'><span
style='mso-bookmark:OLE_LINK50'><span style='mso-bookmark:OLE_LINK51'><span
style='mso-bookmark:OLE_LINK33'><span lang=EN-US style='font-size:10.5pt'><span
style='mso-tab-count:3'>          </span>&lt;artifactId&gt;junit&lt;/artifactId&gt;<o:p></o:p></span></span></span></span></span></p>

<p class=a style='margin-left:21.0pt;mso-para-margin-left:2.0gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span style='mso-bookmark:OLE_LINK49'><span
style='mso-bookmark:OLE_LINK50'><span style='mso-bookmark:OLE_LINK51'><span
style='mso-bookmark:OLE_LINK33'><span lang=EN-US style='font-size:10.5pt'><span
style='mso-tab-count:3'>          </span>&lt;version&gt;RELEASE&lt;/version&gt;<o:p></o:p></span></span></span></span></span></p>

<p class=a style='margin-left:21.0pt;mso-para-margin-left:2.0gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span style='mso-bookmark:OLE_LINK49'><span
style='mso-bookmark:OLE_LINK50'><span style='mso-bookmark:OLE_LINK51'><span
style='mso-bookmark:OLE_LINK33'><span lang=EN-US style='font-size:10.5pt'><span
style='mso-tab-count:2'>      </span>&lt;/dependency&gt;<o:p></o:p></span></span></span></span></span></p>

<p class=a style='margin-left:21.0pt;mso-para-margin-left:2.0gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span style='mso-bookmark:OLE_LINK49'><span
style='mso-bookmark:OLE_LINK50'><span style='mso-bookmark:OLE_LINK51'><span
style='mso-bookmark:OLE_LINK33'><span lang=EN-US style='font-size:10.5pt'><span
style='mso-tab-count:2'>      </span>&lt;dependency&gt;<o:p></o:p></span></span></span></span></span></p>

<p class=a style='margin-left:21.0pt;mso-para-margin-left:2.0gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span style='mso-bookmark:OLE_LINK49'><span
style='mso-bookmark:OLE_LINK50'><span style='mso-bookmark:OLE_LINK51'><span
style='mso-bookmark:OLE_LINK33'><span lang=EN-US style='font-size:10.5pt'><span
style='mso-tab-count:3'>          </span>&lt;groupId&gt;org.apache.logging.log4j&lt;/groupId&gt;<o:p></o:p></span></span></span></span></span></p>

<p class=a style='margin-left:21.0pt;mso-para-margin-left:2.0gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span style='mso-bookmark:OLE_LINK49'><span
style='mso-bookmark:OLE_LINK50'><span style='mso-bookmark:OLE_LINK51'><span
style='mso-bookmark:OLE_LINK33'><span lang=EN-US style='font-size:10.5pt'><span
style='mso-tab-count:3'>          </span>&lt;artifactId&gt;log4j-core&lt;/artifactId&gt;<o:p></o:p></span></span></span></span></span></p>

<p class=a style='margin-left:21.0pt;mso-para-margin-left:2.0gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span style='mso-bookmark:OLE_LINK49'><span
style='mso-bookmark:OLE_LINK50'><span style='mso-bookmark:OLE_LINK51'><span
style='mso-bookmark:OLE_LINK33'><span lang=EN-US style='font-size:10.5pt'><span
style='mso-tab-count:2'>      </span><span style='mso-tab-count:1'>   </span>&lt;version&gt;2.8.2&lt;/version&gt;<o:p></o:p></span></span></span></span></span></p>

<p class=a style='margin-left:21.0pt;mso-para-margin-left:2.0gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span style='mso-bookmark:OLE_LINK49'><span
style='mso-bookmark:OLE_LINK50'><span style='mso-bookmark:OLE_LINK51'><span
style='mso-bookmark:OLE_LINK33'><span lang=EN-US style='font-size:10.5pt'><span
style='mso-tab-count:2'>      </span>&lt;/dependency&gt;<o:p></o:p></span></span></span></span></span></p>

<p class=a style='margin-left:21.0pt;mso-para-margin-left:2.0gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span style='mso-bookmark:OLE_LINK49'><span
style='mso-bookmark:OLE_LINK50'><span style='mso-bookmark:OLE_LINK51'><span
style='mso-bookmark:OLE_LINK33'><span lang=EN-US style='font-size:10.5pt'><span
style='mso-tab-count:2'>      </span>&lt;dependency&gt;<o:p></o:p></span></span></span></span></span></p>

<p class=a style='margin-left:21.0pt;mso-para-margin-left:2.0gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span style='mso-bookmark:OLE_LINK49'><span
style='mso-bookmark:OLE_LINK50'><span style='mso-bookmark:OLE_LINK51'><span
style='mso-bookmark:OLE_LINK33'><span lang=EN-US style='font-size:10.5pt'><span
style='mso-tab-count:3'>          </span>&lt;groupId&gt;org.apache.hadoop&lt;/groupId&gt;<o:p></o:p></span></span></span></span></span></p>

<p class=a style='margin-left:21.0pt;mso-para-margin-left:2.0gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span style='mso-bookmark:OLE_LINK49'><span
style='mso-bookmark:OLE_LINK50'><span style='mso-bookmark:OLE_LINK51'><span
style='mso-bookmark:OLE_LINK33'><span lang=EN-US style='font-size:10.5pt'><span
style='mso-tab-count:3'>          </span>&lt;artifactId&gt;hadoop-common&lt;/artifactId&gt;<o:p></o:p></span></span></span></span></span></p>

<p class=a style='margin-left:21.0pt;mso-para-margin-left:2.0gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span style='mso-bookmark:OLE_LINK49'><span
style='mso-bookmark:OLE_LINK50'><span style='mso-bookmark:OLE_LINK51'><span
style='mso-bookmark:OLE_LINK33'><span lang=EN-US style='font-size:10.5pt'><span
style='mso-tab-count:3'>          </span>&lt;version&gt;2.7.2&lt;/version&gt;<o:p></o:p></span></span></span></span></span></p>

<p class=a style='margin-left:21.0pt;mso-para-margin-left:2.0gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span style='mso-bookmark:OLE_LINK49'><span
style='mso-bookmark:OLE_LINK50'><span style='mso-bookmark:OLE_LINK51'><span
style='mso-bookmark:OLE_LINK33'><span lang=EN-US style='font-size:10.5pt'><span
style='mso-tab-count:2'>      </span>&lt;/dependency&gt;<o:p></o:p></span></span></span></span></span></p>

<p class=a style='margin-left:21.0pt;mso-para-margin-left:2.0gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span style='mso-bookmark:OLE_LINK49'><span
style='mso-bookmark:OLE_LINK50'><span style='mso-bookmark:OLE_LINK51'><span
style='mso-bookmark:OLE_LINK33'><span lang=EN-US style='font-size:10.5pt'><span
style='mso-tab-count:2'>      </span>&lt;dependency&gt;<o:p></o:p></span></span></span></span></span></p>

<p class=a style='margin-left:21.0pt;mso-para-margin-left:2.0gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span style='mso-bookmark:OLE_LINK49'><span
style='mso-bookmark:OLE_LINK50'><span style='mso-bookmark:OLE_LINK51'><span
style='mso-bookmark:OLE_LINK33'><span lang=EN-US style='font-size:10.5pt'><span
style='mso-tab-count:3'>          </span>&lt;groupId&gt;org.apache.hadoop&lt;/groupId&gt;<o:p></o:p></span></span></span></span></span></p>

<p class=a style='margin-left:21.0pt;mso-para-margin-left:2.0gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span style='mso-bookmark:OLE_LINK49'><span
style='mso-bookmark:OLE_LINK50'><span style='mso-bookmark:OLE_LINK51'><span
style='mso-bookmark:OLE_LINK33'><span lang=EN-US style='font-size:10.5pt'><span
style='mso-tab-count:3'>          </span>&lt;artifactId&gt;hadoop-client&lt;/artifactId&gt;<o:p></o:p></span></span></span></span></span></p>

<p class=a style='margin-left:21.0pt;mso-para-margin-left:2.0gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span style='mso-bookmark:OLE_LINK49'><span
style='mso-bookmark:OLE_LINK50'><span style='mso-bookmark:OLE_LINK51'><span
style='mso-bookmark:OLE_LINK33'><span lang=EN-US style='font-size:10.5pt'><span
style='mso-tab-count:3'>          </span>&lt;version&gt;2.7.2&lt;/version&gt;<o:p></o:p></span></span></span></span></span></p>

<p class=a style='margin-left:21.0pt;mso-para-margin-left:2.0gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span style='mso-bookmark:OLE_LINK49'><span
style='mso-bookmark:OLE_LINK50'><span style='mso-bookmark:OLE_LINK51'><span
style='mso-bookmark:OLE_LINK33'><span lang=EN-US style='font-size:10.5pt'><span
style='mso-tab-count:2'>      </span>&lt;/dependency&gt;<o:p></o:p></span></span></span></span></span></p>

<p class=a style='margin-left:21.0pt;mso-para-margin-left:2.0gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span style='mso-bookmark:OLE_LINK49'><span
style='mso-bookmark:OLE_LINK50'><span style='mso-bookmark:OLE_LINK51'><span
style='mso-bookmark:OLE_LINK33'><span lang=EN-US style='font-size:10.5pt'><span
style='mso-tab-count:2'>      </span>&lt;dependency&gt;<o:p></o:p></span></span></span></span></span></p>

<p class=a style='margin-left:21.0pt;mso-para-margin-left:2.0gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span style='mso-bookmark:OLE_LINK49'><span
style='mso-bookmark:OLE_LINK50'><span style='mso-bookmark:OLE_LINK51'><span
style='mso-bookmark:OLE_LINK33'><span lang=EN-US style='font-size:10.5pt'><span
style='mso-tab-count:3'>          </span>&lt;groupId&gt;org.apache.hadoop&lt;/groupId&gt;<o:p></o:p></span></span></span></span></span></p>

<p class=a style='margin-left:21.0pt;mso-para-margin-left:2.0gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span style='mso-bookmark:OLE_LINK49'><span
style='mso-bookmark:OLE_LINK50'><span style='mso-bookmark:OLE_LINK51'><span
style='mso-bookmark:OLE_LINK33'><span lang=EN-US style='font-size:10.5pt'><span
style='mso-tab-count:3'>          </span>&lt;artifactId&gt;hadoop-hdfs&lt;/artifactId&gt;<o:p></o:p></span></span></span></span></span></p>

<p class=a style='margin-left:21.0pt;mso-para-margin-left:2.0gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span style='mso-bookmark:OLE_LINK49'><span
style='mso-bookmark:OLE_LINK50'><span style='mso-bookmark:OLE_LINK51'><span
style='mso-bookmark:OLE_LINK33'><span lang=EN-US style='font-size:10.5pt'><span
style='mso-tab-count:3'>          </span>&lt;version&gt;2.7.2&lt;/version&gt;<o:p></o:p></span></span></span></span></span></p>

<p class=a style='margin-left:21.0pt;mso-para-margin-left:2.0gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span style='mso-bookmark:OLE_LINK49'><span
style='mso-bookmark:OLE_LINK50'><span style='mso-bookmark:OLE_LINK51'><span
style='mso-bookmark:OLE_LINK33'><span lang=EN-US style='font-size:10.5pt'><span
style='mso-tab-count:2'>      </span>&lt;/dependency&gt;<o:p></o:p></span></span></span></span></span></p>

<p class=a style='margin-left:21.0pt;mso-para-margin-left:2.0gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span style='mso-bookmark:OLE_LINK49'><span
style='mso-bookmark:OLE_LINK50'><span style='mso-bookmark:OLE_LINK51'><span
style='mso-bookmark:OLE_LINK33'><span lang=EN-US style='font-size:10.5pt'><span
style='mso-tab-count:2'>      </span>&lt;dependency&gt;<o:p></o:p></span></span></span></span></span></p>

<p class=a style='margin-left:21.0pt;mso-para-margin-left:2.0gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span style='mso-bookmark:OLE_LINK49'><span
style='mso-bookmark:OLE_LINK50'><span style='mso-bookmark:OLE_LINK51'><span
style='mso-bookmark:OLE_LINK33'><span lang=EN-US style='font-size:10.5pt'><span
style='mso-tab-count:3'>          </span>&lt;groupId&gt;jdk.tools&lt;/groupId&gt;<o:p></o:p></span></span></span></span></span></p>

<p class=a style='margin-left:21.0pt;mso-para-margin-left:2.0gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span style='mso-bookmark:OLE_LINK49'><span
style='mso-bookmark:OLE_LINK50'><span style='mso-bookmark:OLE_LINK51'><span
style='mso-bookmark:OLE_LINK33'><span lang=EN-US style='font-size:10.5pt'><span
style='mso-tab-count:2'>      </span><span style='mso-tab-count:1'>   </span>&lt;artifactId&gt;jdk.tools&lt;/artifactId&gt;<o:p></o:p></span></span></span></span></span></p>

<p class=a style='margin-left:21.0pt;mso-para-margin-left:2.0gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span style='mso-bookmark:OLE_LINK49'><span
style='mso-bookmark:OLE_LINK50'><span style='mso-bookmark:OLE_LINK51'><span
style='mso-bookmark:OLE_LINK33'><span lang=EN-US style='font-size:10.5pt'><span
style='mso-tab-count:3'>          </span>&lt;version&gt;1.8&lt;/version&gt;<o:p></o:p></span></span></span></span></span></p>

<p class=a style='margin-left:21.0pt;mso-para-margin-left:2.0gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span style='mso-bookmark:OLE_LINK49'><span
style='mso-bookmark:OLE_LINK50'><span style='mso-bookmark:OLE_LINK51'><span
style='mso-bookmark:OLE_LINK33'><span lang=EN-US style='font-size:10.5pt'><span
style='mso-tab-count:3'>          </span>&lt;scope&gt;system&lt;/scope&gt;<o:p></o:p></span></span></span></span></span></p>

<p class=a style='margin-left:21.0pt;mso-para-margin-left:2.0gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span style='mso-bookmark:OLE_LINK49'><span
style='mso-bookmark:OLE_LINK50'><span style='mso-bookmark:OLE_LINK51'><span
style='mso-bookmark:OLE_LINK33'><span lang=EN-US style='font-size:10.5pt'><span
style='mso-tab-count:3'>          </span>&lt;systemPath&gt;${JAVA_HOME}/lib/tools.jar&lt;/systemPath&gt;<o:p></o:p></span></span></span></span></span></p>

<p class=a style='margin-left:21.0pt;mso-para-margin-left:2.0gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span style='mso-bookmark:OLE_LINK49'><span
style='mso-bookmark:OLE_LINK50'><span style='mso-bookmark:OLE_LINK51'><span
style='mso-bookmark:OLE_LINK33'><span lang=EN-US style='font-size:10.5pt'><span
style='mso-tab-count:2'>      </span>&lt;/dependency&gt;<o:p></o:p></span></span></span></span></span></p>

<p class=a style='margin-left:21.0pt;mso-para-margin-left:2.0gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span style='mso-bookmark:OLE_LINK49'><span
style='mso-bookmark:OLE_LINK50'><span style='mso-bookmark:OLE_LINK51'><span
style='mso-bookmark:OLE_LINK33'><span lang=EN-US style='font-size:10.5pt'>&lt;/dependencies&gt;</span></span></span></span></span><span
lang=EN-US style='font-size:10.5pt'><o:p></o:p></span></p>

<p class=MsoNormal style='text-indent:21.0pt;mso-char-indent-count:2.0;
line-height:150%'><span style='font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman";color:red'>注意：如果</span><span
lang=EN-US style='color:red'>Eclipse/Idea</span><span style='font-family:宋体;
mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:"Times New Roman";
color:red'>打印不出日志，在控制台上只显示</span><span lang=EN-US style='color:red'><o:p></o:p></span></p>

<p class=a style='margin-left:21.0pt;mso-para-margin-left:2.0gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'>1.log4j:WARN&nbsp;No&nbsp;appenders&nbsp;could&nbsp;be&nbsp;found&nbsp;for&nbsp;logger&nbsp;(org.apache.hadoop.util.Shell).&nbsp;&nbsp;<o:p></o:p></span></p>

<p class=a style='margin-left:21.0pt;mso-para-margin-left:2.0gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'>2.log4j:WARN&nbsp;Please&nbsp;initialize&nbsp;the&nbsp;log4j&nbsp;system&nbsp;properly.&nbsp;&nbsp;<o:p></o:p></span></p>

<p class=a style='margin-left:21.0pt;mso-para-margin-left:2.0gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'>3.log4j:WARN&nbsp;See&nbsp;http://logging.apache.org/log4j/1.2/faq.html#noconfig&nbsp;for&nbsp;more&nbsp;info.<o:p></o:p></span></p>

<p class=MsoNormal style='text-indent:21.0pt;mso-char-indent-count:2.0;
line-height:16.5pt;mso-layout-grid-align:none;punctuation-trim:leading'><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>需要在项目的</span><span lang=EN-US>src/main/resources</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>目录下，新建一个文件，命名为“</span><span lang=EN-US>log4j.properties</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>”，在文件中填入</span></p>

<p class=a style='margin-left:21.0pt;mso-para-margin-left:2.0gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'>log4j.rootLogger=INFO,
stdout<o:p></o:p></span></p>

<p class=a style='margin-left:21.0pt;mso-para-margin-left:2.0gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'>log4j.appender.stdout=org.apache.log4j.ConsoleAppender<o:p></o:p></span></p>

<p class=a style='margin-left:21.0pt;mso-para-margin-left:2.0gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'>log4j.appender.stdout.layout=org.apache.log4j.PatternLayout<o:p></o:p></span></p>

<p class=a style='margin-left:21.0pt;mso-para-margin-left:2.0gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'>log4j.appender.stdout.layout.ConversionPattern=%d
%p [%c] - %m%n<o:p></o:p></span></p>

<p class=a style='margin-left:21.0pt;mso-para-margin-left:2.0gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'>log4j.appender.logfile=org.apache.log4j.FileAppender<o:p></o:p></span></p>

<p class=a style='margin-left:21.0pt;mso-para-margin-left:2.0gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'>log4j.appender.logfile.File=target/spring.log<o:p></o:p></span></p>

<p class=a style='margin-left:21.0pt;mso-para-margin-left:2.0gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'>log4j.appender.logfile.layout=org.apache.log4j.PatternLayout<o:p></o:p></span></p>

<p class=a style='margin-left:21.0pt;mso-para-margin-left:2.0gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'>log4j.appender.logfile.layout.ConversionPattern=%d
%p [%c] - %m%n<o:p></o:p></span></p>

<p class=10 style='margin-top:6.2pt;text-indent:22.0pt'><span lang=EN-US>6</span><span
style='font-family:黑体;mso-ascii-font-family:Arial;mso-hansi-font-family:Arial'>．创建包名：</span><span
lang=EN-US>com.atguigu.hdfs</span></p>

<p class=10 style='margin-top:6.2pt;text-indent:22.0pt'><span lang=EN-US>7</span><span
style='font-family:黑体;mso-ascii-font-family:Arial;mso-hansi-font-family:Arial'>．创建</span><span
lang=EN-US>HdfsClient</span><span style='font-family:黑体;mso-ascii-font-family:
Arial;mso-hansi-font-family:Arial'>类</span></p>

<p class=a style='margin-left:21.0pt;mso-para-margin-left:2.0gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span lang=EN-US style='font-size:9.0pt;
mso-bidi-font-size:10.5pt'>public class HdfsClient{<span style='mso-tab-count:
1'>   </span><o:p></o:p></span></p>

<p class=a style='margin-left:21.0pt;mso-para-margin-left:2.0gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span lang=EN-US style='font-size:9.0pt;
mso-bidi-font-size:10.5pt'><span style='mso-tab-count:1'>    </span>@Test<o:p></o:p></span></p>

<p class=a style='margin-left:21.0pt;mso-para-margin-left:2.0gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span lang=EN-US style='font-size:9.0pt;
mso-bidi-font-size:10.5pt'><span style='mso-tab-count:1'>    </span>public void
testMkdirs() throws IOException, InterruptedException, URISyntaxException{<o:p></o:p></span></p>

<p class=a style='margin-left:21.0pt;mso-para-margin-left:2.0gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span lang=EN-US style='font-size:9.0pt;
mso-bidi-font-size:10.5pt'><span style='mso-tab-count:3'>            </span><o:p></o:p></span></p>

<p class=a style='margin-left:21.0pt;mso-para-margin-left:2.0gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span lang=EN-US style='font-size:9.0pt;
mso-bidi-font-size:10.5pt'><span style='mso-tab-count:3'>            </span>//
1 </span><span style='font-size:9.0pt;mso-bidi-font-size:10.5pt;font-family:
宋体;mso-ascii-font-family:"Courier New";mso-hansi-font-family:"Courier New"'>获取文件系统</span><span
lang=EN-US style='font-size:9.0pt;mso-bidi-font-size:10.5pt'><o:p></o:p></span></p>

<p class=a style='margin-left:21.0pt;mso-para-margin-left:2.0gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span lang=EN-US style='font-size:9.0pt;
mso-bidi-font-size:10.5pt'><span style='mso-tab-count:3'>            </span>Configuration
configuration = new Configuration();<o:p></o:p></span></p>

<p class=a style='margin-left:21.0pt;mso-para-margin-left:2.0gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span lang=EN-US style='font-size:9.0pt;
mso-bidi-font-size:10.5pt'><span style='mso-tab-count:3'>            </span>// </span><span
style='font-size:9.0pt;mso-bidi-font-size:10.5pt;font-family:宋体;mso-ascii-font-family:
"Courier New";mso-hansi-font-family:"Courier New"'>配置在集群上运行</span><span
lang=EN-US style='font-size:9.0pt;mso-bidi-font-size:10.5pt'><o:p></o:p></span></p>

<p class=a style='margin-left:21.0pt;mso-para-margin-left:2.0gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span lang=EN-US style='font-size:9.0pt;
mso-bidi-font-size:10.5pt'><span style='mso-tab-count:3'>            </span>//
configuration.set(&quot;fs.defaultFS&quot;, &quot;hdfs://hadoop102:9000&quot;);<o:p></o:p></span></p>

<p class=a style='margin-left:21.0pt;mso-para-margin-left:2.0gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span lang=EN-US style='font-size:9.0pt;
mso-bidi-font-size:10.5pt'><span style='mso-tab-count:3'>            </span>//
FileSystem fs = FileSystem.get(configuration);<o:p></o:p></span></p>

<p class=a style='margin-left:21.0pt;mso-para-margin-left:2.0gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span lang=EN-US style='font-size:9.0pt;
mso-bidi-font-size:10.5pt'><o:p>&nbsp;</o:p></span></p>

<p class=a style='margin-left:21.0pt;mso-para-margin-left:2.0gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span lang=EN-US style='font-size:9.0pt;
mso-bidi-font-size:10.5pt'><span style='mso-tab-count:3'>            </span>FileSystem
fs = FileSystem.get(new URI(&quot;hdfs://hadoop102:9000&quot;), configuration,
&quot;atguigu&quot;);<o:p></o:p></span></p>

<p class=a style='margin-left:21.0pt;mso-para-margin-left:2.0gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span lang=EN-US style='font-size:9.0pt;
mso-bidi-font-size:10.5pt'><span style='mso-tab-count:3'>            </span><o:p></o:p></span></p>

<p class=a style='margin-left:21.0pt;mso-para-margin-left:2.0gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span lang=EN-US style='font-size:9.0pt;
mso-bidi-font-size:10.5pt'><span style='mso-tab-count:3'>            </span>//
2 </span><span style='font-size:9.0pt;mso-bidi-font-size:10.5pt;font-family:
宋体;mso-ascii-font-family:"Courier New";mso-hansi-font-family:"Courier New"'>创建目录</span><span
lang=EN-US style='font-size:9.0pt;mso-bidi-font-size:10.5pt'><o:p></o:p></span></p>

<p class=a style='margin-left:21.0pt;mso-para-margin-left:2.0gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span lang=EN-US style='font-size:9.0pt;
mso-bidi-font-size:10.5pt'><span style='mso-tab-count:3'>            </span>fs.mkdirs(new
Path(&quot;/1108/daxian/banzhang&quot;));<o:p></o:p></span></p>

<p class=a style='margin-left:21.0pt;mso-para-margin-left:2.0gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span lang=EN-US style='font-size:9.0pt;
mso-bidi-font-size:10.5pt'><span style='mso-tab-count:3'>            </span><o:p></o:p></span></p>

<p class=a style='margin-left:21.0pt;mso-para-margin-left:2.0gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span lang=EN-US style='font-size:9.0pt;
mso-bidi-font-size:10.5pt'><span style='mso-tab-count:3'>            </span>//
3 </span><span style='font-size:9.0pt;mso-bidi-font-size:10.5pt;font-family:
宋体;mso-ascii-font-family:"Courier New";mso-hansi-font-family:"Courier New"'>关闭资源</span><span
lang=EN-US style='font-size:9.0pt;mso-bidi-font-size:10.5pt'><o:p></o:p></span></p>

<p class=a style='margin-left:21.0pt;mso-para-margin-left:2.0gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span lang=EN-US style='font-size:9.0pt;
mso-bidi-font-size:10.5pt'><span style='mso-tab-count:3'>            </span>fs.close();<o:p></o:p></span></p>

<p class=a style='margin-left:21.0pt;mso-para-margin-left:2.0gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span lang=EN-US style='font-size:9.0pt;
mso-bidi-font-size:10.5pt'><span style='mso-tab-count:1'>    </span>}<o:p></o:p></span></p>

<p class=a style='margin-left:21.0pt;mso-para-margin-left:2.0gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span lang=EN-US style='font-size:9.0pt;
mso-bidi-font-size:10.5pt'>}<o:p></o:p></span></p>

<p class=10 style='margin-top:6.2pt;text-indent:22.0pt'><span lang=EN-US>8</span><span
style='font-family:黑体;mso-ascii-font-family:Arial;mso-hansi-font-family:Arial'>．执行程序</span></p>

<p class=MsoNormal style='text-indent:21.0pt;line-height:150%'><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>运行时需要配置用户名称，如图</span><span lang=EN-US>3-7</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>所示</span></p>

<p class=MsoNormal align=center style='text-align:center;text-indent:21.0pt;
line-height:150%'><span lang=EN-US style='mso-no-proof:yes'><v:shape id="_x0000_i1116"
 type="#_x0000_t75" style='width:267pt;height:213.6pt;visibility:visible;
 mso-wrap-style:square'>
 <img src="Hadoop_02HDFS.files/image013.png" o:title=""/>
</v:shape></span></p>

<p class=MsoNormal align=center style='text-align:center;text-indent:21.0pt;
line-height:150%'><span style='font-size:9.0pt;line-height:150%;font-family:
宋体;mso-ascii-font-family:Calibri;mso-hansi-font-family:Calibri;mso-bidi-font-family:
Calibri'>图</span><span lang=EN-US style='font-size:9.0pt;line-height:150%;
font-family:"Calibri","sans-serif"'>3-7<span style='mso-spacerun:yes'>  </span></span><span
style='font-size:9.0pt;line-height:150%;font-family:宋体;mso-ascii-font-family:
Calibri;mso-hansi-font-family:Calibri;mso-bidi-font-family:Calibri'>配置用户名称</span><span
lang=EN-US style='font-size:9.0pt;line-height:150%;font-family:"Calibri","sans-serif"'><o:p></o:p></span></p>

<p class=MsoNormal style='text-indent:21.0pt;line-height:150%'><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>客户端去操作</span><span lang=EN-US>HDFS</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>时，是有一个用户身份的。默认情况下，</span><span lang=EN-US>HDFS</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>客户端</span><span lang=EN-US>API</span><span style='font-family:
宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:"Times New Roman"'>会从</span><span
lang=EN-US>JVM</span><span style='font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>中获取一个参数来作为自己的用户身份：</span><a
name="OLE_LINK57"></a><a name="OLE_LINK34"></a><a name="OLE_LINK55"></a><a
name="OLE_LINK54"></a><a name="OLE_LINK53"></a><a name="OLE_LINK17"></a><a
name="OLE_LINK16"></a><a name="OLE_LINK15"><span style='mso-bookmark:OLE_LINK16'><span
style='mso-bookmark:OLE_LINK17'><span style='mso-bookmark:OLE_LINK53'><span
style='mso-bookmark:OLE_LINK54'><span style='mso-bookmark:OLE_LINK55'><span
style='mso-bookmark:OLE_LINK34'><span style='mso-bookmark:OLE_LINK57'><span
lang=EN-US>-DHADOOP_USER_NAME=atguigu</span></span></span></span></span></span></span></span></a><span
style='mso-bookmark:OLE_LINK57'></span><span style='mso-bookmark:OLE_LINK34'></span><span
style='mso-bookmark:OLE_LINK55'></span><span style='mso-bookmark:OLE_LINK54'></span><span
style='mso-bookmark:OLE_LINK53'></span><span style='mso-bookmark:OLE_LINK17'></span><span
style='mso-bookmark:OLE_LINK16'></span><span style='mso-bookmark:OLE_LINK15'></span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>，</span><span lang=EN-US>atguigu</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>为用户名称。</span></p>

<p class=MsoNormal style='text-indent:21.0pt;line-height:150%'><span
lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='text-indent:21.0pt;line-height:150%'><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>创建成功（忽略路径不一样）</span></p>

<p class=MsoNormal style='text-indent:21.0pt;line-height:150%'><span
lang=EN-US style='mso-no-proof:yes'><v:shape id="_x0000_i1115" type="#_x0000_t75"
 style='width:535.8pt;height:121.8pt;visibility:visible;mso-wrap-style:square'>
 <img src="Hadoop_02HDFS.files/image014.png" o:title=""/>
</v:shape></span></p>

<p class=MsoNormal style='text-indent:21.0pt;line-height:150%'><span
lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='text-indent:21.0pt;line-height:150%'><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>不指定用户会报权限的错</span></p>

<p class=MsoNormal style='text-indent:21.0pt;line-height:150%'><span
lang=EN-US style='mso-no-proof:yes'><v:shape id="图片_x0020_9" o:spid="_x0000_i1114"
 type="#_x0000_t75" style='width:534.6pt;height:187.8pt;visibility:visible;
 mso-wrap-style:square'>
 <img src="Hadoop_02HDFS.files/image015.png" o:title=""/>
</v:shape></span></p>

<h2 style='margin:0cm;margin-bottom:.0001pt'><span lang=EN-US style='font-size:
14.0pt;line-height:172%;font-family:"Times New Roman","serif"'>3.2 HDFS</span><span
style='font-size:14.0pt;line-height:172%;font-family:黑体;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>的</span><span
lang=EN-US style='font-size:14.0pt;line-height:172%;font-family:"Times New Roman","serif"'>API</span><span
style='font-size:14.0pt;line-height:172%;font-family:黑体;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>操作</span><span
lang=EN-US style='font-size:14.0pt;line-height:172%;font-family:"Times New Roman","serif"'><o:p></o:p></span></h2>

<h3 style='margin:0cm;margin-bottom:.0001pt'><span lang=EN-US style='font-size:
14.0pt;line-height:172%'>3.2.1 HDFS</span><span style='font-size:14.0pt;
line-height:172%;font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>文件上传（测试参数优先级）</span><span lang=EN-US
style='font-size:14.0pt;line-height:172%'><o:p></o:p></span></h3>

<p class=10 style='margin-top:6.2pt;text-indent:22.0pt'><span lang=EN-US>1</span><span
style='font-family:黑体;mso-ascii-font-family:Arial;mso-hansi-font-family:Arial'>．编写源代码（客户端代码修改参数）</span></p>

<table class=MsoNormalTable border=0 cellspacing=0 cellpadding=0 width=936
 style='width:561.6pt;margin-left:5.4pt;border-collapse:collapse;mso-padding-alt:
 0cm 5.4pt 0cm 5.4pt'>
 <tr style='mso-yfti-irow:0;mso-yfti-firstrow:yes;mso-yfti-lastrow:yes'>
  <td width=936 valign=top style='width:561.6pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <div style='mso-element:para-border-div;border:none windowtext 1.0pt;
  mso-border-alt:none windowtext 0cm;padding:1.0pt 4.0pt 1.0pt 4.0pt;
  background:#E0E0E0;margin-left:21.0pt;margin-right:0cm'>
  <p class=a style='margin-left:0cm;mso-para-margin-left:2.0gd;background:#E0E0E0;
  mso-layout-grid-align:none;punctuation-trim:leading;border:none;mso-border-alt:
  none windowtext 0cm;padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span
  lang=EN-US style='font-size:10.5pt'>@Test<o:p></o:p></span></p>
  <p class=a style='margin-left:0cm;mso-para-margin-left:2.0gd;background:#E0E0E0;
  mso-layout-grid-align:none;punctuation-trim:leading;border:none;mso-border-alt:
  none windowtext 0cm;padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span
  lang=EN-US style='font-size:10.5pt'>public void testCopyFromLocalFile()
  throws IOException, InterruptedException, URISyntaxException {<o:p></o:p></span></p>
  <p class=a style='margin-left:0cm;mso-para-margin-left:2.0gd;background:#E0E0E0;
  mso-layout-grid-align:none;punctuation-trim:leading;border:none;mso-border-alt:
  none windowtext 0cm;padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span
  lang=EN-US style='font-size:10.5pt'><o:p>&nbsp;</o:p></span></p>
  <p class=a style='margin-left:0cm;mso-para-margin-left:2.0gd;background:#E0E0E0;
  mso-layout-grid-align:none;punctuation-trim:leading;border:none;mso-border-alt:
  none windowtext 0cm;padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span
  lang=EN-US style='font-size:10.5pt'><span style='mso-tab-count:2'>      </span>//
  1 </span><span style='font-size:10.5pt;font-family:宋体;mso-ascii-font-family:
  "Courier New";mso-hansi-font-family:"Courier New"'>获取文件系统</span><span
  lang=EN-US style='font-size:10.5pt'><o:p></o:p></span></p>
  <p class=a style='margin-left:0cm;mso-para-margin-left:2.0gd;background:#E0E0E0;
  mso-layout-grid-align:none;punctuation-trim:leading;border:none;mso-border-alt:
  none windowtext 0cm;padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span
  lang=EN-US style='font-size:10.5pt'><span style='mso-tab-count:2'>      </span>Configuration
  configuration = new Configuration();<o:p></o:p></span></p>
  <p class=a style='margin-left:0cm;mso-para-margin-left:2.0gd;background:#E0E0E0;
  mso-layout-grid-align:none;punctuation-trim:leading;border:none;mso-border-alt:
  none windowtext 0cm;padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span
  lang=EN-US style='font-size:10.5pt'><span style='mso-tab-count:2'>      </span>configuration.set(&quot;dfs.replication&quot;,
  &quot;2&quot;);<o:p></o:p></span></p>
  <p class=a style='margin-left:0cm;mso-para-margin-left:2.0gd;background:#E0E0E0;
  mso-layout-grid-align:none;punctuation-trim:leading;border:none;mso-border-alt:
  none windowtext 0cm;padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span
  lang=EN-US style='font-size:10.5pt'><span style='mso-tab-count:2'>      </span>FileSystem
  fs = FileSystem.get(new URI(&quot;hdfs://hadoop102:9000&quot;),
  configuration, &quot;atguigu&quot;);<o:p></o:p></span></p>
  <p class=a style='margin-left:0cm;mso-para-margin-left:2.0gd;background:#E0E0E0;
  mso-layout-grid-align:none;punctuation-trim:leading;border:none;mso-border-alt:
  none windowtext 0cm;padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span
  lang=EN-US style='font-size:10.5pt'><o:p>&nbsp;</o:p></span></p>
  <p class=a style='margin-left:0cm;mso-para-margin-left:2.0gd;background:#E0E0E0;
  mso-layout-grid-align:none;punctuation-trim:leading;border:none;mso-border-alt:
  none windowtext 0cm;padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span
  lang=EN-US style='font-size:10.5pt'><span style='mso-tab-count:2'>      </span>//
  2 </span><span style='font-size:10.5pt;font-family:宋体;mso-ascii-font-family:
  "Courier New";mso-hansi-font-family:"Courier New"'>上传文件</span><span
  lang=EN-US style='font-size:10.5pt'><o:p></o:p></span></p>
  <p class=a style='margin-left:0cm;mso-para-margin-left:2.0gd;background:#E0E0E0;
  mso-layout-grid-align:none;punctuation-trim:leading;border:none;mso-border-alt:
  none windowtext 0cm;padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span
  lang=EN-US style='font-size:10.5pt'><span style='mso-tab-count:2'>      </span>fs.copyFromLocalFile(new
  Path(&quot;e:/banzhang.txt&quot;), new Path(&quot;/banzhang.txt&quot;));<o:p></o:p></span></p>
  <p class=a style='margin-left:0cm;mso-para-margin-left:2.0gd;background:#E0E0E0;
  mso-layout-grid-align:none;punctuation-trim:leading;border:none;mso-border-alt:
  none windowtext 0cm;padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span
  lang=EN-US style='font-size:10.5pt'><o:p>&nbsp;</o:p></span></p>
  <p class=a style='margin-left:0cm;mso-para-margin-left:2.0gd;background:#E0E0E0;
  mso-layout-grid-align:none;punctuation-trim:leading;border:none;mso-border-alt:
  none windowtext 0cm;padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span
  lang=EN-US style='font-size:10.5pt'><span style='mso-tab-count:2'>      </span>//
  3 </span><span style='font-size:10.5pt;font-family:宋体;mso-ascii-font-family:
  "Courier New";mso-hansi-font-family:"Courier New"'>关闭资源</span><span
  lang=EN-US style='font-size:10.5pt'><o:p></o:p></span></p>
  <p class=a style='margin-left:0cm;mso-para-margin-left:2.0gd;background:#E0E0E0;
  mso-layout-grid-align:none;punctuation-trim:leading;border:none;mso-border-alt:
  none windowtext 0cm;padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span
  lang=EN-US style='font-size:10.5pt'><span style='mso-tab-count:2'>      </span>fs.close();<o:p></o:p></span></p>
  <p class=a style='margin-left:0cm;mso-para-margin-left:2.0gd;background:#E0E0E0;
  mso-layout-grid-align:none;punctuation-trim:leading;border:none;mso-border-alt:
  none windowtext 0cm;padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span
  lang=EN-US style='font-size:10.5pt'><o:p>&nbsp;</o:p></span></p>
  <p class=a style='margin-left:0cm;mso-para-margin-left:2.0gd;background:#E0E0E0;
  mso-layout-grid-align:none;punctuation-trim:leading;border:none;mso-border-alt:
  none windowtext 0cm;padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span
  lang=EN-US style='font-size:10.5pt'><span style='mso-tab-count:2'>      </span>System.out.println(&quot;over&quot;);<o:p></o:p></span></p>
  <p class=a style='margin-left:0cm;mso-para-margin-left:2.0gd;background:#E0E0E0;
  mso-layout-grid-align:none;punctuation-trim:leading;border:none;mso-border-alt:
  none windowtext 0cm;padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span
  lang=EN-US style='font-size:10.5pt'>}<o:p></o:p></span></p>
  </div>
  </td>
 </tr>
</table>

<p class=10 style='margin-top:6.2pt;text-indent:22.0pt'><span lang=EN-US>2</span><span
style='font-family:黑体;mso-ascii-font-family:Arial;mso-hansi-font-family:Arial'>．将</span><span
lang=EN-US>hdfs-site.xml</span><span style='font-family:黑体;mso-ascii-font-family:
Arial;mso-hansi-font-family:Arial'>拷贝到项目的根目录下（新建配置文件改参数）</span></p>

<table class=MsoNormalTable border=1 cellspacing=0 cellpadding=0
 style='margin-left:5.4pt;border-collapse:collapse;border:none;mso-border-alt:
 solid windowtext .5pt;mso-padding-alt:0cm 5.4pt 0cm 5.4pt;mso-border-insideh:
 .5pt solid windowtext;mso-border-insidev:.5pt solid windowtext'>
 <tr style='mso-yfti-irow:0;mso-yfti-firstrow:yes;mso-yfti-lastrow:yes'>
  <td width=685 valign=top style='width:411.1pt;border:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <div style='mso-element:para-border-div;border:none windowtext 1.0pt;
  mso-border-alt:none windowtext 0cm;padding:1.0pt 4.0pt 1.0pt 4.0pt;
  background:#E0E0E0;margin-left:21.0pt;margin-right:0cm'>
  <p class=a style='margin-left:0cm;mso-para-margin-left:2.0gd;background:#E0E0E0;
  mso-layout-grid-align:none;punctuation-trim:leading;border:none;mso-border-alt:
  none windowtext 0cm;padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><a
  name="OLE_LINK37"></a><a name="OLE_LINK36"><span style='mso-bookmark:OLE_LINK37'><span
  lang=EN-US style='font-size:10.5pt'>&lt;?xml version=&quot;1.0&quot;
  encoding=&quot;UTF-8&quot;?&gt;<o:p></o:p></span></span></a></p>
  <p class=a style='margin-left:0cm;mso-para-margin-left:2.0gd;background:#E0E0E0;
  mso-layout-grid-align:none;punctuation-trim:leading;border:none;mso-border-alt:
  none windowtext 0cm;padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span
  style='mso-bookmark:OLE_LINK36'><span style='mso-bookmark:OLE_LINK37'><span
  lang=EN-US style='font-size:10.5pt'>&lt;?xml-stylesheet
  type=&quot;text/xsl&quot; href=&quot;configuration.xsl&quot;?&gt;<o:p></o:p></span></span></span></p>
  <p class=a style='margin-left:0cm;mso-para-margin-left:2.0gd;background:#E0E0E0;
  mso-layout-grid-align:none;punctuation-trim:leading;border:none;mso-border-alt:
  none windowtext 0cm;padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span
  style='mso-bookmark:OLE_LINK36'><span style='mso-bookmark:OLE_LINK37'><span
  lang=EN-US style='font-size:10.5pt'><o:p>&nbsp;</o:p></span></span></span></p>
  <p class=a style='margin-left:0cm;mso-para-margin-left:2.0gd;background:#E0E0E0;
  mso-layout-grid-align:none;punctuation-trim:leading;border:none;mso-border-alt:
  none windowtext 0cm;padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span
  style='mso-bookmark:OLE_LINK36'><span style='mso-bookmark:OLE_LINK37'><span
  lang=EN-US style='font-size:10.5pt'>&lt;configuration&gt;<o:p></o:p></span></span></span></p>
  <p class=a style='margin-left:0cm;mso-para-margin-left:2.0gd;background:#E0E0E0;
  mso-layout-grid-align:none;punctuation-trim:leading;border:none;mso-border-alt:
  none windowtext 0cm;padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span
  style='mso-bookmark:OLE_LINK36'><span style='mso-bookmark:OLE_LINK37'><span
  lang=EN-US style='font-size:10.5pt'><span style='mso-tab-count:1'>   </span>&lt;property&gt;<o:p></o:p></span></span></span></p>
  <p class=a style='margin-left:0cm;mso-para-margin-left:2.0gd;background:#E0E0E0;
  mso-layout-grid-align:none;punctuation-trim:leading;border:none;mso-border-alt:
  none windowtext 0cm;padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span
  style='mso-bookmark:OLE_LINK36'><span style='mso-bookmark:OLE_LINK37'><span
  lang=EN-US style='font-size:10.5pt'><span style='mso-tab-count:2'>      </span>&lt;name&gt;dfs.replication&lt;/name&gt;<o:p></o:p></span></span></span></p>
  <p class=a style='margin-left:0cm;mso-para-margin-left:2.0gd;background:#E0E0E0;
  mso-layout-grid-align:none;punctuation-trim:leading;border:none;mso-border-alt:
  none windowtext 0cm;padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span
  style='mso-bookmark:OLE_LINK36'><span style='mso-bookmark:OLE_LINK37'><span
  lang=EN-US style='font-size:10.5pt'><span style='mso-spacerun:yes'>       
  </span>&lt;value&gt;1&lt;/value&gt;<o:p></o:p></span></span></span></p>
  <p class=a style='margin-left:0cm;mso-para-margin-left:2.0gd;background:#E0E0E0;
  mso-layout-grid-align:none;punctuation-trim:leading;border:none;mso-border-alt:
  none windowtext 0cm;padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span
  style='mso-bookmark:OLE_LINK36'><span style='mso-bookmark:OLE_LINK37'><span
  lang=EN-US style='font-size:10.5pt'><span style='mso-tab-count:1'>   </span>&lt;/property&gt;<o:p></o:p></span></span></span></p>
  <p class=a style='margin-left:0cm;mso-para-margin-left:2.0gd;background:#E0E0E0;
  mso-layout-grid-align:none;punctuation-trim:leading;border:none;mso-border-alt:
  none windowtext 0cm;padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span
  style='mso-bookmark:OLE_LINK36'><span style='mso-bookmark:OLE_LINK37'><span
  lang=EN-US style='font-size:10.5pt'>&lt;/configuration&gt;</span></span></span><span
  lang=EN-US style='font-size:10.5pt'><o:p></o:p></span></p>
  </div>
  </td>
 </tr>
</table>

<p class=MsoNormal><span lang=EN-US style='mso-no-proof:yes'><v:shape id="图片_x0020_14"
 o:spid="_x0000_i1113" type="#_x0000_t75" style='width:567pt;height:201.6pt;
 visibility:visible;mso-wrap-style:square'>
 <img src="Hadoop_02HDFS.files/image016.png" o:title=""/>
</v:shape></span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span style='font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>结果</span></p>

<p class=MsoNormal><span lang=EN-US style='mso-no-proof:yes'><v:shape id="图片_x0020_12"
 o:spid="_x0000_i1112" type="#_x0000_t75" style='width:567pt;height:156.6pt;
 visibility:visible;mso-wrap-style:square'>
 <img src="Hadoop_02HDFS.files/image017.png" o:title=""/>
</v:shape></span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=10 style='margin-top:6.2pt;text-indent:22.0pt'><span lang=EN-US>3</span><span
style='font-family:黑体;mso-ascii-font-family:Arial;mso-hansi-font-family:Arial'>．参数优先级</span></p>

<p class=MsoNormal style='text-indent:21.0pt;line-height:150%'><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>参数优先级排序：（</span><span lang=EN-US>1</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>）<span style='color:red'>客户端代码</span>中设置的值</span><span
lang=EN-US> &gt;</span><span style='font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>（</span><span lang=EN-US>2</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>）</span><u><span lang=EN-US>ClassPath</span></u><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>下的用户<span style='color:red'>自定义配置文件</span></span> <span
lang=EN-US>&gt;</span><span style='font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>（</span><span lang=EN-US>3</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>）然后是</span><span lang=EN-US>Hadoop</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>服务器的默认配置</span></p>

<h3 style='margin:0cm;margin-bottom:.0001pt'><span lang=EN-US style='font-size:
14.0pt;line-height:172%'>3.2.2 HDFS</span><span style='font-size:14.0pt;
line-height:172%;font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>文件下载</span><span lang=EN-US
style='font-size:14.0pt;line-height:172%'><o:p></o:p></span></h3>

<div style='mso-element:para-border-div;border:none windowtext 1.0pt;
mso-border-alt:none windowtext 0cm;padding:1.0pt 4.0pt 1.0pt 4.0pt;background:
#E0E0E0;margin-left:21.0pt;margin-right:0cm'>

<p class=a style='margin-left:0cm;mso-para-margin-left:2.0gd;background:#E0E0E0;
mso-layout-grid-align:none;punctuation-trim:leading;border:none;mso-border-alt:
none windowtext 0cm;padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span
lang=EN-US style='font-size:10.5pt'>@Test<o:p></o:p></span></p>

<p class=a style='margin-left:0cm;mso-para-margin-left:2.0gd;background:#E0E0E0;
mso-layout-grid-align:none;punctuation-trim:leading;border:none;mso-border-alt:
none windowtext 0cm;padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span
lang=EN-US style='font-size:10.5pt'>public void testCopyToLocalFile() throws
IOException, InterruptedException, URISyntaxException{<o:p></o:p></span></p>

<p class=a style='margin-left:0cm;mso-para-margin-left:2.0gd;background:#E0E0E0;
mso-layout-grid-align:none;punctuation-trim:leading;border:none;mso-border-alt:
none windowtext 0cm;padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span
lang=EN-US style='font-size:10.5pt'><o:p>&nbsp;</o:p></span></p>

<p class=a style='margin-left:0cm;mso-para-margin-left:2.0gd;background:#E0E0E0;
mso-layout-grid-align:none;punctuation-trim:leading;border:none;mso-border-alt:
none windowtext 0cm;padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span
lang=EN-US style='font-size:10.5pt'><span style='mso-tab-count:2'>      </span>//
1 </span><span style='font-size:10.5pt;font-family:宋体;mso-ascii-font-family:
"Courier New";mso-hansi-font-family:"Courier New"'>获取文件系统</span><span
lang=EN-US style='font-size:10.5pt'><o:p></o:p></span></p>

<p class=a style='margin-left:0cm;mso-para-margin-left:2.0gd;background:#E0E0E0;
mso-layout-grid-align:none;punctuation-trim:leading;border:none;mso-border-alt:
none windowtext 0cm;padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span
lang=EN-US style='font-size:10.5pt'><span style='mso-tab-count:2'>      </span>Configuration
configuration = new Configuration();<o:p></o:p></span></p>

<p class=a style='margin-left:0cm;mso-para-margin-left:2.0gd;background:#E0E0E0;
mso-layout-grid-align:none;punctuation-trim:leading;border:none;mso-border-alt:
none windowtext 0cm;padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span
lang=EN-US style='font-size:10.5pt'><span style='mso-tab-count:2'>      </span>FileSystem
fs = FileSystem.get(new URI(&quot;hdfs://hadoop102:9000&quot;), configuration,
&quot;atguigu&quot;);<o:p></o:p></span></p>

<p class=a style='margin-left:0cm;mso-para-margin-left:2.0gd;background:#E0E0E0;
mso-layout-grid-align:none;punctuation-trim:leading;border:none;mso-border-alt:
none windowtext 0cm;padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span
lang=EN-US style='font-size:10.5pt'><span style='mso-tab-count:2'>      </span><o:p></o:p></span></p>

<p class=a style='margin-left:0cm;mso-para-margin-left:2.0gd;background:#E0E0E0;
mso-layout-grid-align:none;punctuation-trim:leading;border:none;mso-border-alt:
none windowtext 0cm;padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span
lang=EN-US style='font-size:10.5pt'><span style='mso-tab-count:2'>      </span>//
2 </span><span style='font-size:10.5pt;font-family:宋体;mso-ascii-font-family:
"Courier New";mso-hansi-font-family:"Courier New"'>执行下载操作</span><span
lang=EN-US style='font-size:10.5pt'><o:p></o:p></span></p>

<p class=a style='margin-left:0cm;mso-para-margin-left:2.0gd;background:#E0E0E0;
mso-layout-grid-align:none;punctuation-trim:leading;border:none;mso-border-alt:
none windowtext 0cm;padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span
lang=EN-US style='font-size:10.5pt'><span style='mso-tab-count:2'>      </span>//
boolean delSrc </span><span style='font-size:10.5pt;font-family:宋体;mso-ascii-font-family:
"Courier New";mso-hansi-font-family:"Courier New"'>指是否将原文件删除</span><span
lang=EN-US style='font-size:10.5pt'><o:p></o:p></span></p>

<p class=a style='margin-left:0cm;mso-para-margin-left:2.0gd;background:#E0E0E0;
mso-layout-grid-align:none;punctuation-trim:leading;border:none;mso-border-alt:
none windowtext 0cm;padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span
lang=EN-US style='font-size:10.5pt'><span style='mso-tab-count:2'>      </span>//
Path src </span><span style='font-size:10.5pt;font-family:宋体;mso-ascii-font-family:
"Courier New";mso-hansi-font-family:"Courier New"'>指要下载的文件路径</span><span
lang=EN-US style='font-size:10.5pt'><o:p></o:p></span></p>

<p class=a style='margin-left:0cm;mso-para-margin-left:2.0gd;background:#E0E0E0;
mso-layout-grid-align:none;punctuation-trim:leading;border:none;mso-border-alt:
none windowtext 0cm;padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span
lang=EN-US style='font-size:10.5pt'><span style='mso-tab-count:2'>      </span>//
Path dst </span><span style='font-size:10.5pt;font-family:宋体;mso-ascii-font-family:
"Courier New";mso-hansi-font-family:"Courier New"'>指将文件下载到的路径</span><span
lang=EN-US style='font-size:10.5pt'><o:p></o:p></span></p>

<p class=a style='margin-left:0cm;mso-para-margin-left:2.0gd;background:#E0E0E0;
mso-layout-grid-align:none;punctuation-trim:leading;border:none;mso-border-alt:
none windowtext 0cm;padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span
lang=EN-US style='font-size:10.5pt'><span style='mso-tab-count:2'>      </span>//
boolean useRawLocalFileSystem </span><span style='font-size:10.5pt;font-family:
宋体;mso-ascii-font-family:"Courier New";mso-hansi-font-family:"Courier New"'>是否开启文件校验</span><span
lang=EN-US style='font-size:10.5pt'><o:p></o:p></span></p>

<p class=a style='margin-left:0cm;mso-para-margin-left:2.0gd;background:#E0E0E0;
mso-layout-grid-align:none;punctuation-trim:leading;border:none;mso-border-alt:
none windowtext 0cm;padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span
lang=EN-US style='font-size:10.5pt'><span style='mso-tab-count:2'>      </span>fs.copyToLocalFile(false,
new Path(&quot;/banzhang.txt&quot;), new Path(&quot;e:/banhua.txt&quot;),
true);<o:p></o:p></span></p>

<p class=a style='margin-left:0cm;mso-para-margin-left:2.0gd;background:#E0E0E0;
mso-layout-grid-align:none;punctuation-trim:leading;border:none;mso-border-alt:
none windowtext 0cm;padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span
lang=EN-US style='font-size:10.5pt'><span style='mso-tab-count:2'>      </span><o:p></o:p></span></p>

<p class=a style='margin-left:0cm;mso-para-margin-left:2.0gd;background:#E0E0E0;
mso-layout-grid-align:none;punctuation-trim:leading;border:none;mso-border-alt:
none windowtext 0cm;padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span
lang=EN-US style='font-size:10.5pt'><span style='mso-tab-count:2'>      </span>//
3 </span><span style='font-size:10.5pt;font-family:宋体;mso-ascii-font-family:
"Courier New";mso-hansi-font-family:"Courier New"'>关闭资源</span><span lang=EN-US
style='font-size:10.5pt'><o:p></o:p></span></p>

<p class=a style='margin-left:0cm;mso-para-margin-left:2.0gd;background:#E0E0E0;
mso-layout-grid-align:none;punctuation-trim:leading;border:none;mso-border-alt:
none windowtext 0cm;padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span
lang=EN-US style='font-size:10.5pt'><span style='mso-tab-count:2'>      </span>fs.close();<o:p></o:p></span></p>

<p class=a style='margin-left:0cm;mso-para-margin-left:2.0gd;background:#E0E0E0;
mso-layout-grid-align:none;punctuation-trim:leading;border:none;mso-border-alt:
none windowtext 0cm;padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span
lang=EN-US style='font-size:10.5pt'>}<o:p></o:p></span></p>

</div>

<h3 style='margin:0cm;margin-bottom:.0001pt'><span lang=EN-US style='font-size:
14.0pt;line-height:172%'>3.2.3 HDFS</span><span style='font-size:14.0pt;
line-height:172%;font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>文件夹删除</span><span lang=EN-US
style='font-size:14.0pt;line-height:172%'><o:p></o:p></span></h3>

<div style='mso-element:para-border-div;border:none windowtext 1.0pt;
mso-border-alt:none windowtext 0cm;padding:1.0pt 4.0pt 1.0pt 4.0pt;background:
#E0E0E0;margin-left:21.0pt;margin-right:0cm'>

<p class=a style='margin-left:0cm;mso-para-margin-left:2.0gd;background:#E0E0E0;
mso-layout-grid-align:none;punctuation-trim:leading;border:none;mso-border-alt:
none windowtext 0cm;padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span
lang=EN-US style='font-size:10.5pt'>@Test<o:p></o:p></span></p>

<p class=a style='margin-left:0cm;mso-para-margin-left:2.0gd;background:#E0E0E0;
mso-layout-grid-align:none;punctuation-trim:leading;border:none;mso-border-alt:
none windowtext 0cm;padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span
lang=EN-US style='font-size:10.5pt'>public void testDelete() throws
IOException, InterruptedException, URISyntaxException{<o:p></o:p></span></p>

<p class=a style='margin-left:0cm;mso-para-margin-left:2.0gd;background:#E0E0E0;
mso-layout-grid-align:none;punctuation-trim:leading;border:none;mso-border-alt:
none windowtext 0cm;padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span
lang=EN-US style='font-size:10.5pt'><o:p>&nbsp;</o:p></span></p>

<p class=a style='margin-left:0cm;mso-para-margin-left:2.0gd;background:#E0E0E0;
mso-layout-grid-align:none;punctuation-trim:leading;border:none;mso-border-alt:
none windowtext 0cm;padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span
lang=EN-US style='font-size:10.5pt'><span style='mso-tab-count:1'>   </span>//
1 </span><span style='font-size:10.5pt;font-family:宋体;mso-ascii-font-family:
"Courier New";mso-hansi-font-family:"Courier New"'>获取文件系统</span><span
lang=EN-US style='font-size:10.5pt'><o:p></o:p></span></p>

<p class=a style='margin-left:0cm;mso-para-margin-left:2.0gd;background:#E0E0E0;
mso-layout-grid-align:none;punctuation-trim:leading;border:none;mso-border-alt:
none windowtext 0cm;padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span
lang=EN-US style='font-size:10.5pt'><span style='mso-tab-count:1'>   </span>Configuration
configuration = new Configuration();<o:p></o:p></span></p>

<p class=a style='margin-left:0cm;mso-para-margin-left:2.0gd;background:#E0E0E0;
mso-layout-grid-align:none;punctuation-trim:leading;border:none;mso-border-alt:
none windowtext 0cm;padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span
lang=EN-US style='font-size:10.5pt'><span style='mso-tab-count:1'>   </span>FileSystem
fs = FileSystem.get(new URI(&quot;hdfs://hadoop102:9000&quot;), configuration,
&quot;atguigu&quot;);<o:p></o:p></span></p>

<p class=a style='margin-left:0cm;mso-para-margin-left:2.0gd;background:#E0E0E0;
mso-layout-grid-align:none;punctuation-trim:leading;border:none;mso-border-alt:
none windowtext 0cm;padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span
lang=EN-US style='font-size:10.5pt'><span style='mso-tab-count:2'>      </span><o:p></o:p></span></p>

<p class=a style='margin-left:0cm;mso-para-margin-left:2.0gd;background:#E0E0E0;
mso-layout-grid-align:none;punctuation-trim:leading;border:none;mso-border-alt:
none windowtext 0cm;padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span
lang=EN-US style='font-size:10.5pt'><span style='mso-tab-count:1'>   </span>//
2 </span><span style='font-size:10.5pt;font-family:宋体;mso-ascii-font-family:
"Courier New";mso-hansi-font-family:"Courier New"'>执行删除</span><span lang=EN-US
style='font-size:10.5pt'><o:p></o:p></span></p>

<p class=a style='margin-left:0cm;mso-para-margin-left:2.0gd;background:#E0E0E0;
mso-layout-grid-align:none;punctuation-trim:leading;border:none;mso-border-alt:
none windowtext 0cm;padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span
lang=EN-US style='font-size:10.5pt'><span style='mso-tab-count:1'>   </span>fs.delete(new
Path(&quot;/0508/&quot;), true);<o:p></o:p></span></p>

<p class=a style='margin-left:0cm;mso-para-margin-left:2.0gd;background:#E0E0E0;
mso-layout-grid-align:none;punctuation-trim:leading;border:none;mso-border-alt:
none windowtext 0cm;padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span
lang=EN-US style='font-size:10.5pt'><span style='mso-tab-count:2'>      </span><o:p></o:p></span></p>

<p class=a style='margin-left:0cm;mso-para-margin-left:2.0gd;background:#E0E0E0;
mso-layout-grid-align:none;punctuation-trim:leading;border:none;mso-border-alt:
none windowtext 0cm;padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span
lang=EN-US style='font-size:10.5pt'><span style='mso-tab-count:1'>   </span>//
3 </span><span style='font-size:10.5pt;font-family:宋体;mso-ascii-font-family:
"Courier New";mso-hansi-font-family:"Courier New"'>关闭资源</span><span lang=EN-US
style='font-size:10.5pt'><o:p></o:p></span></p>

<p class=a style='margin-left:0cm;mso-para-margin-left:2.0gd;background:#E0E0E0;
mso-layout-grid-align:none;punctuation-trim:leading;border:none;mso-border-alt:
none windowtext 0cm;padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span
lang=EN-US style='font-size:10.5pt'><span style='mso-tab-count:1'>   </span>fs.close();<o:p></o:p></span></p>

<p class=a style='margin-left:0cm;mso-para-margin-left:2.0gd;background:#E0E0E0;
mso-layout-grid-align:none;punctuation-trim:leading;border:none;mso-border-alt:
none windowtext 0cm;padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span
lang=EN-US style='font-size:10.5pt'>}<o:p></o:p></span></p>

</div>

<h3 style='margin:0cm;margin-bottom:.0001pt'><span lang=EN-US style='font-size:
14.0pt;line-height:172%'>3.2.4 HDFS</span><span style='font-size:14.0pt;
line-height:172%;font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>文件名更改</span><span lang=EN-US
style='font-size:14.0pt;line-height:172%'><o:p></o:p></span></h3>

<div style='mso-element:para-border-div;border:none windowtext 1.0pt;
mso-border-alt:none windowtext 0cm;padding:1.0pt 4.0pt 1.0pt 4.0pt;background:
#E0E0E0;margin-left:21.0pt;margin-right:0cm'>

<p class=a style='margin-left:0cm;mso-para-margin-left:2.0gd;background:#E0E0E0;
mso-layout-grid-align:none;punctuation-trim:leading;border:none;mso-border-alt:
none windowtext 0cm;padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span
lang=EN-US style='font-size:10.5pt'>@Test<o:p></o:p></span></p>

<p class=a style='margin-left:0cm;mso-para-margin-left:2.0gd;background:#E0E0E0;
mso-layout-grid-align:none;punctuation-trim:leading;border:none;mso-border-alt:
none windowtext 0cm;padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span
lang=EN-US style='font-size:10.5pt'>public void testRename() throws
IOException, InterruptedException, URISyntaxException{<o:p></o:p></span></p>

<p class=a style='margin-left:0cm;mso-para-margin-left:2.0gd;background:#E0E0E0;
mso-layout-grid-align:none;punctuation-trim:leading;border:none;mso-border-alt:
none windowtext 0cm;padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span
lang=EN-US style='font-size:10.5pt'><o:p>&nbsp;</o:p></span></p>

<p class=a style='margin-left:0cm;mso-para-margin-left:2.0gd;background:#E0E0E0;
mso-layout-grid-align:none;punctuation-trim:leading;border:none;mso-border-alt:
none windowtext 0cm;padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span
lang=EN-US style='font-size:10.5pt'><span style='mso-tab-count:1'>   </span>//
1 </span><span style='font-size:10.5pt;font-family:宋体;mso-ascii-font-family:
"Courier New";mso-hansi-font-family:"Courier New"'>获取文件系统</span><span
lang=EN-US style='font-size:10.5pt'><o:p></o:p></span></p>

<p class=a style='margin-left:0cm;mso-para-margin-left:2.0gd;background:#E0E0E0;
mso-layout-grid-align:none;punctuation-trim:leading;border:none;mso-border-alt:
none windowtext 0cm;padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span
lang=EN-US style='font-size:10.5pt'><span style='mso-tab-count:1'>   </span>Configuration
configuration = new Configuration();<o:p></o:p></span></p>

<p class=a style='margin-left:0cm;mso-para-margin-left:2.0gd;background:#E0E0E0;
mso-layout-grid-align:none;punctuation-trim:leading;border:none;mso-border-alt:
none windowtext 0cm;padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span
lang=EN-US style='font-size:10.5pt'><span style='mso-tab-count:1'>   </span>FileSystem
fs = FileSystem.get(new URI(&quot;hdfs://hadoop102:9000&quot;), configuration,
&quot;atguigu&quot;); <o:p></o:p></span></p>

<p class=a style='margin-left:0cm;mso-para-margin-left:2.0gd;background:#E0E0E0;
mso-layout-grid-align:none;punctuation-trim:leading;border:none;mso-border-alt:
none windowtext 0cm;padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span
lang=EN-US style='font-size:10.5pt'><span style='mso-tab-count:2'>      </span><o:p></o:p></span></p>

<p class=a style='margin-left:0cm;mso-para-margin-left:2.0gd;background:#E0E0E0;
mso-layout-grid-align:none;punctuation-trim:leading;border:none;mso-border-alt:
none windowtext 0cm;padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span
lang=EN-US style='font-size:10.5pt'><span style='mso-tab-count:1'>   </span>//
2 </span><span style='font-size:10.5pt;font-family:宋体;mso-ascii-font-family:
"Courier New";mso-hansi-font-family:"Courier New"'>修改文件名称</span><span
lang=EN-US style='font-size:10.5pt'><o:p></o:p></span></p>

<p class=a style='margin-left:0cm;mso-para-margin-left:2.0gd;background:#E0E0E0;
mso-layout-grid-align:none;punctuation-trim:leading;border:none;mso-border-alt:
none windowtext 0cm;padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span
lang=EN-US style='font-size:10.5pt'><span style='mso-tab-count:1'>   </span>fs.rename(new
Path(&quot;/banzhang.txt&quot;), new Path(&quot;/banhua.txt&quot;));<o:p></o:p></span></p>

<p class=a style='margin-left:0cm;mso-para-margin-left:2.0gd;background:#E0E0E0;
mso-layout-grid-align:none;punctuation-trim:leading;border:none;mso-border-alt:
none windowtext 0cm;padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span
lang=EN-US style='font-size:10.5pt'><span style='mso-tab-count:2'>      </span><o:p></o:p></span></p>

<p class=a style='margin-left:0cm;mso-para-margin-left:2.0gd;background:#E0E0E0;
mso-layout-grid-align:none;punctuation-trim:leading;border:none;mso-border-alt:
none windowtext 0cm;padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span
lang=EN-US style='font-size:10.5pt'><span style='mso-tab-count:1'>   </span>//
3 </span><span style='font-size:10.5pt;font-family:宋体;mso-ascii-font-family:
"Courier New";mso-hansi-font-family:"Courier New"'>关闭资源</span><span lang=EN-US
style='font-size:10.5pt'><o:p></o:p></span></p>

<p class=a style='margin-left:0cm;mso-para-margin-left:2.0gd;background:#E0E0E0;
mso-layout-grid-align:none;punctuation-trim:leading;border:none;mso-border-alt:
none windowtext 0cm;padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span
lang=EN-US style='font-size:10.5pt'><span style='mso-tab-count:1'>   </span>fs.close();<o:p></o:p></span></p>

<p class=a style='margin-left:0cm;mso-para-margin-left:2.0gd;background:#E0E0E0;
mso-layout-grid-align:none;punctuation-trim:leading;border:none;mso-border-alt:
none windowtext 0cm;padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span
lang=EN-US style='font-size:10.5pt'>}<o:p></o:p></span></p>

</div>

<h3 style='margin:0cm;margin-bottom:.0001pt'><span lang=EN-US style='font-size:
14.0pt;line-height:172%'>3.2.5 HDFS</span><span style='font-size:14.0pt;
line-height:172%;font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>文件详情查看</span><span lang=EN-US
style='font-size:14.0pt;line-height:172%'><o:p></o:p></span></h3>

<p class=MsoNormal style='text-indent:21.0pt;line-height:150%'><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>查看文件名称、权限、长度、块信息</span></p>

<div style='mso-element:para-border-div;border:none windowtext 1.0pt;
mso-border-alt:none windowtext 0cm;padding:1.0pt 4.0pt 1.0pt 4.0pt;background:
#E0E0E0;margin-left:21.0pt;margin-right:0cm'>

<p class=a style='margin-left:0cm;mso-para-margin-left:2.0gd;background:#E0E0E0;
mso-layout-grid-align:none;punctuation-trim:leading;border:none;mso-border-alt:
none windowtext 0cm;padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span
lang=EN-US style='font-size:9.0pt;mso-bidi-font-size:10.5pt'>@Test<o:p></o:p></span></p>

<p class=a style='margin-left:0cm;mso-para-margin-left:2.0gd;background:#E0E0E0;
mso-layout-grid-align:none;punctuation-trim:leading;border:none;mso-border-alt:
none windowtext 0cm;padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span
lang=EN-US style='font-size:9.0pt;mso-bidi-font-size:10.5pt'>public void
testListFiles() throws IOException, InterruptedException, URISyntaxException{<o:p></o:p></span></p>

<p class=a style='margin-left:0cm;mso-para-margin-left:2.0gd;background:#E0E0E0;
mso-layout-grid-align:none;punctuation-trim:leading;border:none;mso-border-alt:
none windowtext 0cm;padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span
lang=EN-US style='font-size:9.0pt;mso-bidi-font-size:10.5pt'><o:p>&nbsp;</o:p></span></p>

<p class=a style='margin-left:0cm;mso-para-margin-left:2.0gd;background:#E0E0E0;
mso-layout-grid-align:none;punctuation-trim:leading;border:none;mso-border-alt:
none windowtext 0cm;padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span
lang=EN-US style='font-size:9.0pt;mso-bidi-font-size:10.5pt'><span
style='mso-tab-count:1'>    </span>// 1</span><span style='font-size:9.0pt;
mso-bidi-font-size:10.5pt;font-family:宋体;mso-ascii-font-family:"Courier New";
mso-hansi-font-family:"Courier New"'>获取文件系统</span><span lang=EN-US
style='font-size:9.0pt;mso-bidi-font-size:10.5pt'><o:p></o:p></span></p>

<p class=a style='margin-left:0cm;mso-para-margin-left:2.0gd;background:#E0E0E0;
mso-layout-grid-align:none;punctuation-trim:leading;border:none;mso-border-alt:
none windowtext 0cm;padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span
lang=EN-US style='font-size:9.0pt;mso-bidi-font-size:10.5pt'><span
style='mso-tab-count:1'>    </span>Configuration configuration = new
Configuration();<o:p></o:p></span></p>

<p class=a style='margin-left:0cm;mso-para-margin-left:2.0gd;background:#E0E0E0;
mso-layout-grid-align:none;punctuation-trim:leading;border:none;mso-border-alt:
none windowtext 0cm;padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span
lang=EN-US style='font-size:9.0pt;mso-bidi-font-size:10.5pt'><span
style='mso-tab-count:1'>    </span>FileSystem fs = FileSystem.get(new
URI(&quot;hdfs://hadoop102:9000&quot;), configuration, &quot;atguigu&quot;); <o:p></o:p></span></p>

<p class=a style='margin-left:0cm;mso-para-margin-left:2.0gd;background:#E0E0E0;
mso-layout-grid-align:none;punctuation-trim:leading;border:none;mso-border-alt:
none windowtext 0cm;padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span
lang=EN-US style='font-size:9.0pt;mso-bidi-font-size:10.5pt'><span
style='mso-tab-count:2'>        </span><o:p></o:p></span></p>

<p class=a style='margin-left:0cm;mso-para-margin-left:2.0gd;background:#E0E0E0;
mso-layout-grid-align:none;punctuation-trim:leading;border:none;mso-border-alt:
none windowtext 0cm;padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span
lang=EN-US style='font-size:9.0pt;mso-bidi-font-size:10.5pt'><span
style='mso-tab-count:1'>    </span>// 2 </span><span style='font-size:9.0pt;
mso-bidi-font-size:10.5pt;font-family:宋体;mso-ascii-font-family:"Courier New";
mso-hansi-font-family:"Courier New"'>获取文件详情</span><span lang=EN-US
style='font-size:9.0pt;mso-bidi-font-size:10.5pt'><o:p></o:p></span></p>

<p class=a style='margin-left:0cm;mso-para-margin-left:2.0gd;background:#E0E0E0;
mso-layout-grid-align:none;punctuation-trim:leading;border:none;mso-border-alt:
none windowtext 0cm;padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span
lang=EN-US style='font-size:9.0pt;mso-bidi-font-size:10.5pt'><span
style='mso-tab-count:1'>    </span>RemoteIterator&lt;LocatedFileStatus&gt;
listFiles = fs.listFiles(new Path(&quot;/&quot;), true);<o:p></o:p></span></p>

<p class=a style='margin-left:0cm;mso-para-margin-left:2.0gd;background:#E0E0E0;
mso-layout-grid-align:none;punctuation-trim:leading;border:none;mso-border-alt:
none windowtext 0cm;padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span
lang=EN-US style='font-size:9.0pt;mso-bidi-font-size:10.5pt'><span
style='mso-tab-count:2'>        </span><o:p></o:p></span></p>

<p class=a style='margin-left:0cm;mso-para-margin-left:2.0gd;background:#E0E0E0;
mso-layout-grid-align:none;punctuation-trim:leading;border:none;mso-border-alt:
none windowtext 0cm;padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span
lang=EN-US style='font-size:9.0pt;mso-bidi-font-size:10.5pt'><span
style='mso-tab-count:1'>    </span>while(listFiles.hasNext()){<o:p></o:p></span></p>

<p class=a style='margin-left:0cm;mso-para-margin-left:2.0gd;background:#E0E0E0;
mso-layout-grid-align:none;punctuation-trim:leading;border:none;mso-border-alt:
none windowtext 0cm;padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span
lang=EN-US style='font-size:9.0pt;mso-bidi-font-size:10.5pt'><span
style='mso-tab-count:2'>        </span>LocatedFileStatus status = listFiles.next();<o:p></o:p></span></p>

<p class=a style='margin-left:0cm;mso-para-margin-left:2.0gd;background:#E0E0E0;
mso-layout-grid-align:none;punctuation-trim:leading;border:none;mso-border-alt:
none windowtext 0cm;padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span
lang=EN-US style='font-size:9.0pt;mso-bidi-font-size:10.5pt'><span
style='mso-tab-count:3'>            </span><o:p></o:p></span></p>

<p class=a style='margin-left:0cm;mso-para-margin-left:2.0gd;background:#E0E0E0;
mso-layout-grid-align:none;punctuation-trim:leading;border:none;mso-border-alt:
none windowtext 0cm;padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span
lang=EN-US style='font-size:9.0pt;mso-bidi-font-size:10.5pt'><span
style='mso-tab-count:2'>        </span>// </span><span style='font-size:9.0pt;
mso-bidi-font-size:10.5pt;font-family:宋体;mso-ascii-font-family:"Courier New";
mso-hansi-font-family:"Courier New"'>输出详情</span><span lang=EN-US
style='font-size:9.0pt;mso-bidi-font-size:10.5pt'><o:p></o:p></span></p>

<p class=a style='margin-left:0cm;mso-para-margin-left:2.0gd;background:#E0E0E0;
mso-layout-grid-align:none;punctuation-trim:leading;border:none;mso-border-alt:
none windowtext 0cm;padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span
lang=EN-US style='font-size:9.0pt;mso-bidi-font-size:10.5pt'><span
style='mso-tab-count:2'>        </span>// </span><span style='font-size:9.0pt;
mso-bidi-font-size:10.5pt;font-family:宋体;mso-ascii-font-family:"Courier New";
mso-hansi-font-family:"Courier New"'>文件名称</span><span lang=EN-US
style='font-size:9.0pt;mso-bidi-font-size:10.5pt'><o:p></o:p></span></p>

<p class=a style='margin-left:0cm;mso-para-margin-left:2.0gd;background:#E0E0E0;
mso-layout-grid-align:none;punctuation-trim:leading;border:none;mso-border-alt:
none windowtext 0cm;padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span
lang=EN-US style='font-size:9.0pt;mso-bidi-font-size:10.5pt'><span
style='mso-tab-count:2'>        </span>System.out.println(status.getPath().getName());<o:p></o:p></span></p>

<p class=a style='margin-left:0cm;mso-para-margin-left:2.0gd;background:#E0E0E0;
mso-layout-grid-align:none;punctuation-trim:leading;border:none;mso-border-alt:
none windowtext 0cm;padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span
lang=EN-US style='font-size:9.0pt;mso-bidi-font-size:10.5pt'><span
style='mso-tab-count:2'>        </span>// </span><span style='font-size:9.0pt;
mso-bidi-font-size:10.5pt;font-family:宋体;mso-ascii-font-family:"Courier New";
mso-hansi-font-family:"Courier New"'>长度</span><span lang=EN-US
style='font-size:9.0pt;mso-bidi-font-size:10.5pt'><o:p></o:p></span></p>

<p class=a style='margin-left:0cm;mso-para-margin-left:2.0gd;background:#E0E0E0;
mso-layout-grid-align:none;punctuation-trim:leading;border:none;mso-border-alt:
none windowtext 0cm;padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span
lang=EN-US style='font-size:9.0pt;mso-bidi-font-size:10.5pt'><span
style='mso-tab-count:2'>        </span>System.out.println(status.getLen());<o:p></o:p></span></p>

<p class=a style='margin-left:0cm;mso-para-margin-left:2.0gd;background:#E0E0E0;
mso-layout-grid-align:none;punctuation-trim:leading;border:none;mso-border-alt:
none windowtext 0cm;padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span
lang=EN-US style='font-size:9.0pt;mso-bidi-font-size:10.5pt'><span
style='mso-tab-count:2'>        </span>// </span><span style='font-size:9.0pt;
mso-bidi-font-size:10.5pt;font-family:宋体;mso-ascii-font-family:"Courier New";
mso-hansi-font-family:"Courier New"'>权限</span><span lang=EN-US
style='font-size:9.0pt;mso-bidi-font-size:10.5pt'><o:p></o:p></span></p>

<p class=a style='margin-left:0cm;mso-para-margin-left:2.0gd;background:#E0E0E0;
mso-layout-grid-align:none;punctuation-trim:leading;border:none;mso-border-alt:
none windowtext 0cm;padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span
lang=EN-US style='font-size:9.0pt;mso-bidi-font-size:10.5pt'><span
style='mso-tab-count:2'>        </span>System.out.println(status.getPermission());<o:p></o:p></span></p>

<p class=a style='margin-left:0cm;mso-para-margin-left:2.0gd;background:#E0E0E0;
mso-layout-grid-align:none;punctuation-trim:leading;border:none;mso-border-alt:
none windowtext 0cm;padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span
lang=EN-US style='font-size:9.0pt;mso-bidi-font-size:10.5pt'><span
style='mso-tab-count:2'>        </span>// </span><span style='font-size:9.0pt;
mso-bidi-font-size:10.5pt;font-family:宋体;mso-ascii-font-family:"Courier New";
mso-hansi-font-family:"Courier New"'>分组（块信息）</span><span lang=EN-US
style='font-size:9.0pt;mso-bidi-font-size:10.5pt'><o:p></o:p></span></p>

<p class=a style='margin-left:0cm;mso-para-margin-left:2.0gd;background:#E0E0E0;
mso-layout-grid-align:none;punctuation-trim:leading;border:none;mso-border-alt:
none windowtext 0cm;padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span
lang=EN-US style='font-size:9.0pt;mso-bidi-font-size:10.5pt'><span
style='mso-tab-count:2'>        </span>System.out.println(status.getGroup());<o:p></o:p></span></p>

<p class=a style='margin-left:0cm;mso-para-margin-left:2.0gd;background:#E0E0E0;
mso-layout-grid-align:none;punctuation-trim:leading;border:none;mso-border-alt:
none windowtext 0cm;padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span
lang=EN-US style='font-size:9.0pt;mso-bidi-font-size:10.5pt'><span
style='mso-tab-count:3'>            </span><o:p></o:p></span></p>

<p class=a style='margin-left:0cm;mso-para-margin-left:2.0gd;background:#E0E0E0;
mso-layout-grid-align:none;punctuation-trim:leading;border:none;mso-border-alt:
none windowtext 0cm;padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span
lang=EN-US style='font-size:9.0pt;mso-bidi-font-size:10.5pt'><span
style='mso-tab-count:2'>        </span>// </span><span style='font-size:9.0pt;
mso-bidi-font-size:10.5pt;font-family:宋体;mso-ascii-font-family:"Courier New";
mso-hansi-font-family:"Courier New"'>获取存储的块信息</span><span lang=EN-US
style='font-size:9.0pt;mso-bidi-font-size:10.5pt'><o:p></o:p></span></p>

<p class=a style='margin-left:0cm;mso-para-margin-left:2.0gd;background:#E0E0E0;
mso-layout-grid-align:none;punctuation-trim:leading;border:none;mso-border-alt:
none windowtext 0cm;padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span
lang=EN-US style='font-size:9.0pt;mso-bidi-font-size:10.5pt'><span
style='mso-tab-count:2'>        </span>BlockLocation[] blockLocations =
status.getBlockLocations();<o:p></o:p></span></p>

<p class=a style='margin-left:0cm;mso-para-margin-left:2.0gd;background:#E0E0E0;
mso-layout-grid-align:none;punctuation-trim:leading;border:none;mso-border-alt:
none windowtext 0cm;padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span
lang=EN-US style='font-size:9.0pt;mso-bidi-font-size:10.5pt'><span
style='mso-tab-count:3'>            </span><o:p></o:p></span></p>

<p class=a style='margin-left:0cm;mso-para-margin-left:2.0gd;background:#E0E0E0;
mso-layout-grid-align:none;punctuation-trim:leading;border:none;mso-border-alt:
none windowtext 0cm;padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span
lang=EN-US style='font-size:9.0pt;mso-bidi-font-size:10.5pt'><span
style='mso-tab-count:1'>    </span><span style='mso-tab-count:1'>    </span>for
(BlockLocation blockLocation : blockLocations) {<o:p></o:p></span></p>

<p class=a style='margin-left:0cm;mso-para-margin-left:2.0gd;background:#E0E0E0;
mso-layout-grid-align:none;punctuation-trim:leading;border:none;mso-border-alt:
none windowtext 0cm;padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span
lang=EN-US style='font-size:9.0pt;mso-bidi-font-size:10.5pt'><span
style='mso-tab-count:4'>                </span><o:p></o:p></span></p>

<p class=a style='margin-left:0cm;mso-para-margin-left:2.0gd;background:#E0E0E0;
mso-layout-grid-align:none;punctuation-trim:leading;border:none;mso-border-alt:
none windowtext 0cm;padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span
lang=EN-US style='font-size:9.0pt;mso-bidi-font-size:10.5pt'><span
style='mso-tab-count:3'>            </span>// </span><span style='font-size:
9.0pt;mso-bidi-font-size:10.5pt;font-family:宋体;mso-ascii-font-family:"Courier New";
mso-hansi-font-family:"Courier New"'>获取块存储的主机节点</span><span lang=EN-US
style='font-size:9.0pt;mso-bidi-font-size:10.5pt'><o:p></o:p></span></p>

<p class=a style='margin-left:0cm;mso-para-margin-left:2.0gd;background:#E0E0E0;
mso-layout-grid-align:none;punctuation-trim:leading;border:none;mso-border-alt:
none windowtext 0cm;padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span
lang=EN-US style='font-size:9.0pt;mso-bidi-font-size:10.5pt'><span
style='mso-tab-count:3'>            </span>String[] hosts =
blockLocation.getHosts();<o:p></o:p></span></p>

<p class=a style='margin-left:0cm;mso-para-margin-left:2.0gd;background:#E0E0E0;
mso-layout-grid-align:none;punctuation-trim:leading;border:none;mso-border-alt:
none windowtext 0cm;padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span
lang=EN-US style='font-size:9.0pt;mso-bidi-font-size:10.5pt'><span
style='mso-tab-count:4'>                </span><o:p></o:p></span></p>

<p class=a style='margin-left:0cm;mso-para-margin-left:2.0gd;background:#E0E0E0;
mso-layout-grid-align:none;punctuation-trim:leading;border:none;mso-border-alt:
none windowtext 0cm;padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span
lang=EN-US style='font-size:9.0pt;mso-bidi-font-size:10.5pt'><span
style='mso-tab-count:3'>            </span>for (String host : hosts) {<o:p></o:p></span></p>

<p class=a style='margin-left:0cm;mso-para-margin-left:2.0gd;background:#E0E0E0;
mso-layout-grid-align:none;punctuation-trim:leading;border:none;mso-border-alt:
none windowtext 0cm;padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span
lang=EN-US style='font-size:9.0pt;mso-bidi-font-size:10.5pt'><span
style='mso-tab-count:4'>                </span>System.out.println(host);<o:p></o:p></span></p>

<p class=a style='margin-left:0cm;mso-para-margin-left:2.0gd;background:#E0E0E0;
mso-layout-grid-align:none;punctuation-trim:leading;border:none;mso-border-alt:
none windowtext 0cm;padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span
lang=EN-US style='font-size:9.0pt;mso-bidi-font-size:10.5pt'><span
style='mso-tab-count:3'>            </span>}<o:p></o:p></span></p>

<p class=a style='margin-left:0cm;mso-para-margin-left:2.0gd;background:#E0E0E0;
mso-layout-grid-align:none;punctuation-trim:leading;border:none;mso-border-alt:
none windowtext 0cm;padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span
lang=EN-US style='font-size:9.0pt;mso-bidi-font-size:10.5pt'><span
style='mso-tab-count:2'>        </span>}<o:p></o:p></span></p>

<p class=a style='margin-left:0cm;mso-para-margin-left:2.0gd;background:#E0E0E0;
mso-layout-grid-align:none;punctuation-trim:leading;border:none;mso-border-alt:
none windowtext 0cm;padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span
lang=EN-US style='font-size:9.0pt;mso-bidi-font-size:10.5pt'><span
style='mso-tab-count:3'>            </span><o:p></o:p></span></p>

<p class=a style='margin-left:0cm;mso-para-margin-left:2.0gd;background:#E0E0E0;
mso-layout-grid-align:none;punctuation-trim:leading;border:none;mso-border-alt:
none windowtext 0cm;padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span
lang=EN-US style='font-size:9.0pt;mso-bidi-font-size:10.5pt'><span
style='mso-tab-count:2'>        </span>System.out.println(&quot;-----------</span><span
style='font-size:9.0pt;mso-bidi-font-size:10.5pt;font-family:宋体;mso-ascii-font-family:
"Courier New";mso-hansi-font-family:"Courier New"'>班长分割线</span><span
lang=EN-US style='font-size:9.0pt;mso-bidi-font-size:10.5pt'>----------&quot;);<o:p></o:p></span></p>

<p class=a style='margin-left:0cm;mso-para-margin-left:2.0gd;background:#E0E0E0;
mso-layout-grid-align:none;punctuation-trim:leading;border:none;mso-border-alt:
none windowtext 0cm;padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span
lang=EN-US style='font-size:9.0pt;mso-bidi-font-size:10.5pt'><span
style='mso-tab-count:1'>    </span>}<o:p></o:p></span></p>

<p class=a style='margin-left:0cm;mso-para-margin-left:2.0gd;background:#E0E0E0;
mso-layout-grid-align:none;punctuation-trim:leading;border:none;mso-border-alt:
none windowtext 0cm;padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span
lang=EN-US style='font-size:9.0pt;mso-bidi-font-size:10.5pt'><o:p>&nbsp;</o:p></span></p>

<p class=a style='margin-left:0cm;mso-para-margin-left:2.0gd;text-indent:21.0pt;
background:#E0E0E0;mso-layout-grid-align:none;punctuation-trim:leading;
border:none;mso-border-alt:none windowtext 0cm;padding:0cm;mso-padding-alt:
1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US style='font-size:9.0pt;mso-bidi-font-size:
10.5pt'>// 3 </span><span style='font-size:9.0pt;mso-bidi-font-size:10.5pt;
font-family:宋体;mso-ascii-font-family:"Courier New";mso-hansi-font-family:"Courier New"'>关闭资源</span><span
lang=EN-US style='font-size:9.0pt;mso-bidi-font-size:10.5pt'><o:p></o:p></span></p>

<p class=a style='margin-left:0cm;mso-para-margin-left:2.0gd;text-indent:21.0pt;
background:#E0E0E0;mso-layout-grid-align:none;punctuation-trim:leading;
border:none;mso-border-alt:none windowtext 0cm;padding:0cm;mso-padding-alt:
1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US style='font-size:9.0pt;mso-bidi-font-size:
10.5pt'>fs.close();<o:p></o:p></span></p>

<p class=a style='margin-left:0cm;mso-para-margin-left:2.0gd;background:#E0E0E0;
mso-layout-grid-align:none;punctuation-trim:leading;border:none;mso-border-alt:
none windowtext 0cm;padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span
lang=EN-US style='font-size:9.0pt;mso-bidi-font-size:10.5pt'>}<o:p></o:p></span></p>

</div>

<p class=MsoNormal><span style='font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>结果：</span></p>

<p class=MsoNormal><span lang=EN-US style='mso-no-proof:yes'><v:shape id="图片_x0020_15"
 o:spid="_x0000_i1111" type="#_x0000_t75" style='width:199.8pt;height:292.8pt;
 visibility:visible;mso-wrap-style:square'>
 <img src="Hadoop_02HDFS.files/image018.png" o:title=""/>
</v:shape></span></p>

<h3 style='margin:0cm;margin-bottom:.0001pt'><span lang=EN-US style='font-size:
14.0pt;line-height:172%'>3.2.6 HDFS</span><span style='font-size:14.0pt;
line-height:172%;font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>文件和文件夹判断</span><span lang=EN-US
style='font-size:14.0pt;line-height:172%'><o:p></o:p></span></h3>

<div style='mso-element:para-border-div;border:none windowtext 1.0pt;
mso-border-alt:none windowtext 0cm;padding:1.0pt 4.0pt 1.0pt 4.0pt;background:
#E0E0E0;margin-left:21.0pt;margin-right:0cm'>

<p class=a style='margin-left:0cm;mso-para-margin-left:2.0gd;background:#E0E0E0;
mso-layout-grid-align:none;punctuation-trim:leading;border:none;mso-border-alt:
none windowtext 0cm;padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span
lang=EN-US style='font-size:10.0pt;mso-bidi-font-size:10.5pt'>@Test<o:p></o:p></span></p>

<p class=a style='margin-left:0cm;mso-para-margin-left:2.0gd;background:#E0E0E0;
mso-layout-grid-align:none;punctuation-trim:leading;border:none;mso-border-alt:
none windowtext 0cm;padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span
lang=EN-US style='font-size:10.0pt;mso-bidi-font-size:10.5pt'>public void
testListStatus() throws IOException, InterruptedException, URISyntaxException{<o:p></o:p></span></p>

<p class=a style='margin-left:0cm;mso-para-margin-left:2.0gd;background:#E0E0E0;
mso-layout-grid-align:none;punctuation-trim:leading;border:none;mso-border-alt:
none windowtext 0cm;padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span
lang=EN-US style='font-size:10.0pt;mso-bidi-font-size:10.5pt'><span
style='mso-tab-count:2'>       </span><o:p></o:p></span></p>

<p class=a style='margin-left:0cm;mso-para-margin-left:2.0gd;background:#E0E0E0;
mso-layout-grid-align:none;punctuation-trim:leading;border:none;mso-border-alt:
none windowtext 0cm;padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span
lang=EN-US style='font-size:10.0pt;mso-bidi-font-size:10.5pt'><span
style='mso-tab-count:1'>    </span>// 1 </span><span style='font-size:10.0pt;
mso-bidi-font-size:10.5pt;font-family:宋体;mso-ascii-font-family:"Courier New";
mso-hansi-font-family:"Courier New"'>获取文件配置信息</span><span lang=EN-US
style='font-size:10.0pt;mso-bidi-font-size:10.5pt'><o:p></o:p></span></p>

<p class=a style='margin-left:0cm;mso-para-margin-left:2.0gd;background:#E0E0E0;
mso-layout-grid-align:none;punctuation-trim:leading;border:none;mso-border-alt:
none windowtext 0cm;padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span
lang=EN-US style='font-size:10.0pt;mso-bidi-font-size:10.5pt'><span
style='mso-tab-count:1'>    </span>Configuration configuration = new
Configuration();<o:p></o:p></span></p>

<p class=a style='margin-left:0cm;mso-para-margin-left:2.0gd;background:#E0E0E0;
mso-layout-grid-align:none;punctuation-trim:leading;border:none;mso-border-alt:
none windowtext 0cm;padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span
lang=EN-US style='font-size:10.0pt;mso-bidi-font-size:10.5pt'><span
style='mso-tab-count:1'>    </span>FileSystem fs = FileSystem.get(new
URI(&quot;hdfs://hadoop102:9000&quot;), configuration, &quot;atguigu&quot;);<o:p></o:p></span></p>

<p class=a style='margin-left:0cm;mso-para-margin-left:2.0gd;background:#E0E0E0;
mso-layout-grid-align:none;punctuation-trim:leading;border:none;mso-border-alt:
none windowtext 0cm;padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span
lang=EN-US style='font-size:10.0pt;mso-bidi-font-size:10.5pt'><span
style='mso-tab-count:2'>       </span><o:p></o:p></span></p>

<p class=a style='margin-left:0cm;mso-para-margin-left:2.0gd;background:#E0E0E0;
mso-layout-grid-align:none;punctuation-trim:leading;border:none;mso-border-alt:
none windowtext 0cm;padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span
lang=EN-US style='font-size:10.0pt;mso-bidi-font-size:10.5pt'><span
style='mso-tab-count:1'>    </span>// 2 </span><span style='font-size:10.0pt;
mso-bidi-font-size:10.5pt;font-family:宋体;mso-ascii-font-family:"Courier New";
mso-hansi-font-family:"Courier New"'>判断是文件还是文件夹</span><span lang=EN-US
style='font-size:10.0pt;mso-bidi-font-size:10.5pt'><o:p></o:p></span></p>

<p class=a style='margin-left:0cm;mso-para-margin-left:2.0gd;background:#E0E0E0;
mso-layout-grid-align:none;punctuation-trim:leading;border:none;mso-border-alt:
none windowtext 0cm;padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span
lang=EN-US style='font-size:10.0pt;mso-bidi-font-size:10.5pt'><span
style='mso-tab-count:1'>    </span>FileStatus[] listStatus = fs.listStatus(new
Path(&quot;/&quot;));<o:p></o:p></span></p>

<p class=a style='margin-left:0cm;mso-para-margin-left:2.0gd;background:#E0E0E0;
mso-layout-grid-align:none;punctuation-trim:leading;border:none;mso-border-alt:
none windowtext 0cm;padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span
lang=EN-US style='font-size:10.0pt;mso-bidi-font-size:10.5pt'><span
style='mso-tab-count:2'>       </span><o:p></o:p></span></p>

<p class=a style='margin-left:0cm;mso-para-margin-left:2.0gd;background:#E0E0E0;
mso-layout-grid-align:none;punctuation-trim:leading;border:none;mso-border-alt:
none windowtext 0cm;padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span
lang=EN-US style='font-size:10.0pt;mso-bidi-font-size:10.5pt'><span
style='mso-tab-count:1'>    </span>for (FileStatus fileStatus : listStatus) {<o:p></o:p></span></p>

<p class=a style='margin-left:0cm;mso-para-margin-left:2.0gd;background:#E0E0E0;
mso-layout-grid-align:none;punctuation-trim:leading;border:none;mso-border-alt:
none windowtext 0cm;padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span
lang=EN-US style='font-size:10.0pt;mso-bidi-font-size:10.5pt'><span
style='mso-tab-count:2'>       </span><o:p></o:p></span></p>

<p class=a style='margin-left:0cm;mso-para-margin-left:2.0gd;background:#E0E0E0;
mso-layout-grid-align:none;punctuation-trim:leading;border:none;mso-border-alt:
none windowtext 0cm;padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span
lang=EN-US style='font-size:10.0pt;mso-bidi-font-size:10.5pt'><span
style='mso-tab-count:2'>       </span>// </span><span style='font-size:10.0pt;
mso-bidi-font-size:10.5pt;font-family:宋体;mso-ascii-font-family:"Courier New";
mso-hansi-font-family:"Courier New"'>如果是文件</span><span lang=EN-US
style='font-size:10.0pt;mso-bidi-font-size:10.5pt'><o:p></o:p></span></p>

<p class=a style='margin-left:0cm;mso-para-margin-left:2.0gd;background:#E0E0E0;
mso-layout-grid-align:none;punctuation-trim:leading;border:none;mso-border-alt:
none windowtext 0cm;padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span
lang=EN-US style='font-size:10.0pt;mso-bidi-font-size:10.5pt'><span
style='mso-tab-count:2'>       </span>if (fileStatus.isFile()) {<o:p></o:p></span></p>

<p class=a style='margin-left:0cm;mso-para-margin-left:2.0gd;background:#E0E0E0;
mso-layout-grid-align:none;punctuation-trim:leading;border:none;mso-border-alt:
none windowtext 0cm;padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span
lang=EN-US style='font-size:10.0pt;mso-bidi-font-size:10.5pt'><span
style='mso-tab-count:3'>           </span><span style='mso-tab-count:1'>    </span>System.out.println(&quot;f:&quot;+fileStatus.getPath().getName());<o:p></o:p></span></p>

<p class=a style='margin-left:0cm;mso-para-margin-left:2.0gd;background:#E0E0E0;
mso-layout-grid-align:none;punctuation-trim:leading;border:none;mso-border-alt:
none windowtext 0cm;padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span
lang=EN-US style='font-size:10.0pt;mso-bidi-font-size:10.5pt'><span
style='mso-tab-count:3'>           </span>}else {<o:p></o:p></span></p>

<p class=a style='margin-left:0cm;mso-para-margin-left:2.0gd;background:#E0E0E0;
mso-layout-grid-align:none;punctuation-trim:leading;border:none;mso-border-alt:
none windowtext 0cm;padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span
lang=EN-US style='font-size:10.0pt;mso-bidi-font-size:10.5pt'><span
style='mso-tab-count:3'>           </span><span style='mso-tab-count:1'>    </span>System.out.println(&quot;d:&quot;+fileStatus.getPath().getName());<o:p></o:p></span></p>

<p class=a style='margin-left:0cm;mso-para-margin-left:2.0gd;background:#E0E0E0;
mso-layout-grid-align:none;punctuation-trim:leading;border:none;mso-border-alt:
none windowtext 0cm;padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span
lang=EN-US style='font-size:10.0pt;mso-bidi-font-size:10.5pt'><span
style='mso-tab-count:3'>           </span>}<o:p></o:p></span></p>

<p class=a style='margin-left:0cm;mso-para-margin-left:2.0gd;background:#E0E0E0;
mso-layout-grid-align:none;punctuation-trim:leading;border:none;mso-border-alt:
none windowtext 0cm;padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span
lang=EN-US style='font-size:10.0pt;mso-bidi-font-size:10.5pt'><span
style='mso-tab-count:2'>       </span>}<o:p></o:p></span></p>

<p class=a style='margin-left:0cm;mso-para-margin-left:2.0gd;background:#E0E0E0;
mso-layout-grid-align:none;punctuation-trim:leading;border:none;mso-border-alt:
none windowtext 0cm;padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span
lang=EN-US style='font-size:10.0pt;mso-bidi-font-size:10.5pt'><span
style='mso-tab-count:2'>       </span><o:p></o:p></span></p>

<p class=a style='margin-left:0cm;mso-para-margin-left:2.0gd;background:#E0E0E0;
mso-layout-grid-align:none;punctuation-trim:leading;border:none;mso-border-alt:
none windowtext 0cm;padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span
lang=EN-US style='font-size:10.0pt;mso-bidi-font-size:10.5pt'><span
style='mso-tab-count:1'>    </span>// 3 </span><span style='font-size:10.0pt;
mso-bidi-font-size:10.5pt;font-family:宋体;mso-ascii-font-family:"Courier New";
mso-hansi-font-family:"Courier New"'>关闭资源</span><span lang=EN-US
style='font-size:10.0pt;mso-bidi-font-size:10.5pt'><o:p></o:p></span></p>

<p class=a style='margin-left:0cm;mso-para-margin-left:2.0gd;background:#E0E0E0;
mso-layout-grid-align:none;punctuation-trim:leading;border:none;mso-border-alt:
none windowtext 0cm;padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span
lang=EN-US style='font-size:10.0pt;mso-bidi-font-size:10.5pt'><span
style='mso-tab-count:1'>    </span>fs.close();<o:p></o:p></span></p>

<p class=a style='margin-left:0cm;mso-para-margin-left:2.0gd;background:#E0E0E0;
mso-layout-grid-align:none;punctuation-trim:leading;border:none;mso-border-alt:
none windowtext 0cm;padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span
lang=EN-US style='font-size:10.0pt;mso-bidi-font-size:10.5pt'>}<o:p></o:p></span></p>

</div>

<h2 style='margin:0cm;margin-bottom:.0001pt'><span lang=EN-US style='font-size:
14.0pt;line-height:172%;font-family:"Times New Roman","serif"'>3.3 HDFS</span><span
style='font-size:14.0pt;line-height:172%;font-family:黑体;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>的</span><span
lang=EN-US style='font-size:14.0pt;line-height:172%;font-family:"Times New Roman","serif"'>I/O</span><span
style='font-size:14.0pt;line-height:172%;font-family:黑体;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>流操作</span><span
lang=EN-US style='font-size:14.0pt;line-height:172%;font-family:"Times New Roman","serif"'><o:p></o:p></span></h2>

<p class=MsoNormal style='text-indent:21.0pt;line-height:150%'><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>上面我们学的</span><span lang=EN-US>API</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>操作</span><span lang=EN-US>HDFS</span><span style='font-family:
宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:"Times New Roman"'>系统都是框架封装好的。那么如果我们想自己实现上述</span><span
lang=EN-US>API</span><span style='font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>的操作该怎么实现呢？</span></p>

<p class=MsoNormal style='text-indent:21.0pt;line-height:150%'><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>我们可以采用</span><span lang=EN-US>IO</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>流的方式实现数据的上传和下载。</span></p>

<h3 style='margin:0cm;margin-bottom:.0001pt'><span lang=EN-US style='font-size:
14.0pt;line-height:172%'>3.3.1 HDFS</span><span style='font-size:14.0pt;
line-height:172%;font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>文件上传</span><span lang=EN-US
style='font-size:14.0pt;line-height:172%'><o:p></o:p></span></h3>

<p class=10 style='margin-top:6.2pt;text-indent:22.0pt'><span lang=EN-US>1</span><span
style='font-family:黑体;mso-ascii-font-family:Arial;mso-hansi-font-family:Arial'>．需求：把本地</span><span
lang=EN-US>e</span><span style='font-family:黑体;mso-ascii-font-family:Arial;
mso-hansi-font-family:Arial'>盘上的</span><span lang=EN-US>banhua.txt</span><span
style='font-family:黑体;mso-ascii-font-family:Arial;mso-hansi-font-family:Arial'>文件上传到</span><span
lang=EN-US>HDFS</span><span style='font-family:黑体;mso-ascii-font-family:Arial;
mso-hansi-font-family:Arial'>根目录</span></p>

<p class=10 style='margin-top:6.2pt;text-indent:22.0pt'><span lang=EN-US>2</span><span
style='font-family:黑体;mso-ascii-font-family:Arial;mso-hansi-font-family:Arial'>．编写代码</span></p>

<div style='mso-element:para-border-div;border:none windowtext 1.0pt;
mso-border-alt:none windowtext 0cm;padding:1.0pt 4.0pt 1.0pt 4.0pt;background:
#E0E0E0;margin-left:21.0pt;margin-right:0cm'>

<p class=a style='margin-left:0cm;mso-para-margin-left:2.0gd;background:#E0E0E0;
mso-layout-grid-align:none;punctuation-trim:leading;border:none;mso-border-alt:
none windowtext 0cm;padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span
lang=EN-US style='font-size:10.0pt;mso-bidi-font-size:10.5pt'>@Test<o:p></o:p></span></p>

<p class=a style='margin-left:0cm;mso-para-margin-left:2.0gd;background:#E0E0E0;
mso-layout-grid-align:none;punctuation-trim:leading;border:none;mso-border-alt:
none windowtext 0cm;padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span
lang=EN-US style='font-size:10.0pt;mso-bidi-font-size:10.5pt'>public void
putFileToHDFS() throws IOException, InterruptedException, URISyntaxException {<o:p></o:p></span></p>

<p class=a style='margin-left:0cm;mso-para-margin-left:2.0gd;background:#E0E0E0;
mso-layout-grid-align:none;punctuation-trim:leading;border:none;mso-border-alt:
none windowtext 0cm;padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span
lang=EN-US style='font-size:10.0pt;mso-bidi-font-size:10.5pt'><o:p>&nbsp;</o:p></span></p>

<p class=a style='margin-left:0cm;mso-para-margin-left:2.0gd;background:#E0E0E0;
mso-layout-grid-align:none;punctuation-trim:leading;border:none;mso-border-alt:
none windowtext 0cm;padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span
lang=EN-US style='font-size:10.0pt;mso-bidi-font-size:10.5pt'><span
style='mso-tab-count:1'>    </span>// 1 </span><span style='font-size:10.0pt;
mso-bidi-font-size:10.5pt;font-family:宋体;mso-ascii-font-family:"Courier New";
mso-hansi-font-family:"Courier New"'>获取文件系统</span><span lang=EN-US
style='font-size:10.0pt;mso-bidi-font-size:10.5pt'><o:p></o:p></span></p>

<p class=a style='margin-left:0cm;mso-para-margin-left:2.0gd;background:#E0E0E0;
mso-layout-grid-align:none;punctuation-trim:leading;border:none;mso-border-alt:
none windowtext 0cm;padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span
lang=EN-US style='font-size:10.0pt;mso-bidi-font-size:10.5pt'><span
style='mso-tab-count:1'>    </span>Configuration configuration = new
Configuration();<o:p></o:p></span></p>

<p class=a style='margin-left:0cm;mso-para-margin-left:2.0gd;background:#E0E0E0;
mso-layout-grid-align:none;punctuation-trim:leading;border:none;mso-border-alt:
none windowtext 0cm;padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span
lang=EN-US style='font-size:10.0pt;mso-bidi-font-size:10.5pt'><span
style='mso-tab-count:1'>    </span>FileSystem fs = FileSystem.get(new
URI(&quot;hdfs://hadoop102:9000&quot;), configuration, &quot;atguigu&quot;);<o:p></o:p></span></p>

<p class=a style='margin-left:0cm;mso-para-margin-left:2.0gd;background:#E0E0E0;
mso-layout-grid-align:none;punctuation-trim:leading;border:none;mso-border-alt:
none windowtext 0cm;padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span
lang=EN-US style='font-size:10.0pt;mso-bidi-font-size:10.5pt'><o:p>&nbsp;</o:p></span></p>

<p class=a style='margin-left:0cm;mso-para-margin-left:2.0gd;background:#E0E0E0;
mso-layout-grid-align:none;punctuation-trim:leading;border:none;mso-border-alt:
none windowtext 0cm;padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span
lang=EN-US style='font-size:10.0pt;mso-bidi-font-size:10.5pt'><span
style='mso-tab-count:1'>    </span>// 2 </span><span style='font-size:10.0pt;
mso-bidi-font-size:10.5pt;font-family:宋体;mso-ascii-font-family:"Courier New";
mso-hansi-font-family:"Courier New"'>创建输入流</span><span lang=EN-US
style='font-size:10.0pt;mso-bidi-font-size:10.5pt'><o:p></o:p></span></p>

<p class=a style='margin-left:0cm;mso-para-margin-left:2.0gd;background:#E0E0E0;
mso-layout-grid-align:none;punctuation-trim:leading;border:none;mso-border-alt:
none windowtext 0cm;padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span
lang=EN-US style='font-size:10.0pt;mso-bidi-font-size:10.5pt'><span
style='mso-tab-count:1'>    </span>FileInputStream fis = new
FileInputStream(new File(&quot;e:/banhua.txt&quot;));<o:p></o:p></span></p>

<p class=a style='margin-left:0cm;mso-para-margin-left:2.0gd;background:#E0E0E0;
mso-layout-grid-align:none;punctuation-trim:leading;border:none;mso-border-alt:
none windowtext 0cm;padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span
lang=EN-US style='font-size:10.0pt;mso-bidi-font-size:10.5pt'><o:p>&nbsp;</o:p></span></p>

<p class=a style='margin-left:0cm;mso-para-margin-left:2.0gd;background:#E0E0E0;
mso-layout-grid-align:none;punctuation-trim:leading;border:none;mso-border-alt:
none windowtext 0cm;padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span
lang=EN-US style='font-size:10.0pt;mso-bidi-font-size:10.5pt'><span
style='mso-tab-count:1'>    </span>// 3 </span><span style='font-size:10.0pt;
mso-bidi-font-size:10.5pt;font-family:宋体;mso-ascii-font-family:"Courier New";
mso-hansi-font-family:"Courier New"'>获取输出流</span><span lang=EN-US
style='font-size:10.0pt;mso-bidi-font-size:10.5pt'><o:p></o:p></span></p>

<p class=a style='margin-left:0cm;mso-para-margin-left:2.0gd;background:#E0E0E0;
mso-layout-grid-align:none;punctuation-trim:leading;border:none;mso-border-alt:
none windowtext 0cm;padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span
lang=EN-US style='font-size:10.0pt;mso-bidi-font-size:10.5pt'><span
style='mso-tab-count:1'>    </span>FSDataOutputStream fos = fs.create(new
Path(&quot;/banhua.txt&quot;));<o:p></o:p></span></p>

<p class=a style='margin-left:0cm;mso-para-margin-left:2.0gd;background:#E0E0E0;
mso-layout-grid-align:none;punctuation-trim:leading;border:none;mso-border-alt:
none windowtext 0cm;padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span
lang=EN-US style='font-size:10.0pt;mso-bidi-font-size:10.5pt'><o:p>&nbsp;</o:p></span></p>

<p class=a style='margin-left:0cm;mso-para-margin-left:2.0gd;background:#E0E0E0;
mso-layout-grid-align:none;punctuation-trim:leading;border:none;mso-border-alt:
none windowtext 0cm;padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span
lang=EN-US style='font-size:10.0pt;mso-bidi-font-size:10.5pt'><span
style='mso-tab-count:1'>    </span>// 4 </span><span style='font-size:10.0pt;
mso-bidi-font-size:10.5pt;font-family:宋体;mso-ascii-font-family:"Courier New";
mso-hansi-font-family:"Courier New"'>流对拷</span><span lang=EN-US
style='font-size:10.0pt;mso-bidi-font-size:10.5pt'><o:p></o:p></span></p>

<p class=a style='margin-left:0cm;mso-para-margin-left:2.0gd;background:#E0E0E0;
mso-layout-grid-align:none;punctuation-trim:leading;border:none;mso-border-alt:
none windowtext 0cm;padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span
lang=EN-US style='font-size:10.0pt;mso-bidi-font-size:10.5pt'><span
style='mso-tab-count:1'>    </span>IOUtils.copyBytes(fis, fos, configuration);<o:p></o:p></span></p>

<p class=a style='margin-left:0cm;mso-para-margin-left:2.0gd;background:#E0E0E0;
mso-layout-grid-align:none;punctuation-trim:leading;border:none;mso-border-alt:
none windowtext 0cm;padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span
lang=EN-US style='font-size:10.0pt;mso-bidi-font-size:10.5pt'><o:p>&nbsp;</o:p></span></p>

<p class=a style='margin-left:0cm;mso-para-margin-left:2.0gd;background:#E0E0E0;
mso-layout-grid-align:none;punctuation-trim:leading;border:none;mso-border-alt:
none windowtext 0cm;padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span
lang=EN-US style='font-size:10.0pt;mso-bidi-font-size:10.5pt'><span
style='mso-tab-count:1'>    </span>// 5 </span><span style='font-size:10.0pt;
mso-bidi-font-size:10.5pt;font-family:宋体;mso-ascii-font-family:"Courier New";
mso-hansi-font-family:"Courier New"'>关闭资源</span><span lang=EN-US
style='font-size:10.0pt;mso-bidi-font-size:10.5pt'><o:p></o:p></span></p>

<p class=a style='margin-left:0cm;mso-para-margin-left:2.0gd;background:#E0E0E0;
mso-layout-grid-align:none;punctuation-trim:leading;border:none;mso-border-alt:
none windowtext 0cm;padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span
lang=EN-US style='font-size:10.0pt;mso-bidi-font-size:10.5pt'><span
style='mso-tab-count:1'>    </span>IOUtils.closeStream(fos);<o:p></o:p></span></p>

<p class=a style='margin-left:0cm;mso-para-margin-left:2.0gd;background:#E0E0E0;
mso-layout-grid-align:none;punctuation-trim:leading;border:none;mso-border-alt:
none windowtext 0cm;padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span
lang=EN-US style='font-size:10.0pt;mso-bidi-font-size:10.5pt'><span
style='mso-tab-count:1'>    </span>IOUtils.closeStream(fis);<o:p></o:p></span></p>

<p class=a style='margin-left:0cm;mso-para-margin-left:2.0gd;background:#E0E0E0;
mso-layout-grid-align:none;punctuation-trim:leading;border:none;mso-border-alt:
none windowtext 0cm;padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span
lang=EN-US style='font-size:10.0pt;mso-bidi-font-size:10.5pt'><span
style='mso-spacerun:yes'>    </span>fs.close();<o:p></o:p></span></p>

<p class=a style='margin-left:0cm;mso-para-margin-left:2.0gd;background:#E0E0E0;
mso-layout-grid-align:none;punctuation-trim:leading;border:none;mso-border-alt:
none windowtext 0cm;padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span
lang=EN-US style='font-size:10.0pt;mso-bidi-font-size:10.5pt'>}<o:p></o:p></span></p>

</div>

<h3 style='margin:0cm;margin-bottom:.0001pt'><span lang=EN-US style='font-size:
14.0pt;line-height:172%'>3.3.2 HDFS</span><span style='font-size:14.0pt;
line-height:172%;font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>文件下载</span><span lang=EN-US
style='font-size:14.0pt;line-height:172%'><o:p></o:p></span></h3>

<p class=10 style='margin-top:6.2pt;text-indent:22.0pt'><span lang=EN-US>1</span><span
style='font-family:黑体;mso-ascii-font-family:Arial;mso-hansi-font-family:Arial'>．需求：从</span><span
lang=EN-US>HDFS</span><span style='font-family:黑体;mso-ascii-font-family:Arial;
mso-hansi-font-family:Arial'>上下载</span><span lang=EN-US>banhua.txt</span><span
style='font-family:黑体;mso-ascii-font-family:Arial;mso-hansi-font-family:Arial'>文件到本地</span><span
lang=EN-US>e</span><span style='font-family:黑体;mso-ascii-font-family:Arial;
mso-hansi-font-family:Arial'>盘上</span></p>

<p class=10 style='margin-top:6.2pt;text-indent:22.0pt'><span lang=EN-US>2</span><span
style='font-family:黑体;mso-ascii-font-family:Arial;mso-hansi-font-family:Arial'>．编写代码</span></p>

<div style='mso-element:para-border-div;border:none windowtext 1.0pt;
mso-border-alt:none windowtext 0cm;padding:1.0pt 4.0pt 1.0pt 4.0pt;background:
#E0E0E0;margin-left:21.0pt;margin-right:0cm'>

<p class=a style='margin-left:0cm;mso-para-margin-left:2.0gd;background:#E0E0E0;
mso-layout-grid-align:none;punctuation-trim:leading;border:none;mso-border-alt:
none windowtext 0cm;padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span
lang=EN-US style='font-size:10.0pt;mso-bidi-font-size:10.5pt'>// </span><span
style='font-size:10.0pt;mso-bidi-font-size:10.5pt;font-family:宋体;mso-ascii-font-family:
"Courier New";mso-hansi-font-family:"Courier New"'>文件下载</span><span lang=EN-US
style='font-size:10.0pt;mso-bidi-font-size:10.5pt'><o:p></o:p></span></p>

<p class=a style='margin-left:0cm;mso-para-margin-left:2.0gd;background:#E0E0E0;
mso-layout-grid-align:none;punctuation-trim:leading;border:none;mso-border-alt:
none windowtext 0cm;padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span
lang=EN-US style='font-size:10.0pt;mso-bidi-font-size:10.5pt'>@Test<o:p></o:p></span></p>

<p class=a style='margin-left:0cm;mso-para-margin-left:2.0gd;background:#E0E0E0;
mso-layout-grid-align:none;punctuation-trim:leading;border:none;mso-border-alt:
none windowtext 0cm;padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span
lang=EN-US style='font-size:10.0pt;mso-bidi-font-size:10.5pt'>public void getFileFromHDFS()
throws IOException, InterruptedException, URISyntaxException{<o:p></o:p></span></p>

<p class=a style='margin-left:0cm;mso-para-margin-left:2.0gd;background:#E0E0E0;
mso-layout-grid-align:none;punctuation-trim:leading;border:none;mso-border-alt:
none windowtext 0cm;padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span
lang=EN-US style='font-size:10.0pt;mso-bidi-font-size:10.5pt'><o:p>&nbsp;</o:p></span></p>

<p class=a style='margin-left:0cm;mso-para-margin-left:2.0gd;background:#E0E0E0;
mso-layout-grid-align:none;punctuation-trim:leading;border:none;mso-border-alt:
none windowtext 0cm;padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span
lang=EN-US style='font-size:10.0pt;mso-bidi-font-size:10.5pt'><span
style='mso-tab-count:1'>    </span>// 1 </span><span style='font-size:10.0pt;
mso-bidi-font-size:10.5pt;font-family:宋体;mso-ascii-font-family:"Courier New";
mso-hansi-font-family:"Courier New"'>获取文件系统</span><span lang=EN-US
style='font-size:10.0pt;mso-bidi-font-size:10.5pt'><o:p></o:p></span></p>

<p class=a style='margin-left:0cm;mso-para-margin-left:2.0gd;background:#E0E0E0;
mso-layout-grid-align:none;punctuation-trim:leading;border:none;mso-border-alt:
none windowtext 0cm;padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span
lang=EN-US style='font-size:10.0pt;mso-bidi-font-size:10.5pt'><span
style='mso-tab-count:1'>    </span>Configuration configuration = new
Configuration();<o:p></o:p></span></p>

<p class=a style='margin-left:0cm;mso-para-margin-left:2.0gd;background:#E0E0E0;
mso-layout-grid-align:none;punctuation-trim:leading;border:none;mso-border-alt:
none windowtext 0cm;padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span
lang=EN-US style='font-size:10.0pt;mso-bidi-font-size:10.5pt'><span
style='mso-tab-count:1'>    </span>FileSystem fs = FileSystem.get(new
URI(&quot;hdfs://hadoop102:9000&quot;), configuration, &quot;atguigu&quot;);<o:p></o:p></span></p>

<p class=a style='margin-left:0cm;mso-para-margin-left:2.0gd;background:#E0E0E0;
mso-layout-grid-align:none;punctuation-trim:leading;border:none;mso-border-alt:
none windowtext 0cm;padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span
lang=EN-US style='font-size:10.0pt;mso-bidi-font-size:10.5pt'><span
style='mso-tab-count:2'>       </span><o:p></o:p></span></p>

<p class=a style='margin-left:0cm;mso-para-margin-left:2.0gd;background:#E0E0E0;
mso-layout-grid-align:none;punctuation-trim:leading;border:none;mso-border-alt:
none windowtext 0cm;padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span
lang=EN-US style='font-size:10.0pt;mso-bidi-font-size:10.5pt'><span
style='mso-tab-count:1'>    </span>// 2 </span><span style='font-size:10.0pt;
mso-bidi-font-size:10.5pt;font-family:宋体;mso-ascii-font-family:"Courier New";
mso-hansi-font-family:"Courier New"'>获取输入流</span><span lang=EN-US
style='font-size:10.0pt;mso-bidi-font-size:10.5pt'><o:p></o:p></span></p>

<p class=a style='margin-left:0cm;mso-para-margin-left:2.0gd;background:#E0E0E0;
mso-layout-grid-align:none;punctuation-trim:leading;border:none;mso-border-alt:
none windowtext 0cm;padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span
lang=EN-US style='font-size:10.0pt;mso-bidi-font-size:10.5pt'><span
style='mso-tab-count:1'>    </span>FSDataInputStream fis = fs.open(new
Path(&quot;/banhua.txt&quot;));<o:p></o:p></span></p>

<p class=a style='margin-left:0cm;mso-para-margin-left:2.0gd;background:#E0E0E0;
mso-layout-grid-align:none;punctuation-trim:leading;border:none;mso-border-alt:
none windowtext 0cm;padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span
lang=EN-US style='font-size:10.0pt;mso-bidi-font-size:10.5pt'><span
style='mso-tab-count:2'>       </span><o:p></o:p></span></p>

<p class=a style='margin-left:0cm;mso-para-margin-left:2.0gd;background:#E0E0E0;
mso-layout-grid-align:none;punctuation-trim:leading;border:none;mso-border-alt:
none windowtext 0cm;padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span
lang=EN-US style='font-size:10.0pt;mso-bidi-font-size:10.5pt'><span
style='mso-tab-count:1'>    </span>// 3 </span><span style='font-size:10.0pt;
mso-bidi-font-size:10.5pt;font-family:宋体;mso-ascii-font-family:"Courier New";
mso-hansi-font-family:"Courier New"'>获取输出流</span><span lang=EN-US
style='font-size:10.0pt;mso-bidi-font-size:10.5pt'><o:p></o:p></span></p>

<p class=a style='margin-left:0cm;mso-para-margin-left:2.0gd;background:#E0E0E0;
mso-layout-grid-align:none;punctuation-trim:leading;border:none;mso-border-alt:
none windowtext 0cm;padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span
lang=EN-US style='font-size:10.0pt;mso-bidi-font-size:10.5pt'><span
style='mso-tab-count:1'>    </span>FileOutputStream fos = new
FileOutputStream(new File(&quot;e:/banhua.txt&quot;));<o:p></o:p></span></p>

<p class=a style='margin-left:0cm;mso-para-margin-left:2.0gd;background:#E0E0E0;
mso-layout-grid-align:none;punctuation-trim:leading;border:none;mso-border-alt:
none windowtext 0cm;padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span
lang=EN-US style='font-size:10.0pt;mso-bidi-font-size:10.5pt'><span
style='mso-tab-count:2'>       </span><o:p></o:p></span></p>

<p class=a style='margin-left:0cm;mso-para-margin-left:2.0gd;background:#E0E0E0;
mso-layout-grid-align:none;punctuation-trim:leading;border:none;mso-border-alt:
none windowtext 0cm;padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span
lang=EN-US style='font-size:10.0pt;mso-bidi-font-size:10.5pt'><span
style='mso-tab-count:1'>    </span>// 4 </span><span style='font-size:10.0pt;
mso-bidi-font-size:10.5pt;font-family:宋体;mso-ascii-font-family:"Courier New";
mso-hansi-font-family:"Courier New"'>流的对拷</span><span lang=EN-US
style='font-size:10.0pt;mso-bidi-font-size:10.5pt'><o:p></o:p></span></p>

<p class=a style='margin-left:0cm;mso-para-margin-left:2.0gd;background:#E0E0E0;
mso-layout-grid-align:none;punctuation-trim:leading;border:none;mso-border-alt:
none windowtext 0cm;padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span
lang=EN-US style='font-size:10.0pt;mso-bidi-font-size:10.5pt'><span
style='mso-tab-count:1'>    </span>IOUtils.copyBytes(fis, fos, configuration);<o:p></o:p></span></p>

<p class=a style='margin-left:0cm;mso-para-margin-left:2.0gd;background:#E0E0E0;
mso-layout-grid-align:none;punctuation-trim:leading;border:none;mso-border-alt:
none windowtext 0cm;padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span
lang=EN-US style='font-size:10.0pt;mso-bidi-font-size:10.5pt'><span
style='mso-tab-count:2'>       </span><o:p></o:p></span></p>

<p class=a style='margin-left:0cm;mso-para-margin-left:2.0gd;background:#E0E0E0;
mso-layout-grid-align:none;punctuation-trim:leading;border:none;mso-border-alt:
none windowtext 0cm;padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span
lang=EN-US style='font-size:10.0pt;mso-bidi-font-size:10.5pt'><span
style='mso-tab-count:1'>    </span>// 5 </span><span style='font-size:10.0pt;
mso-bidi-font-size:10.5pt;font-family:宋体;mso-ascii-font-family:"Courier New";
mso-hansi-font-family:"Courier New"'>关闭资源</span><span lang=EN-US
style='font-size:10.0pt;mso-bidi-font-size:10.5pt'><o:p></o:p></span></p>

<p class=a style='margin-left:0cm;mso-para-margin-left:2.0gd;background:#E0E0E0;
mso-layout-grid-align:none;punctuation-trim:leading;border:none;mso-border-alt:
none windowtext 0cm;padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span
lang=EN-US style='font-size:10.0pt;mso-bidi-font-size:10.5pt'><span
style='mso-tab-count:1'>    </span>IOUtils.closeStream(fos);<o:p></o:p></span></p>

<p class=a style='margin-left:0cm;mso-para-margin-left:2.0gd;background:#E0E0E0;
mso-layout-grid-align:none;punctuation-trim:leading;border:none;mso-border-alt:
none windowtext 0cm;padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span
lang=EN-US style='font-size:10.0pt;mso-bidi-font-size:10.5pt'><span
style='mso-tab-count:1'>    </span>IOUtils.closeStream(fis);<o:p></o:p></span></p>

<p class=a style='margin-left:0cm;mso-para-margin-left:2.0gd;background:#E0E0E0;
mso-layout-grid-align:none;punctuation-trim:leading;border:none;mso-border-alt:
none windowtext 0cm;padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span
lang=EN-US style='font-size:10.0pt;mso-bidi-font-size:10.5pt'><span
style='mso-tab-count:1'>    </span>fs.close();<o:p></o:p></span></p>

<p class=a style='margin-left:0cm;mso-para-margin-left:2.0gd;background:#E0E0E0;
mso-layout-grid-align:none;punctuation-trim:leading;border:none;mso-border-alt:
none windowtext 0cm;padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span
lang=EN-US style='font-size:10.0pt;mso-bidi-font-size:10.5pt'>}<o:p></o:p></span></p>

</div>

<h3 style='margin:0cm;margin-bottom:.0001pt'><span lang=EN-US style='font-size:
14.0pt;line-height:172%'>3.3.3 </span><span style='font-size:14.0pt;line-height:
172%;font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>定位文件读取</span><span lang=EN-US style='font-size:14.0pt;
line-height:172%'><o:p></o:p></span></h3>

<p class=10 style='margin-top:6.2pt;text-indent:22.0pt'><span lang=EN-US>1</span><span
style='font-family:黑体;mso-ascii-font-family:Arial;mso-hansi-font-family:Arial'>．需求：分块读取</span><span
lang=EN-US>HDFS</span><span style='font-family:黑体;mso-ascii-font-family:Arial;
mso-hansi-font-family:Arial'>上的大文件，比如根目录下的</span><span lang=EN-US>/</span><span
lang=EN-US style='font-size:10.5pt'>hadoop-2.7.2.tar.gz</span></p>

<p class=10 style='margin-top:6.2pt;text-indent:22.0pt'><span lang=EN-US>2</span><span
style='font-family:黑体;mso-ascii-font-family:Arial;mso-hansi-font-family:Arial'>．编写代码</span></p>

<p class=MsoNormal style='text-indent:21.0pt;line-height:150%'><span
style='mso-bidi-font-size:10.5pt;line-height:150%;font-family:宋体;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>（</span><span
lang=EN-US style='mso-bidi-font-size:10.5pt;line-height:150%'>1</span><span
style='mso-bidi-font-size:10.5pt;line-height:150%;font-family:宋体;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>）下载第一块</span><span
lang=EN-US style='mso-bidi-font-size:10.5pt;line-height:150%'><o:p></o:p></span></p>

<div style='mso-element:para-border-div;border:none windowtext 1.0pt;
mso-border-alt:none windowtext 0cm;padding:1.0pt 4.0pt 1.0pt 4.0pt;background:
#E0E0E0;margin-left:21.0pt;margin-right:0cm'>

<p class=a style='margin-left:0cm;mso-para-margin-left:2.0gd;background:#E0E0E0;
mso-layout-grid-align:none;punctuation-trim:leading;border:none;mso-border-alt:
none windowtext 0cm;padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span
lang=EN-US style='font-size:10.5pt'>@Test<o:p></o:p></span></p>

<p class=a style='margin-left:0cm;mso-para-margin-left:2.0gd;background:#E0E0E0;
mso-layout-grid-align:none;punctuation-trim:leading;border:none;mso-border-alt:
none windowtext 0cm;padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span
lang=EN-US style='font-size:10.5pt'>public void readFileSeek1() throws
IOException, InterruptedException, URISyntaxException{<o:p></o:p></span></p>

<p class=a style='margin-left:0cm;mso-para-margin-left:2.0gd;background:#E0E0E0;
mso-layout-grid-align:none;punctuation-trim:leading;border:none;mso-border-alt:
none windowtext 0cm;padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span
lang=EN-US style='font-size:10.5pt'><o:p>&nbsp;</o:p></span></p>

<p class=a style='margin-left:0cm;mso-para-margin-left:2.0gd;background:#E0E0E0;
mso-layout-grid-align:none;punctuation-trim:leading;border:none;mso-border-alt:
none windowtext 0cm;padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span
lang=EN-US style='font-size:10.5pt'><span style='mso-tab-count:1'>   </span>//
1 </span><span style='font-size:10.5pt;font-family:宋体;mso-ascii-font-family:
"Courier New";mso-hansi-font-family:"Courier New"'>获取文件系统</span><span
lang=EN-US style='font-size:10.5pt'><o:p></o:p></span></p>

<p class=a style='margin-left:0cm;mso-para-margin-left:2.0gd;background:#E0E0E0;
mso-layout-grid-align:none;punctuation-trim:leading;border:none;mso-border-alt:
none windowtext 0cm;padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span
lang=EN-US style='font-size:10.5pt'><span style='mso-tab-count:1'>   </span>Configuration
configuration = new Configuration();<o:p></o:p></span></p>

<p class=a style='margin-left:0cm;mso-para-margin-left:2.0gd;background:#E0E0E0;
mso-layout-grid-align:none;punctuation-trim:leading;border:none;mso-border-alt:
none windowtext 0cm;padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span
lang=EN-US style='font-size:10.5pt'><span style='mso-tab-count:1'>   </span>FileSystem
fs = FileSystem.get(new URI(&quot;hdfs://hadoop102:9000&quot;), configuration,
&quot;atguigu&quot;);<o:p></o:p></span></p>

<p class=a style='margin-left:0cm;mso-para-margin-left:2.0gd;background:#E0E0E0;
mso-layout-grid-align:none;punctuation-trim:leading;border:none;mso-border-alt:
none windowtext 0cm;padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span
lang=EN-US style='font-size:10.5pt'><span style='mso-tab-count:2'>      </span><o:p></o:p></span></p>

<p class=a style='margin-left:0cm;mso-para-margin-left:2.0gd;background:#E0E0E0;
mso-layout-grid-align:none;punctuation-trim:leading;border:none;mso-border-alt:
none windowtext 0cm;padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span
lang=EN-US style='font-size:10.5pt'><span style='mso-tab-count:1'>   </span>//
2 </span><span style='font-size:10.5pt;font-family:宋体;mso-ascii-font-family:
"Courier New";mso-hansi-font-family:"Courier New"'>获取输入流</span><span
lang=EN-US style='font-size:10.5pt'><o:p></o:p></span></p>

<p class=a style='margin-left:0cm;mso-para-margin-left:2.0gd;background:#E0E0E0;
mso-layout-grid-align:none;punctuation-trim:leading;border:none;mso-border-alt:
none windowtext 0cm;padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span
lang=EN-US style='font-size:10.5pt'><span style='mso-tab-count:1'>   </span>FSDataInputStream
fis = fs.open(new Path(&quot;/hadoop-2.7.2.tar.gz&quot;));<o:p></o:p></span></p>

<p class=a style='margin-left:0cm;mso-para-margin-left:2.0gd;background:#E0E0E0;
mso-layout-grid-align:none;punctuation-trim:leading;border:none;mso-border-alt:
none windowtext 0cm;padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span
lang=EN-US style='font-size:10.5pt'><span style='mso-tab-count:2'>      </span><o:p></o:p></span></p>

<p class=a style='margin-left:0cm;mso-para-margin-left:2.0gd;background:#E0E0E0;
mso-layout-grid-align:none;punctuation-trim:leading;border:none;mso-border-alt:
none windowtext 0cm;padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span
lang=EN-US style='font-size:10.5pt'><span style='mso-tab-count:1'>   </span>//
3 </span><span style='font-size:10.5pt;font-family:宋体;mso-ascii-font-family:
"Courier New";mso-hansi-font-family:"Courier New"'>创建输出流</span><span
lang=EN-US style='font-size:10.5pt'><o:p></o:p></span></p>

<p class=a style='margin-left:0cm;mso-para-margin-left:2.0gd;background:#E0E0E0;
mso-layout-grid-align:none;punctuation-trim:leading;border:none;mso-border-alt:
none windowtext 0cm;padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span
lang=EN-US style='font-size:10.5pt'><span style='mso-tab-count:1'>   </span>FileOutputStream
fos = new FileOutputStream(new File(&quot;e:/hadoop-2.7.2.tar.gz.part1&quot;));<o:p></o:p></span></p>

<p class=a style='margin-left:0cm;mso-para-margin-left:2.0gd;background:#E0E0E0;
mso-layout-grid-align:none;punctuation-trim:leading;border:none;mso-border-alt:
none windowtext 0cm;padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span
lang=EN-US style='font-size:10.5pt'><span style='mso-tab-count:2'>      </span><o:p></o:p></span></p>

<p class=a style='margin-left:0cm;mso-para-margin-left:2.0gd;background:#E0E0E0;
mso-layout-grid-align:none;punctuation-trim:leading;border:none;mso-border-alt:
none windowtext 0cm;padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span
lang=EN-US style='font-size:10.5pt'><span style='mso-tab-count:1'>   </span>//
4 </span><span style='font-size:10.5pt;font-family:宋体;mso-ascii-font-family:
"Courier New";mso-hansi-font-family:"Courier New"'>流的拷贝（只拷贝</span><span
lang=EN-US style='font-size:10.5pt'>128M</span><span style='font-size:10.5pt;
font-family:宋体;mso-ascii-font-family:"Courier New";mso-hansi-font-family:"Courier New"'>，第一块）</span><span
lang=EN-US style='font-size:10.5pt'><o:p></o:p></span></p>

<p class=a style='margin-left:0cm;mso-para-margin-left:2.0gd;background:#E0E0E0;
mso-layout-grid-align:none;punctuation-trim:leading;border:none;mso-border-alt:
none windowtext 0cm;padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span
lang=EN-US style='font-size:10.5pt'><span style='mso-tab-count:1'>   </span>byte[]
buf = new byte[1024];<o:p></o:p></span></p>

<p class=a style='margin-left:0cm;mso-para-margin-left:2.0gd;background:#E0E0E0;
mso-layout-grid-align:none;punctuation-trim:leading;border:none;mso-border-alt:
none windowtext 0cm;padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span
lang=EN-US style='font-size:10.5pt'><span style='mso-tab-count:2'>      </span><o:p></o:p></span></p>

<p class=a style='margin-left:0cm;mso-para-margin-left:2.0gd;background:#E0E0E0;
mso-layout-grid-align:none;punctuation-trim:leading;border:none;mso-border-alt:
none windowtext 0cm;padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span
lang=EN-US style='font-size:10.5pt'><span style='mso-tab-count:1'>   </span>for(int
i =0 ; i &lt; 1024 * 128; i++){<o:p></o:p></span></p>

<p class=a style='margin-left:0cm;mso-para-margin-left:2.0gd;background:#E0E0E0;
mso-layout-grid-align:none;punctuation-trim:leading;border:none;mso-border-alt:
none windowtext 0cm;padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span
lang=EN-US style='font-size:10.5pt'><span style='mso-tab-count:2'>      </span>fis.read(buf);<o:p></o:p></span></p>

<p class=a style='margin-left:0cm;mso-para-margin-left:2.0gd;background:#E0E0E0;
mso-layout-grid-align:none;punctuation-trim:leading;border:none;mso-border-alt:
none windowtext 0cm;padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span
lang=EN-US style='font-size:10.5pt'><span style='mso-tab-count:2'>      </span>fos.write(buf);<o:p></o:p></span></p>

<p class=a style='margin-left:0cm;mso-para-margin-left:2.0gd;background:#E0E0E0;
mso-layout-grid-align:none;punctuation-trim:leading;border:none;mso-border-alt:
none windowtext 0cm;padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span
lang=EN-US style='font-size:10.5pt'><span style='mso-tab-count:1'>   </span>}<o:p></o:p></span></p>

<p class=a style='margin-left:0cm;mso-para-margin-left:2.0gd;background:#E0E0E0;
mso-layout-grid-align:none;punctuation-trim:leading;border:none;mso-border-alt:
none windowtext 0cm;padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span
lang=EN-US style='font-size:10.5pt'><span style='mso-tab-count:2'>      </span><o:p></o:p></span></p>

<p class=a style='margin-left:0cm;mso-para-margin-left:2.0gd;background:#E0E0E0;
mso-layout-grid-align:none;punctuation-trim:leading;border:none;mso-border-alt:
none windowtext 0cm;padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span
lang=EN-US style='font-size:10.5pt'><span style='mso-tab-count:1'>   </span>//
5</span><span style='font-size:10.5pt;font-family:宋体;mso-ascii-font-family:
"Courier New";mso-hansi-font-family:"Courier New"'>关闭资源</span><span lang=EN-US
style='font-size:10.5pt'><o:p></o:p></span></p>

<p class=a style='margin-left:0cm;mso-para-margin-left:2.0gd;background:#E0E0E0;
mso-layout-grid-align:none;punctuation-trim:leading;border:none;mso-border-alt:
none windowtext 0cm;padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span
lang=EN-US style='font-size:10.5pt'><span style='mso-tab-count:1'>   </span>IOUtils.closeStream(fis);<o:p></o:p></span></p>

<p class=a style='margin-left:0cm;mso-para-margin-left:2.0gd;background:#E0E0E0;
mso-layout-grid-align:none;punctuation-trim:leading;border:none;mso-border-alt:
none windowtext 0cm;padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span
lang=EN-US style='font-size:10.5pt'><span style='mso-tab-count:1'>   </span>IOUtils.closeStream(fos);<o:p></o:p></span></p>

<p class=a style='margin-left:0cm;mso-para-margin-left:2.0gd;text-indent:21.0pt;
mso-char-indent-count:2.0;background:#E0E0E0;mso-layout-grid-align:none;
punctuation-trim:leading;border:none;mso-border-alt:none windowtext 0cm;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='font-size:10.5pt'>fs.close();<o:p></o:p></span></p>

<p class=a style='margin-left:0cm;mso-para-margin-left:2.0gd;background:#E0E0E0;
mso-layout-grid-align:none;punctuation-trim:leading;border:none;mso-border-alt:
none windowtext 0cm;padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span
lang=EN-US style='font-size:10.5pt'>}<o:p></o:p></span></p>

</div>

<p class=MsoNormal style='text-indent:21.0pt;line-height:150%'><span
style='mso-bidi-font-size:10.5pt;line-height:150%;font-family:宋体;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>（</span><span
lang=EN-US style='mso-bidi-font-size:10.5pt;line-height:150%'>2</span><span
style='mso-bidi-font-size:10.5pt;line-height:150%;font-family:宋体;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>）下载第二块</span><span
lang=EN-US style='mso-bidi-font-size:10.5pt;line-height:150%'><o:p></o:p></span></p>

<div style='mso-element:para-border-div;border:none windowtext 1.0pt;
mso-border-alt:none windowtext 0cm;padding:1.0pt 4.0pt 1.0pt 4.0pt;background:
#E0E0E0;margin-left:21.0pt;margin-right:0cm'>

<p class=a style='margin-left:0cm;mso-para-margin-left:2.0gd;background:#E0E0E0;
mso-layout-grid-align:none;punctuation-trim:leading;border:none;mso-border-alt:
none windowtext 0cm;padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span
lang=EN-US style='font-size:10.0pt;mso-bidi-font-size:10.5pt'>@Test<o:p></o:p></span></p>

<p class=a style='margin-left:0cm;mso-para-margin-left:2.0gd;background:#E0E0E0;
mso-layout-grid-align:none;punctuation-trim:leading;border:none;mso-border-alt:
none windowtext 0cm;padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span
lang=EN-US style='font-size:10.0pt;mso-bidi-font-size:10.5pt'>public void
readFileSeek2() throws IOException, InterruptedException, URISyntaxException{<o:p></o:p></span></p>

<p class=a style='margin-left:0cm;mso-para-margin-left:2.0gd;background:#E0E0E0;
mso-layout-grid-align:none;punctuation-trim:leading;border:none;mso-border-alt:
none windowtext 0cm;padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span
lang=EN-US style='font-size:10.0pt;mso-bidi-font-size:10.5pt'><o:p>&nbsp;</o:p></span></p>

<p class=a style='margin-left:0cm;mso-para-margin-left:2.0gd;background:#E0E0E0;
mso-layout-grid-align:none;punctuation-trim:leading;border:none;mso-border-alt:
none windowtext 0cm;padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span
lang=EN-US style='font-size:10.0pt;mso-bidi-font-size:10.5pt'><span
style='mso-tab-count:1'>    </span>// 1 </span><span style='font-size:10.0pt;
mso-bidi-font-size:10.5pt;font-family:宋体;mso-ascii-font-family:"Courier New";
mso-hansi-font-family:"Courier New"'>获取文件系统</span><span lang=EN-US
style='font-size:10.0pt;mso-bidi-font-size:10.5pt'><o:p></o:p></span></p>

<p class=a style='margin-left:0cm;mso-para-margin-left:2.0gd;background:#E0E0E0;
mso-layout-grid-align:none;punctuation-trim:leading;border:none;mso-border-alt:
none windowtext 0cm;padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span
lang=EN-US style='font-size:10.0pt;mso-bidi-font-size:10.5pt'><span
style='mso-tab-count:1'>    </span>Configuration configuration = new
Configuration();<o:p></o:p></span></p>

<p class=a style='margin-left:0cm;mso-para-margin-left:2.0gd;background:#E0E0E0;
mso-layout-grid-align:none;punctuation-trim:leading;border:none;mso-border-alt:
none windowtext 0cm;padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span
lang=EN-US style='font-size:10.0pt;mso-bidi-font-size:10.5pt'><span
style='mso-tab-count:1'>    </span>FileSystem fs = FileSystem.get(new
URI(&quot;hdfs://hadoop102:9000&quot;), configuration, &quot;atguigu&quot;);<o:p></o:p></span></p>

<p class=a style='margin-left:0cm;mso-para-margin-left:2.0gd;background:#E0E0E0;
mso-layout-grid-align:none;punctuation-trim:leading;border:none;mso-border-alt:
none windowtext 0cm;padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span
lang=EN-US style='font-size:10.0pt;mso-bidi-font-size:10.5pt'><span
style='mso-tab-count:2'>       </span><o:p></o:p></span></p>

<p class=a style='margin-left:0cm;mso-para-margin-left:2.0gd;background:#E0E0E0;
mso-layout-grid-align:none;punctuation-trim:leading;border:none;mso-border-alt:
none windowtext 0cm;padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span
lang=EN-US style='font-size:10.0pt;mso-bidi-font-size:10.5pt'><span
style='mso-tab-count:1'>    </span>// 2 </span><span style='font-size:10.0pt;
mso-bidi-font-size:10.5pt;font-family:宋体;mso-ascii-font-family:"Courier New";
mso-hansi-font-family:"Courier New"'>打开输入流</span><span lang=EN-US
style='font-size:10.0pt;mso-bidi-font-size:10.5pt'><o:p></o:p></span></p>

<p class=a style='margin-left:0cm;mso-para-margin-left:2.0gd;background:#E0E0E0;
mso-layout-grid-align:none;punctuation-trim:leading;border:none;mso-border-alt:
none windowtext 0cm;padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span
lang=EN-US style='font-size:10.0pt;mso-bidi-font-size:10.5pt'><span
style='mso-tab-count:1'>    </span>FSDataInputStream fis = fs.open(new
Path(&quot;/hadoop-2.7.2.tar.gz&quot;));<o:p></o:p></span></p>

<p class=a style='margin-left:0cm;mso-para-margin-left:2.0gd;background:#E0E0E0;
mso-layout-grid-align:none;punctuation-trim:leading;border:none;mso-border-alt:
none windowtext 0cm;padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span
lang=EN-US style='font-size:10.0pt;mso-bidi-font-size:10.5pt'><span
style='mso-tab-count:2'>       </span><o:p></o:p></span></p>

<p class=a style='margin-left:0cm;mso-para-margin-left:2.0gd;background:#E0E0E0;
mso-layout-grid-align:none;punctuation-trim:leading;border:none;mso-border-alt:
none windowtext 0cm;padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span
lang=EN-US style='font-size:10.0pt;mso-bidi-font-size:10.5pt'><span
style='mso-tab-count:1'>    </span>// 3 </span><span style='font-size:10.0pt;
mso-bidi-font-size:10.5pt;font-family:宋体;mso-ascii-font-family:"Courier New";
mso-hansi-font-family:"Courier New"'>定位输入数据位置（指定读取的起点）</span><span lang=EN-US
style='font-size:10.0pt;mso-bidi-font-size:10.5pt'><o:p></o:p></span></p>

<p class=a style='margin-left:0cm;mso-para-margin-left:2.0gd;background:#E0E0E0;
mso-layout-grid-align:none;punctuation-trim:leading;border:none;mso-border-alt:
none windowtext 0cm;padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span
lang=EN-US style='font-size:10.0pt;mso-bidi-font-size:10.5pt'><span
style='mso-tab-count:1'>    </span>fis.seek(1024*1024*128);<o:p></o:p></span></p>

<p class=a style='margin-left:0cm;mso-para-margin-left:2.0gd;background:#E0E0E0;
mso-layout-grid-align:none;punctuation-trim:leading;border:none;mso-border-alt:
none windowtext 0cm;padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span
lang=EN-US style='font-size:10.0pt;mso-bidi-font-size:10.5pt'><span
style='mso-tab-count:2'>       </span><o:p></o:p></span></p>

<p class=a style='margin-left:0cm;mso-para-margin-left:2.0gd;background:#E0E0E0;
mso-layout-grid-align:none;punctuation-trim:leading;border:none;mso-border-alt:
none windowtext 0cm;padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span
lang=EN-US style='font-size:10.0pt;mso-bidi-font-size:10.5pt'><span
style='mso-tab-count:1'>    </span>// 4 </span><span style='font-size:10.0pt;
mso-bidi-font-size:10.5pt;font-family:宋体;mso-ascii-font-family:"Courier New";
mso-hansi-font-family:"Courier New"'>创建输出流</span><span lang=EN-US
style='font-size:10.0pt;mso-bidi-font-size:10.5pt'><o:p></o:p></span></p>

<p class=a style='margin-left:0cm;mso-para-margin-left:2.0gd;background:#E0E0E0;
mso-layout-grid-align:none;punctuation-trim:leading;border:none;mso-border-alt:
none windowtext 0cm;padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span
lang=EN-US style='font-size:10.0pt;mso-bidi-font-size:10.5pt'><span
style='mso-tab-count:1'>    </span>FileOutputStream fos = new
FileOutputStream(new File(&quot;e:/hadoop-2.7.2.tar.gz.part2&quot;));<o:p></o:p></span></p>

<p class=a style='margin-left:0cm;mso-para-margin-left:2.0gd;background:#E0E0E0;
mso-layout-grid-align:none;punctuation-trim:leading;border:none;mso-border-alt:
none windowtext 0cm;padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span
lang=EN-US style='font-size:10.0pt;mso-bidi-font-size:10.5pt'><span
style='mso-tab-count:2'>       </span><o:p></o:p></span></p>

<p class=a style='margin-left:0cm;mso-para-margin-left:2.0gd;background:#E0E0E0;
mso-layout-grid-align:none;punctuation-trim:leading;border:none;mso-border-alt:
none windowtext 0cm;padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span
lang=EN-US style='font-size:10.0pt;mso-bidi-font-size:10.5pt'><span
style='mso-tab-count:1'>    </span>// 5 </span><span style='font-size:10.0pt;
mso-bidi-font-size:10.5pt;font-family:宋体;mso-ascii-font-family:"Courier New";
mso-hansi-font-family:"Courier New"'>流的对拷</span><span lang=EN-US
style='font-size:10.0pt;mso-bidi-font-size:10.5pt'><o:p></o:p></span></p>

<p class=a style='margin-left:0cm;mso-para-margin-left:2.0gd;background:#E0E0E0;
mso-layout-grid-align:none;punctuation-trim:leading;border:none;mso-border-alt:
none windowtext 0cm;padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span
lang=EN-US style='font-size:10.0pt;mso-bidi-font-size:10.5pt'><span
style='mso-tab-count:1'>    </span>IOUtils.copyBytes(fis, fos, configuration);<o:p></o:p></span></p>

<p class=a style='margin-left:0cm;mso-para-margin-left:2.0gd;background:#E0E0E0;
mso-layout-grid-align:none;punctuation-trim:leading;border:none;mso-border-alt:
none windowtext 0cm;padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span
lang=EN-US style='font-size:10.0pt;mso-bidi-font-size:10.5pt'><span
style='mso-tab-count:2'>       </span><o:p></o:p></span></p>

<p class=a style='margin-left:0cm;mso-para-margin-left:2.0gd;background:#E0E0E0;
mso-layout-grid-align:none;punctuation-trim:leading;border:none;mso-border-alt:
none windowtext 0cm;padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span
lang=EN-US style='font-size:10.0pt;mso-bidi-font-size:10.5pt'><span
style='mso-tab-count:1'>    </span>// 6 </span><span style='font-size:10.0pt;
mso-bidi-font-size:10.5pt;font-family:宋体;mso-ascii-font-family:"Courier New";
mso-hansi-font-family:"Courier New"'>关闭资源</span><span lang=EN-US
style='font-size:10.0pt;mso-bidi-font-size:10.5pt'><o:p></o:p></span></p>

<p class=a style='margin-left:0cm;mso-para-margin-left:2.0gd;background:#E0E0E0;
mso-layout-grid-align:none;punctuation-trim:leading;border:none;mso-border-alt:
none windowtext 0cm;padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span
lang=EN-US style='font-size:10.0pt;mso-bidi-font-size:10.5pt'><span
style='mso-tab-count:1'>    </span>IOUtils.closeStream(fis);<o:p></o:p></span></p>

<p class=a style='margin-left:0cm;mso-para-margin-left:2.0gd;background:#E0E0E0;
mso-layout-grid-align:none;punctuation-trim:leading;border:none;mso-border-alt:
none windowtext 0cm;padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span
lang=EN-US style='font-size:10.0pt;mso-bidi-font-size:10.5pt'><span
style='mso-tab-count:1'>    </span>IOUtils.closeStream(fos);<o:p></o:p></span></p>

<p class=a style='margin-left:0cm;mso-para-margin-left:2.0gd;background:#E0E0E0;
mso-layout-grid-align:none;punctuation-trim:leading;border:none;mso-border-alt:
none windowtext 0cm;padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span
lang=EN-US style='font-size:10.0pt;mso-bidi-font-size:10.5pt'>}<o:p></o:p></span></p>

</div>

<p class=MsoNormal style='text-indent:21.0pt;line-height:150%'><span
style='mso-bidi-font-size:10.5pt;line-height:150%;font-family:宋体;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>（</span><span
lang=EN-US style='mso-bidi-font-size:10.5pt;line-height:150%'>3</span><span
style='mso-bidi-font-size:10.5pt;line-height:150%;font-family:宋体;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>）合并文件</span><span
lang=EN-US style='mso-bidi-font-size:10.5pt;line-height:150%'><o:p></o:p></span></p>

<p class=MsoNormal style='text-indent:21.0pt;line-height:150%'><span
lang=EN-US style='mso-no-proof:yes'><v:shape id="图片_x0020_16" o:spid="_x0000_i1110"
 type="#_x0000_t75" style='width:495pt;height:36.6pt;visibility:visible;
 mso-wrap-style:square'>
 <img src="Hadoop_02HDFS.files/image019.png" o:title=""/>
</v:shape></span><span lang=EN-US style='mso-bidi-font-size:10.5pt;line-height:
150%'><o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:21.0pt;mso-para-margin-left:2.0gd;
line-height:150%'><span style='font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>在</span><span lang=EN-US>Window</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>命令窗口中进入到目录</span><span lang=EN-US>E:\</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>，然后执行如下命令，对数据进行合并</span></p>

<p class=MsoNormal style='margin-left:21.0pt;mso-para-margin-left:2.0gd;
line-height:150%'><span lang=EN-US>type hadoop-2.7.2.tar.gz.part2 &gt;&gt;
hadoop-2.7.2.tar.gz.part1<span style='mso-spacerun:yes'>  </span>// </span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>把</span><span lang=EN-US>part2</span><span style='font-family:
宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:"Times New Roman"'>的内容追加到</span><span
lang=EN-US>part1</span></p>

<p class=MsoNormal style='margin-left:21.0pt;mso-para-margin-left:2.0gd;
line-height:150%'><span lang=EN-US style='mso-no-proof:yes'><v:shape id="图片_x0020_19"
 o:spid="_x0000_i1109" type="#_x0000_t75" style='width:444.6pt;height:87.6pt;
 visibility:visible;mso-wrap-style:square'>
 <img src="Hadoop_02HDFS.files/image020.png" o:title=""/>
</v:shape></span></p>

<p class=MsoNormal style='text-indent:21.0pt;line-height:150%'><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>合并完成后，将</span><span lang=EN-US>hadoop-2.7.2.tar.gz.part1</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>重新命名为</span><span lang=EN-US>hadoop-2.7.2.tar.gz</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>。解压发现该</span><span lang=EN-US>tar</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>包非常完整。</span></p>

<h1 style='margin:0cm;margin-bottom:.0001pt'><span style='font-size:15.0pt;
line-height:240%;font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>第</span><span lang=EN-US
style='font-size:15.0pt;line-height:240%'>4</span><span style='font-size:15.0pt;
line-height:240%;font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>章</span><span style='font-size:15.0pt;
line-height:240%'> <span lang=EN-US>HDFS</span></span><span style='font-size:
15.0pt;line-height:240%;font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>的数据流（面试重点）</span><span lang=EN-US
style='font-size:15.0pt;line-height:240%'><o:p></o:p></span></h1>

<h2 style='margin:0cm;margin-bottom:.0001pt'><a name="_Toc439077220"></a><a
name="_Toc439077216"><span style='mso-bookmark:_Toc439077220'><span lang=EN-US
style='font-size:14.0pt;line-height:172%;font-family:"Times New Roman","serif"'>4.1
HDFS</span></span></a><span style='mso-bookmark:_Toc439077216'><span
style='mso-bookmark:_Toc439077220'><span style='font-size:14.0pt;line-height:
172%;font-family:黑体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>写数据流程</span></span></span><span style='mso-bookmark:_Toc439077216'></span><span
style='mso-bookmark:_Toc439077220'><span lang=EN-US style='font-size:14.0pt;
line-height:172%;font-family:"Times New Roman","serif"'><o:p></o:p></span></span></h2>

<h3 style='margin:0cm;margin-bottom:.0001pt'><span style='mso-bookmark:_Toc439077220'><span
lang=EN-US style='font-size:14.0pt;line-height:172%'>4.1.1 </span></span><span
style='mso-bookmark:_Toc439077220'><span style='font-size:14.0pt;line-height:
172%;font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>剖析文件写入</span></span><span style='mso-bookmark:_Toc439077220'><span
lang=EN-US style='font-size:14.0pt;line-height:172%'><o:p></o:p></span></span></h3>

<p class=MsoNormal style='line-height:150%'><span style='mso-bookmark:_Toc439077220'><span
lang=EN-US>HDFS</span></span><span style='mso-bookmark:_Toc439077220'><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>写数据流程，如图</span><span lang=EN-US>3-8</span></span><span
style='mso-bookmark:_Toc439077220'><span style='font-family:宋体;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>所示。</span></span></p>

<p class=MsoNormal><span style='mso-bookmark:_Toc439077220'><span lang=EN-US><v:shape
 id="_x0000_i1032" type="#_x0000_t75" style='width:532.8pt;height:300.6pt'
 o:ole="">
 <v:fill o:detectmouseclick="t"/>
 <img src="Hadoop_02HDFS.files/image021.png" o:title=""/>
</v:shape><!--[if gte mso 9]><xml>
 <o:OLEObject Type="Embed" ProgID="PowerPoint.Show.12" ShapeID="_x0000_i1032"
  DrawAspect="Content" ObjectID="_1629747790">
  <o:WordFieldCodes>\* MERGEFORMAT</o:WordFieldCodes>
 </o:OLEObject>
</xml><![endif]--></span></span></p>

<p class=MsoNormal align=center style='text-align:center'><span
style='mso-bookmark:_Toc439077220'><span style='font-size:9.0pt;font-family:
宋体;mso-ascii-font-family:Calibri;mso-hansi-font-family:Calibri;mso-bidi-font-family:
Calibri'>图</span></span><span style='mso-bookmark:_Toc439077220'><span
lang=EN-US style='font-size:9.0pt;font-family:"Calibri","sans-serif"'>3-8<span
style='mso-spacerun:yes'>  </span></span></span><span style='mso-bookmark:_Toc439077220'><span
style='font-size:9.0pt;font-family:宋体;mso-ascii-font-family:Calibri;mso-hansi-font-family:
Calibri;mso-bidi-font-family:Calibri'>配置用户名称</span></span></p>

<p class=MsoNormal style='line-height:150%'><span style='mso-bookmark:_Toc439077220'><span
lang=EN-US style='color:black'>1</span></span><span style='mso-bookmark:_Toc439077220'><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman";color:black'>）客户端通过</span><span lang=EN-US style='color:black'>Distributed
FileSystem</span></span><span style='mso-bookmark:_Toc439077220'><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman";color:black'>模块向</span><span lang=EN-US>NameNode</span></span><span
style='mso-bookmark:_Toc439077220'><span style='font-family:宋体;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman";color:black'>请求上传文件，</span><span
lang=EN-US>NameNode</span></span><span style='mso-bookmark:_Toc439077220'><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman";color:black'>检查目标文件是否已存在，父目录是否存在。</span><span lang=EN-US
style='color:black'><o:p></o:p></span></span></p>

<p class=MsoNormal style='line-height:150%'><span style='mso-bookmark:_Toc439077220'><span
lang=EN-US style='color:black'>2</span></span><span style='mso-bookmark:_Toc439077220'><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman";color:black'>）</span><span lang=EN-US>NameNode</span></span><span
style='mso-bookmark:_Toc439077220'><span style='font-family:宋体;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman";color:black'>返回是否可以上传。</span><span
lang=EN-US style='color:black'><o:p></o:p></span></span></p>

<p class=MsoNormal style='line-height:150%'><span style='mso-bookmark:_Toc439077220'><span
lang=EN-US style='color:black'>3</span></span><span style='mso-bookmark:_Toc439077220'><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman";color:black'>）客户端请求第一个</span><span style='color:black'> <span
lang=EN-US>Block</span></span></span><span style='mso-bookmark:_Toc439077220'><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman";color:black'>上传到哪几个</span><span lang=EN-US style='color:black'>DataNode</span></span><span
style='mso-bookmark:_Toc439077220'><span style='font-family:宋体;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman";color:black'>服务器上。</span><span
lang=EN-US style='color:black'><o:p></o:p></span></span></p>

<p class=MsoNormal style='line-height:150%'><span style='mso-bookmark:_Toc439077220'><span
lang=EN-US style='color:black'>4</span></span><span style='mso-bookmark:_Toc439077220'><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman";color:black'>）</span><span lang=EN-US>NameNode</span></span><span
style='mso-bookmark:_Toc439077220'><span style='font-family:宋体;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman";color:black'>返回</span><span
lang=EN-US style='color:black'>3</span></span><span style='mso-bookmark:_Toc439077220'><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman";color:black'>个</span><span lang=EN-US style='color:black'>DataNode</span></span><span
style='mso-bookmark:_Toc439077220'><span style='font-family:宋体;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman";color:black'>节点，分别为</span><span
lang=EN-US style='color:black'>dn1</span></span><span style='mso-bookmark:_Toc439077220'><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman";color:black'>、</span><span lang=EN-US style='color:black'>dn2</span></span><span
style='mso-bookmark:_Toc439077220'><span style='font-family:宋体;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman";color:black'>、</span><span
lang=EN-US style='color:black'>dn3</span></span><span style='mso-bookmark:_Toc439077220'><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman";color:black'>。</span><span lang=EN-US style='color:black'><o:p></o:p></span></span></p>

<p class=MsoNormal style='line-height:150%'><span style='mso-bookmark:_Toc439077220'><span
lang=EN-US style='color:black'>5</span></span><span style='mso-bookmark:_Toc439077220'><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman";color:black'>）客户端通过</span><span lang=EN-US style='color:black'>FSDataOutputStream</span></span><span
style='mso-bookmark:_Toc439077220'><span style='font-family:宋体;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman";color:black'>模块请求</span><span
lang=EN-US style='color:black'>dn1</span></span><span style='mso-bookmark:_Toc439077220'><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman";color:black'>上传数据，</span><span lang=EN-US style='color:black'>dn1</span></span><span
style='mso-bookmark:_Toc439077220'><span style='font-family:宋体;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman";color:black'>收到请求会继续调用</span><span
lang=EN-US style='color:black'>dn2</span></span><span style='mso-bookmark:_Toc439077220'><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman";color:black'>，然后</span><span lang=EN-US style='color:black'>dn2</span></span><span
style='mso-bookmark:_Toc439077220'><span style='font-family:宋体;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman";color:black'>调用</span><span
lang=EN-US style='color:black'>dn3</span></span><span style='mso-bookmark:_Toc439077220'><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman";color:black'>，将这个通信管道建立完成。</span><span lang=EN-US
style='color:black'><o:p></o:p></span></span></p>

<p class=MsoNormal style='line-height:150%'><span style='mso-bookmark:_Toc439077220'><span
lang=EN-US style='color:black'>6</span></span><span style='mso-bookmark:_Toc439077220'><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman";color:black'>）</span><span lang=EN-US style='color:black'>dn1</span></span><span
style='mso-bookmark:_Toc439077220'><span style='font-family:宋体;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman";color:black'>、</span><span
lang=EN-US style='color:black'>dn2</span></span><span style='mso-bookmark:_Toc439077220'><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman";color:black'>、</span><span lang=EN-US style='color:black'>dn3</span></span><span
style='mso-bookmark:_Toc439077220'><span style='font-family:宋体;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman";color:black'>逐级应答客户端。</span><span
lang=EN-US style='color:black'><o:p></o:p></span></span></p>

<p class=MsoNormal style='line-height:150%'><span style='mso-bookmark:_Toc439077220'><span
lang=EN-US style='color:black'>7</span></span><span style='mso-bookmark:_Toc439077220'><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman";color:black'>）客户端开始往</span><span lang=EN-US style='color:
black'>dn1</span></span><span style='mso-bookmark:_Toc439077220'><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman";color:black'>上传第一个</span><span lang=EN-US style='color:black'>Block</span></span><span
style='mso-bookmark:_Toc439077220'><span style='font-family:宋体;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman";color:black'>（先从磁盘读取数据放到一个本地内存缓存），以</span><span
lang=EN-US style='color:black'>Packet</span></span><span style='mso-bookmark:
_Toc439077220'><span style='font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman";color:black'>为单位，</span><span
lang=EN-US style='color:black'>dn1</span></span><span style='mso-bookmark:_Toc439077220'><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman";color:black'>收到一个</span><span lang=EN-US style='color:black'>Packet</span></span><span
style='mso-bookmark:_Toc439077220'><span style='font-family:宋体;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman";color:black'>就会传给</span><span
lang=EN-US style='color:black'>dn2</span></span><span style='mso-bookmark:_Toc439077220'><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman";color:black'>，</span><span lang=EN-US style='color:black'>dn2</span></span><span
style='mso-bookmark:_Toc439077220'><span style='font-family:宋体;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman";color:black'>传给</span><span
lang=EN-US style='color:black'>dn3</span></span><span style='mso-bookmark:_Toc439077220'><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman";color:black'>；</span><span lang=EN-US style='color:red'>dn1</span></span><span
style='mso-bookmark:_Toc439077220'><span style='font-family:宋体;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman";color:red'>每传一个</span><span
lang=EN-US style='color:red'>packet</span></span><span style='mso-bookmark:
_Toc439077220'><span style='font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman";color:red'>会放入一个应答队列等待应答</span></span><span
style='mso-bookmark:_Toc439077220'><span style='font-family:宋体;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman";color:black'>。</span><span
lang=EN-US style='color:black'><o:p></o:p></span></span></p>

<p class=MsoNormal style='line-height:150%'><span style='mso-bookmark:_Toc439077220'><span
lang=EN-US style='color:black'>8</span></span><span style='mso-bookmark:_Toc439077220'><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman";color:black'>）当一个</span><span lang=EN-US style='color:black'>Block</span></span><span
style='mso-bookmark:_Toc439077220'><span style='font-family:宋体;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman";color:black'>传输完成之后，客户端再次请求</span><span
lang=EN-US>NameNode</span></span><span style='mso-bookmark:_Toc439077220'><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman";color:black'>上传第二个</span><span lang=EN-US style='color:black'>Block</span></span><span
style='mso-bookmark:_Toc439077220'><span style='font-family:宋体;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman";color:black'>的服务器。（重复执行</span><span
lang=EN-US style='color:black'>3-7</span></span><span style='mso-bookmark:_Toc439077220'><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman";color:black'>步）。</span><span lang=EN-US style='color:black'><o:p></o:p></span></span></p>

<p class=MsoNormal style='line-height:150%'><span style='mso-bookmark:_Toc439077220'><span
lang=EN-US style='mso-no-proof:yes'><v:shape id="图片_x0020_20" o:spid="_x0000_i1108"
 type="#_x0000_t75" style='width:322.8pt;height:153.6pt;visibility:visible;
 mso-wrap-style:square'>
 <img src="Hadoop_02HDFS.files/image022.png" o:title=""/>
</v:shape></span><span lang=EN-US style='color:black'><o:p></o:p></span></span></p>

<h3 style='margin:0cm;margin-bottom:.0001pt'><span style='mso-bookmark:_Toc439077220'><span
lang=EN-US style='font-size:14.0pt;line-height:172%'>4.1.2 </span></span><span
style='mso-bookmark:_Toc439077220'><span style='font-size:14.0pt;line-height:
172%;font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>网络拓扑</span></span><span style='mso-bookmark:_Toc439077220'><span
lang=EN-US style='font-size:14.0pt;line-height:172%'>-</span></span><span
style='mso-bookmark:_Toc439077220'><span style='font-size:14.0pt;line-height:
172%;font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>节点距离计算</span></span><span style='mso-bookmark:_Toc439077220'><span
lang=EN-US style='font-size:14.0pt;line-height:172%'><o:p></o:p></span></span></h3>

<p class=MsoNormal style='line-height:150%'><span style='mso-bookmark:_Toc439077220'><span
lang=EN-US><span style='mso-tab-count:1'>       </span></span></span><span
style='mso-bookmark:_Toc439077220'><span style='font-family:宋体;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>在</span><span
lang=EN-US>HDFS</span></span><span style='mso-bookmark:_Toc439077220'><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>写数据的过程中，</span><span lang=EN-US>NameNode</span></span><span
style='mso-bookmark:_Toc439077220'><span style='font-family:宋体;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>会选择距离待上传数据最近距离的</span><span
lang=EN-US>DataNode</span></span><span style='mso-bookmark:_Toc439077220'><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>接收数据。那么这个最近距离怎么计算呢？</span></span></p>

<p class=MsoNormal style='line-height:150%'><span style='mso-bookmark:_Toc439077220'><span
lang=EN-US><span style='mso-tab-count:1'>       </span></span></span><span
style='mso-bookmark:_Toc439077220'><span style='font-family:宋体;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman";color:red'>节点距离：两个节点到达最近的共同祖先的距离总和。</span><span
lang=EN-US style='color:red'>,<o:p></o:p></span></span></p>

<p class=MsoNormal align=center style='text-align:center;line-height:150%'><span
style='mso-bookmark:_Toc439077220'><span lang=EN-US><v:shape id="_x0000_i1033"
 type="#_x0000_t75" style='width:549.6pt;height:307.2pt' o:ole="">
 <v:fill o:detectmouseclick="t"/>
 <img src="Hadoop_02HDFS.files/image023.png" o:title=""/>
</v:shape><!--[if gte mso 9]><xml>
 <o:OLEObject Type="Embed" ProgID="PowerPoint.Show.12" ShapeID="_x0000_i1033"
  DrawAspect="Content" ObjectID="_1629747791">
  <o:WordFieldCodes>\* MERGEFORMAT</o:WordFieldCodes>
 </o:OLEObject>
</xml><![endif]--></span></span></p>

<p class=MsoNormal align=center style='text-align:center;line-height:150%'><span
style='mso-bookmark:_Toc439077220'><span style='font-size:9.0pt;line-height:
150%;font-family:宋体;mso-ascii-font-family:Calibri;mso-hansi-font-family:Calibri;
mso-bidi-font-family:Calibri'>图</span></span><span style='mso-bookmark:_Toc439077220'><span
lang=EN-US style='font-size:9.0pt;line-height:150%;font-family:"Calibri","sans-serif"'>3-9<span
style='mso-spacerun:yes'>  </span></span></span><span style='mso-bookmark:_Toc439077220'><span
style='font-size:9.0pt;line-height:150%;font-family:宋体;mso-ascii-font-family:
Calibri;mso-hansi-font-family:Calibri;mso-bidi-font-family:Calibri'>网络拓扑概念</span></span><span
style='mso-bookmark:_Toc439077220'><span lang=EN-US style='font-size:9.0pt;
line-height:150%;font-family:"Calibri","sans-serif"'><o:p></o:p></span></span></p>

<p class=MsoNormal><span style='mso-bookmark:_Toc439077220'><span lang=EN-US><o:p>&nbsp;</o:p></span></span></p>

<p class=MsoNormal><span style='mso-bookmark:_Toc439077220'><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>分析</span></span></p>

<p class=MsoNormal><span style='mso-bookmark:_Toc439077220'><span lang=EN-US
style='mso-no-proof:yes'><v:shape id="图片_x0020_25" o:spid="_x0000_i1107"
 type="#_x0000_t75" style='width:567pt;height:278.4pt;visibility:visible;
 mso-wrap-style:square'>
 <img src="Hadoop_02HDFS.files/image024.png" o:title=""/>
</v:shape></span></span></p>

<p class=MsoNormal><span style='mso-bookmark:_Toc439077220'><span lang=EN-US><o:p>&nbsp;</o:p></span></span></p>

<p class=MsoNormal style='text-indent:21.0pt;line-height:150%'><span
style='mso-bookmark:_Toc439077220'><span style='font-family:宋体;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>例如，假设有数据中心</span><span
lang=EN-US>d1</span></span><span style='mso-bookmark:_Toc439077220'><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>机架</span><span lang=EN-US>r1</span></span><span
style='mso-bookmark:_Toc439077220'><span style='font-family:宋体;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>中的节点</span><span
lang=EN-US>n1</span></span><span style='mso-bookmark:_Toc439077220'><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>。该节点可以表示为</span><span lang=EN-US>/d1/r1/n1</span></span><span
style='mso-bookmark:_Toc439077220'><span style='font-family:宋体;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>。利用这种标记，这里给出四种距离描述，如图</span><span
lang=EN-US>3-9</span></span><span style='mso-bookmark:_Toc439077220'><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>所示。</span></span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span style='mso-bookmark:_Toc439077220'><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>大家算一算每两个节点之间的距离，如图</span><span lang=EN-US>3-10</span></span><span
style='mso-bookmark:_Toc439077220'><span style='font-family:宋体;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>所示。</span></span></p>

<p class=MsoNormal><span style='mso-bookmark:_Toc439077220'><span lang=EN-US
style='mso-no-proof:yes'><v:shape id="图片_x0020_11" o:spid="_x0000_i1106"
 type="#_x0000_t75" style='width:414.6pt;height:3in;visibility:visible;
 mso-wrap-style:square'>
 <img src="Hadoop_02HDFS.files/image025.png" o:title=""/>
</v:shape></span></span></p>

<p class=MsoNormal align=center style='text-align:center'><span
style='mso-bookmark:_Toc439077220'><span style='font-size:9.0pt;font-family:
宋体;mso-ascii-font-family:Calibri;mso-hansi-font-family:Calibri;mso-bidi-font-family:
Calibri'>图</span></span><span style='mso-bookmark:_Toc439077220'><span
lang=EN-US style='font-size:9.0pt;font-family:"Calibri","sans-serif"'>3-10<span
style='mso-spacerun:yes'>  </span></span></span><span style='mso-bookmark:_Toc439077220'><span
style='font-size:9.0pt;font-family:宋体;mso-ascii-font-family:Calibri;mso-hansi-font-family:
Calibri;mso-bidi-font-family:Calibri'>网络拓扑</span></span></p>

<h3 style='margin:0cm;margin-bottom:.0001pt'><span style='mso-bookmark:_Toc439077220'><span
lang=EN-US style='font-size:14.0pt;line-height:172%'>4.1.3 </span></span><span
style='mso-bookmark:_Toc439077220'><span style='font-size:14.0pt;line-height:
172%;font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>机架感知（副本存储节点选择）</span></span><span style='mso-bookmark:_Toc439077220'><span
lang=EN-US style='font-size:14.0pt;line-height:172%'><o:p></o:p></span></span></h3>

<p class=10 style='margin-top:6.2pt;text-indent:22.0pt'><span style='mso-bookmark:
_Toc439077220'><span lang=EN-US>1. </span></span><span style='mso-bookmark:
_Toc439077220'><span style='font-family:黑体;mso-ascii-font-family:Arial;
mso-hansi-font-family:Arial'>官方</span><span lang=EN-US>ip</span></span><span
style='mso-bookmark:_Toc439077220'><span style='font-family:黑体;mso-ascii-font-family:
Arial;mso-hansi-font-family:Arial'>地址</span></span></p>

<p class=MsoNormal style='text-indent:21.0pt;line-height:150%'><span
style='mso-bookmark:_Toc439077220'><span style='font-family:宋体;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>机架感知说明</span></span></p>

<p class=MsoNormal style='text-indent:21.0pt;line-height:150%'><span
style='mso-bookmark:_Toc439077220'><a name="OLE_LINK41"></a><a name="OLE_LINK40"><span
style='mso-bookmark:OLE_LINK41'></span></a></span><a
href="http://hadoop.apache.org/docs/r2.7.2/hadoop-project-dist/hadoop-hdfs/HdfsDesign.html#Data_Replication"><span
style='mso-bookmark:_Toc439077220'><span style='mso-bookmark:OLE_LINK40'><span
style='mso-bookmark:OLE_LINK41'><span lang=EN-US>http://hadoop.apache.org/docs/r2.7.2/hadoop-project-dist/hadoop-hdfs/HdfsDesign.html#Data_Replication</span></span></span></span><span
style='mso-bookmark:OLE_LINK41'></span><span style='mso-bookmark:OLE_LINK40'></span><span
style='mso-bookmark:_Toc439077220'></span></a><span style='mso-bookmark:_Toc439077220'></span></p>

<div style='mso-element:para-border-div;border:none windowtext 1.0pt;
mso-border-alt:none windowtext 0cm;padding:1.0pt 4.0pt 1.0pt 4.0pt;background:
#E0E0E0;margin-left:21.0pt;margin-right:0cm'>

<p class=a style='margin-left:0cm;mso-para-margin-left:2.0gd;background:#E0E0E0;
mso-layout-grid-align:none;punctuation-trim:leading;border:none;mso-border-alt:
none windowtext 0cm;padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span
style='mso-bookmark:_Toc439077220'><span lang=EN-US style='font-size:10.5pt'>For
the common case, when the replication factor is three, HDFS’s placement policy
is to put one replica on one node in the local rack, another on a different
node in the local rack, and the last on a different node in a different rack.<o:p></o:p></span></span></p>

</div>

<p class=10 style='margin-top:6.2pt;text-indent:22.0pt'><span style='mso-bookmark:
_Toc439077220'><span lang=EN-US>2. Hadoop2.7.2</span></span><span
style='mso-bookmark:_Toc439077220'><span style='font-family:黑体;mso-ascii-font-family:
Arial;mso-hansi-font-family:Arial'>副本节点选择</span></span></p>

<p class=MsoNormal style='line-height:150%'><span style='mso-bookmark:_Toc439077220'><span
lang=EN-US style='color:red'><v:shape id="_x0000_i1034" type="#_x0000_t75"
 style='width:531pt;height:298.8pt' o:ole="">
 <img src="Hadoop_02HDFS.files/image026.png" o:title=""/>
</v:shape><!--[if gte mso 9]><xml>
 <o:OLEObject Type="Embed" ProgID="PowerPoint.Show.12" ShapeID="_x0000_i1034"
  DrawAspect="Content" ObjectID="_1629747792">
 </o:OLEObject>
</xml><![endif]--><o:p></o:p></span></span></p>

<p class=MsoNormal style='line-height:150%'><span style='mso-bookmark:_Toc439077220'><span
lang=EN-US style='mso-no-proof:yes'><v:shape id="图片_x0020_26" o:spid="_x0000_i1105"
 type="#_x0000_t75" style='width:566.4pt;height:237.6pt;visibility:visible;
 mso-wrap-style:square'>
 <img src="Hadoop_02HDFS.files/image027.png" o:title=""/>
</v:shape></span><span lang=EN-US style='color:red'><o:p></o:p></span></span></p>

<h2 style='margin:0cm;margin-bottom:.0001pt'><span style='mso-bookmark:_Toc439077220'><span
lang=EN-US style='font-size:14.0pt;line-height:172%;font-family:"Times New Roman","serif"'>4.2
HDFS</span></span><span style='mso-bookmark:_Toc439077220'><span
style='font-size:14.0pt;line-height:172%;font-family:黑体;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>读数据流程</span></span><span
style='mso-bookmark:_Toc439077220'></span><span lang=EN-US style='font-size:
14.0pt;line-height:172%;font-family:"Times New Roman","serif"'><o:p></o:p></span></h2>

<p class=MsoNormal style='line-height:150%'><span lang=EN-US>HDFS</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>的读数据流程，如图</span><span lang=EN-US>3-13</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>所示。</span></p>

<p class=MsoNormal style='line-height:150%'><span lang=EN-US style='color:black'><v:shape
 id="_x0000_i1035" type="#_x0000_t75" style='width:535.8pt;height:299.4pt'
 o:ole="">
 <v:fill o:detectmouseclick="t"/>
 <img src="Hadoop_02HDFS.files/image028.png" o:title=""/>
</v:shape><!--[if gte mso 9]><xml>
 <o:OLEObject Type="Embed" ProgID="PowerPoint.Show.12" ShapeID="_x0000_i1035"
  DrawAspect="Content" ObjectID="_1629747793">
  <o:WordFieldCodes>\* MERGEFORMAT</o:WordFieldCodes>
 </o:OLEObject>
</xml><![endif]--><o:p></o:p></span></p>

<p class=MsoNormal align=center style='text-align:center;line-height:150%'><span
style='font-size:9.0pt;line-height:150%;font-family:宋体;mso-ascii-font-family:
Calibri;mso-hansi-font-family:Calibri;mso-bidi-font-family:Calibri'>图</span><span
lang=EN-US style='font-size:9.0pt;line-height:150%;font-family:"Calibri","sans-serif"'>3-13<span
style='mso-spacerun:yes'>  </span>HDFS</span><span style='font-size:9.0pt;
line-height:150%;font-family:宋体;mso-ascii-font-family:Calibri;mso-hansi-font-family:
Calibri;mso-bidi-font-family:Calibri'>读数据流程</span><span lang=EN-US
style='font-size:9.0pt;line-height:150%;font-family:"Calibri","sans-serif"'><o:p></o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='mso-no-proof:yes'><v:shape id="图片_x0020_27"
 o:spid="_x0000_i1104" type="#_x0000_t75" style='width:408.6pt;height:262.8pt;
 visibility:visible;mso-wrap-style:square'>
 <img src="Hadoop_02HDFS.files/image029.png" o:title=""/>
</v:shape></span></p>

<p class=MsoNormal style='line-height:150%'><span lang=EN-US style='color:black'>1</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman";color:black'>）客户端通过</span><span lang=EN-US style='color:black'>Distributed
FileSystem</span><span style='font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman";color:black'>向</span><span lang=EN-US
style='color:black'>NameNode</span><span style='font-family:宋体;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman";color:black'>请求下载文件，</span><span
lang=EN-US style='color:black'>NameNode</span><span style='font-family:宋体;
mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:"Times New Roman";
color:black'>通过查询元数据，找到文件块所在的</span><span lang=EN-US style='color:black'>DataNode</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman";color:black'>地址。</span><span lang=EN-US style='color:black'><o:p></o:p></span></p>

<p class=MsoNormal style='line-height:150%'><span lang=EN-US style='color:black'>2</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman";color:black'>）挑选一台</span><span lang=EN-US style='color:black'>DataNode</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman";color:black'>（就近原则，然后随机）服务器，请求读取数据。</span><span lang=EN-US
style='color:black'><o:p></o:p></span></p>

<p class=MsoNormal style='line-height:150%'><span lang=EN-US style='color:black'>3</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman";color:black'>）</span><span lang=EN-US style='color:black'>DataNode</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman";color:black'>开始传输数据给客户端（从磁盘里面读取数据输入流，以</span><span
lang=EN-US style='color:black'>Packet</span><span style='font-family:宋体;
mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:"Times New Roman";
color:black'>为单位来做校验）。</span><span lang=EN-US style='color:black'><o:p></o:p></span></p>

<p class=MsoNormal style='line-height:150%'><span lang=EN-US style='color:black'>4</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman";color:black'>）客户端以</span><span lang=EN-US style='color:black'>Packet</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman";color:black'>为单位接收，先在本地缓存，然后写入目标文件。</span><span lang=EN-US
style='color:black'><o:p></o:p></span></p>

<h1 style='margin:0cm;margin-bottom:.0001pt'><span style='font-size:15.0pt;
line-height:240%;font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>第</span><span lang=EN-US
style='font-size:15.0pt;line-height:240%'>5</span><span style='font-size:15.0pt;
line-height:240%;font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>章</span><span style='font-size:15.0pt;
line-height:240%'> <span lang=EN-US>NameNode</span></span><span
style='font-size:15.0pt;line-height:240%;font-family:宋体;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>和</span><span
lang=EN-US style='font-size:15.0pt;line-height:240%'>SecondaryNameNode</span><span
style='font-size:15.0pt;line-height:240%;font-family:宋体;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>（面试开发重点）</span><span
lang=EN-US style='font-size:15.0pt;line-height:240%'><o:p></o:p></span></h1>

<h2 style='margin:0cm;margin-bottom:.0001pt'><span lang=EN-US style='font-size:
14.0pt;line-height:172%;font-family:"Times New Roman","serif"'>5.1 NN</span><span
style='font-size:14.0pt;line-height:172%;font-family:黑体;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>和</span><span
lang=EN-US style='font-size:14.0pt;line-height:172%;font-family:"Times New Roman","serif"'>2NN</span><span
style='font-size:14.0pt;line-height:172%;font-family:黑体;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>工作机制</span><span
lang=EN-US style='font-size:14.0pt;line-height:172%;font-family:"Times New Roman","serif"'><o:p></o:p></span></h2>

<p class=MsoNormal style='line-height:150%'><span style='font-family:宋体;
mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:"Times New Roman";
color:black'>思考：</span><span lang=EN-US style='color:black'>NameNode</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman";color:black'>中的元数据是存储在哪里的？</span><span lang=EN-US
style='color:black'><o:p></o:p></span></p>

<p class=MsoNormal style='text-indent:21.0pt;line-height:150%'><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman";color:black'>首先，我们做个假设，如果存储在</span><span lang=EN-US
style='color:black'>NameNode</span><span style='font-family:宋体;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman";color:black'>节点的磁盘中，因为经常需要进行随机访问，还有响应客户请求，必然是效率过低。因此，元数据需要存放在内存中。但如果只存在内存中，一旦断电，元数据丢失，整个集群就无法工作了。</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman";color:red'>因此产生在磁盘中备份元数据的</span><span lang=EN-US
style='color:red'>FsImage</span><span style='font-family:宋体;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman";color:red'>。</span><span
lang=EN-US style='color:red'><o:p></o:p></span></p>

<p class=MsoNormal style='text-indent:21.0pt;line-height:150%'><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman";color:black'>这样又会带来新的问题，当在内存中的元数据更新时，如果同时更新</span><span
lang=EN-US style='color:black'>FsImage</span><span style='font-family:宋体;
mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:"Times New Roman";
color:black'>，就会导致效率过低，但如果不更新，就会发生一致性问题，一旦</span><span lang=EN-US
style='color:black'>NameNode</span><span style='font-family:宋体;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman";color:black'>节点断电，就会产生数据丢失。</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman";color:red'>因此，引入</span><span lang=EN-US style='color:red'>Edits</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman";color:red'>文件</span><span lang=EN-US style='color:red'>(</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman";color:red'>只进行追加操作，效率很高</span><span lang=EN-US
style='color:red'>)</span><span style='font-family:宋体;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman";color:red'>。每当元数据有更新或者添加元数据时，修改内存中的元数据并追加到</span><span
lang=EN-US style='color:red'>Edits</span><span style='font-family:宋体;
mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:"Times New Roman";
color:red'>中。</span><span style='font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman";color:black'>这样，一旦</span><span
lang=EN-US style='color:black'>NameNode</span><span style='font-family:宋体;
mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:"Times New Roman";
color:black'>节点断电，可以通过</span><span lang=EN-US style='color:black'>FsImage</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman";color:black'>和</span><span lang=EN-US style='color:black'>Edits</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman";color:black'>的合并，合成元数据。（</span><span lang=EN-US
style='color:black'>Edits</span><span style='font-family:宋体;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman";color:black'>文件</span><span
lang=EN-US style='color:black'>+FsImage</span><span style='font-family:宋体;
mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:"Times New Roman";
color:black'>镜像文件就等同于内存中的数据。）</span><span lang=EN-US style='color:black'><o:p></o:p></span></p>

<p class=MsoNormal style='text-indent:21.0pt;line-height:150%'><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman";color:black'>但是，如果长时间添加数据到</span><span lang=EN-US
style='color:black'>Edits</span><span style='font-family:宋体;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman";color:black'>中，会导致该文件数据过大，效率降低，而且一旦断电，恢复元数据需要的时间过长（所以就有了</span><span
lang=EN-US style='color:black'>2NN</span><span style='font-family:宋体;
mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:"Times New Roman";
color:black'>）。因此，需要定期进行</span><span lang=EN-US style='color:black'>FsImage</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman";color:black'>和</span><span lang=EN-US style='color:black'>Edits</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman";color:black'>的合并，如果这个操作由</span><span lang=EN-US
style='color:black'>NameNode</span><span style='font-family:宋体;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman";color:black'>节点完成，又会效率过低。</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman";color:red'>因此，引入一个新的节点</span><span lang=EN-US
style='color:red'>SecondaryNamenode</span><span style='font-family:宋体;
mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:"Times New Roman";
color:red'>（</span><span lang=EN-US style='color:red'>2NN</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman";color:red'>），专门用于</span><span lang=EN-US style='color:red'>FsImage</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman";color:red'>和</span><span lang=EN-US style='color:red'>Edits</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman";color:red'>的合并。</span><span lang=EN-US style='color:red'><o:p></o:p></span></p>

<p class=MsoNormal style='text-indent:21.0pt;line-height:150%'><span
lang=EN-US style='color:black'>NN</span><span style='font-family:宋体;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman";color:black'>和</span><span
lang=EN-US style='color:black'>2NN</span><span style='font-family:宋体;
mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:"Times New Roman";
color:black'>工作机制，如图</span><span lang=EN-US style='color:black'>3-14</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman";color:black'>所示。</span><span lang=EN-US style='color:black'><o:p></o:p></span></p>

<p class=MsoNormal align=center style='text-align:center'><span lang=EN-US><v:shape
 id="_x0000_i1036" type="#_x0000_t75" style='width:544.2pt;height:309.6pt'
 o:ole="">
 <img src="Hadoop_02HDFS.files/image030.png" o:title=""/>
</v:shape><!--[if gte mso 9]><xml>
 <o:OLEObject Type="Embed" ProgID="PowerPoint.Show.12" ShapeID="_x0000_i1036"
  DrawAspect="Content" ObjectID="_1629747794">
 </o:OLEObject>
</xml><![endif]--></span></p>

<p class=MsoNormal align=center style='text-align:center'><span
style='font-size:9.0pt;font-family:宋体;mso-ascii-font-family:Calibri;mso-hansi-font-family:
Calibri;mso-bidi-font-family:Calibri'>图</span><span lang=EN-US
style='font-size:9.0pt;font-family:"Calibri","sans-serif"'>3-14<span
style='mso-spacerun:yes'>  </span>NN</span><span style='font-size:9.0pt;
font-family:宋体;mso-ascii-font-family:Calibri;mso-hansi-font-family:Calibri;
mso-bidi-font-family:Calibri'>和</span><span lang=EN-US style='font-size:9.0pt;
font-family:"Calibri","sans-serif"'>2NN</span><span style='font-size:9.0pt;
font-family:宋体;mso-ascii-font-family:Calibri;mso-hansi-font-family:Calibri;
mso-bidi-font-family:Calibri'>工作机制</span><span lang=EN-US style='font-size:
9.0pt;font-family:"Calibri","sans-serif"'><o:p></o:p></span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span style='font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>分析</span></p>

<p class=MsoNormal><span style='font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman";color:black'>第</span><span lang=EN-US
style='color:black'>3</span><span style='font-family:宋体;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman";color:black'>步是先记录到编辑日志，再更新内存的数据。</span><span
lang=EN-US style='color:black'><o:p></o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='mso-no-proof:yes'><v:shape id="图片_x0020_29"
 o:spid="_x0000_i1103" type="#_x0000_t75" style='width:263.4pt;height:67.8pt;
 visibility:visible;mso-wrap-style:square'>
 <img src="Hadoop_02HDFS.files/image031.png" o:title=""/>
</v:shape></span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span style='font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>滚动</span></p>

<p class=MsoNormal><span lang=EN-US style='mso-no-proof:yes'><v:shape id="图片_x0020_28"
 o:spid="_x0000_i1102" type="#_x0000_t75" style='width:388.8pt;height:214.8pt;
 visibility:visible;mso-wrap-style:square'>
 <img src="Hadoop_02HDFS.files/image032.png" o:title=""/>
</v:shape></span></p>

<p class=10 style='margin-top:6.2pt;text-indent:22.0pt'><span lang=EN-US>1. </span><span
style='font-family:黑体;mso-ascii-font-family:Arial;mso-hansi-font-family:Arial'>第一阶段：</span><span
lang=EN-US>NameNode</span><span style='font-family:黑体;mso-ascii-font-family:
Arial;mso-hansi-font-family:Arial'>启动</span></p>

<p class=MsoNormal style='margin-left:21.0pt;mso-para-margin-left:2.0gd;
line-height:150%'><span style='font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>（</span><span lang=EN-US>1</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>）第一次启动</span><span lang=EN-US>NameNode</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>格式化后，创建</span><span lang=EN-US>Fsimage</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>和</span><span lang=EN-US>Edits</span><span style='font-family:
宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:"Times New Roman"'>文件。如果不是第一次启动，直接加载编辑日志和镜像文件到内存。</span></p>

<p class=MsoNormal style='margin-left:21.0pt;mso-para-margin-left:2.0gd;
line-height:150%'><span style='font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>（</span><span lang=EN-US>2</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>）客户端对元数据进行增删改的请求。</span></p>

<p class=MsoNormal style='margin-left:21.0pt;mso-para-margin-left:2.0gd;
line-height:150%'><span style='font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>（</span><span lang=EN-US>3</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>）</span><span lang=EN-US>NameNode</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>记录操作日志，更新滚动日志。</span></p>

<p class=MsoNormal style='margin-left:21.0pt;mso-para-margin-left:2.0gd;
line-height:150%'><span style='font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>（</span><span lang=EN-US>4</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>）</span><span lang=EN-US>NameNode</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>在内存中对数据进行增删改。</span></p>

<p class=10 style='margin-top:6.2pt;text-indent:22.0pt'><span lang=EN-US>2. </span><span
style='font-family:黑体;mso-ascii-font-family:Arial;mso-hansi-font-family:Arial'>第二阶段：</span><span
lang=EN-US>Secondary NameNode</span><span style='font-family:黑体;mso-ascii-font-family:
Arial;mso-hansi-font-family:Arial'>工作</span></p>

<p class=MsoNormal style='line-height:150%'><span lang=EN-US><span
style='mso-tab-count:1'>       </span></span><span style='font-family:宋体;
mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:"Times New Roman"'>（</span><span
lang=EN-US>1</span><span style='font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>）</span><a name="_Hlk515221703"><span
lang=EN-US>Secondary NameNode</span></a><span style='mso-bookmark:_Hlk515221703'><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>询问</span><span lang=EN-US>NameNode</span></span><span
style='mso-bookmark:_Hlk515221703'><span style='font-family:宋体;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>是否需要</span><span
lang=EN-US>CheckPoint</span></span><span style='mso-bookmark:_Hlk515221703'><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>。直接带回</span><span lang=EN-US>NameNode</span></span><span
style='mso-bookmark:_Hlk515221703'><span style='font-family:宋体;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>是否检查结果。</span></span></p>

<p class=MsoNormal style='line-height:150%'><span lang=EN-US><span
style='mso-tab-count:1'>       </span></span><span style='font-family:宋体;
mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:"Times New Roman"'>（</span><span
lang=EN-US>2</span><span style='font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>）</span><span lang=EN-US>Secondary
NameNode</span><span style='font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>请求执行</span><span lang=EN-US>CheckPoint</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>。</span></p>

<p class=MsoNormal style='line-height:150%'><span lang=EN-US><span
style='mso-tab-count:1'>       </span></span><span style='font-family:宋体;
mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:"Times New Roman"'>（</span><span
lang=EN-US>3</span><span style='font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>）</span><span lang=EN-US>NameNode</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>滚动正在写的</span><span lang=EN-US>Edits</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>日志。</span></p>

<p class=MsoNormal style='line-height:150%'><span lang=EN-US><span
style='mso-tab-count:1'>       </span></span><span style='font-family:宋体;
mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:"Times New Roman"'>（</span><span
lang=EN-US>4</span><span style='font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>）将滚动前的编辑日志和镜像文件拷贝到</span><span
lang=EN-US>Secondary NameNode</span><span style='font-family:宋体;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>。</span></p>

<p class=MsoNormal style='line-height:150%'><span lang=EN-US><span
style='mso-tab-count:1'>       </span></span><span style='font-family:宋体;
mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:"Times New Roman"'>（</span><span
lang=EN-US>5</span><span style='font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>）</span><span lang=EN-US>Secondary
NameNode</span><span style='font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>加载编辑日志和镜像文件到内存，并合并。</span></p>

<p class=MsoNormal style='line-height:150%'><span lang=EN-US><span
style='mso-tab-count:1'>       </span></span><span style='font-family:宋体;
mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:"Times New Roman"'>（</span><span
lang=EN-US>6</span><span style='font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>）生成新的镜像文件</span><span lang=EN-US>fsimage.chkpoint</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>。</span></p>

<p class=MsoNormal style='line-height:150%'><span lang=EN-US><span
style='mso-tab-count:1'>       </span></span><span style='font-family:宋体;
mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:"Times New Roman"'>（</span><span
lang=EN-US>7</span><span style='font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>）拷贝</span><span lang=EN-US>fsimage.chkpoint</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>到</span><span lang=EN-US>NameNode</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>。</span></p>

<p class=MsoNormal style='line-height:150%'><span lang=EN-US><span
style='mso-tab-count:1'>       </span></span><span style='font-family:宋体;
mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:"Times New Roman"'>（</span><span
lang=EN-US>8</span><span style='font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>）</span><span lang=EN-US>NameNode</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>将</span><span lang=EN-US>fsimage.chkpoint</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>重新命名成</span><span lang=EN-US>fsimage</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>。</span></p>

<table class=MsoTableGrid border=1 cellspacing=0 cellpadding=0
 style='border-collapse:collapse;border:none;mso-border-alt:solid windowtext .5pt;
 mso-yfti-tbllook:1184;mso-padding-alt:0cm 5.4pt 0cm 5.4pt'>
 <tr style='mso-yfti-irow:0;mso-yfti-firstrow:yes;mso-yfti-lastrow:yes'>
  <td width=933 valign=top style='width:559.7pt;border:solid windowtext 1.0pt;
  mso-border-alt:solid windowtext .5pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal style='line-height:150%'><b style='mso-bidi-font-weight:
  normal'><span lang=EN-US style='color:red'>NN</span></b><b style='mso-bidi-font-weight:
  normal'><span style='font-family:宋体;mso-ascii-font-family:"Times New Roman";
  mso-hansi-font-family:"Times New Roman";color:red'>和</span><span lang=EN-US
  style='color:red'>2NN</span></b><b style='mso-bidi-font-weight:normal'><span
  style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
  "Times New Roman";color:red'>工作机制详解：</span><span lang=EN-US style='color:
  red'><o:p></o:p></span></b></p>
  <p class=MsoNormal style='line-height:150%'><span lang=EN-US>Fsimage</span><span
  style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
  "Times New Roman"'>：</span><span lang=EN-US>NameNode</span><span
  style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
  "Times New Roman"'>内存中元数据序列化后形成的文件。</span></p>
  <p class=MsoNormal style='line-height:150%'><span lang=EN-US>Edits</span><span
  style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
  "Times New Roman"'>：记录客户端更新元数据信息的每一步操作（可通过</span><span lang=EN-US>Edits</span><span
  style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
  "Times New Roman"'>运算出元数据）。</span></p>
  <p class=MsoNormal style='line-height:150%'><span lang=EN-US>NameNode</span><span
  style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
  "Times New Roman"'>启动时，先滚动</span><span lang=EN-US>Edits</span><span
  style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
  "Times New Roman"'>并生成一个空的</span><span lang=EN-US>edits.inprogress</span><span
  style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
  "Times New Roman"'>，然后加载</span><span lang=EN-US>Edits</span><span
  style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
  "Times New Roman"'>和</span><span lang=EN-US>Fsimage</span><span
  style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
  "Times New Roman"'>到内存中，此时</span><span lang=EN-US>NameNode</span><span
  style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
  "Times New Roman"'>内存就持有最新的元数据信息。</span><span lang=EN-US>Client</span><span
  style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
  "Times New Roman"'>开始对</span><span lang=EN-US>NameNode</span><span
  style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
  "Times New Roman"'>发送元数据的增删改的请求，这些请求的操作首先会被记录到</span><span lang=EN-US>edits.inprogress</span><span
  style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
  "Times New Roman"'>中（查询元数据的操作不会被记录在</span><span lang=EN-US>Edits</span><span
  style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
  "Times New Roman"'>中，因为查询操作不会更改元数据信息），如果此时</span><span lang=EN-US>NameNode</span><span
  style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
  "Times New Roman"'>挂掉，重启后会从</span><span lang=EN-US>Edits</span><span
  style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
  "Times New Roman"'>中读取元数据的信息。然后，</span><span lang=EN-US>NameNode</span><span
  style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
  "Times New Roman"'>会在内存中执行元数据的增删改的操作。</span></p>
  <p class=MsoNormal style='line-height:150%'><span style='font-family:宋体;
  mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:"Times New Roman"'>由于</span><span
  lang=EN-US>Edits</span><span style='font-family:宋体;mso-ascii-font-family:
  "Times New Roman";mso-hansi-font-family:"Times New Roman"'>中记录的操作会越来越多，</span><span
  lang=EN-US>Edits</span><span style='font-family:宋体;mso-ascii-font-family:
  "Times New Roman";mso-hansi-font-family:"Times New Roman"'>文件会越来越大，导致</span><span
  lang=EN-US>NameNode</span><span style='font-family:宋体;mso-ascii-font-family:
  "Times New Roman";mso-hansi-font-family:"Times New Roman"'>在启动加载</span><span
  lang=EN-US>Edits</span><span style='font-family:宋体;mso-ascii-font-family:
  "Times New Roman";mso-hansi-font-family:"Times New Roman"'>时会很慢，所以需要对</span><span
  lang=EN-US>Edits</span><span style='font-family:宋体;mso-ascii-font-family:
  "Times New Roman";mso-hansi-font-family:"Times New Roman"'>和</span><span
  lang=EN-US>Fsimage</span><span style='font-family:宋体;mso-ascii-font-family:
  "Times New Roman";mso-hansi-font-family:"Times New Roman"'>进行合并（所谓合并，就是将</span><span
  lang=EN-US>Edits</span><span style='font-family:宋体;mso-ascii-font-family:
  "Times New Roman";mso-hansi-font-family:"Times New Roman"'>和</span><span
  lang=EN-US>Fsimage</span><span style='font-family:宋体;mso-ascii-font-family:
  "Times New Roman";mso-hansi-font-family:"Times New Roman"'>加载到内存中，照着</span><span
  lang=EN-US>Edits</span><span style='font-family:宋体;mso-ascii-font-family:
  "Times New Roman";mso-hansi-font-family:"Times New Roman"'>中的操作一步步执行，最终形成新的</span><span
  lang=EN-US>Fsimage</span><span style='font-family:宋体;mso-ascii-font-family:
  "Times New Roman";mso-hansi-font-family:"Times New Roman"'>）。</span><span
  lang=EN-US>SecondaryNameNode</span><span style='font-family:宋体;mso-ascii-font-family:
  "Times New Roman";mso-hansi-font-family:"Times New Roman"'>的作用就是帮助</span><span
  lang=EN-US>NameNode</span><span style='font-family:宋体;mso-ascii-font-family:
  "Times New Roman";mso-hansi-font-family:"Times New Roman"'>进行</span><span
  lang=EN-US>Edits</span><span style='font-family:宋体;mso-ascii-font-family:
  "Times New Roman";mso-hansi-font-family:"Times New Roman"'>和</span><span
  lang=EN-US>Fsimage</span><span style='font-family:宋体;mso-ascii-font-family:
  "Times New Roman";mso-hansi-font-family:"Times New Roman"'>的合并工作。</span></p>
  <p class=MsoNormal style='line-height:150%'><span lang=EN-US>SecondaryNameNode</span><span
  style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
  "Times New Roman"'>首先会询问</span><span lang=EN-US>NameNode</span><span
  style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
  "Times New Roman"'>是否需要</span><span lang=EN-US>CheckPoint</span><span
  style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
  "Times New Roman"'>（触发</span><span lang=EN-US>CheckPoint</span><span
  style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
  "Times New Roman"'>需要满足两个条件中的任意一个，定时时间到和</span><span lang=EN-US>Edits</span><span
  style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
  "Times New Roman"'>中数据写满了）。直接带回</span><span lang=EN-US>NameNode</span><span
  style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
  "Times New Roman"'>是否检查结果。</span><span lang=EN-US>SecondaryNameNode</span><span
  style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
  "Times New Roman"'>执行</span><span lang=EN-US>CheckPoint</span><span
  style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
  "Times New Roman"'>操作，首先会让</span><span lang=EN-US>NameNode</span><span
  style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
  "Times New Roman"'>滚动</span><span lang=EN-US>Edits</span><span
  style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
  "Times New Roman"'>并生成一个空的</span><span lang=EN-US>edits.inprogress</span><span
  style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
  "Times New Roman"'>，滚动</span><span lang=EN-US>Edits</span><span
  style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
  "Times New Roman"'>的目的是给</span><span lang=EN-US>Edits</span><span
  style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
  "Times New Roman"'>打个标记，以后所有新的操作都写入</span><span lang=EN-US>edits.inprogress</span><span
  style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
  "Times New Roman"'>，其他未合并的</span><span lang=EN-US>Edits</span><span
  style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
  "Times New Roman"'>和</span><span lang=EN-US>Fsimage</span><span
  style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
  "Times New Roman"'>会拷贝到</span><span lang=EN-US>SecondaryNameNode</span><span
  style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
  "Times New Roman"'>的本地，然后将拷贝的</span><span lang=EN-US>Edits</span><span
  style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
  "Times New Roman"'>和</span><span lang=EN-US>Fsimage</span><span
  style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
  "Times New Roman"'>加载到内存中进行合并，生成</span><span lang=EN-US>fsimage.chkpoint</span><span
  style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
  "Times New Roman"'>，然后将</span><span lang=EN-US>fsimage.chkpoint</span><span
  style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
  "Times New Roman"'>拷贝给</span><span lang=EN-US>NameNode</span><span
  style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
  "Times New Roman"'>，重命名为</span><span lang=EN-US>Fsimage</span><span
  style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
  "Times New Roman"'>后替换掉原来的</span><span lang=EN-US>Fsimage</span><span
  style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
  "Times New Roman"'>。</span><span lang=EN-US>NameNode</span><span
  style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
  "Times New Roman"'>在启动时就只需要加载之前未合并的</span><span lang=EN-US>Edits</span><span
  style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
  "Times New Roman"'>和</span><span lang=EN-US>Fsimage</span><span
  style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
  "Times New Roman"'>即可，因为合并过的</span><span lang=EN-US>Edits</span><span
  style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
  "Times New Roman"'>中的元数据信息已经被记录在</span><span lang=EN-US>Fsimage</span><span
  style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
  "Times New Roman"'>中。</span></p>
  </td>
 </tr>
</table>

<h2 style='margin:0cm;margin-bottom:.0001pt'><span lang=EN-US style='font-size:
14.0pt;line-height:172%;font-family:"Times New Roman","serif"'>5.2 Fsimage</span><span
style='font-size:14.0pt;line-height:172%;font-family:黑体;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>和</span><span
lang=EN-US style='font-size:14.0pt;line-height:172%;font-family:"Times New Roman","serif"'>Edits</span><span
style='font-size:14.0pt;line-height:172%;font-family:黑体;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>解析</span><span
lang=EN-US style='font-size:14.0pt;line-height:172%;font-family:"Times New Roman","serif"'><o:p></o:p></span></h2>

<p class=10 style='margin-top:6.2pt;text-indent:22.0pt'><span lang=EN-US>1. </span><span
style='font-family:黑体;mso-ascii-font-family:Arial;mso-hansi-font-family:Arial'>概念</span></p>

<p class=MsoNormal><span lang=EN-US><v:shape id="_x0000_i1037" type="#_x0000_t75"
 style='width:540.6pt;height:302.4pt' o:ole="">
 <img src="Hadoop_02HDFS.files/image033.png" o:title=""/>
</v:shape><!--[if gte mso 9]><xml>
 <o:OLEObject Type="Embed" ProgID="PowerPoint.Show.12" ShapeID="_x0000_i1037"
  DrawAspect="Content" ObjectID="_1629747795">
 </o:OLEObject>
</xml><![endif]--></span></p>

<p class=10 style='margin-top:6.2pt;text-indent:22.0pt'><span lang=EN-US>2. oiv</span><span
style='font-family:黑体;mso-ascii-font-family:Arial;mso-hansi-font-family:Arial'>查看</span><span
lang=EN-US>Fsimage</span><span style='font-family:黑体;mso-ascii-font-family:
Arial;mso-hansi-font-family:Arial'>文件</span></p>

<p class=MsoNormal style='margin-left:21.0pt;mso-para-margin-left:2.0gd;
line-height:150%'><span style='font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>（</span><span lang=EN-US>1</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>）查看</span><span lang=EN-US>oiv</span><span style='font-family:
宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:"Times New Roman"'>和</span><span
lang=EN-US>oev</span><span style='font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>命令</span></p>

<p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'>[atguigu@hadoop102
current]$ hdfs<o:p></o:p></span></p>

<p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
none;punctuation-trim:leading'><b style='mso-bidi-font-weight:normal'><span
lang=EN-US style='font-size:10.5pt'>oiv</span></b><span lang=EN-US
style='font-size:10.5pt'><span style='mso-spacerun:yes'>           
</span>apply the offline fsimage viewer to an fsimage<o:p></o:p></span></p>

<p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
none;punctuation-trim:leading'><b style='mso-bidi-font-weight:normal'><span
lang=EN-US style='font-size:10.5pt'>oev</span></b><span lang=EN-US
style='font-size:10.5pt'><span style='mso-spacerun:yes'>           
</span>apply the offline edits viewer to an edits file<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:21.0pt;mso-para-margin-left:2.0gd;
line-height:150%'><span style='font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>（</span><span lang=EN-US>2</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>）基本语法</span></p>

<p class=MsoNormal style='margin-left:21.0pt;mso-para-margin-left:2.0gd;
text-indent:21.0pt;line-height:150%'><span lang=EN-US>hdfs oiv -p </span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>文件类型</span><span lang=EN-US> -i</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>镜像文件</span><span lang=EN-US> -o </span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>转换后文件输出路径</span></p>

<p class=MsoNormal style='margin-left:21.0pt;mso-para-margin-left:2.0gd;
line-height:150%'><span style='font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>（</span><span lang=EN-US>3</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>）案例实操</span></p>

<p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'>[atguigu@hadoop102
current]$ pwd<o:p></o:p></span></p>

<p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'>/opt/module/hadoop-2.7.2/data/tmp/dfs/name/current<o:p></o:p></span></p>

<p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'><o:p>&nbsp;</o:p></span></p>

<p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span style='font-size:10.5pt;font-family:宋体;
mso-ascii-font-family:"Courier New";mso-hansi-font-family:"Courier New"'>该目录的内容</span><span
lang=EN-US style='font-size:10.5pt'><o:p></o:p></span></p>

<p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span lang=EN-US style='mso-no-proof:yes'><v:shape
 id="图片_x0020_30" o:spid="_x0000_i1101" type="#_x0000_t75" style='width:534pt;
 height:141pt;visibility:visible;mso-wrap-style:square'>
 <img src="Hadoop_02HDFS.files/image034.png" o:title=""/>
</v:shape></span><span lang=EN-US style='font-size:10.5pt'><o:p></o:p></span></p>

<p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span lang=EN-US style='mso-no-proof:yes'><v:shape
 id="图片_x0020_31" o:spid="_x0000_i1100" type="#_x0000_t75" style='width:539.4pt;
 height:136.2pt;visibility:visible;mso-wrap-style:square'>
 <img src="Hadoop_02HDFS.files/image035.png" o:title=""/>
</v:shape></span><span lang=EN-US style='font-size:10.5pt'><o:p></o:p></span></p>

<p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'><o:p>&nbsp;</o:p></span></p>

<p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'>// </span><span
style='font-size:10.5pt;font-family:宋体;mso-ascii-font-family:"Courier New";
mso-hansi-font-family:"Courier New"'>直接</span><span lang=EN-US
style='font-size:10.5pt'>cat</span><span style='font-size:10.5pt;font-family:
宋体;mso-ascii-font-family:"Courier New";mso-hansi-font-family:"Courier New"'>查看镜像文件是乱码的，看到帮助命令</span><span
lang=EN-US style='font-size:10.5pt'><o:p></o:p></span></p>

<p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span lang=EN-US style='mso-no-proof:yes'><v:shape
 id="图片_x0020_32" o:spid="_x0000_i1099" type="#_x0000_t75" style='width:538.8pt;
 height:60pt;visibility:visible;mso-wrap-style:square'>
 <img src="Hadoop_02HDFS.files/image036.png" o:title=""/>
</v:shape></span><span lang=EN-US style='font-size:10.5pt'><o:p></o:p></span></p>

<p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'><o:p>&nbsp;</o:p></span></p>

<p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'>// </span><span
style='font-size:10.5pt;font-family:宋体;mso-ascii-font-family:"Courier New";
mso-hansi-font-family:"Courier New"'>转成</span><span lang=EN-US
style='font-size:10.5pt'>xml</span><span style='font-size:10.5pt;font-family:
宋体;mso-ascii-font-family:"Courier New";mso-hansi-font-family:"Courier New"'>，指定哪个镜像文件，最后指定输出的文件的路径</span><span
lang=EN-US style='font-size:10.5pt'><o:p></o:p></span></p>

<p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.0pt;
mso-bidi-font-size:10.5pt'>[atguigu@hadoop102 current]$ hdfs oiv -p XML -i
fsimage_0000000000000000105 -o fsimage.xml<o:p></o:p></span></p>

<p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'><o:p>&nbsp;</o:p></span></p>

<p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span lang=EN-US style='mso-no-proof:yes'><v:shape
 id="图片_x0020_33" o:spid="_x0000_i1098" type="#_x0000_t75" style='width:534.6pt;
 height:154.8pt;visibility:visible;mso-wrap-style:square'>
 <img src="Hadoop_02HDFS.files/image037.png" o:title=""/>
</v:shape></span><span lang=EN-US style='font-size:10.5pt'><o:p></o:p></span></p>

<p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'><o:p>&nbsp;</o:p></span></p>

<p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'>[atguigu@hadoop102
current]$ cat fsimage.xml<o:p></o:p></span></p>

<p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'><o:p>&nbsp;</o:p></span></p>

<p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'>// </span><span
style='font-size:10.5pt;font-family:宋体;mso-ascii-font-family:"Courier New";
mso-hansi-font-family:"Courier New"'>复制到可视化界面看看</span><span lang=EN-US
style='font-size:10.5pt'><o:p></o:p></span></p>

<p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span lang=EN-US style='mso-no-proof:yes'><v:shape
 id="图片_x0020_34" o:spid="_x0000_i1097" type="#_x0000_t75" style='width:424.8pt;
 height:289.8pt;visibility:visible;mso-wrap-style:square'>
 <img src="Hadoop_02HDFS.files/image038.png" o:title=""/>
</v:shape></span><span lang=EN-US style='font-size:10.5pt'><o:p></o:p></span></p>

<p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'><o:p>&nbsp;</o:p></span></p>

<p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span style='font-size:10.5pt;font-family:宋体;
mso-ascii-font-family:"Courier New";mso-hansi-font-family:"Courier New"'>浏览器查看该文件</span><span
lang=EN-US style='font-size:10.5pt'><o:p></o:p></span></p>

<p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span lang=EN-US style='mso-no-proof:yes'><v:shape
 id="图片_x0020_35" o:spid="_x0000_i1096" type="#_x0000_t75" style='width:525.6pt;
 height:181.2pt;visibility:visible;mso-wrap-style:square'>
 <img src="Hadoop_02HDFS.files/image039.png" o:title=""/>
</v:shape></span><span lang=EN-US style='font-size:10.5pt'><o:p></o:p></span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span style='font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>关闭集群，删除全部数据，格式化一下之后，就这些文件</span></p>

<p class=MsoNormal><span lang=EN-US style='mso-no-proof:yes'><v:shape id="图片_x0020_38"
 o:spid="_x0000_i1095" type="#_x0000_t75" style='width:567.6pt;height:67.8pt;
 visibility:visible;mso-wrap-style:square'>
 <img src="Hadoop_02HDFS.files/image040.png" o:title=""/>
</v:shape></span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span style='font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>启动集群之后</span></p>

<p class=MsoNormal><span lang=EN-US style='mso-no-proof:yes'><v:shape id="图片_x0020_39"
 o:spid="_x0000_i1094" type="#_x0000_t75" style='width:567pt;height:65.4pt;
 visibility:visible;mso-wrap-style:square'>
 <img src="Hadoop_02HDFS.files/image041.png" o:title=""/>
</v:shape></span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span style='font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>创建目录、</span><span lang=EN-US>put</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>文件</span></p>

<p class=MsoNormal><span lang=EN-US style='mso-no-proof:yes'><v:shape id="图片_x0020_40"
 o:spid="_x0000_i1093" type="#_x0000_t75" style='width:387.6pt;height:22.8pt;
 visibility:visible;mso-wrap-style:square'>
 <img src="Hadoop_02HDFS.files/image042.png" o:title=""/>
</v:shape></span></p>

<p class=MsoNormal><span lang=EN-US style='mso-no-proof:yes'><v:shape id="图片_x0020_41"
 o:spid="_x0000_i1092" type="#_x0000_t75" style='width:444.6pt;height:17.4pt;
 visibility:visible;mso-wrap-style:square'>
 <img src="Hadoop_02HDFS.files/image043.png" o:title=""/>
</v:shape></span></p>

<p class=MsoNormal><span lang=EN-US style='mso-no-proof:yes'><v:shape id="图片_x0020_42"
 o:spid="_x0000_i1091" type="#_x0000_t75" style='width:567pt;height:115.2pt;
 visibility:visible;mso-wrap-style:square'>
 <img src="Hadoop_02HDFS.files/image044.png" o:title=""/>
</v:shape></span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span style='font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>转一下镜像</span></p>

<p class=MsoNormal><span lang=EN-US style='mso-no-proof:yes'><v:shape id="图片_x0020_43"
 o:spid="_x0000_i1090" type="#_x0000_t75" style='width:552.6pt;height:22.8pt;
 visibility:visible;mso-wrap-style:square'>
 <img src="Hadoop_02HDFS.files/image045.png" o:title=""/>
</v:shape></span></p>

<p class=MsoNormal><span lang=EN-US style='mso-no-proof:yes'><v:shape id="图片_x0020_44"
 o:spid="_x0000_i1089" type="#_x0000_t75" style='width:367.8pt;height:263.4pt;
 visibility:visible;mso-wrap-style:square'>
 <img src="Hadoop_02HDFS.files/image046.png" o:title=""/>
</v:shape></span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span style='font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>转</span><span lang=EN-US>Edits</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>文件</span></p>

<p class=MsoNormal><span lang=EN-US style='mso-no-proof:yes'><v:shape id="图片_x0020_45"
 o:spid="_x0000_i1088" type="#_x0000_t75" style='width:567pt;height:17.4pt;
 visibility:visible;mso-wrap-style:square'>
 <img src="Hadoop_02HDFS.files/image047.png" o:title=""/>
</v:shape></span></p>

<p class=MsoNormal><span lang=EN-US style='mso-no-proof:yes'><v:shape id="图片_x0020_48"
 o:spid="_x0000_i1087" type="#_x0000_t75" style='width:308.4pt;height:279pt;
 visibility:visible;mso-wrap-style:square'>
 <img src="Hadoop_02HDFS.files/image048.png" o:title=""/>
</v:shape></span></p>

<p class=MsoNormal><span lang=EN-US style='mso-no-proof:yes'><v:shape id="图片_x0020_49"
 o:spid="_x0000_i1086" type="#_x0000_t75" style='width:241.8pt;height:195pt;
 visibility:visible;mso-wrap-style:square'>
 <img src="Hadoop_02HDFS.files/image049.png" o:title=""/>
</v:shape></span></p>

<p class=MsoNormal><span lang=EN-US style='mso-no-proof:yes'><v:shape id="图片_x0020_50"
 o:spid="_x0000_i1085" type="#_x0000_t75" style='width:264pt;height:185.4pt;
 visibility:visible;mso-wrap-style:square'>
 <img src="Hadoop_02HDFS.files/image050.png" o:title=""/>
</v:shape></span></p>

<p class=MsoNormal><span lang=EN-US style='mso-no-proof:yes'><v:shape id="图片_x0020_51"
 o:spid="_x0000_i1084" type="#_x0000_t75" style='width:418.8pt;height:262.2pt;
 visibility:visible;mso-wrap-style:square'>
 <img src="Hadoop_02HDFS.files/image051.png" o:title=""/>
</v:shape></span></p>

<p class=MsoNormal><span lang=EN-US style='mso-no-proof:yes'><v:shape id="图片_x0020_52"
 o:spid="_x0000_i1083" type="#_x0000_t75" style='width:412.2pt;height:114pt;
 visibility:visible;mso-wrap-style:square'>
 <img src="Hadoop_02HDFS.files/image052.png" o:title=""/>
</v:shape></span></p>

<p class=MsoNormal><span lang=EN-US style='mso-no-proof:yes'><v:shape id="图片_x0020_53"
 o:spid="_x0000_i1082" type="#_x0000_t75" style='width:384.6pt;height:90pt;
 visibility:visible;mso-wrap-style:square'>
 <img src="Hadoop_02HDFS.files/image053.png" o:title=""/>
</v:shape></span></p>

<p class=MsoNormal><span lang=EN-US style='mso-no-proof:yes'><v:shape id="图片_x0020_54"
 o:spid="_x0000_i1081" type="#_x0000_t75" style='width:396pt;height:141pt;
 visibility:visible;mso-wrap-style:square'>
 <img src="Hadoop_02HDFS.files/image054.png" o:title=""/>
</v:shape></span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='margin-left:21.0pt;text-indent:21.0pt;line-height:
150%'><span style='font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman";color:red'>思考：可以看出，</span><span
lang=EN-US style='color:red'>Fsimage</span><span style='font-family:宋体;
mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:"Times New Roman";
color:red'>中没有记录块所对应</span><span lang=EN-US style='color:red'>DataNode</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman";color:red'>，为什么？</span><span lang=EN-US style='color:red'><o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:21.0pt;mso-para-margin-left:2.0gd;
text-indent:21.0pt;line-height:150%'><span style='font-family:宋体;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>在集群启动后，要求</span><span
lang=EN-US>DataNode</span><span style='font-family:宋体;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>上报数据块信息，并间隔一段时间后再次上报。</span></p>

<p class=10 style='margin-top:6.2pt;text-indent:22.0pt'><span lang=EN-US>3. oev</span><span
style='font-family:黑体;mso-ascii-font-family:Arial;mso-hansi-font-family:Arial'>查看</span><span
lang=EN-US>Edits</span><span style='font-family:黑体;mso-ascii-font-family:Arial;
mso-hansi-font-family:Arial'>文件（前面有了，这里可以忽略）</span></p>

<p class=MsoNormal style='margin-left:21.0pt;mso-para-margin-left:2.0gd;
line-height:150%'><span style='font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>（</span><span lang=EN-US>1</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>）基本语法</span></p>

<p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'>hdfs
oev -p </span><span style='font-size:10.5pt;font-family:宋体;mso-ascii-font-family:
"Courier New";mso-hansi-font-family:"Courier New"'>文件类型</span><span lang=EN-US
style='font-size:10.5pt'> -i</span><span style='font-size:10.5pt;font-family:
宋体;mso-ascii-font-family:"Courier New";mso-hansi-font-family:"Courier New"'>编辑日志</span><span
lang=EN-US style='font-size:10.5pt'> -o </span><span style='font-size:10.5pt;
font-family:宋体;mso-ascii-font-family:"Courier New";mso-hansi-font-family:"Courier New"'>转换后文件输出路径</span><span
lang=EN-US style='font-size:10.5pt'><o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:21.0pt;mso-para-margin-left:2.0gd;
line-height:150%'><span style='font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>（</span><span lang=EN-US>2</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>）案例实操</span></p>

<p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'>[atguigu@hadoop102
current]$ hdfs oev -p XML -i edits_0000000000000000012-0000000000000000013 -o
/opt/module/hadoop-2.7.2/edits.xml<o:p></o:p></span></p>

<p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'><o:p>&nbsp;</o:p></span></p>

<p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'>[atguigu@hadoop102
current]$ cat /opt/module/hadoop-2.7.2/edits.xml<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:21.0pt;text-indent:21.0pt;line-height:
150%'><span style='font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>将显示的</span><span lang=EN-US>xml</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>文件内容拷贝到</span><span lang=EN-US>Eclipse</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>中创建的</span><span lang=EN-US>xml</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>文件中，并格式化。显示结果如下。</span></p>

<p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'>&lt;?xml
version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;<o:p></o:p></span></p>

<p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'>&lt;EDITS&gt;<o:p></o:p></span></p>

<p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'><span
style='mso-tab-count:1'>  </span>&lt;EDITS_VERSION&gt;-63&lt;/EDITS_VERSION&gt;<o:p></o:p></span></p>

<p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'><span
style='mso-tab-count:1'>  </span>&lt;RECORD&gt;<o:p></o:p></span></p>

<p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'><span
style='mso-tab-count:2'>     </span>&lt;OPCODE&gt;OP_START_LOG_SEGMENT&lt;/OPCODE&gt;<o:p></o:p></span></p>

<p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'><span
style='mso-tab-count:2'>     </span>&lt;DATA&gt;<o:p></o:p></span></p>

<p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'><span
style='mso-tab-count:3'>        </span>&lt;TXID&gt;129&lt;/TXID&gt;<o:p></o:p></span></p>

<p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'><span
style='mso-tab-count:2'>     </span>&lt;/DATA&gt;<o:p></o:p></span></p>

<p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'><span
style='mso-tab-count:1'>  </span>&lt;/RECORD&gt;<o:p></o:p></span></p>

<p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'><span
style='mso-tab-count:1'>  </span>&lt;RECORD&gt;<o:p></o:p></span></p>

<p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'><span
style='mso-tab-count:2'>     </span>&lt;OPCODE&gt;<span style='color:red'>OP_ADD</span>&lt;/OPCODE&gt;<o:p></o:p></span></p>

<p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'><span
style='mso-tab-count:2'>     </span>&lt;DATA&gt;<o:p></o:p></span></p>

<p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'><span
style='mso-tab-count:3'>        </span>&lt;TXID&gt;130&lt;/TXID&gt;<o:p></o:p></span></p>

<p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'><span
style='mso-tab-count:3'>        </span>&lt;LENGTH&gt;0&lt;/LENGTH&gt;<o:p></o:p></span></p>

<p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'><span
style='mso-tab-count:3'>        </span>&lt;INODEID&gt;16407&lt;/INODEID&gt;<o:p></o:p></span></p>

<p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'><span
style='mso-tab-count:3'>        </span>&lt;PATH&gt;<span style='color:red'>/hello7.txt</span>&lt;/PATH&gt;<o:p></o:p></span></p>

<p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'><span
style='mso-tab-count:3'>        </span>&lt;REPLICATION&gt;2&lt;/REPLICATION&gt;<o:p></o:p></span></p>

<p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'><span
style='mso-tab-count:3'>        </span>&lt;MTIME&gt;1512943607866&lt;/MTIME&gt;<o:p></o:p></span></p>

<p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'><span
style='mso-tab-count:3'>        </span>&lt;ATIME&gt;1512943607866&lt;/ATIME&gt;<o:p></o:p></span></p>

<p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'><span
style='mso-tab-count:3'>        </span>&lt;BLOCKSIZE&gt;134217728&lt;/BLOCKSIZE&gt;<o:p></o:p></span></p>

<p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'><span
style='mso-tab-count:3'>        </span>&lt;CLIENT_NAME&gt;DFSClient_NONMAPREDUCE_-1544295051_1&lt;/CLIENT_NAME&gt;<o:p></o:p></span></p>

<p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'><span
style='mso-tab-count:3'>        </span>&lt;CLIENT_MACHINE&gt;192.168.1.5&lt;/CLIENT_MACHINE&gt;<o:p></o:p></span></p>

<p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'><span
style='mso-tab-count:3'>        </span>&lt;OVERWRITE&gt;true&lt;/OVERWRITE&gt;<o:p></o:p></span></p>

<p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'><span
style='mso-tab-count:3'>        </span>&lt;PERMISSION_STATUS&gt;<o:p></o:p></span></p>

<p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'><span
style='mso-tab-count:4'>           </span>&lt;USERNAME&gt;atguigu&lt;/USERNAME&gt;<o:p></o:p></span></p>

<p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'><span
style='mso-tab-count:4'>           </span>&lt;GROUPNAME&gt;supergroup&lt;/GROUPNAME&gt;<o:p></o:p></span></p>

<p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'><span
style='mso-tab-count:4'>           </span>&lt;MODE&gt;420&lt;/MODE&gt;<o:p></o:p></span></p>

<p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'><span
style='mso-tab-count:3'>        </span>&lt;/PERMISSION_STATUS&gt;<o:p></o:p></span></p>

<p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'><span
style='mso-tab-count:3'>        </span>&lt;RPC_CLIENTID&gt;908eafd4-9aec-4288-96f1-e8011d181561&lt;/RPC_CLIENTID&gt;<o:p></o:p></span></p>

<p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'><span
style='mso-tab-count:3'>        </span>&lt;RPC_CALLID&gt;0&lt;/RPC_CALLID&gt;<o:p></o:p></span></p>

<p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'><span
style='mso-tab-count:2'>     </span>&lt;/DATA&gt;<o:p></o:p></span></p>

<p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'><span
style='mso-tab-count:1'>  </span>&lt;/RECORD&gt;<o:p></o:p></span></p>

<p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'><span
style='mso-tab-count:1'>  </span>&lt;RECORD&gt;<o:p></o:p></span></p>

<p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'><span
style='mso-tab-count:2'>     </span>&lt;OPCODE&gt;<span style='color:red'>OP_ALLOCATE_BLOCK_ID</span>&lt;/OPCODE&gt;<o:p></o:p></span></p>

<p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'><span
style='mso-tab-count:2'>     </span>&lt;DATA&gt;<o:p></o:p></span></p>

<p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'><span
style='mso-tab-count:3'>        </span>&lt;TXID&gt;131&lt;/TXID&gt;<o:p></o:p></span></p>

<p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'><span
style='mso-tab-count:3'>        </span>&lt;BLOCK_ID&gt;1073741839&lt;/BLOCK_ID&gt;<o:p></o:p></span></p>

<p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'><span
style='mso-tab-count:2'>     </span>&lt;/DATA&gt;<o:p></o:p></span></p>

<p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'><span
style='mso-tab-count:1'>  </span>&lt;/RECORD&gt;<o:p></o:p></span></p>

<p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'><span
style='mso-tab-count:1'>  </span>&lt;RECORD&gt;<o:p></o:p></span></p>

<p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'><span
style='mso-tab-count:2'>     </span>&lt;OPCODE&gt;OP_SET_GENSTAMP_V2&lt;/OPCODE&gt;<o:p></o:p></span></p>

<p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'><span
style='mso-tab-count:2'>     </span>&lt;DATA&gt;<o:p></o:p></span></p>

<p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'><span
style='mso-tab-count:3'>        </span>&lt;TXID&gt;132&lt;/TXID&gt;<o:p></o:p></span></p>

<p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'><span
style='mso-tab-count:3'>        </span>&lt;GENSTAMPV2&gt;1016&lt;/GENSTAMPV2&gt;<o:p></o:p></span></p>

<p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'><span
style='mso-tab-count:2'>     </span>&lt;/DATA&gt;<o:p></o:p></span></p>

<p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'><span
style='mso-tab-count:1'>  </span>&lt;/RECORD&gt;<o:p></o:p></span></p>

<p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'><span
style='mso-tab-count:1'>  </span>&lt;RECORD&gt;<o:p></o:p></span></p>

<p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'><span
style='mso-tab-count:2'>     </span>&lt;OPCODE&gt;<span style='color:red'>OP_ADD_BLOCK</span>&lt;/OPCODE&gt;<o:p></o:p></span></p>

<p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'><span
style='mso-tab-count:2'>     </span>&lt;DATA&gt;<o:p></o:p></span></p>

<p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'><span
style='mso-tab-count:3'>        </span>&lt;TXID&gt;133&lt;/TXID&gt;<o:p></o:p></span></p>

<p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'><span
style='mso-tab-count:3'>        </span>&lt;PATH&gt;/hello7.txt&lt;/PATH&gt;<o:p></o:p></span></p>

<p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'><span
style='mso-tab-count:3'>        </span>&lt;BLOCK&gt;<o:p></o:p></span></p>

<p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'><span
style='mso-tab-count:4'>           </span>&lt;BLOCK_ID&gt;1073741839&lt;/BLOCK_ID&gt;<o:p></o:p></span></p>

<p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'><span
style='mso-tab-count:4'>           </span>&lt;NUM_BYTES&gt;0&lt;/NUM_BYTES&gt;<o:p></o:p></span></p>

<p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'><span
style='mso-tab-count:4'>           </span>&lt;GENSTAMP&gt;1016&lt;/GENSTAMP&gt;<o:p></o:p></span></p>

<p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'><span
style='mso-tab-count:3'>        </span>&lt;/BLOCK&gt;<o:p></o:p></span></p>

<p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'><span
style='mso-tab-count:3'>        </span>&lt;RPC_CLIENTID&gt;&lt;/RPC_CLIENTID&gt;<o:p></o:p></span></p>

<p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'><span
style='mso-tab-count:3'>        </span>&lt;RPC_CALLID&gt;-2&lt;/RPC_CALLID&gt;<o:p></o:p></span></p>

<p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'><span
style='mso-tab-count:2'>     </span>&lt;/DATA&gt;<o:p></o:p></span></p>

<p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'><span
style='mso-tab-count:1'>  </span>&lt;/RECORD&gt;<o:p></o:p></span></p>

<p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'><span
style='mso-tab-count:1'>  </span>&lt;RECORD&gt;<o:p></o:p></span></p>

<p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'><span
style='mso-tab-count:2'>     </span>&lt;OPCODE&gt;<span style='color:red'>OP_CLOSE</span>&lt;/OPCODE&gt;<o:p></o:p></span></p>

<p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'><span
style='mso-tab-count:2'>     </span>&lt;DATA&gt;<o:p></o:p></span></p>

<p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'><span
style='mso-tab-count:3'>        </span>&lt;TXID&gt;134&lt;/TXID&gt;<o:p></o:p></span></p>

<p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'><span
style='mso-tab-count:3'>        </span>&lt;LENGTH&gt;0&lt;/LENGTH&gt;<o:p></o:p></span></p>

<p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'><span
style='mso-tab-count:3'>        </span>&lt;INODEID&gt;0&lt;/INODEID&gt;<o:p></o:p></span></p>

<p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'><span
style='mso-tab-count:3'>        </span>&lt;PATH&gt;/hello7.txt&lt;/PATH&gt;<o:p></o:p></span></p>

<p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'><span
style='mso-tab-count:3'>        </span>&lt;REPLICATION&gt;2&lt;/REPLICATION&gt;<o:p></o:p></span></p>

<p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'><span
style='mso-tab-count:3'>        </span>&lt;MTIME&gt;1512943608761&lt;/MTIME&gt;<o:p></o:p></span></p>

<p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'><span
style='mso-tab-count:3'>        </span>&lt;ATIME&gt;1512943607866&lt;/ATIME&gt;<o:p></o:p></span></p>

<p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'><span
style='mso-tab-count:3'>        </span>&lt;BLOCKSIZE&gt;134217728&lt;/BLOCKSIZE&gt;<o:p></o:p></span></p>

<p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'><span
style='mso-tab-count:3'>        </span>&lt;CLIENT_NAME&gt;&lt;/CLIENT_NAME&gt;<o:p></o:p></span></p>

<p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'><span
style='mso-tab-count:3'>        </span>&lt;CLIENT_MACHINE&gt;&lt;/CLIENT_MACHINE&gt;<o:p></o:p></span></p>

<p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'><span
style='mso-tab-count:3'>        </span>&lt;OVERWRITE&gt;false&lt;/OVERWRITE&gt;<o:p></o:p></span></p>

<p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'><span
style='mso-tab-count:3'>        </span>&lt;BLOCK&gt;<o:p></o:p></span></p>

<p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'><span
style='mso-tab-count:4'>           </span>&lt;BLOCK_ID&gt;1073741839&lt;/BLOCK_ID&gt;<o:p></o:p></span></p>

<p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'><span
style='mso-tab-count:4'>           </span>&lt;NUM_BYTES&gt;25&lt;/NUM_BYTES&gt;<o:p></o:p></span></p>

<p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'><span
style='mso-tab-count:4'>           </span>&lt;GENSTAMP&gt;1016&lt;/GENSTAMP&gt;<o:p></o:p></span></p>

<p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'><span
style='mso-tab-count:3'>        </span>&lt;/BLOCK&gt;<o:p></o:p></span></p>

<p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'><span
style='mso-tab-count:3'>        </span>&lt;PERMISSION_STATUS&gt;<o:p></o:p></span></p>

<p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'><span
style='mso-tab-count:4'>           </span>&lt;USERNAME&gt;atguigu&lt;/USERNAME&gt;<o:p></o:p></span></p>

<p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'><span
style='mso-tab-count:4'>           </span>&lt;GROUPNAME&gt;supergroup&lt;/GROUPNAME&gt;<o:p></o:p></span></p>

<p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'><span
style='mso-tab-count:4'>           </span>&lt;MODE&gt;420&lt;/MODE&gt;<o:p></o:p></span></p>

<p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'><span
style='mso-tab-count:3'>        </span>&lt;/PERMISSION_STATUS&gt;<o:p></o:p></span></p>

<p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'><span
style='mso-tab-count:2'>     </span>&lt;/DATA&gt;<o:p></o:p></span></p>

<p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'><span
style='mso-tab-count:1'>  </span>&lt;/RECORD&gt;<o:p></o:p></span></p>

<p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'>&lt;/EDITS
&gt;<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:10.5pt;text-indent:21.0pt;line-height:
150%'><span style='font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman";color:red'>思考：</span><span lang=EN-US
style='color:red'>NameNode</span><span style='font-family:宋体;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman";color:red'>如何确定下次开机启动的时候合并哪些</span><span
lang=EN-US style='color:red'>Edits</span><span style='font-family:宋体;
mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:"Times New Roman";
color:red'>？</span><span lang=EN-US style='color:red'><o:p></o:p></span></p>

<h2 style='margin:0cm;margin-bottom:.0001pt'><span lang=EN-US style='font-size:
14.0pt;line-height:172%;font-family:"Times New Roman","serif"'>5.3 CheckPoint</span><span
style='font-size:14.0pt;line-height:172%;font-family:黑体;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>时间设置</span><span
lang=EN-US style='font-size:14.0pt;line-height:172%;font-family:"Times New Roman","serif"'><o:p></o:p></span></h2>

<p class=MsoNormal><span lang=EN-US>CheckPoint</span><span style='font-family:
宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:"Times New Roman"'>触发条件</span></p>

<p class=MsoNormal><span lang=EN-US style='mso-no-proof:yes'><v:shape id="图片_x0020_55"
 o:spid="_x0000_i1080" type="#_x0000_t75" style='width:465.6pt;height:234.6pt;
 visibility:visible;mso-wrap-style:square'>
 <img src="Hadoop_02HDFS.files/image055.png" o:title=""/>
</v:shape></span></p>

<p class=MsoNormal style='text-indent:21.0pt;line-height:150%'><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>（</span><span lang=EN-US>1</span><span style='font-family:
宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:"Times New Roman"'>）通常情况下，</span><span
lang=EN-US>SecondaryNameNode</span><span style='font-family:宋体;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>每隔一小时执行一次（即定时时间到）</span></p>

<p class=MsoNormal style='line-height:150%'><span lang=EN-US><span
style='mso-tab-count:1'>       </span>[hdfs-default.xml]</span></p>

<p class=a style='margin-left:26.25pt;mso-para-margin-left:2.5gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'>&lt;property&gt;<o:p></o:p></span></p>

<p class=a style='margin-left:26.25pt;mso-para-margin-left:2.5gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'><span
style='mso-spacerun:yes'> 
</span>&lt;name&gt;dfs.namenode.checkpoint.period&lt;/name&gt;<o:p></o:p></span></p>

<p class=a style='margin-left:26.25pt;mso-para-margin-left:2.5gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'><span
style='mso-spacerun:yes'>  </span>&lt;!-- </span><span style='font-size:10.5pt;
font-family:宋体;mso-ascii-font-family:"Courier New";mso-hansi-font-family:"Courier New"'>单位是秒</span><span
style='font-size:10.5pt'> <span lang=EN-US>--&gt;<o:p></o:p></span></span></p>

<p class=a style='margin-left:26.25pt;mso-para-margin-left:2.5gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'><span
style='mso-spacerun:yes'>  </span>&lt;value&gt;3600&lt;/value&gt;<o:p></o:p></span></p>

<p class=a style='margin-left:26.25pt;mso-para-margin-left:2.5gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'>&lt;/property&gt;<o:p></o:p></span></p>

<p class=MsoNormal style='text-indent:21.0pt;line-height:150%'><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>（</span><span lang=EN-US>2</span><span style='font-family:
宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:"Times New Roman"'>）一分钟检查一次操作次数，当操作次数达到</span><span
lang=EN-US>1</span><span style='font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>百万时，</span><span lang=EN-US>SecondaryNameNode</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>执行一次（即数据满了）。</span></p>

<p class=a style='margin-left:26.25pt;mso-para-margin-left:2.5gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'>&lt;property&gt;<o:p></o:p></span></p>

<p class=a style='margin-left:26.25pt;mso-para-margin-left:2.5gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'><span
style='mso-spacerun:yes'> 
</span>&lt;name&gt;dfs.namenode.checkpoint.txns&lt;/name&gt;<o:p></o:p></span></p>

<p class=a style='margin-left:26.25pt;mso-para-margin-left:2.5gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'><span
style='mso-spacerun:yes'>  </span>&lt;value&gt;1000000&lt;/value&gt;<o:p></o:p></span></p>

<p class=a style='margin-left:26.25pt;mso-para-margin-left:2.5gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'>&lt;description&gt;</span><span
style='font-size:10.5pt;font-family:宋体;mso-ascii-font-family:"Courier New";
mso-hansi-font-family:"Courier New"'>操作动作次数</span><span lang=EN-US
style='font-size:10.5pt'>&lt;/description&gt;<o:p></o:p></span></p>

<p class=a style='margin-left:26.25pt;mso-para-margin-left:2.5gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'>&lt;/property&gt;<o:p></o:p></span></p>

<p class=a style='margin-left:26.25pt;mso-para-margin-left:2.5gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'><o:p>&nbsp;</o:p></span></p>

<p class=a style='margin-left:26.25pt;mso-para-margin-left:2.5gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'>&lt;property&gt;<o:p></o:p></span></p>

<p class=a style='margin-left:26.25pt;mso-para-margin-left:2.5gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'><span
style='mso-spacerun:yes'> 
</span>&lt;name&gt;dfs.namenode.checkpoint.check.period&lt;/name&gt;<o:p></o:p></span></p>

<p class=a style='margin-left:26.25pt;mso-para-margin-left:2.5gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'><span
style='mso-spacerun:yes'>  </span>&lt;value&gt;60&lt;/value&gt;<o:p></o:p></span></p>

<p class=a style='margin-left:26.25pt;mso-para-margin-left:2.5gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'>&lt;description&gt;
1</span><span style='font-size:10.5pt;font-family:宋体;mso-ascii-font-family:
"Courier New";mso-hansi-font-family:"Courier New"'>分钟检查一次操作次数</span><span
lang=EN-US style='font-size:10.5pt'>&lt;/description&gt;<o:p></o:p></span></p>

<p class=a style='margin-left:26.25pt;mso-para-margin-left:2.5gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'>&lt;/property
&gt;<o:p></o:p></span></p>

<h2 style='margin:0cm;margin-bottom:.0001pt'><span lang=EN-US style='font-size:
14.0pt;line-height:172%;font-family:"Times New Roman","serif"'>5.4 NameNode</span><span
style='font-size:14.0pt;line-height:172%;font-family:黑体;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>故障处理</span><span
lang=EN-US style='font-size:14.0pt;line-height:172%;font-family:"Times New Roman","serif"'><o:p></o:p></span></h2>

<p class=MsoNormal style='text-indent:15.75pt;line-height:150%'><span
lang=EN-US>NameNode</span><span style='font-family:宋体;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>故障后，可以采用如下两种方法恢复数据。</span></p>

<p class=MsoNormal style='text-indent:15.75pt;line-height:150%'><b><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>方法一：</span> </b><b><span style='font-family:宋体;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>将</span><span
lang=EN-US>SecondaryNameNode</span></b><b><span style='font-family:宋体;
mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:"Times New Roman"'>中数据拷贝到</span><span
lang=EN-US>NameNode</span></b><b><span style='font-family:宋体;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>存储数据的目录；（</span><span
lang=EN-US>2NN</span></b><b><span style='font-family:宋体;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>与</span><span
lang=EN-US>NN</span></b><b><span style='font-family:宋体;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>就是差一个</span><span
lang=EN-US>edits_inprogress_xxxx</span></b><b><span style='font-family:宋体;
mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:"Times New Roman"'>文件）</span><span
lang=EN-US><o:p></o:p></span></b></p>

<p class=10 style='margin-top:6.2pt;text-indent:22.0pt'><span lang=EN-US>1. kill
-9 NameNode</span><span style='font-family:黑体;mso-ascii-font-family:Arial;
mso-hansi-font-family:Arial'>进程</span></p>

<p class=10 style='margin-top:6.2pt;text-indent:22.0pt'><span lang=EN-US>2. </span><span
style='font-family:黑体;mso-ascii-font-family:Arial;mso-hansi-font-family:Arial'>删除</span><span
lang=EN-US>NameNode</span><span style='font-family:黑体;mso-ascii-font-family:
Arial;mso-hansi-font-family:Arial'>存储的数据（</span><span lang=EN-US>/opt/module/hadoop-2.7.2/data/tmp/dfs/name</span><span
style='font-family:黑体;mso-ascii-font-family:Arial;mso-hansi-font-family:Arial'>）</span></p>

<p class=a style='margin-left:26.25pt;mso-para-margin-left:2.5gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'>[atguigu@hadoop102
hadoop-2.7.2]$ rm -rf /opt/module/hadoop-2.7.2/data/tmp/dfs/name/*<o:p></o:p></span></p>

<p class=10 style='margin-top:6.2pt;text-indent:22.0pt'><span lang=EN-US>3. </span><span
style='font-family:黑体;mso-ascii-font-family:Arial;mso-hansi-font-family:Arial'>拷贝</span><span
lang=EN-US>SecondaryNameNode</span><span style='font-family:黑体;mso-ascii-font-family:
Arial;mso-hansi-font-family:Arial'>中数据到原</span><span lang=EN-US>NameNode</span><span
style='font-family:黑体;mso-ascii-font-family:Arial;mso-hansi-font-family:Arial'>存储数据目录</span></p>

<p class=a style='margin-left:26.25pt;mso-para-margin-left:2.5gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'>[atguigu@hadoop102
dfs]$ scp -r
atguigu@hadoop104:/opt/module/hadoop-2.7.2/data/tmp/dfs/namesecondary/* ./name/<o:p></o:p></span></p>

<p class=10 style='margin-top:6.2pt;text-indent:22.0pt'><span lang=EN-US>4. </span><span
style='font-family:黑体;mso-ascii-font-family:Arial;mso-hansi-font-family:Arial'>重新启动</span><span
lang=EN-US>NameNode</span></p>

<p class=a style='margin-left:26.25pt;mso-para-margin-left:2.5gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'>[atguigu@hadoop102
hadoop-2.7.2]$ sbin/hadoop-daemon.sh start namenode<o:p></o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='mso-no-proof:yes'><v:shape id="图片_x0020_13"
 o:spid="_x0000_i1079" type="#_x0000_t75" style='width:567pt;height:106.8pt;
 visibility:visible;mso-wrap-style:square'>
 <img src="Hadoop_02HDFS.files/image056.png" o:title=""/>
</v:shape></span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='text-indent:15.75pt;line-height:150%'><b><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman";color:black'>方法二：使用</span><span lang=EN-US style='color:black'>-importCheckpoint</span></b><b><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman";color:black'>选项启动</span><span lang=EN-US style='color:black'>NameNode</span></b><b><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman";color:black'>守护进程，从而将</span><span lang=EN-US
style='color:black'>SecondaryNameNode</span></b><b><span style='font-family:
宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:"Times New Roman";
color:black'>中数据拷贝到</span><span lang=EN-US style='color:black'>NameNode</span></b><b><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman";color:black'>目录中。</span></b><span lang=EN-US
style='color:black'><o:p></o:p></span></p>

<p class=10 style='margin-top:6.2pt;margin-right:0cm;margin-bottom:0cm;
margin-left:40.0pt;margin-bottom:.0001pt;text-indent:-18.0pt;mso-char-indent-count:
0;mso-list:l2 level1 lfo3'><![if !supportLists]><span lang=EN-US
style='mso-fareast-font-family:Arial'><span style='mso-list:Ignore'>1.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><![endif]><span
style='font-family:黑体;mso-ascii-font-family:Arial;mso-hansi-font-family:Arial'>修改</span><span
lang=EN-US>hdfs-site.xml</span><span style='font-family:黑体;mso-ascii-font-family:
Arial;mso-hansi-font-family:Arial'>中的</span></p>

<p class=a style='margin-left:26.25pt;mso-para-margin-left:2.5gd;mso-layout-grid-align:
none;punctuation-trim:leading'><a name="OLE_LINK4"></a><a name="OLE_LINK3"><span
style='mso-bookmark:OLE_LINK4'><span lang=EN-US style='font-size:10.5pt'>&lt;property&gt;<o:p></o:p></span></span></a></p>

<p class=a style='margin-left:26.25pt;mso-para-margin-left:2.5gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span style='mso-bookmark:OLE_LINK3'><span
style='mso-bookmark:OLE_LINK4'><span lang=EN-US style='font-size:10.5pt'><span
style='mso-spacerun:yes'> </span><span style='mso-spacerun:yes'> </span>&lt;!--
</span></span></span><span style='mso-bookmark:OLE_LINK3'><span
style='mso-bookmark:OLE_LINK4'><span style='font-size:10.5pt;font-family:宋体;
mso-ascii-font-family:"Courier New";mso-hansi-font-family:"Courier New"'>默认是</span></span></span><span
style='mso-bookmark:OLE_LINK3'><span style='mso-bookmark:OLE_LINK4'><span
lang=EN-US style='font-size:10.5pt'>1</span></span></span><span
style='mso-bookmark:OLE_LINK3'><span style='mso-bookmark:OLE_LINK4'><span
style='font-size:10.5pt;font-family:宋体;mso-ascii-font-family:"Courier New";
mso-hansi-font-family:"Courier New"'>小时检查一次，这里改</span></span></span><span
style='mso-bookmark:OLE_LINK3'><span style='mso-bookmark:OLE_LINK4'><span
lang=EN-US style='font-size:10.5pt'>2</span></span></span><span
style='mso-bookmark:OLE_LINK3'><span style='mso-bookmark:OLE_LINK4'><span
style='font-size:10.5pt;font-family:宋体;mso-ascii-font-family:"Courier New";
mso-hansi-font-family:"Courier New"'>分钟</span></span></span><span
style='mso-bookmark:OLE_LINK3'><span style='mso-bookmark:OLE_LINK4'><span
lang=EN-US style='font-size:10.5pt'> --&gt;<o:p></o:p></span></span></span></p>

<p class=a style='margin-left:26.25pt;mso-para-margin-left:2.5gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span style='mso-bookmark:OLE_LINK3'><span
style='mso-bookmark:OLE_LINK4'><span lang=EN-US style='font-size:10.5pt'><span
style='mso-spacerun:yes'>  </span>&lt;name&gt;dfs.namenode.checkpoint.period&lt;/name&gt;<o:p></o:p></span></span></span></p>

<p class=a style='margin-left:26.25pt;mso-para-margin-left:2.5gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span style='mso-bookmark:OLE_LINK3'><span
style='mso-bookmark:OLE_LINK4'><span lang=EN-US style='font-size:10.5pt'><span
style='mso-spacerun:yes'>  </span>&lt;value&gt;120&lt;/value&gt;<o:p></o:p></span></span></span></p>

<p class=a style='margin-left:26.25pt;mso-para-margin-left:2.5gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span style='mso-bookmark:OLE_LINK3'><span
style='mso-bookmark:OLE_LINK4'><span lang=EN-US style='font-size:10.5pt'>&lt;/property&gt;<o:p></o:p></span></span></span></p>

<p class=a style='margin-left:26.25pt;mso-para-margin-left:2.5gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span style='mso-bookmark:OLE_LINK3'><span
style='mso-bookmark:OLE_LINK4'><span lang=EN-US style='font-size:10.5pt'><o:p>&nbsp;</o:p></span></span></span></p>

<p class=a style='margin-left:26.25pt;mso-para-margin-left:2.5gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span style='mso-bookmark:OLE_LINK3'><span
style='mso-bookmark:OLE_LINK4'><span lang=EN-US style='font-size:10.5pt'>&lt;property&gt;<o:p></o:p></span></span></span></p>

<p class=a style='margin-left:26.25pt;mso-para-margin-left:2.5gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span style='mso-bookmark:OLE_LINK3'><span
style='mso-bookmark:OLE_LINK4'><span lang=EN-US style='font-size:10.5pt'><span
style='mso-spacerun:yes'> 
</span>&lt;name&gt;dfs.namenode.name.dir&lt;/name&gt;<o:p></o:p></span></span></span></p>

<p class=a style='margin-left:26.25pt;mso-para-margin-left:2.5gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span style='mso-bookmark:OLE_LINK3'><span
style='mso-bookmark:OLE_LINK4'><span lang=EN-US style='font-size:10.5pt'><span
style='mso-spacerun:yes'> 
</span>&lt;value&gt;/opt/module/hadoop-2.7.2/data/tmp/dfs/name&lt;/value&gt;<o:p></o:p></span></span></span></p>

<p class=a style='margin-left:26.25pt;mso-para-margin-left:2.5gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span style='mso-bookmark:OLE_LINK3'><span
style='mso-bookmark:OLE_LINK4'><span lang=EN-US style='font-size:10.5pt'>&lt;/property&gt;</span></span></span><span
lang=EN-US style='font-size:10.5pt'><o:p></o:p></span></p>

<p class=10 style='margin-top:6.2pt;text-indent:22.0pt'><span lang=EN-US>2.<span
style='mso-spacerun:yes'>  </span>kill -9 NameNode</span><span
style='font-family:黑体;mso-ascii-font-family:Arial;mso-hansi-font-family:Arial'>进程</span></p>

<p class=10 style='margin-top:6.2pt;text-indent:22.0pt'><span lang=EN-US>3.<span
style='mso-tab-count:1'>    </span></span><span style='font-family:黑体;
mso-ascii-font-family:Arial;mso-hansi-font-family:Arial'>删除</span><span
lang=EN-US>NameNode</span><span style='font-family:黑体;mso-ascii-font-family:
Arial;mso-hansi-font-family:Arial'>存储的数据（</span><span lang=EN-US>/opt/module/hadoop-2.7.2/data/tmp/dfs/name</span><span
style='font-family:黑体;mso-ascii-font-family:Arial;mso-hansi-font-family:Arial'>）</span></p>

<p class=a style='margin-left:26.25pt;mso-para-margin-left:2.5gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'>[atguigu@hadoop102
hadoop-2.7.2]$ rm -rf /opt/module/hadoop-2.7.2/data/tmp/dfs/name/*<o:p></o:p></span></p>

<p class=10 style='margin-top:6.2pt;text-indent:22.0pt'><span lang=EN-US>4.<span
style='mso-tab-count:1'>    </span></span><span style='font-family:黑体;
mso-ascii-font-family:Arial;mso-hansi-font-family:Arial'>如果</span><span
lang=EN-US>SecondaryNameNode</span><span style='font-family:黑体;mso-ascii-font-family:
Arial;mso-hansi-font-family:Arial'>不和</span><span lang=EN-US>NameNode</span><span
style='font-family:黑体;mso-ascii-font-family:Arial;mso-hansi-font-family:Arial'>在一个主机节点上（</span><span
lang=EN-US>104</span><span style='font-family:黑体;mso-ascii-font-family:Arial;
mso-hansi-font-family:Arial'>）将</span><span lang=EN-US>SecondaryNameNode</span><span
style='font-family:黑体;mso-ascii-font-family:Arial;mso-hansi-font-family:Arial'>存储数据的目录拷贝到</span><span
lang=EN-US>NameNode</span><span style='font-family:黑体;mso-ascii-font-family:
Arial;mso-hansi-font-family:Arial'>存储数据的平级目录，并删除</span><span lang=EN-US>in_use.lock</span><span
style='font-family:黑体;mso-ascii-font-family:Arial;mso-hansi-font-family:Arial'>文件</span></p>

<p class=a style='margin-left:26.25pt;mso-para-margin-left:2.5gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'>[atguigu@hadoop102
dfs]$ scp -r atguigu@hadoop<b style='mso-bidi-font-weight:normal'>104</b>:/opt/module/hadoop-2.7.2/data/tmp/dfs/namesecondary
./<o:p></o:p></span></p>

<p class=a style='margin-left:26.25pt;mso-para-margin-left:2.5gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'><o:p>&nbsp;</o:p></span></p>

<p class=a style='margin-left:26.25pt;mso-para-margin-left:2.5gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'>[atguigu@hadoop102
namesecondary]$ rm -rf in_use.lock<o:p></o:p></span></p>

<p class=a style='margin-left:26.25pt;mso-para-margin-left:2.5gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'><o:p>&nbsp;</o:p></span></p>

<p class=a style='margin-left:26.25pt;mso-para-margin-left:2.5gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'>[atguigu@hadoop102
dfs]$ pwd<o:p></o:p></span></p>

<p class=a style='margin-left:26.25pt;mso-para-margin-left:2.5gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'>/opt/module/hadoop-2.7.2/data/tmp/dfs<o:p></o:p></span></p>

<p class=a style='margin-left:26.25pt;mso-para-margin-left:2.5gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'><o:p>&nbsp;</o:p></span></p>

<p class=a style='margin-left:26.25pt;mso-para-margin-left:2.5gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'>[atguigu@hadoop102
dfs]$ ls<o:p></o:p></span></p>

<p class=a style='margin-left:26.25pt;mso-para-margin-left:2.5gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'>data<span
style='mso-spacerun:yes'>  </span><b style='mso-bidi-font-weight:normal'>name</b><span
style='mso-spacerun:yes'>  </span><b style='mso-bidi-font-weight:normal'>namesecondary<span
style='mso-spacerun:yes'>  </span><span style='color:#851C00;mso-themecolor:
accent6;mso-themeshade:191'>// </span></b></span><b style='mso-bidi-font-weight:
normal'><span style='font-size:10.5pt;font-family:宋体;mso-ascii-font-family:
"Courier New";mso-hansi-font-family:"Courier New";color:#851C00;mso-themecolor:
accent6;mso-themeshade:191'>平级</span></b><span lang=EN-US style='font-size:
10.5pt'><o:p></o:p></span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=10 style='margin-top:6.2pt;text-indent:22.0pt'><span lang=EN-US>5.<span
style='mso-tab-count:1'>    </span></span><span style='font-family:黑体;
mso-ascii-font-family:Arial;mso-hansi-font-family:Arial'>导入检查点数据，检查的时候立马将</span><span
lang=EN-US>NN</span><span style='font-family:黑体;mso-ascii-font-family:Arial;
mso-hansi-font-family:Arial'>启动</span></p>

<p class=a style='margin-left:26.25pt;mso-para-margin-left:2.5gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'>[atguigu@hadoop102
hadoop-2.7.2]$ bin/hdfs namenode -importCheckpoint<o:p></o:p></span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span style='font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>等一会不刷日志了就可以</span><span lang=EN-US>Ctrl+C</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>杀死了</span></p>

<p class=MsoNormal><span lang=EN-US style='mso-no-proof:yes'><v:shape id="图片_x0020_57"
 o:spid="_x0000_i1078" type="#_x0000_t75" style='width:544.8pt;height:82.2pt;
 visibility:visible;mso-wrap-style:square'>
 <img src="Hadoop_02HDFS.files/image057.png" o:title=""/>
</v:shape></span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US>Ctrl+C</span><span style='font-family:宋体;
mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:"Times New Roman"'>杀死之后，会看到</span><span
lang=EN-US>NN</span><span style='font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>本来启动的，然后又不见了（</span><span lang=EN-US>jps</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>）</span></p>

<p class=MsoNormal><span lang=EN-US style='mso-no-proof:yes'><v:shape id="图片_x0020_58"
 o:spid="_x0000_i1077" type="#_x0000_t75" style='width:267pt;height:66pt;
 visibility:visible;mso-wrap-style:square'>
 <img src="Hadoop_02HDFS.files/image058.png" o:title=""/>
</v:shape></span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=10 style='margin-top:6.2pt;text-indent:22.0pt'><span lang=EN-US>6.<span
style='mso-tab-count:1'>    </span></span><span style='font-family:黑体;
mso-ascii-font-family:Arial;mso-hansi-font-family:Arial'>启动</span><span
lang=EN-US>NameNode</span></p>

<p class=a style='margin-left:26.25pt;mso-para-margin-left:2.5gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'>[atguigu@hadoop102
hadoop-2.7.2]$ sbin/hadoop-daemon.sh start namenode<o:p></o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='mso-no-proof:yes'><v:shape id="图片_x0020_59"
 o:spid="_x0000_i1076" type="#_x0000_t75" style='width:567pt;height:114pt;
 visibility:visible;mso-wrap-style:square'>
 <img src="Hadoop_02HDFS.files/image059.png" o:title=""/>
</v:shape></span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span style='font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>这种办法检查的东西会多一点，看起来没有那么</span><span
lang=EN-US>low</span><span style='font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>。</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<h2 style='margin:0cm;margin-bottom:.0001pt'><span lang=EN-US style='font-size:
14.0pt;line-height:172%;font-family:"Times New Roman","serif"'>5.5 </span><span
style='font-size:14.0pt;line-height:172%;font-family:黑体;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>集群安全模式</span><span
lang=EN-US style='font-size:14.0pt;line-height:172%;font-family:"Times New Roman","serif"'><o:p></o:p></span></h2>

<p class=10 style='margin-top:6.2pt;text-indent:22.0pt'><span lang=EN-US>1.<span
style='mso-tab-count:1'>    </span></span><span style='font-family:黑体;
mso-ascii-font-family:Arial;mso-hansi-font-family:Arial'>概述</span></p>

<p class=MsoNormal style='line-height:150%'><span lang=EN-US><v:shape id="_x0000_i1038"
 type="#_x0000_t75" style='width:528.6pt;height:297pt' o:ole="">
 <img src="Hadoop_02HDFS.files/image060.png" o:title=""/>
</v:shape><!--[if gte mso 9]><xml>
 <o:OLEObject Type="Embed" ProgID="PowerPoint.Show.12" ShapeID="_x0000_i1038"
  DrawAspect="Content" ObjectID="_1629747797">
 </o:OLEObject>
</xml><![endif]--></span></p>

<p class=MsoNormal style='line-height:150%'><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='line-height:150%'><span lang=EN-US style='mso-no-proof:
yes'><v:shape id="图片_x0020_60" o:spid="_x0000_i1075" type="#_x0000_t75"
 style='width:507.6pt;height:27.6pt;visibility:visible;mso-wrap-style:square'>
 <img src="Hadoop_02HDFS.files/image061.png" o:title=""/>
</v:shape></span></p>

<p class=MsoNormal style='line-height:150%'><span style='font-family:宋体;
mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:"Times New Roman"'>就是把</span><span
lang=EN-US>Edits</span><span style='font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>合并到</span><span lang=EN-US>Fsimage</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>。</span></p>

<p class=MsoNormal style='line-height:150%'><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='line-height:150%'><span lang=EN-US style='mso-no-proof:
yes'><v:shape id="图片_x0020_61" o:spid="_x0000_i1074" type="#_x0000_t75"
 style='width:111pt;height:23.4pt;visibility:visible;mso-wrap-style:square'>
 <img src="Hadoop_02HDFS.files/image062.png" o:title=""/>
</v:shape></span></p>

<p class=MsoNormal style='line-height:150%'><span style='font-family:宋体;
mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:"Times New Roman"'>也就是所有文件几乎都有一个副本之后，就可以退出安全模式了。</span></p>

<p class=10 style='margin-top:6.2pt;margin-right:0cm;margin-bottom:0cm;
margin-left:40.0pt;margin-bottom:.0001pt;text-indent:-18.0pt;mso-char-indent-count:
0;mso-list:l2 level1 lfo3'><![if !supportLists]><span lang=EN-US
style='mso-fareast-font-family:Arial'><span style='mso-list:Ignore'>2.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><![endif]><span
style='font-family:黑体;mso-ascii-font-family:Arial;mso-hansi-font-family:Arial'>基本语法</span></p>

<p class=MsoNormal style='text-indent:21.0pt;line-height:150%'><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>集群处于安全模式，不能执行重要操作（写操作）。集群启动完成后，自动退出安全模式。</span></p>

<p class=MsoNormal style='text-indent:21.0pt;line-height:150%'><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>（</span><span lang=EN-US>1</span><span style='font-family:
宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:"Times New Roman"'>）</span><span
lang=EN-US style='color:#7030A0'>bin/hdfs dfsadmin -safemode get<span
style='mso-tab-count:2'>            </span></span><span style='font-family:
宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:"Times New Roman"'>（功能描述：查看安全模式状态<span
style='color:#7030A0'>）</span></span><span lang=EN-US style='color:#7030A0'><o:p></o:p></span></p>

<p class=MsoNormal style='text-indent:21.0pt;line-height:150%'><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>（</span><span lang=EN-US>2</span><span style='font-family:
宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:"Times New Roman"'>）</span><span
lang=EN-US style='color:#7030A0'>bin/hdfs dfsadmin -safemode enter<span
style='mso-spacerun:yes'>  </span><span style='mso-tab-count:1'>      </span></span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>（功能描述：进入安全模式状态<span style='color:#7030A0'>）</span></span><span
lang=EN-US style='color:#7030A0'><o:p></o:p></span></p>

<p class=MsoNormal style='text-indent:21.0pt;line-height:150%'><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>（</span><span lang=EN-US>3</span><span style='font-family:
宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:"Times New Roman"'>）</span><span
lang=EN-US style='color:#7030A0'>bin/hdfs dfsadmin -safemode leave<span
style='mso-tab-count:1'>  </span></span><span style='font-family:宋体;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>（功能描述：离开安全模式状态<span
style='color:#7030A0'>）</span></span><span lang=EN-US style='color:#7030A0'><o:p></o:p></span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span style='font-family:宋体;
mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:"Times New Roman"'>（</span><span
lang=EN-US>4</span><span style='font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>）</span><span lang=EN-US
style='color:#7030A0'>bin/hdfs dfsadmin -safemode wait<span style='mso-tab-count:
1'>   </span></span><span style='font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>（功能描述：等待安全模式状态<span style='color:#7030A0'>）</span></span><span
lang=EN-US style='color:#7030A0'><o:p></o:p></span></p>

<p class=10 style='margin-top:6.2pt;text-indent:22.0pt'><span lang=EN-US>3.<span
style='mso-tab-count:1'>    </span></span><span style='font-family:黑体;
mso-ascii-font-family:Arial;mso-hansi-font-family:Arial'>案例</span></p>

<p class=MsoNormal style='line-height:150%'><span lang=EN-US><span
style='mso-tab-count:1'>       </span></span><span style='font-family:宋体;
mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:"Times New Roman"'>模拟等待安全模式</span></p>

<p class=MsoNormal style='text-indent:21.0pt;line-height:150%'><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>（</span><span lang=EN-US>1</span><span style='font-family:
宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:"Times New Roman"'>）查看当前模式</span></p>

<p class=a style='margin-left:26.25pt;mso-para-margin-left:2.5gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'>[atguigu@hadoop102
hadoop-2.7.2]$ hdfs dfsadmin -safemode get<o:p></o:p></span></p>

<p class=a style='margin-left:26.25pt;mso-para-margin-left:2.5gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'>Safe
mode is OFF<o:p></o:p></span></p>

<p class=MsoNormal style='text-indent:21.0pt;line-height:150%'><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>（</span><span lang=EN-US>2</span><span style='font-family:
宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:"Times New Roman"'>）先进入安全模式</span></p>

<p class=a style='margin-left:26.25pt;mso-para-margin-left:2.5gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'>[atguigu@hadoop102
hadoop-2.7.2]$ bin/hdfs dfsadmin -safemode enter<o:p></o:p></span></p>

<p class=MsoNormal style='line-height:150%'><span lang=EN-US><span
style='mso-tab-count:1'>       </span></span><span style='font-family:宋体;
mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:"Times New Roman"'>（</span><span
lang=EN-US>3</span><span style='font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>）创建并执行下面的脚本</span></p>

<p class=MsoNormal style='margin-left:5.25pt;text-indent:21.0pt;line-height:
150%'><span style='font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>在</span><span lang=EN-US>/opt/module/hadoop-2.7.2</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>路径上，编辑一个脚本</span><span lang=EN-US>safemode.sh</span></p>

<p class=a style='margin-left:26.25pt;mso-para-margin-left:2.5gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'>[atguigu@hadoop102
hadoop-2.7.2]$ touch safemode.sh<o:p></o:p></span></p>

<p class=a style='margin-left:26.25pt;mso-para-margin-left:2.5gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'>[atguigu@hadoop102
hadoop-2.7.2]$ vim safemode.sh<o:p></o:p></span></p>

<p class=a style='margin-left:26.25pt;mso-para-margin-left:2.5gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'><o:p>&nbsp;</o:p></span></p>

<p class=a style='margin-left:26.25pt;mso-para-margin-left:2.5gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'>#!/bin/bash<o:p></o:p></span></p>

<p class=a style='margin-left:26.25pt;mso-para-margin-left:2.5gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'>hdfs
dfsadmin -safemode wait<span style='mso-spacerun:yes'>  </span><span
style='color:#00B050'>// </span></span><span style='font-size:10.5pt;
font-family:宋体;mso-ascii-font-family:"Courier New";mso-hansi-font-family:"Courier New";
color:#00B050'>会阻塞，等待安全模式退出</span><span lang=EN-US style='font-size:10.5pt'><o:p></o:p></span></p>

<p class=a style='margin-left:26.25pt;mso-para-margin-left:2.5gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'>hdfs
dfs -put /opt/module/hadoop-2.7.2/README.txt /<o:p></o:p></span></p>

<p class=a style='margin-left:26.25pt;mso-para-margin-left:2.5gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'><o:p>&nbsp;</o:p></span></p>

<p class=a style='margin-left:26.25pt;mso-para-margin-left:2.5gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'>[atguigu@hadoop102
hadoop-2.7.2]$ chmod 777 safemode.sh<o:p></o:p></span></p>

<p class=a style='margin-left:26.25pt;mso-para-margin-left:2.5gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'><o:p>&nbsp;</o:p></span></p>

<p class=a style='margin-left:26.25pt;mso-para-margin-left:2.5gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'>[atguigu@hadoop102
hadoop-2.7.2]$ ./safemode.sh <o:p></o:p></span></p>

<p class=MsoNormal style='line-height:150%'><span lang=EN-US><span
style='mso-tab-count:1'>       </span></span><span style='font-family:宋体;
mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:"Times New Roman"'>（</span><span
lang=EN-US>4</span><span style='font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>）再打开一个窗口，执行</span></p>

<p class=a style='margin-left:26.25pt;mso-para-margin-left:2.5gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'>[atguigu@hadoop102
hadoop-2.7.2]$ bin/hdfs dfsadmin -safemode leave<o:p></o:p></span></p>

<p class=MsoNormal style='text-indent:21.0pt;line-height:150%'><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>（</span><span lang=EN-US>5</span><span style='font-family:
宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:"Times New Roman"'>）观察</span></p>

<p class=MsoNormal style='margin-left:21.0pt;text-indent:21.0pt;line-height:
150%'><span style='font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>（</span><span lang=EN-US>a</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>）再观察上一个窗口</span></p>

<p class=MsoNormal style='margin-left:42.0pt;text-indent:21.0pt;line-height:
150%'><span lang=EN-US>Safe mode is OFF</span></p>

<p class=MsoNormal style='margin-left:21.0pt;text-indent:21.0pt;line-height:
150%'><span style='font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>（</span><span lang=EN-US>b</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>）</span><span lang=EN-US>HDFS</span><span style='font-family:
宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:"Times New Roman"'>集群上已经有上传的数据了。</span></p>

<h2 style='margin:0cm;margin-bottom:.0001pt'><span lang=EN-US style='font-size:
14.0pt;line-height:172%;font-family:"Times New Roman","serif"'>5.6 NameNode</span><span
style='font-size:14.0pt;line-height:172%;font-family:黑体;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>多目录配置</span><span
lang=EN-US style='font-size:14.0pt;line-height:172%;font-family:"Times New Roman","serif"'><o:p></o:p></span></h2>

<p class=10 style='margin-top:6.2pt;text-indent:22.0pt'><span lang=EN-US>1.<span
style='mso-tab-count:1'>    </span>NameNode</span><span style='font-family:
黑体;mso-ascii-font-family:Arial;mso-hansi-font-family:Arial'>的本地目录可以配置成多个，且每个目录存放内容相同，增加了可靠性</span></p>

<p class=10 style='margin-top:6.2pt;text-indent:22.0pt'><span lang=EN-US>2.<span
style='mso-tab-count:1'>    </span></span><span style='font-family:黑体;
mso-ascii-font-family:Arial;mso-hansi-font-family:Arial'>具体配置如下</span></p>

<p class=MsoNormal style='line-height:150%'><span lang=EN-US><span
style='mso-tab-count:1'>       </span></span><span style='font-family:宋体;
mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:"Times New Roman"'>（</span><span
lang=EN-US>1</span><span style='font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>）在</span><span lang=EN-US>hdfs-site.xml</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>文件中增加如下内容</span></p>

<p class=a style='margin-left:26.25pt;mso-para-margin-left:2.5gd;mso-layout-grid-align:
none;punctuation-trim:leading'><a name="OLE_LINK45"></a><a name="OLE_LINK44"></a><a
name="OLE_LINK43"></a><a name="OLE_LINK42"></a><a name="OLE_LINK35"><span
style='mso-bookmark:OLE_LINK42'><span style='mso-bookmark:OLE_LINK43'><span
style='mso-bookmark:OLE_LINK44'><span style='mso-bookmark:OLE_LINK45'><span
lang=EN-US style='font-size:10.5pt'>&lt;property&gt;<o:p></o:p></span></span></span></span></span></a></p>

<p class=a style='margin-left:26.25pt;mso-para-margin-left:2.5gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span style='mso-bookmark:OLE_LINK35'><span
style='mso-bookmark:OLE_LINK42'><span style='mso-bookmark:OLE_LINK43'><span
style='mso-bookmark:OLE_LINK44'><span style='mso-bookmark:OLE_LINK45'><span
lang=EN-US style='font-size:10.5pt'><span style='mso-spacerun:yes'>   
</span>&lt;name&gt;dfs.namenode.name.dir&lt;/name&gt;<o:p></o:p></span></span></span></span></span></span></p>

<p class=a style='margin-left:26.25pt;mso-para-margin-left:2.5gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span style='mso-bookmark:OLE_LINK35'><span
style='mso-bookmark:OLE_LINK42'><span style='mso-bookmark:OLE_LINK43'><span
style='mso-bookmark:OLE_LINK44'><span style='mso-bookmark:OLE_LINK45'><span
lang=EN-US style='font-size:10.5pt'>&lt;value&gt;</span><span lang=EN-US><span
style='mso-field-code:" HYPERLINK "'><span class=MsoHyperlink><span
style='font-size:10.5pt'>file:///${hadoop.tmp.dir}/dfs/name1,file:///${hadoop.tmp.dir}/dfs/name2&lt;/value</span></span></span></span></span></span></span></span></span><span
style='mso-bookmark:OLE_LINK35'><span style='mso-bookmark:OLE_LINK42'><span
style='mso-bookmark:OLE_LINK43'><span style='mso-bookmark:OLE_LINK44'><span
style='mso-bookmark:OLE_LINK45'><span lang=EN-US style='font-size:10.5pt'>&gt;<o:p></o:p></span></span></span></span></span></span></p>

<p class=a style='margin-left:26.25pt;mso-para-margin-left:2.5gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span style='mso-bookmark:OLE_LINK35'><span
style='mso-bookmark:OLE_LINK42'><span style='mso-bookmark:OLE_LINK43'><span
style='mso-bookmark:OLE_LINK44'><span style='mso-bookmark:OLE_LINK45'><span
lang=EN-US style='font-size:10.5pt'>&lt;/property&gt;</span></span></span></span></span></span><a
name="_Toc26969"></a><a name="_Toc439077230"></a><a name="_Toc10777"></a><a
name="_Toc11613"></a><a name="_Toc13739"></a><a name="_Toc421731825"></a><span
style='mso-bookmark:_Toc421731825'><span style='mso-bookmark:_Toc13739'><span
style='mso-bookmark:_Toc11613'><span style='mso-bookmark:_Toc10777'><span
style='mso-bookmark:_Toc439077230'><span style='mso-bookmark:_Toc26969'><span
lang=EN-US style='font-size:10.5pt'><o:p></o:p></span></span></span></span></span></span></span></p>

<p class=MsoNormal><span style='mso-bookmark:_Toc421731825'><span
style='mso-bookmark:_Toc13739'><span style='mso-bookmark:_Toc11613'><span
style='mso-bookmark:_Toc10777'><span style='mso-bookmark:_Toc439077230'><span
style='mso-bookmark:_Toc26969'><span lang=EN-US><o:p>&nbsp;</o:p></span></span></span></span></span></span></span></p>

<p class=MsoNormal><span style='mso-bookmark:_Toc421731825'><span
style='mso-bookmark:_Toc13739'><span style='mso-bookmark:_Toc11613'><span
style='mso-bookmark:_Toc10777'><span style='mso-bookmark:_Toc439077230'><span
style='mso-bookmark:_Toc26969'><span lang=EN-US>${hadoop.tmp.dir}</span></span></span></span></span></span></span><span
style='mso-bookmark:_Toc421731825'><span style='mso-bookmark:_Toc13739'><span
style='mso-bookmark:_Toc11613'><span style='mso-bookmark:_Toc10777'><span
style='mso-bookmark:_Toc439077230'><span style='mso-bookmark:_Toc26969'><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>是由该配置指定，默认是</span><span lang=EN-US>/tmp/xxx</span></span></span></span></span></span></span><span
style='mso-bookmark:_Toc421731825'><span style='mso-bookmark:_Toc13739'><span
style='mso-bookmark:_Toc11613'><span style='mso-bookmark:_Toc10777'><span
style='mso-bookmark:_Toc439077230'><span style='mso-bookmark:_Toc26969'><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>下</span></span></span></span></span></span></span></p>

<p class=MsoNormal><span style='mso-bookmark:_Toc421731825'><span
style='mso-bookmark:_Toc13739'><span style='mso-bookmark:_Toc11613'><span
style='mso-bookmark:_Toc10777'><span style='mso-bookmark:_Toc439077230'><span
style='mso-bookmark:_Toc26969'><span lang=EN-US style='mso-no-proof:yes'><v:shape
 id="图片_x0020_62" o:spid="_x0000_i1073" type="#_x0000_t75" style='width:554.4pt;
 height:81.6pt;visibility:visible;mso-wrap-style:square'>
 <img src="Hadoop_02HDFS.files/image063.png" o:title=""/>
</v:shape></span></span></span></span></span></span></span></p>

<p class=MsoNormal style='text-indent:21.0pt;line-height:150%'><span
style='mso-bookmark:_Toc421731825'><span style='mso-bookmark:_Toc13739'><span
style='mso-bookmark:_Toc11613'><span style='mso-bookmark:_Toc10777'><span
style='mso-bookmark:_Toc439077230'><span style='mso-bookmark:_Toc26969'><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>（</span><span lang=EN-US>2</span></span></span></span></span></span></span><span
style='mso-bookmark:_Toc421731825'><span style='mso-bookmark:_Toc13739'><span
style='mso-bookmark:_Toc11613'><span style='mso-bookmark:_Toc10777'><span
style='mso-bookmark:_Toc439077230'><span style='mso-bookmark:_Toc26969'><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>）停止集群，删除</span><span lang=EN-US>data</span></span></span></span></span></span></span><span
style='mso-bookmark:_Toc421731825'><span style='mso-bookmark:_Toc13739'><span
style='mso-bookmark:_Toc11613'><span style='mso-bookmark:_Toc10777'><span
style='mso-bookmark:_Toc439077230'><span style='mso-bookmark:_Toc26969'><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>和</span><span lang=EN-US>logs</span></span></span></span></span></span></span><span
style='mso-bookmark:_Toc421731825'><span style='mso-bookmark:_Toc13739'><span
style='mso-bookmark:_Toc11613'><span style='mso-bookmark:_Toc10777'><span
style='mso-bookmark:_Toc439077230'><span style='mso-bookmark:_Toc26969'><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>中所有数据。</span></span></span></span></span></span></span></p>

<p class=a style='margin-left:26.25pt;mso-para-margin-left:2.5gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span style='mso-bookmark:_Toc421731825'><span
style='mso-bookmark:_Toc13739'><span style='mso-bookmark:_Toc11613'><span
style='mso-bookmark:_Toc10777'><span style='mso-bookmark:_Toc439077230'><span
style='mso-bookmark:_Toc26969'><span lang=EN-US style='font-size:10.5pt'>[atguigu@hadoop102
hadoop-2.7.2]$ rm -rf data/ logs/<o:p></o:p></span></span></span></span></span></span></span></p>

<p class=a style='margin-left:26.25pt;mso-para-margin-left:2.5gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span style='mso-bookmark:_Toc421731825'><span
style='mso-bookmark:_Toc13739'><span style='mso-bookmark:_Toc11613'><span
style='mso-bookmark:_Toc10777'><span style='mso-bookmark:_Toc439077230'><span
style='mso-bookmark:_Toc26969'><span lang=EN-US style='font-size:10.5pt'>[atguigu@hadoop103
hadoop-2.7.2]$ rm -rf data/ logs/<o:p></o:p></span></span></span></span></span></span></span></p>

<p class=a style='margin-left:26.25pt;mso-para-margin-left:2.5gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span style='mso-bookmark:_Toc421731825'><span
style='mso-bookmark:_Toc13739'><span style='mso-bookmark:_Toc11613'><span
style='mso-bookmark:_Toc10777'><span style='mso-bookmark:_Toc439077230'><span
style='mso-bookmark:_Toc26969'><span lang=EN-US style='font-size:10.5pt'>[atguigu@hadoop104
hadoop-2.7.2]$ rm -rf data/ logs/<o:p></o:p></span></span></span></span></span></span></span></p>

<p class=MsoNormal style='text-indent:21.0pt;line-height:150%'><span
style='mso-bookmark:_Toc421731825'><span style='mso-bookmark:_Toc13739'><span
style='mso-bookmark:_Toc11613'><span style='mso-bookmark:_Toc10777'><span
style='mso-bookmark:_Toc439077230'><span style='mso-bookmark:_Toc26969'><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>（</span><span lang=EN-US>3</span></span></span></span></span></span></span><span
style='mso-bookmark:_Toc421731825'><span style='mso-bookmark:_Toc13739'><span
style='mso-bookmark:_Toc11613'><span style='mso-bookmark:_Toc10777'><span
style='mso-bookmark:_Toc439077230'><span style='mso-bookmark:_Toc26969'><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>）格式化集群并启动。</span></span></span></span></span></span></span></p>

<p class=a style='margin-left:26.25pt;mso-para-margin-left:2.5gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span style='mso-bookmark:_Toc421731825'><span
style='mso-bookmark:_Toc13739'><span style='mso-bookmark:_Toc11613'><span
style='mso-bookmark:_Toc10777'><span style='mso-bookmark:_Toc439077230'><span
style='mso-bookmark:_Toc26969'><span lang=EN-US style='font-size:10.5pt'>[atguigu@hadoop102
hadoop-2.7.2]$ bin/hdfs namenode </span></span></span></span></span></span></span><span
style='mso-bookmark:_Toc421731825'><span style='mso-bookmark:_Toc13739'><span
style='mso-bookmark:_Toc11613'><span style='mso-bookmark:_Toc10777'><span
style='mso-bookmark:_Toc439077230'><span style='mso-bookmark:_Toc26969'><span
style='font-size:10.5pt;font-family:宋体;mso-ascii-font-family:"Courier New";
mso-hansi-font-family:"Courier New"'>–</span></span></span></span></span></span></span><span
style='mso-bookmark:_Toc421731825'><span style='mso-bookmark:_Toc13739'><span
style='mso-bookmark:_Toc11613'><span style='mso-bookmark:_Toc10777'><span
style='mso-bookmark:_Toc439077230'><span style='mso-bookmark:_Toc26969'><span
lang=EN-US style='font-size:10.5pt'>format<o:p></o:p></span></span></span></span></span></span></span></p>

<p class=a style='margin-left:26.25pt;mso-para-margin-left:2.5gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span style='mso-bookmark:_Toc421731825'><span
style='mso-bookmark:_Toc13739'><span style='mso-bookmark:_Toc11613'><span
style='mso-bookmark:_Toc10777'><span style='mso-bookmark:_Toc439077230'><span
style='mso-bookmark:_Toc26969'><span lang=EN-US style='font-size:10.5pt'>[atguigu@hadoop102
hadoop-2.7.2]$ sbin/start-dfs.sh<o:p></o:p></span></span></span></span></span></span></span></p>

<p class=MsoNormal style='text-indent:21.0pt;line-height:150%'><span
style='mso-bookmark:_Toc421731825'><span style='mso-bookmark:_Toc13739'><span
style='mso-bookmark:_Toc11613'><span style='mso-bookmark:_Toc10777'><span
style='mso-bookmark:_Toc439077230'><span style='mso-bookmark:_Toc26969'><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>（</span><span lang=EN-US>4</span></span></span></span></span></span></span><span
style='mso-bookmark:_Toc421731825'><span style='mso-bookmark:_Toc13739'><span
style='mso-bookmark:_Toc11613'><span style='mso-bookmark:_Toc10777'><span
style='mso-bookmark:_Toc439077230'><span style='mso-bookmark:_Toc26969'><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>）查看结果</span></span></span></span></span></span></span></p>

<p class=a style='margin-left:26.25pt;mso-para-margin-left:2.5gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span style='mso-bookmark:_Toc421731825'><span
style='mso-bookmark:_Toc13739'><span style='mso-bookmark:_Toc11613'><span
style='mso-bookmark:_Toc10777'><span style='mso-bookmark:_Toc439077230'><span
style='mso-bookmark:_Toc26969'><span lang=EN-US style='font-size:10.5pt'>[atguigu@hadoop102
dfs]$ ll<o:p></o:p></span></span></span></span></span></span></span></p>

<p class=a style='margin-left:26.25pt;mso-para-margin-left:2.5gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span style='mso-bookmark:_Toc421731825'><span
style='mso-bookmark:_Toc13739'><span style='mso-bookmark:_Toc11613'><span
style='mso-bookmark:_Toc10777'><span style='mso-bookmark:_Toc439077230'><span
style='mso-bookmark:_Toc26969'><span style='font-size:10.5pt;font-family:宋体;
mso-ascii-font-family:"Courier New";mso-hansi-font-family:"Courier New"'>总用量</span></span></span></span></span></span></span><span
style='mso-bookmark:_Toc421731825'><span style='mso-bookmark:_Toc13739'><span
style='mso-bookmark:_Toc11613'><span style='mso-bookmark:_Toc10777'><span
style='mso-bookmark:_Toc439077230'><span style='mso-bookmark:_Toc26969'><span
lang=EN-US style='font-size:10.5pt'> 12<o:p></o:p></span></span></span></span></span></span></span></p>

<p class=a style='margin-left:26.25pt;mso-para-margin-left:2.5gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span style='mso-bookmark:_Toc421731825'><span
style='mso-bookmark:_Toc13739'><span style='mso-bookmark:_Toc11613'><span
style='mso-bookmark:_Toc10777'><span style='mso-bookmark:_Toc439077230'><span
style='mso-bookmark:_Toc26969'><span lang=EN-US style='font-size:10.5pt'>drwx------.
3 atguigu atguigu 4096 12</span></span></span></span></span></span></span><span
style='mso-bookmark:_Toc421731825'><span style='mso-bookmark:_Toc13739'><span
style='mso-bookmark:_Toc11613'><span style='mso-bookmark:_Toc10777'><span
style='mso-bookmark:_Toc439077230'><span style='mso-bookmark:_Toc26969'><span
style='font-size:10.5pt;font-family:宋体;mso-ascii-font-family:"Courier New";
mso-hansi-font-family:"Courier New"'>月</span></span></span></span></span></span></span><span
style='mso-bookmark:_Toc421731825'><span style='mso-bookmark:_Toc13739'><span
style='mso-bookmark:_Toc11613'><span style='mso-bookmark:_Toc10777'><span
style='mso-bookmark:_Toc439077230'><span style='mso-bookmark:_Toc26969'><span
lang=EN-US style='font-size:10.5pt'> 11 08:03 data<o:p></o:p></span></span></span></span></span></span></span></p>

<p class=a style='margin-left:26.25pt;mso-para-margin-left:2.5gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span style='mso-bookmark:_Toc421731825'><span
style='mso-bookmark:_Toc13739'><span style='mso-bookmark:_Toc11613'><span
style='mso-bookmark:_Toc10777'><span style='mso-bookmark:_Toc439077230'><span
style='mso-bookmark:_Toc26969'><span lang=EN-US style='font-size:10.5pt'>drwxrwxr-x.
3 atguigu atguigu 4096 12</span></span></span></span></span></span></span><span
style='mso-bookmark:_Toc421731825'><span style='mso-bookmark:_Toc13739'><span
style='mso-bookmark:_Toc11613'><span style='mso-bookmark:_Toc10777'><span
style='mso-bookmark:_Toc439077230'><span style='mso-bookmark:_Toc26969'><span
style='font-size:10.5pt;font-family:宋体;mso-ascii-font-family:"Courier New";
mso-hansi-font-family:"Courier New"'>月</span></span></span></span></span></span></span><span
style='mso-bookmark:_Toc421731825'><span style='mso-bookmark:_Toc13739'><span
style='mso-bookmark:_Toc11613'><span style='mso-bookmark:_Toc10777'><span
style='mso-bookmark:_Toc439077230'><span style='mso-bookmark:_Toc26969'><span
lang=EN-US style='font-size:10.5pt'> 11 08:03 name1<o:p></o:p></span></span></span></span></span></span></span></p>

<p class=a style='margin-left:26.25pt;mso-para-margin-left:2.5gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span style='mso-bookmark:_Toc421731825'><span
style='mso-bookmark:_Toc13739'><span style='mso-bookmark:_Toc11613'><span
style='mso-bookmark:_Toc10777'><span style='mso-bookmark:_Toc439077230'><span
style='mso-bookmark:_Toc26969'><span lang=EN-US style='font-size:10.5pt'>drwxrwxr-x.
3 atguigu atguigu 4096 12</span></span></span></span></span></span></span><span
style='mso-bookmark:_Toc421731825'><span style='mso-bookmark:_Toc13739'><span
style='mso-bookmark:_Toc11613'><span style='mso-bookmark:_Toc10777'><span
style='mso-bookmark:_Toc439077230'><span style='mso-bookmark:_Toc26969'><span
style='font-size:10.5pt;font-family:宋体;mso-ascii-font-family:"Courier New";
mso-hansi-font-family:"Courier New"'>月</span></span></span></span></span></span></span><span
style='mso-bookmark:_Toc421731825'><span style='mso-bookmark:_Toc13739'><span
style='mso-bookmark:_Toc11613'><span style='mso-bookmark:_Toc10777'><span
style='mso-bookmark:_Toc439077230'><span style='mso-bookmark:_Toc26969'><span
lang=EN-US style='font-size:10.5pt'> 11 08:03 name2<o:p></o:p></span></span></span></span></span></span></span></p>

<p class=MsoNormal><span style='mso-bookmark:_Toc421731825'><span
style='mso-bookmark:_Toc13739'><span style='mso-bookmark:_Toc11613'><span
style='mso-bookmark:_Toc10777'><span style='mso-bookmark:_Toc439077230'><span
style='mso-bookmark:_Toc26969'><span lang=EN-US><o:p>&nbsp;</o:p></span></span></span></span></span></span></span></p>

<p class=MsoNormal><span style='mso-bookmark:_Toc421731825'><span
style='mso-bookmark:_Toc13739'><span style='mso-bookmark:_Toc11613'><span
style='mso-bookmark:_Toc10777'><span style='mso-bookmark:_Toc439077230'><span
style='mso-bookmark:_Toc26969'><span lang=EN-US>name1</span></span></span></span></span></span></span><span
style='mso-bookmark:_Toc421731825'><span style='mso-bookmark:_Toc13739'><span
style='mso-bookmark:_Toc11613'><span style='mso-bookmark:_Toc10777'><span
style='mso-bookmark:_Toc439077230'><span style='mso-bookmark:_Toc26969'><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>、</span><span lang=EN-US>name2</span></span></span></span></span></span></span><span
style='mso-bookmark:_Toc421731825'><span style='mso-bookmark:_Toc13739'><span
style='mso-bookmark:_Toc11613'><span style='mso-bookmark:_Toc10777'><span
style='mso-bookmark:_Toc439077230'><span style='mso-bookmark:_Toc26969'><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>的数据一模一样，保证数据的可靠性。（当然不要放到同一个硬盘）</span></span></span></span></span></span></span></p>

<p class=MsoNormal><span style='mso-bookmark:_Toc421731825'><span
style='mso-bookmark:_Toc13739'><span style='mso-bookmark:_Toc11613'><span
style='mso-bookmark:_Toc10777'><span style='mso-bookmark:_Toc439077230'><span
style='mso-bookmark:_Toc26969'><span lang=EN-US style='mso-no-proof:yes'><v:shape
 id="图片_x0020_63" o:spid="_x0000_i1072" type="#_x0000_t75" style='width:351.6pt;
 height:325.2pt;visibility:visible;mso-wrap-style:square'>
 <img src="Hadoop_02HDFS.files/image064.png" o:title=""/>
</v:shape></span></span></span></span></span></span></span></p>

<p class=MsoNormal><span style='mso-bookmark:_Toc421731825'><span
style='mso-bookmark:_Toc13739'><span style='mso-bookmark:_Toc11613'><span
style='mso-bookmark:_Toc10777'><span style='mso-bookmark:_Toc439077230'><span
style='mso-bookmark:_Toc26969'><span lang=EN-US><o:p>&nbsp;</o:p></span></span></span></span></span></span></span></p>

<h1 style='margin:0cm;margin-bottom:.0001pt'><span style='mso-bookmark:_Toc421731825'><span
style='mso-bookmark:_Toc13739'><span style='mso-bookmark:_Toc11613'><span
style='mso-bookmark:_Toc10777'><span style='mso-bookmark:_Toc439077230'><span
style='mso-bookmark:_Toc26969'><span style='font-size:15.0pt;line-height:240%;
font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>第</span></span></span></span></span></span></span><span
style='mso-bookmark:_Toc421731825'><span style='mso-bookmark:_Toc13739'><span
style='mso-bookmark:_Toc11613'><span style='mso-bookmark:_Toc10777'><span
style='mso-bookmark:_Toc439077230'><span style='mso-bookmark:_Toc26969'><span
lang=EN-US style='font-size:15.0pt;line-height:240%'>6</span></span></span></span></span></span></span><span
style='mso-bookmark:_Toc421731825'><span style='mso-bookmark:_Toc13739'><span
style='mso-bookmark:_Toc11613'><span style='mso-bookmark:_Toc10777'><span
style='mso-bookmark:_Toc439077230'><span style='mso-bookmark:_Toc26969'><span
style='font-size:15.0pt;line-height:240%;font-family:宋体;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>章</span></span></span></span></span></span></span><span
style='mso-bookmark:_Toc421731825'><span style='mso-bookmark:_Toc13739'><span
style='mso-bookmark:_Toc11613'><span style='mso-bookmark:_Toc10777'><span
style='mso-bookmark:_Toc439077230'><span style='mso-bookmark:_Toc26969'><span
lang=EN-US style='font-size:15.0pt;line-height:240%'> DataNode</span></span></span></span></span></span></span><span
style='mso-bookmark:_Toc26969'></span><span style='mso-bookmark:_Toc439077230'></span><span
style='mso-bookmark:_Toc10777'></span><span style='mso-bookmark:_Toc11613'></span><span
style='mso-bookmark:_Toc13739'></span><span style='mso-bookmark:_Toc421731825'></span><span
style='font-size:15.0pt;line-height:240%;font-family:宋体;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>（面试开发重点）</span><span
lang=EN-US style='font-size:15.0pt;line-height:240%'><o:p></o:p></span></h1>

<h2 style='margin:0cm;margin-bottom:.0001pt'><span lang=EN-US style='font-size:
14.0pt;line-height:172%;font-family:"Times New Roman","serif"'>6.1 DataNode</span><span
style='font-size:14.0pt;line-height:172%;font-family:黑体;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>工作机制</span><span
lang=EN-US style='font-size:14.0pt;line-height:172%;font-family:"Times New Roman","serif"'><o:p></o:p></span></h2>

<p class=MsoNormal style='line-height:150%'><span lang=EN-US>DataNode</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>工作机制，如图</span><span lang=EN-US>3-15</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>所示。</span></p>

<p class=MsoNormal align=center style='text-align:center;line-height:150%'><span
lang=EN-US><v:shape id="_x0000_i1039" type="#_x0000_t75" style='width:544.2pt;
 height:306.6pt' o:ole="">
 <v:fill o:detectmouseclick="t"/>
 <img src="Hadoop_02HDFS.files/image065.png" o:title=""/>
</v:shape><!--[if gte mso 9]><xml>
 <o:OLEObject Type="Embed" ProgID="PowerPoint.Show.12" ShapeID="_x0000_i1039"
  DrawAspect="Content" ObjectID="_1629747798">
  <o:WordFieldCodes>\* MERGEFORMAT</o:WordFieldCodes>
 </o:OLEObject>
</xml><![endif]--></span></p>

<p class=MsoNormal align=center style='text-align:center;line-height:150%'><span
style='font-size:9.0pt;line-height:150%;font-family:宋体;mso-ascii-font-family:
Calibri;mso-hansi-font-family:Calibri;mso-bidi-font-family:Calibri'>图</span><span
lang=EN-US style='font-size:9.0pt;line-height:150%;font-family:"Calibri","sans-serif"'>3-15<span
style='mso-spacerun:yes'>  </span>DataNode</span><span style='font-size:9.0pt;
line-height:150%;font-family:宋体;mso-ascii-font-family:Calibri;mso-hansi-font-family:
Calibri;mso-bidi-font-family:Calibri'>工作机制</span><span lang=EN-US
style='font-size:9.0pt;line-height:150%;font-family:"Calibri","sans-serif"'><o:p></o:p></span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span style='font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>实际是</span><span lang=EN-US>10</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>分钟</span><span lang=EN-US>+30</span><span style='font-family:
宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:"Times New Roman"'>秒。</span></p>

<p class=MsoNormal><span lang=EN-US style='mso-no-proof:yes'><v:shape id="图片_x0020_64"
 o:spid="_x0000_i1071" type="#_x0000_t75" style='width:200.4pt;height:75.6pt;
 visibility:visible;mso-wrap-style:square'>
 <img src="Hadoop_02HDFS.files/image066.png" o:title=""/>
</v:shape></span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='text-indent:18.0pt;line-height:150%'><span
lang=EN-US>1</span><span style='font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>）一个数据块在</span><span lang=EN-US>DataNode</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>上以文件形式存储在磁盘上，包括两个文件，一个是数据本身，一个是元数据包括数据块的长度，块数据的校验和，以及时间戳。</span></p>

<p class=MsoNormal style='text-indent:18.0pt;line-height:150%'><span
lang=EN-US>2</span><span style='font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>）</span><span lang=EN-US>DataNode</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>启动后向</span><span lang=EN-US>NameNode</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>注册，通过后，周期性（</span><span lang=EN-US>1</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>小时）的向</span><span lang=EN-US>NameNode</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>上报所有的块信息。</span></p>

<p class=MsoNormal style='text-indent:18.0pt;line-height:150%'><span
lang=EN-US>3</span><span style='font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>）心跳是每</span><span lang=EN-US>3</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>秒一次，心跳返回结果带有</span><span lang=EN-US>NameNode</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>给该</span><span lang=EN-US>DataNode</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>的命令如复制块数据到另一台机器，或删除某个数据块。如果超过</span><span lang=EN-US>10</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>分钟没有收到某个</span><span lang=EN-US>DataNode</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>的心跳，则认为该节点不可用。</span></p>

<p class=MsoNormal style='text-indent:18.0pt;line-height:150%'><span
lang=EN-US>4</span><span style='font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>）集群运行中可以安全加入和退出一些机器。</span></p>

<h2 style='margin:0cm;margin-bottom:.0001pt'><span lang=EN-US style='font-size:
14.0pt;line-height:172%;font-family:"Times New Roman","serif"'>6.2 </span><span
style='font-size:14.0pt;line-height:172%;font-family:黑体;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>数据完整性</span><span
lang=EN-US style='font-size:14.0pt;line-height:172%;font-family:"Times New Roman","serif"'><o:p></o:p></span></h2>

<p class=MsoNormal style='text-indent:21.0pt;line-height:150%'><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>思考：如果电脑磁盘里面存储的数据是控制高铁信号灯的红灯信号（</span><span lang=EN-US>1</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>）和绿灯信号（</span><span lang=EN-US>0</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>），但是存储该数据的磁盘坏了，一直显示是绿灯，是否很危险？同理</span><span lang=EN-US>DataNode</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>节点上的数据损坏了，却没有发现，是否也很危险，那么如何解决呢？</span></p>

<p class=MsoNormal style='text-indent:21.0pt;line-height:150%'><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>如下是</span><span lang=EN-US>DataNode</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>节点保证数据完整性的方法。</span></p>

<p class=MsoNormal style='line-height:150%'><span lang=EN-US>1</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>）当</span><span lang=EN-US>DataNode</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>读取</span><span lang=EN-US>Block</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>的时候，它会计算</span><span lang=EN-US>CheckSum</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>。</span></p>

<p class=MsoNormal style='line-height:150%'><span lang=EN-US>2</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>）如果计算后的</span><span lang=EN-US>CheckSum</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>，与</span><span lang=EN-US>Block</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>创建时值不一样，说明</span><span lang=EN-US>Block</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>已经损坏。</span></p>

<p class=MsoNormal style='line-height:150%'><span lang=EN-US>3</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>）</span><span lang=EN-US>Client</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>读取其他</span><span lang=EN-US>DataNode</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>上的</span><span lang=EN-US>Block</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>。</span></p>

<p class=MsoNormal style='line-height:150%'><span lang=EN-US>4</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>）</span><span lang=EN-US>DataNode</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>在其文件创建后周期验证</span><span lang=EN-US>CheckSum</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>，如图</span><span lang=EN-US>3-16</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>所示。</span></p>

<p class=MsoNormal style='line-height:150%'><span lang=EN-US><v:shape id="_x0000_i1040"
 type="#_x0000_t75" style='width:412.8pt;height:232.2pt' o:ole="">
 <v:fill o:detectmouseclick="t"/>
 <img src="Hadoop_02HDFS.files/image067.png" o:title=""/>
</v:shape><!--[if gte mso 9]><xml>
 <o:OLEObject Type="Embed" ProgID="PowerPoint.Show.12" ShapeID="_x0000_i1040"
  DrawAspect="Content" ObjectID="_1629747799">
  <o:WordFieldCodes>\* MERGEFORMAT</o:WordFieldCodes>
 </o:OLEObject>
</xml><![endif]--></span></p>

<p class=MsoNormal align=center style='text-align:center;line-height:150%'><span
style='font-size:9.0pt;line-height:150%;font-family:宋体;mso-ascii-font-family:
Calibri;mso-hansi-font-family:Calibri;mso-bidi-font-family:Calibri'>图</span><span
lang=EN-US style='font-size:9.0pt;line-height:150%;font-family:"Calibri","sans-serif"'>3-16<span
style='mso-spacerun:yes'>  </span></span><span style='font-size:9.0pt;
line-height:150%;font-family:宋体;mso-ascii-font-family:Calibri;mso-hansi-font-family:
Calibri;mso-bidi-font-family:Calibri'>校验和</span></p>

<h2 style='margin:0cm;margin-bottom:.0001pt'><span lang=EN-US style='font-size:
14.0pt;line-height:172%;font-family:"Times New Roman","serif"'>6.3 </span><span
style='font-size:14.0pt;line-height:172%;font-family:黑体;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>掉线时限参数设置</span><span
lang=EN-US style='font-size:14.0pt;line-height:172%;font-family:"Times New Roman","serif"'><o:p></o:p></span></h2>

<p class=MsoNormal style='line-height:150%'><span lang=EN-US><v:shape id="_x0000_i1041"
 type="#_x0000_t75" style='width:525pt;height:293.4pt' o:ole="">
 <img src="Hadoop_02HDFS.files/image068.png" o:title=""/>
</v:shape><!--[if gte mso 9]><xml>
 <o:OLEObject Type="Embed" ProgID="PowerPoint.Show.12" ShapeID="_x0000_i1041"
  DrawAspect="Content" ObjectID="_1629747800">
 </o:OLEObject>
</xml><![endif]--></span></p>

<p class=MsoNormal style='line-height:150%'><span lang=EN-US style='color:black'><span
style='mso-tab-count:1'>       </span></span><span style='font-family:宋体;
mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:"Times New Roman";
color:black'>需要注意的是</span><span lang=EN-US style='color:black'>hdfs-site.xml </span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman";color:black'>配置文件中的</span><span lang=EN-US style='color:black'>heartbeat.recheck.interval</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman";color:black'>的单位为</span><span style='font-family:宋体;
mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:"Times New Roman";
color:red'>毫秒</span><span style='font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman";color:black'>，</span><span lang=EN-US
style='color:black'>dfs.heartbeat.interval</span><span style='font-family:宋体;
mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:"Times New Roman";
color:black'>的单位为</span><span style='font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman";color:red'>秒</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman";color:black'>。</span><span lang=EN-US style='color:black'><o:p></o:p></span></p>

<p class=a style='margin-left:26.25pt;mso-para-margin-left:2.5gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'>&lt;property&gt;<o:p></o:p></span></p>

<p class=a style='margin-left:26.25pt;mso-para-margin-left:2.5gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'><span
style='mso-spacerun:yes'> </span><span style='mso-spacerun:yes'>  
</span>&lt;!-- 300</span><span style='font-size:10.5pt;font-family:宋体;
mso-ascii-font-family:"Courier New";mso-hansi-font-family:"Courier New"'>秒，即五分钟</span><span
lang=EN-US style='font-size:10.5pt'> --&gt;<o:p></o:p></span></p>

<p class=a style='margin-left:26.25pt;mso-para-margin-left:2.5gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'><span
style='mso-spacerun:yes'>    </span>&lt;name&gt;<a name="OLE_LINK9"></a><a
name="OLE_LINK8"><span style='mso-bookmark:OLE_LINK9'>dfs.namenode.heartbeat.recheck-interval</span></a>&lt;/name&gt;<o:p></o:p></span></p>

<p class=a style='margin-left:26.25pt;mso-para-margin-left:2.5gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'><span
style='mso-spacerun:yes'>    </span>&lt;value&gt;300000&lt;/value&gt;<o:p></o:p></span></p>

<p class=a style='margin-left:26.25pt;mso-para-margin-left:2.5gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'>&lt;/property&gt;<o:p></o:p></span></p>

<p class=a style='margin-left:26.25pt;mso-para-margin-left:2.5gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'>&lt;property&gt;<o:p></o:p></span></p>

<p class=a style='margin-left:26.25pt;mso-para-margin-left:2.5gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'><span
style='mso-spacerun:yes'>   
</span>&lt;name&gt;dfs.heartbeat.interval&lt;/name&gt;<o:p></o:p></span></p>

<p class=a style='margin-left:26.25pt;mso-para-margin-left:2.5gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'><span
style='mso-spacerun:yes'>    </span>&lt;value&gt;3&lt;/value&gt;<o:p></o:p></span></p>

<p class=a style='margin-left:26.25pt;mso-para-margin-left:2.5gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'>&lt;/property&gt;<o:p></o:p></span></p>

<h2 style='margin:0cm;margin-bottom:.0001pt'><span lang=EN-US style='font-size:
14.0pt;line-height:172%;font-family:"Times New Roman","serif"'>6.4 </span><span
style='font-size:14.0pt;line-height:172%;font-family:黑体;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>服役新数据节点</span><span
lang=EN-US style='font-size:14.0pt;line-height:172%;font-family:"Times New Roman","serif"'><o:p></o:p></span></h2>

<p class=10 style='margin-top:6.2pt;text-indent:22.0pt'><span lang=EN-US>0.<span
style='mso-spacerun:yes'>  </span></span><span style='font-family:黑体;
mso-ascii-font-family:Arial;mso-hansi-font-family:Arial'>需求</span></p>

<p class=MsoNormal style='text-indent:21.0pt;line-height:150%'><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>随着公司业务的增长，数据量越来越大，原有的数据节点的容量已经不能满足存储数据的需求，需要在原有集群基础上动态添加新的数据节点。</span></p>

<p class=10 style='margin-top:6.2pt;text-indent:22.0pt'><span lang=EN-US>1.<span
style='mso-tab-count:1'>    </span></span><span style='font-family:黑体;
mso-ascii-font-family:Arial;mso-hansi-font-family:Arial'>环境准备</span></p>

<p class=MsoNormal style='line-height:150%'><span lang=EN-US><span
style='mso-tab-count:1'>       </span></span><span style='font-family:宋体;
mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:"Times New Roman"'>（</span><span
lang=EN-US>1</span><span style='font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>）在</span><span lang=EN-US>hadoop104</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>主机上再克隆一台</span><span lang=EN-US>hadoop105</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>主机</span></p>

<p class=MsoNormal style='line-height:150%'><span lang=EN-US><span
style='mso-tab-count:1'>       </span></span><span style='font-family:宋体;
mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:"Times New Roman"'>（</span><span
lang=EN-US>2</span><span style='font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>）修改</span><span lang=EN-US>IP</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>地址和主机名称</span></p>

<p class=MsoNormal style='line-height:150%'><span lang=EN-US><span
style='mso-tab-count:1'>       </span></span><span style='font-family:宋体;
mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:"Times New Roman"'>（</span><span
lang=EN-US>3</span><span style='font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>）<b style='mso-bidi-font-weight:normal'><span
style='color:red'>删除原来</span></b></span><b style='mso-bidi-font-weight:normal'><span
lang=EN-US style='color:red'>HDFS</span></b><b style='mso-bidi-font-weight:
normal'><span style='font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman";color:red'>文件系统留存的文件（</span><span
lang=EN-US style='color:red'>/opt/module/hadoop-2.7.2/data</span></b><b
style='mso-bidi-font-weight:normal'><span style='font-family:宋体;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman";color:red'>和</span><span
lang=EN-US style='color:red'>log</span></b><b style='mso-bidi-font-weight:normal'><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman";color:red'>）</span><span lang=EN-US style='color:red'><o:p></o:p></span></b></p>

<p class=MsoNormal><span style='font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>不删除的话，两台有同样数据的节点会轮流上岗。</span></p>

<p class=MsoNormal style='line-height:150%'><b style='mso-bidi-font-weight:
normal'><span lang=EN-US style='color:red'><span style='mso-tab-count:1'>       </span></span></b><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>（</span><span lang=EN-US>4</span><span style='font-family:
宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:"Times New Roman"'>）</span><span
lang=EN-US>source</span><span style='font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>一下配置文件</span></p>

<p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'>[atguigu@hadoop105
hadoop-2.7.2]$ source /etc/profile<o:p></o:p></span></p>

<p class=10 style='margin-top:6.2pt;text-indent:22.0pt'><span lang=EN-US>2.<span
style='mso-tab-count:1'>    </span></span><span style='font-family:黑体;
mso-ascii-font-family:Arial;mso-hansi-font-family:Arial'>服役新节点具体步骤</span></p>

<p class=MsoNormal style='text-indent:21.0pt;line-height:150%'><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>（</span><span lang=EN-US>1</span><span style='font-family:
宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:"Times New Roman"'>）直接启动</span><span
lang=EN-US>DataNode</span><span style='font-family:宋体;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>，即可关联到集群</span></p>

<p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'>[atguigu@hadoop105
hadoop-2.7.2]$ sbin/hadoop-daemon.sh start datanode<o:p></o:p></span></p>

<p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'>[atguigu@hadoop105
hadoop-2.7.2]$ sbin/yarn-daemon.sh start nodemanager<o:p></o:p></span></p>

<p class=MsoNormal style='text-indent:31.5pt;mso-char-indent-count:3.0;
line-height:150%'><span lang=EN-US style='mso-no-proof:yes'><v:shape id="_x0000_i1070"
 type="#_x0000_t75" style='width:528pt;height:254.4pt;visibility:visible;
 mso-wrap-style:square'>
 <img src="Hadoop_02HDFS.files/image069.png" o:title=""/>
</v:shape></span></p>

<p class=MsoNormal style='text-indent:21.0pt;line-height:150%'><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>（</span><span lang=EN-US>2</span><span style='font-family:
宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:"Times New Roman"'>）在</span><span
lang=EN-US>hadoop105</span><span style='font-family:宋体;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>上上传文件（在哪个客户端上传，同时也是服务器，则这服务器肯定会占副本的一块）</span></p>

<p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.0pt;
mso-bidi-font-size:10.5pt'>[atguigu@hadoop105 hadoop-2.7.2]$ hadoop fs -put
/opt/module/hadoop-2.7.2/LICENSE.txt /<o:p></o:p></span></p>

<p class=MsoNormal style='text-indent:21.0pt;line-height:150%'><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>（</span><span lang=EN-US>3</span><span style='font-family:
宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:"Times New Roman"'>）如果数据不均衡，可以用命令实现集群的再平衡</span></p>

<p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'>[atguigu@hadoop102
sbin]$ ./start-balancer.sh<o:p></o:p></span></p>

<p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'>starting
balancer, logging to /opt/module/hadoop-2.7.2/logs/hadoop-atguigu-balancer-hadoop102.out<o:p></o:p></span></p>

<p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'>Time
Stamp<span style='mso-spacerun:yes'>               </span>Iteration#<span
style='mso-spacerun:yes'>  </span>Bytes Already Moved<span
style='mso-spacerun:yes'>  </span>Bytes Left To Move<span
style='mso-spacerun:yes'>  </span>Bytes Being Moved<o:p></o:p></span></p>

<h2 style='margin:0cm;margin-bottom:.0001pt'><span lang=EN-US style='font-size:
14.0pt;line-height:172%;font-family:"Times New Roman","serif"'>6.5 </span><span
style='font-size:14.0pt;line-height:172%;font-family:黑体;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>退役旧数据节点</span><span
lang=EN-US style='font-size:14.0pt;line-height:172%;font-family:"Times New Roman","serif"'><o:p></o:p></span></h2>

<h3 style='margin:0cm;margin-bottom:.0001pt'><span lang=EN-US style='font-size:
14.0pt;line-height:172%'>6.5.1 </span><span style='font-size:14.0pt;line-height:
172%;font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>添加白名单</span><span lang=EN-US style='font-size:14.0pt;
line-height:172%'><o:p></o:p></span></h3>

<p class=MsoNormal><span style='font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>防止非法服务器进来，一般都是配置集群的时候就写好的。</span></p>

<p class=MsoNormal style='line-height:150%'><span lang=EN-US><span
style='mso-tab-count:1'>       </span></span><span style='font-family:宋体;
mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:"Times New Roman"'>添加到白名单的主机节点，都允许访问</span><span
lang=EN-US>NameNode</span><span style='font-family:宋体;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>，不在白名单的主机节点，都会被退出。</span></p>

<p class=MsoNormal style='text-indent:21.0pt;line-height:150%'><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>配置白名单的具体步骤如下：</span></p>

<p class=MsoNormal style='text-indent:21.0pt;line-height:150%'><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>（</span><span lang=EN-US>1</span><span style='font-family:
宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:"Times New Roman"'>）在</span><span
lang=EN-US>NameNode</span><span style='font-family:宋体;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>的</span><span
lang=EN-US>/opt/module/hadoop-2.7.2/etc/hadoop</span><span style='font-family:
宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:"Times New Roman"'>目录下创<span
style='color:black'>建</span></span><span lang=EN-US style='color:black'>dfs.hosts</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman";color:black'>文件</span></p>

<p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'>[atguigu@hadoop102
hadoop]$ pwd<o:p></o:p></span></p>

<p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'>/opt/module/hadoop-2.7.2/etc/hadoop<o:p></o:p></span></p>

<p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'>[atguigu@hadoop102
hadoop]$ touch dfs.hosts<o:p></o:p></span></p>

<p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'>[atguigu@hadoop102
hadoop]$ vi dfs.hosts<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:42.0pt;mso-para-margin-left:4.0gd;
line-height:150%'><span style='font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>添加如下主机名称（<span style='color:red'>不添加</span></span><span
lang=EN-US style='color:red'>hadoop105</span><span style='font-family:宋体;
mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:"Times New Roman"'>），内容不允许有空格空行</span></p>

<p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'>hadoop102<o:p></o:p></span></p>

<p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'>hadoop103<o:p></o:p></span></p>

<p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'>hadoop104<o:p></o:p></span></p>

<p class=MsoNormal style='line-height:150%'><span lang=EN-US><span
style='mso-tab-count:1'>       </span></span><span style='font-family:宋体;
mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:"Times New Roman"'>（</span><span
lang=EN-US>2</span><span style='font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>）在</span><span lang=EN-US>NameNode</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>的</span><span lang=EN-US>hdfs-site.xml</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>配置文件中增加</span><span lang=EN-US>dfs.hosts</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>属性</span></p>

<p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
none;punctuation-trim:leading'><a name="OLE_LINK23"></a><a name="OLE_LINK22"></a><a
name="OLE_LINK21"></a><a name="OLE_LINK20"></a><a name="OLE_LINK19"></a><a
name="OLE_LINK18"><span style='mso-bookmark:OLE_LINK19'><span style='mso-bookmark:
OLE_LINK20'><span style='mso-bookmark:OLE_LINK21'><span style='mso-bookmark:
OLE_LINK22'><span style='mso-bookmark:OLE_LINK23'><span lang=EN-US
style='font-size:10.5pt'>&lt;property&gt;<o:p></o:p></span></span></span></span></span></span></a></p>

<p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;text-indent:
21.0pt;mso-char-indent-count:2.0;mso-layout-grid-align:none;punctuation-trim:
leading'><span style='mso-bookmark:OLE_LINK18'><span style='mso-bookmark:OLE_LINK19'><span
style='mso-bookmark:OLE_LINK20'><span style='mso-bookmark:OLE_LINK21'><span
style='mso-bookmark:OLE_LINK22'><span style='mso-bookmark:OLE_LINK23'><span
lang=EN-US style='font-size:10.5pt'>&lt;name&gt;dfs.hosts&lt;/name&gt;<o:p></o:p></span></span></span></span></span></span></span></p>

<p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;text-indent:
21.0pt;mso-char-indent-count:2.0;mso-layout-grid-align:none;punctuation-trim:
leading'><span style='mso-bookmark:OLE_LINK18'><span style='mso-bookmark:OLE_LINK19'><span
style='mso-bookmark:OLE_LINK20'><span style='mso-bookmark:OLE_LINK21'><span
style='mso-bookmark:OLE_LINK22'><span style='mso-bookmark:OLE_LINK23'><span
lang=EN-US style='font-size:10.5pt'>&lt;!-- </span></span></span></span></span></span></span><span
style='mso-bookmark:OLE_LINK18'><span style='mso-bookmark:OLE_LINK19'><span
style='mso-bookmark:OLE_LINK20'><span style='mso-bookmark:OLE_LINK21'><span
style='mso-bookmark:OLE_LINK22'><span style='mso-bookmark:OLE_LINK23'><span
style='font-size:10.5pt;font-family:宋体;mso-ascii-font-family:"Courier New";
mso-hansi-font-family:"Courier New"'>让</span></span></span></span></span></span></span><span
style='mso-bookmark:OLE_LINK18'><span style='mso-bookmark:OLE_LINK19'><span
style='mso-bookmark:OLE_LINK20'><span style='mso-bookmark:OLE_LINK21'><span
style='mso-bookmark:OLE_LINK22'><span style='mso-bookmark:OLE_LINK23'><span
lang=EN-US style='font-size:10.5pt'>NN</span></span></span></span></span></span></span><span
style='mso-bookmark:OLE_LINK18'><span style='mso-bookmark:OLE_LINK19'><span
style='mso-bookmark:OLE_LINK20'><span style='mso-bookmark:OLE_LINK21'><span
style='mso-bookmark:OLE_LINK22'><span style='mso-bookmark:OLE_LINK23'><span
style='font-size:10.5pt;font-family:宋体;mso-ascii-font-family:"Courier New";
mso-hansi-font-family:"Courier New"'>去读这个文件</span></span></span></span></span></span></span><span
style='mso-bookmark:OLE_LINK18'><span style='mso-bookmark:OLE_LINK19'><span
style='mso-bookmark:OLE_LINK20'><span style='mso-bookmark:OLE_LINK21'><span
style='mso-bookmark:OLE_LINK22'><span style='mso-bookmark:OLE_LINK23'><span
lang=EN-US style='font-size:10.5pt'> --&gt;<o:p></o:p></span></span></span></span></span></span></span></p>

<p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;text-indent:
21.0pt;mso-char-indent-count:2.0;mso-layout-grid-align:none;punctuation-trim:
leading'><span style='mso-bookmark:OLE_LINK18'><span style='mso-bookmark:OLE_LINK19'><span
style='mso-bookmark:OLE_LINK20'><span style='mso-bookmark:OLE_LINK21'><span
style='mso-bookmark:OLE_LINK22'><span style='mso-bookmark:OLE_LINK23'><span
lang=EN-US style='font-size:10.5pt'>&lt;value&gt;/opt/module/hadoop-2.7.2/etc/hadoop/dfs.hosts&lt;/value&gt;<o:p></o:p></span></span></span></span></span></span></span></p>

<p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span style='mso-bookmark:OLE_LINK18'><span
style='mso-bookmark:OLE_LINK19'><span style='mso-bookmark:OLE_LINK20'><span
style='mso-bookmark:OLE_LINK21'><span style='mso-bookmark:OLE_LINK22'><span
style='mso-bookmark:OLE_LINK23'><span lang=EN-US style='font-size:10.5pt'>&lt;/property&gt;</span></span></span></span></span></span></span><span
lang=EN-US style='font-size:10.5pt'><o:p></o:p></span></p>

<p class=MsoNormal style='text-indent:21.0pt;line-height:150%'><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>（</span><span lang=EN-US>3</span><span style='font-family:
宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:"Times New Roman"'>）配置文件分发</span></p>

<p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'>[atguigu@hadoop102
hadoop]$ xsync hdfs-site.xml<o:p></o:p></span></p>

<p class=MsoNormal style='line-height:150%'><span lang=EN-US><span
style='mso-tab-count:1'>       </span></span><span style='font-family:宋体;
mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:"Times New Roman"'>（</span><span
lang=EN-US>4</span><span style='font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>）刷新</span><span lang=EN-US>NameNode</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>，让</span><span lang=EN-US>NN</span><span style='font-family:
宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:"Times New Roman"'>重新读</span><span
lang=EN-US>hdfs-site.xml</span><span style='font-family:宋体;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>文件</span></p>

<p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'>[atguigu@hadoop102
hadoop-2.7.2]$ hdfs dfsadmin -refreshNodes<o:p></o:p></span></p>

<p class=MsoNormal style='text-indent:42.0pt;mso-char-indent-count:4.0;
line-height:16.5pt;mso-layout-grid-align:none;punctuation-trim:leading'><span
lang=EN-US>Refresh nodes successful</span></p>

<p class=MsoNormal style='line-height:150%'><span lang=EN-US><span
style='mso-tab-count:1'>       </span></span><span style='font-family:宋体;
mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:"Times New Roman"'>（</span><span
lang=EN-US>5</span><span style='font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>）更新</span><span lang=EN-US>ResourceManager</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>节点</span></p>

<p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'>[atguigu@hadoop102
hadoop-2.7.2]$ yarn rmadmin -refreshNodes<o:p></o:p></span></p>

<p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'>17/06/24
14:17:11 INFO client.RMProxy: Connecting to ResourceManager at
hadoop103/192.168.1.103:8033<o:p></o:p></span></p>

<p class=MsoNormal style='line-height:150%'><span lang=EN-US><span
style='mso-tab-count:1'>       </span></span><span style='font-family:宋体;
mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:"Times New Roman"'>（</span><span
lang=EN-US>6</span><span style='font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>）在</span><span lang=EN-US>web</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>浏览器上查看，</span><span lang=EN-US>105</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>不在白名单，所以没有（前面</span><span lang=EN-US>105</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>已经添加到了集群）</span></p>

<p class=MsoNormal style='margin-left:1.0pt;text-indent:26.25pt;mso-char-indent-count:
2.5;line-height:150%'><span lang=EN-US style='mso-no-proof:yes'><v:shape id="图片_x0020_2"
 o:spid="_x0000_i1069" type="#_x0000_t75" style='width:511.2pt;height:234.6pt;
 visibility:visible;mso-wrap-style:square'>
 <img src="Hadoop_02HDFS.files/image070.png" o:title=""/>
</v:shape></span></p>

<p class=10 style='margin-top:6.2pt;text-indent:22.0pt'><span lang=EN-US>4.<span
style='mso-tab-count:1'>    </span></span><span style='font-family:黑体;
mso-ascii-font-family:Arial;mso-hansi-font-family:Arial'>如果数据不均衡，可以用命令实现集群的再平衡</span></p>

<p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span lang=EN-US style='font-size:9.0pt;
mso-bidi-font-size:10.5pt'>[atguigu@hadoop102 sbin]$ ./start-balancer.sh<o:p></o:p></span></p>

<p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span lang=EN-US style='font-size:9.0pt;
mso-bidi-font-size:10.5pt'>starting balancer, logging to
/opt/module/hadoop-2.7.2/logs/hadoop-atguigu-balancer-hadoop102.out<o:p></o:p></span></p>

<p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span lang=EN-US style='font-size:9.0pt;
mso-bidi-font-size:10.5pt'>Time Stamp<span
style='mso-spacerun:yes'>               </span>Iteration#<span
style='mso-spacerun:yes'>  </span>Bytes Already Moved<span
style='mso-spacerun:yes'>  </span>Bytes Left To Move<span
style='mso-spacerun:yes'>  </span>Bytes Being Moved<o:p></o:p></span></p>

<h3 style='margin:0cm;margin-bottom:.0001pt'><span lang=EN-US style='font-size:
14.0pt;line-height:172%'>6.5.2 </span><span style='font-size:14.0pt;line-height:
172%;font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>黑名单退役</span><span lang=EN-US style='font-size:14.0pt;
line-height:172%'><o:p></o:p></span></h3>

<p class=MsoNormal style='text-indent:21.0pt'><span style='font-family:宋体;
mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:"Times New Roman"'>在黑名单上面的主机都会被强制退出。</span></p>

<p class=10 style='margin-top:6.2pt;text-indent:22.0pt'><span lang=EN-US>1.</span><span
style='font-family:黑体;mso-ascii-font-family:Arial;mso-hansi-font-family:Arial'>在</span><span
lang=EN-US>NameNode</span><span style='font-family:黑体;mso-ascii-font-family:
Arial;mso-hansi-font-family:Arial'>的</span><span lang=EN-US>/opt/module/hadoop-2.7.2/etc/hadoop</span><span
style='font-family:黑体;mso-ascii-font-family:Arial;mso-hansi-font-family:Arial'>目录下创<span
style='color:black'>建</span></span><span lang=EN-US>dfs.hosts.exclude</span><span
style='font-family:黑体;mso-ascii-font-family:Arial;mso-hansi-font-family:Arial;
color:black'>文件</span></p>

<p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'>[atguigu@hadoop102
hadoop]$ pwd<o:p></o:p></span></p>

<p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'>/opt/module/hadoop-2.7.2/etc/hadoop<o:p></o:p></span></p>

<p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'>[atguigu@hadoop102
hadoop]$ touch dfs.hosts.exclude<o:p></o:p></span></p>

<p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'>[atguigu@hadoop102
hadoop]$ vi dfs.hosts.exclude<o:p></o:p></span></p>

<p class=MsoNormal style='text-indent:31.5pt;mso-char-indent-count:3.0;
line-height:150%;mso-layout-grid-align:none;punctuation-trim:leading'><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>添加如下主机名称（要退役的节点）</span></p>

<p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt;
color:red'>hadoop105<o:p></o:p></span></p>

<p class=10 style='margin-top:6.2pt;text-indent:22.0pt'><span lang=EN-US>2</span><span
style='font-family:黑体;mso-ascii-font-family:Arial;mso-hansi-font-family:Arial'>．在</span><span
lang=EN-US>NameNode</span><span style='font-family:黑体;mso-ascii-font-family:
Arial;mso-hansi-font-family:Arial'>的</span><span lang=EN-US>hdfs-site.xml</span><span
style='font-family:黑体;mso-ascii-font-family:Arial;mso-hansi-font-family:Arial'>配置文件中增加</span><span
lang=EN-US>dfs.hosts.exclude</span><span style='font-family:黑体;mso-ascii-font-family:
Arial;mso-hansi-font-family:Arial'>属性</span></p>

<div style='mso-element:para-border-div;border:none windowtext 1.0pt;
mso-border-alt:none windowtext 0cm;padding:1.0pt 4.0pt 1.0pt 4.0pt;background:
#E0E0E0;margin-left:31.5pt;margin-right:0cm'>

<p class=a style='margin-left:0cm;mso-para-margin-left:3.0gd;background:#E0E0E0;
mso-layout-grid-align:none;punctuation-trim:leading;border:none;mso-border-alt:
none windowtext 0cm;padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><a
name="OLE_LINK58"></a><a name="OLE_LINK56"></a><a name="OLE_LINK52"></a><a
name="OLE_LINK48"></a><a name="OLE_LINK47"></a><a name="OLE_LINK46"></a><a
name="OLE_LINK30"></a><a name="OLE_LINK29"></a><a name="OLE_LINK28"></a><a
name="OLE_LINK27"></a><a name="OLE_LINK26"></a><a name="OLE_LINK25"></a><a
name="OLE_LINK24"><span style='mso-bookmark:OLE_LINK25'><span style='mso-bookmark:
OLE_LINK26'><span style='mso-bookmark:OLE_LINK27'><span style='mso-bookmark:
OLE_LINK28'><span style='mso-bookmark:OLE_LINK29'><span style='mso-bookmark:
OLE_LINK30'><span style='mso-bookmark:OLE_LINK46'><span style='mso-bookmark:
OLE_LINK47'><span style='mso-bookmark:OLE_LINK48'><span style='mso-bookmark:
OLE_LINK52'><span style='mso-bookmark:OLE_LINK56'><span style='mso-bookmark:
OLE_LINK58'><span lang=EN-US style='font-size:10.5pt'>&lt;property&gt;<o:p></o:p></span></span></span></span></span></span></span></span></span></span></span></span></span></a></p>

<p class=a style='margin-left:0cm;mso-para-margin-left:3.0gd;background:#E0E0E0;
mso-layout-grid-align:none;punctuation-trim:leading;border:none;mso-border-alt:
none windowtext 0cm;padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span
style='mso-bookmark:OLE_LINK24'><span style='mso-bookmark:OLE_LINK25'><span
style='mso-bookmark:OLE_LINK26'><span style='mso-bookmark:OLE_LINK27'><span
style='mso-bookmark:OLE_LINK28'><span style='mso-bookmark:OLE_LINK29'><span
style='mso-bookmark:OLE_LINK30'><span style='mso-bookmark:OLE_LINK46'><span
style='mso-bookmark:OLE_LINK47'><span style='mso-bookmark:OLE_LINK48'><span
style='mso-bookmark:OLE_LINK52'><span style='mso-bookmark:OLE_LINK56'><span
style='mso-bookmark:OLE_LINK58'><span lang=EN-US style='font-size:10.5pt'>&lt;name&gt;dfs.hosts.exclude&lt;/name&gt;<o:p></o:p></span></span></span></span></span></span></span></span></span></span></span></span></span></span></p>

<p class=a style='margin-left:0cm;mso-para-margin-left:3.0gd;background:#E0E0E0;
mso-layout-grid-align:none;punctuation-trim:leading;border:none;mso-border-alt:
none windowtext 0cm;padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span
style='mso-bookmark:OLE_LINK24'><span style='mso-bookmark:OLE_LINK25'><span
style='mso-bookmark:OLE_LINK26'><span style='mso-bookmark:OLE_LINK27'><span
style='mso-bookmark:OLE_LINK28'><span style='mso-bookmark:OLE_LINK29'><span
style='mso-bookmark:OLE_LINK30'><span style='mso-bookmark:OLE_LINK46'><span
style='mso-bookmark:OLE_LINK47'><span style='mso-bookmark:OLE_LINK48'><span
style='mso-bookmark:OLE_LINK52'><span style='mso-bookmark:OLE_LINK56'><span
style='mso-bookmark:OLE_LINK58'><span lang=EN-US style='font-size:10.5pt'><span
style='mso-spacerun:yes'>     
</span>&lt;value&gt;/opt/module/hadoop-2.7.2/etc/hadoop/dfs.hosts.exclude&lt;/value&gt;<o:p></o:p></span></span></span></span></span></span></span></span></span></span></span></span></span></span></p>

<p class=a style='margin-left:0cm;mso-para-margin-left:3.0gd;background:#E0E0E0;
mso-layout-grid-align:none;punctuation-trim:leading;border:none;mso-border-alt:
none windowtext 0cm;padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span
style='mso-bookmark:OLE_LINK24'><span style='mso-bookmark:OLE_LINK25'><span
style='mso-bookmark:OLE_LINK26'><span style='mso-bookmark:OLE_LINK27'><span
style='mso-bookmark:OLE_LINK28'><span style='mso-bookmark:OLE_LINK29'><span
style='mso-bookmark:OLE_LINK30'><span style='mso-bookmark:OLE_LINK46'><span
style='mso-bookmark:OLE_LINK47'><span style='mso-bookmark:OLE_LINK48'><span
style='mso-bookmark:OLE_LINK52'><span style='mso-bookmark:OLE_LINK56'><span
style='mso-bookmark:OLE_LINK58'><span lang=EN-US style='font-size:10.5pt'>&lt;/property&gt;</span></span></span></span></span></span></span></span></span></span></span></span></span></span><span
lang=EN-US style='font-size:10.5pt'><o:p></o:p></span></p>

</div>

<p class=10 style='margin-top:6.2pt;text-indent:22.0pt'><span lang=EN-US>3</span><span
style='font-family:黑体;mso-ascii-font-family:Arial;mso-hansi-font-family:Arial'>．刷新</span><span
lang=EN-US>NameNode</span><span style='font-family:黑体;mso-ascii-font-family:
Arial;mso-hansi-font-family:Arial'>、刷新</span><span lang=EN-US>ResourceManager</span></p>

<div style='mso-element:para-border-div;border:none windowtext 1.0pt;
mso-border-alt:none windowtext 0cm;padding:1.0pt 4.0pt 1.0pt 4.0pt;background:
#E0E0E0;margin-left:31.5pt;margin-right:0cm'>

<p class=a style='margin-left:0cm;mso-para-margin-left:3.0gd;background:#E0E0E0;
mso-layout-grid-align:none;punctuation-trim:leading;border:none;mso-border-alt:
none windowtext 0cm;padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span
lang=EN-US style='font-size:10.5pt'>[atguigu@hadoop102 hadoop-2.7.2]$ hdfs
dfsadmin -refreshNodes<o:p></o:p></span></p>

<p class=a style='margin-left:0cm;mso-para-margin-left:3.0gd;background:#E0E0E0;
mso-layout-grid-align:none;punctuation-trim:leading;border:none;mso-border-alt:
none windowtext 0cm;padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span
lang=EN-US style='font-size:10.5pt'>Refresh nodes successful<o:p></o:p></span></p>

<p class=a style='margin-left:0cm;mso-para-margin-left:3.0gd;background:#E0E0E0;
mso-layout-grid-align:none;punctuation-trim:leading;border:none;mso-border-alt:
none windowtext 0cm;padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span
lang=EN-US style='font-size:10.5pt'><o:p>&nbsp;</o:p></span></p>

<p class=a style='margin-left:0cm;mso-para-margin-left:3.0gd;background:#E0E0E0;
mso-layout-grid-align:none;punctuation-trim:leading;border:none;mso-border-alt:
none windowtext 0cm;padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span
lang=EN-US style='font-size:10.5pt'>[atguigu@hadoop102 hadoop-2.7.2]$ yarn
rmadmin -refreshNodes<o:p></o:p></span></p>

<p class=a style='margin-left:0cm;mso-para-margin-left:3.0gd;background:#E0E0E0;
mso-layout-grid-align:none;punctuation-trim:leading;border:none;mso-border-alt:
none windowtext 0cm;padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span
lang=EN-US style='font-size:10.5pt'>17/06/24 14:55:56 INFO client.RMProxy:
Connecting to ResourceManager at hadoop103/192.168.1.103:8033<o:p></o:p></span></p>

</div>

<p class=10 style='margin-top:6.2pt;margin-right:0cm;margin-bottom:0cm;
margin-left:31.5pt;margin-bottom:.0001pt;text-indent:-9.5pt;mso-char-indent-count:
0'><span lang=EN-US>4.<span style='mso-tab-count:1'> </span><span
style='mso-tab-count:1'>   </span></span><span style='font-family:黑体;
mso-ascii-font-family:Arial;mso-hansi-font-family:Arial'>检查</span><span
lang=EN-US>Web</span><span style='font-family:黑体;mso-ascii-font-family:Arial;
mso-hansi-font-family:Arial'>浏览器，退役节点的状态为</span><span lang=EN-US>decommission
in progress</span><span style='font-family:黑体;mso-ascii-font-family:Arial;
mso-hansi-font-family:Arial'>（退役中），说明数据节点正在复制块到其他节点，如图</span><span lang=EN-US>3-17</span><span
style='font-family:黑体;mso-ascii-font-family:Arial;mso-hansi-font-family:Arial'>所示</span></p>

<p class=MsoNormal style='line-height:150%'><span lang=EN-US style='mso-no-proof:
yes'><v:shape id="_x0000_i1068" type="#_x0000_t75" style='width:549.6pt;
 height:43.2pt;visibility:visible;mso-wrap-style:square'>
 <img src="Hadoop_02HDFS.files/image071.png" o:title=""/>
</v:shape></span></p>

<p class=MsoNormal align=center style='text-align:center;line-height:150%'><span
style='font-size:9.0pt;line-height:150%;font-family:宋体;mso-ascii-font-family:
Calibri;mso-hansi-font-family:Calibri;mso-bidi-font-family:Calibri'>图</span><span
lang=EN-US style='font-size:9.0pt;line-height:150%;font-family:"Calibri","sans-serif"'>3-17<span
style='mso-spacerun:yes'>  </span></span><span style='font-size:9.0pt;
line-height:150%;font-family:宋体;mso-ascii-font-family:Calibri;mso-hansi-font-family:
Calibri;mso-bidi-font-family:Calibri'>退役中</span><span lang=EN-US
style='font-family:"Calibri","sans-serif"'><o:p></o:p></span></p>

<p class=10 style='margin-top:6.2pt;margin-right:0cm;margin-bottom:0cm;
margin-left:40.0pt;margin-bottom:.0001pt;text-indent:-18.0pt;mso-char-indent-count:
0;mso-list:l1 level1 lfo4'><![if !supportLists]><span lang=EN-US
style='mso-fareast-font-family:Arial'><span style='mso-list:Ignore'>5.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><![endif]><span
style='font-family:黑体;mso-ascii-font-family:Arial;mso-hansi-font-family:Arial'>等待退役节点状态为</span><span
lang=EN-US>decommissioned</span><span style='font-family:黑体;mso-ascii-font-family:
Arial;mso-hansi-font-family:Arial'>（所有块已经复制完成），停止该节点及节点资源管理器。注意：如果副本数是</span><span
lang=EN-US>3</span><span style='font-family:黑体;mso-ascii-font-family:Arial;
mso-hansi-font-family:Arial'>，服役的节点小于等于</span><span lang=EN-US>3</span><span
style='font-family:黑体;mso-ascii-font-family:Arial;mso-hansi-font-family:Arial'>，是不能退役成功的，需要修改副本数后才能退役，如图</span><span
lang=EN-US>3-18</span><span style='font-family:黑体;mso-ascii-font-family:Arial;
mso-hansi-font-family:Arial'>所示</span></p>

<p class=MsoNormal align=center style='margin-left:19.0pt;text-align:center;
text-indent:21.0pt;line-height:150%'><span lang=EN-US style='mso-no-proof:yes'><v:shape
 id="_x0000_i1067" type="#_x0000_t75" style='width:517.8pt;height:43.8pt;
 visibility:visible;mso-wrap-style:square'>
 <img src="Hadoop_02HDFS.files/image072.png" o:title="" cropleft="757f"
  cropright="2272f"/>
</v:shape></span></p>

<p class=MsoNormal align=center style='text-align:center;line-height:150%'><span
style='font-size:9.0pt;line-height:150%;font-family:宋体;mso-ascii-font-family:
Calibri;mso-hansi-font-family:Calibri;mso-bidi-font-family:Calibri'>图</span><span
lang=EN-US style='font-size:9.0pt;line-height:150%;font-family:"Calibri","sans-serif"'>3-18
</span><span style='font-size:9.0pt;line-height:150%;font-family:宋体;mso-ascii-font-family:
Calibri;mso-hansi-font-family:Calibri;mso-bidi-font-family:Calibri'>已退役</span><span
lang=EN-US style='font-family:"Calibri","sans-serif"'><o:p></o:p></span></p>

<div style='mso-element:para-border-div;border:none windowtext 1.0pt;
mso-border-alt:none windowtext 0cm;padding:1.0pt 4.0pt 1.0pt 4.0pt;background:
#E0E0E0;margin-left:42.0pt;margin-right:0cm'>

<p class=a style='margin-left:0cm;mso-para-margin-left:4.0gd;background:#E0E0E0;
mso-layout-grid-align:none;punctuation-trim:leading;border:none;mso-border-alt:
none windowtext 0cm;padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span
lang=EN-US style='font-size:10.5pt'>[atguigu@hadoop105 hadoop-2.7.2]$
sbin/hadoop-daemon.sh stop datanode<o:p></o:p></span></p>

</div>

<p class=MsoNormal style='margin-left:42.0pt;mso-para-margin-left:4.0gd;
line-height:150%;mso-layout-grid-align:none;punctuation-trim:leading'><span
lang=EN-US>stopping datanode</span></p>

<div style='mso-element:para-border-div;border:none windowtext 1.0pt;
mso-border-alt:none windowtext 0cm;padding:1.0pt 4.0pt 1.0pt 4.0pt;background:
#E0E0E0;margin-left:42.0pt;margin-right:0cm'>

<p class=a style='margin-left:0cm;mso-para-margin-left:4.0gd;background:#E0E0E0;
mso-layout-grid-align:none;punctuation-trim:leading;border:none;mso-border-alt:
none windowtext 0cm;padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span
lang=EN-US style='font-size:10.5pt'>[atguigu@hadoop105 hadoop-2.7.2]$
sbin/yarn-daemon.sh stop nodemanager<o:p></o:p></span></p>

</div>

<p class=MsoNormal style='margin-left:42.0pt;mso-para-margin-left:4.0gd;
line-height:150%;mso-layout-grid-align:none;punctuation-trim:leading'><span
lang=EN-US>stopping nodemanager</span></p>

<p class=10 style='margin-top:6.2pt;text-indent:22.0pt'><span lang=EN-US>6.<span
style='mso-tab-count:1'>    </span></span><span style='font-family:黑体;
mso-ascii-font-family:Arial;mso-hansi-font-family:Arial'>如果数据不均衡，可以用命令实现集群的再平衡</span></p>

<p class=a style='margin-left:42.0pt;mso-para-margin-left:4.0gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'>[atguigu@hadoop102
hadoop-2.7.2]$ sbin/start-balancer.sh <o:p></o:p></span></p>

<p class=a style='margin-left:42.0pt;mso-para-margin-left:4.0gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'>starting
balancer, logging to
/opt/module/hadoop-2.7.2/logs/hadoop-atguigu-balancer-hadoop102.out<o:p></o:p></span></p>

<p class=a style='margin-left:42.0pt;mso-para-margin-left:4.0gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'>Time
Stamp<span style='mso-spacerun:yes'>               </span>Iteration#<span
style='mso-spacerun:yes'>  </span>Bytes Already Moved<span
style='mso-spacerun:yes'>  </span>Bytes Left To Move<span
style='mso-spacerun:yes'>  </span>Bytes Being Moved<o:p></o:p></span></p>

<p class=MsoNormal style='line-height:150%'><span lang=EN-US><span
style='mso-tab-count:1'>       </span></span><span style='font-family:宋体;
mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:"Times New Roman";
color:red'>注意：不允许白名单和黑名单中同时出现同一个主机名称。黑白名单结合时候可以临时增加节点。</span></p>

<h2 style='margin:0cm;margin-bottom:.0001pt'><span lang=EN-US style='font-size:
14.0pt;line-height:172%;font-family:"Times New Roman","serif"'>6.6 Datanode</span><span
style='font-size:14.0pt;line-height:172%;font-family:黑体;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>多目录配置</span><span
lang=EN-US style='font-size:14.0pt;line-height:172%;font-family:"Times New Roman","serif"'><o:p></o:p></span></h2>

<p class=10 style='margin-top:6.2pt;margin-right:0cm;margin-bottom:0cm;
margin-left:21.0pt;margin-bottom:.0001pt;text-indent:1.0pt;mso-char-indent-count:
.09'><span lang=EN-US>1.<span style='mso-tab-count:1'>    </span>DataNode</span><span
style='font-family:黑体;mso-ascii-font-family:Arial;mso-hansi-font-family:Arial'>也可以配置成多个目录，每个目录存储的数据不一样。即：数据不是副本</span></p>

<p class=10 style='margin-top:6.2pt;text-indent:22.0pt'><span lang=EN-US>2</span><span
style='font-family:黑体;mso-ascii-font-family:Arial;mso-hansi-font-family:Arial'>．具体配置如下</span></p>

<p class=MsoNormal style='line-height:150%'><span lang=EN-US><span
style='mso-tab-count:1'>       </span>hdfs-site.xml</span></p>

<p class=a style='margin-left:21.0pt;mso-para-margin-left:2.0gd;mso-layout-grid-align:
none;punctuation-trim:leading'><a name="OLE_LINK61"></a><a name="OLE_LINK60"></a><a
name="OLE_LINK59"><span style='mso-bookmark:OLE_LINK60'><span style='mso-bookmark:
OLE_LINK61'><span lang=EN-US style='font-size:10.5pt'>&lt;property&gt;<o:p></o:p></span></span></span></a></p>

<p class=a style='margin-left:21.0pt;mso-para-margin-left:2.0gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span style='mso-bookmark:OLE_LINK59'><span
style='mso-bookmark:OLE_LINK60'><span style='mso-bookmark:OLE_LINK61'><span
lang=EN-US style='font-size:10.5pt'><span style='mso-spacerun:yes'>       
</span>&lt;name&gt;dfs.datanode.data.dir&lt;/name&gt;<o:p></o:p></span></span></span></span></p>

<p class=a style='margin-left:21.0pt;mso-para-margin-left:2.0gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span style='mso-bookmark:OLE_LINK59'><span
style='mso-bookmark:OLE_LINK60'><span style='mso-bookmark:OLE_LINK61'><span
lang=EN-US style='font-size:10.5pt'>&lt;value&gt;file:///${hadoop.tmp.dir}/dfs/data1,file:///${hadoop.tmp.dir}/dfs/data2&lt;/value&gt;<o:p></o:p></span></span></span></span></p>

<p class=a style='margin-left:21.0pt;mso-para-margin-left:2.0gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span style='mso-bookmark:OLE_LINK59'><span
style='mso-bookmark:OLE_LINK60'><span style='mso-bookmark:OLE_LINK61'><span
lang=EN-US style='font-size:10.5pt'>&lt;/property&gt;<o:p></o:p></span></span></span></span></p>

<p class=MsoNormal><span style='mso-bookmark:OLE_LINK59'><span
style='mso-bookmark:OLE_LINK60'><span style='mso-bookmark:OLE_LINK61'><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>配置完，删数据、格式化、重启集群</span></span></span></span></p>

<p class=MsoNormal><span style='mso-bookmark:OLE_LINK59'><span
style='mso-bookmark:OLE_LINK60'><span style='mso-bookmark:OLE_LINK61'><span
lang=EN-US><o:p>&nbsp;</o:p></span></span></span></span></p>

<p class=MsoNormal><span style='mso-bookmark:OLE_LINK59'><span
style='mso-bookmark:OLE_LINK60'><span style='mso-bookmark:OLE_LINK61'><span
lang=EN-US style='mso-no-proof:yes'><v:shape id="图片_x0020_65" o:spid="_x0000_i1066"
 type="#_x0000_t75" style='width:567pt;height:158.4pt;visibility:visible;
 mso-wrap-style:square'>
 <img src="Hadoop_02HDFS.files/image073.png" o:title=""/>
</v:shape></span></span></span></span></p>

<p class=MsoNormal><span style='mso-bookmark:OLE_LINK59'><span
style='mso-bookmark:OLE_LINK60'><span style='mso-bookmark:OLE_LINK61'><span
lang=EN-US><o:p>&nbsp;</o:p></span></span></span></span></p>

<p class=MsoNormal><span style='mso-bookmark:OLE_LINK59'><span
style='mso-bookmark:OLE_LINK60'><span style='mso-bookmark:OLE_LINK61'><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>进去</span><span lang=EN-US>data1</span></span></span></span><span
style='mso-bookmark:OLE_LINK59'><span style='mso-bookmark:OLE_LINK60'><span
style='mso-bookmark:OLE_LINK61'><span style='font-family:宋体;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>，是有数据的</span></span></span></span></p>

<p class=MsoNormal><span style='mso-bookmark:OLE_LINK59'><span
style='mso-bookmark:OLE_LINK60'><span style='mso-bookmark:OLE_LINK61'><span
lang=EN-US style='mso-no-proof:yes'><v:shape id="图片_x0020_66" o:spid="_x0000_i1065"
 type="#_x0000_t75" style='width:566.4pt;height:152.4pt;visibility:visible;
 mso-wrap-style:square'>
 <img src="Hadoop_02HDFS.files/image074.png" o:title=""/>
</v:shape></span></span></span></span></p>

<p class=MsoNormal><span style='mso-bookmark:OLE_LINK59'><span
style='mso-bookmark:OLE_LINK60'><span style='mso-bookmark:OLE_LINK61'><span
lang=EN-US style='mso-no-proof:yes'><v:shape id="图片_x0020_67" o:spid="_x0000_i1064"
 type="#_x0000_t75" style='width:567pt;height:89.4pt;visibility:visible;
 mso-wrap-style:square'>
 <img src="Hadoop_02HDFS.files/image075.png" o:title=""/>
</v:shape></span></span></span></span></p>

<p class=MsoNormal><span style='mso-bookmark:OLE_LINK59'><span
style='mso-bookmark:OLE_LINK60'><span style='mso-bookmark:OLE_LINK61'><span
lang=EN-US><o:p>&nbsp;</o:p></span></span></span></span></p>

<p class=MsoNormal><span style='mso-bookmark:OLE_LINK59'><span
style='mso-bookmark:OLE_LINK60'><span style='mso-bookmark:OLE_LINK61'><span
lang=EN-US>data2</span></span></span></span><span style='mso-bookmark:OLE_LINK59'><span
style='mso-bookmark:OLE_LINK60'><span style='mso-bookmark:OLE_LINK61'><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>是看不到数据</span></span></span></span></p>

<p class=MsoNormal><span style='mso-bookmark:OLE_LINK59'><span
style='mso-bookmark:OLE_LINK60'><span style='mso-bookmark:OLE_LINK61'><span
lang=EN-US style='mso-no-proof:yes'><v:shape id="图片_x0020_68" o:spid="_x0000_i1063"
 type="#_x0000_t75" style='width:566.4pt;height:81pt;visibility:visible;
 mso-wrap-style:square'>
 <img src="Hadoop_02HDFS.files/image076.png" o:title=""/>
</v:shape></span></span></span></span></p>

<p class=MsoNormal><span style='mso-bookmark:OLE_LINK59'><span
style='mso-bookmark:OLE_LINK60'><span style='mso-bookmark:OLE_LINK61'><span
lang=EN-US style='mso-no-proof:yes'><v:shape id="图片_x0020_69" o:spid="_x0000_i1062"
 type="#_x0000_t75" style='width:490.2pt;height:121.2pt;visibility:visible;
 mso-wrap-style:square'>
 <img src="Hadoop_02HDFS.files/image077.png" o:title=""/>
</v:shape></span></span></span></span></p>

<p class=MsoNormal><span style='mso-bookmark:OLE_LINK59'><span
style='mso-bookmark:OLE_LINK60'><span style='mso-bookmark:OLE_LINK61'><span
lang=EN-US><o:p>&nbsp;</o:p></span></span></span></span></p>

<span style='mso-bookmark:OLE_LINK61'></span><span style='mso-bookmark:OLE_LINK60'></span><span
style='mso-bookmark:OLE_LINK59'></span>

<h1 style='margin:0cm;margin-bottom:.0001pt'><span style='font-size:15.0pt;
line-height:240%;font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>第</span><span lang=EN-US
style='font-size:15.0pt;line-height:240%'>7</span><span style='font-size:15.0pt;
line-height:240%;font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>章</span><span style='font-size:15.0pt;
line-height:240%'> <span lang=EN-US>HDFS 2.X</span></span><span
style='font-size:15.0pt;line-height:240%;font-family:宋体;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>新特性</span><span
lang=EN-US style='font-size:15.0pt;line-height:240%'><o:p></o:p></span></h1>

<h2 style='margin:0cm;margin-bottom:.0001pt'><span lang=EN-US style='font-size:
14.0pt;line-height:172%;font-family:"Times New Roman","serif"'>7.1 </span><span
style='font-size:14.0pt;line-height:172%;font-family:黑体;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>集群间数据拷贝</span><span
lang=EN-US style='font-size:14.0pt;line-height:172%;font-family:"Times New Roman","serif"'><o:p></o:p></span></h2>

<p class=MsoNormal><span style='font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>测试结束就拷贝数据到生产环境。</span></p>

<p class=10 style='margin-top:6.2pt;text-indent:22.0pt'><span lang=EN-US>1</span><span
style='font-family:黑体;mso-ascii-font-family:Arial;mso-hansi-font-family:Arial'>．</span><span
lang=EN-US>scp</span><span style='font-family:黑体;mso-ascii-font-family:Arial;
mso-hansi-font-family:Arial'>实现两个远程主机之间的文件复制</span></p>

<p class=MsoNormal style='line-height:150%'><span lang=EN-US><span
style='mso-tab-count:1'>       </span>scp -r hello.txt <a
href="mailto:root@hadoop103:/user/atguigu/hello.txt">root@hadoop103:/user/atguigu/hello.txt</a><span
style='mso-tab-count:2'>        </span>// </span><span style='font-family:宋体;
mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:"Times New Roman"'>推</span>
<span lang=EN-US>push</span></p>

<p class=MsoNormal style='line-height:150%'><span lang=EN-US><span
style='mso-tab-count:1'>       </span>scp -r <a
href="mailto:root@hadoop103:/user/atguigu/hello.txt%20%20hello.txt">root@hadoop103:/user/atguigu/hello.txt<span
style='mso-spacerun:yes'>  </span>hello.txt</a><span style='mso-tab-count:2'>             </span>//
</span><span style='font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>拉</span> <span lang=EN-US>pull</span></p>

<p class=MsoNormal style='line-height:150%'><span lang=EN-US><span
style='mso-tab-count:1'>       </span>scp -r <a
href="mailto:root@hadoop103:/user/atguigu/hello.txt">root@hadoop103:/user/atguigu/hello.txt</a>
root@hadoop104:/user/atguigu<span style='mso-spacerun:yes'>   </span>//</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>是通过本地主机中转实现两个远程主机的文件复制；如果在两个远程主机之间</span><span lang=EN-US>ssh</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>没有配置的情况下可以使用该方式。</span></p>

<p class=10 style='margin-top:6.2pt;text-indent:22.0pt'><span lang=EN-US>2</span><span
style='font-family:黑体;mso-ascii-font-family:Arial;mso-hansi-font-family:Arial'>．采用</span><span
lang=EN-US>distcp</span><span style='font-family:黑体;mso-ascii-font-family:Arial;
mso-hansi-font-family:Arial'>命令实现两个</span><span lang=EN-US>Hadoop</span><span
style='font-family:黑体;mso-ascii-font-family:Arial;mso-hansi-font-family:Arial'>集群之间的递归数据复制（</span><span
lang=EN-US>102</span><span style='font-family:黑体;mso-ascii-font-family:Arial;
mso-hansi-font-family:Arial'>复制到</span><span lang=EN-US>103</span><span
style='font-family:黑体;mso-ascii-font-family:Arial;mso-hansi-font-family:Arial'>）</span></p>

<p class=a style='margin-left:21.0pt;mso-para-margin-left:2.0gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'>[atguigu@hadoop102
hadoop-2.7.2]$<span style='mso-spacerun:yes'>  </span>bin/hadoop distcp<o:p></o:p></span></p>

<p class=a style='margin-left:21.0pt;mso-para-margin-left:2.0gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'>hdfs://haoop102:9000/user/atguigu/hello.txt
hdfs://hadoop103:9000/user/atguigu/hello.txt<o:p></o:p></span></p>

<h2 style='margin:0cm;margin-bottom:.0001pt'><span lang=EN-US style='font-size:
14.0pt;line-height:172%;font-family:"Times New Roman","serif"'>7.2 </span><span
style='font-size:14.0pt;line-height:172%;font-family:黑体;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>小文件存档</span><span
lang=EN-US style='font-size:14.0pt;line-height:172%;font-family:"Times New Roman","serif"'><o:p></o:p></span></h2>

<p class=MsoNormal><span style='font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>小文件是</span><span lang=EN-US>HDFS</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>最大的问题，因为都生成了</span><span lang=EN-US>128M</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>。</span></p>

<p class=MsoNormal style='line-height:150%'><span lang=EN-US style='color:red'><v:shape
 id="_x0000_i1042" type="#_x0000_t75" style='width:513.6pt;height:288.6pt'
 o:ole="">
 <img src="Hadoop_02HDFS.files/image078.png" o:title=""/>
</v:shape><!--[if gte mso 9]><xml>
 <o:OLEObject Type="Embed" ProgID="PowerPoint.Show.12" ShapeID="_x0000_i1042"
  DrawAspect="Content" ObjectID="_1629747801">
 </o:OLEObject>
</xml><![endif]--><o:p></o:p></span></p>

<p class=MsoNormal><span style='font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>分析</span></p>

<p class=MsoNormal style='line-height:150%'><span lang=EN-US style='mso-no-proof:
yes'><v:shape id="图片_x0020_70" o:spid="_x0000_i1061" type="#_x0000_t75"
 style='width:475.2pt;height:76.2pt;visibility:visible;mso-wrap-style:square'>
 <img src="Hadoop_02HDFS.files/image079.png" o:title=""/>
</v:shape></span><span lang=EN-US style='color:red'><o:p></o:p></span></p>

<p class=10 style='margin-top:6.2pt;text-indent:22.0pt'><span lang=EN-US>3</span><span
style='font-family:黑体;mso-ascii-font-family:Arial;mso-hansi-font-family:Arial'>．案例实操</span></p>

<p class=MsoNormal style='margin-left:21.0pt;mso-para-margin-left:2.0gd;
line-height:150%'><span style='font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>（</span><span lang=EN-US>1</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>）需要启动</span><span lang=EN-US>YARN</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>进程</span></p>

<p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'>[atguigu@hadoop102
hadoop-2.7.2]$ start-yarn.sh<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:21.0pt;mso-para-margin-left:2.0gd;
line-height:150%'><span style='font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>（</span><span lang=EN-US>2</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>）归档文件</span></p>

<p class=MsoNormal><span lang=EN-US>input</span><span style='font-family:宋体;
mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:"Times New Roman"'>目录有三个小文件</span></p>

<p class=MsoNormal><span lang=EN-US style='mso-no-proof:yes'><v:shape id="图片_x0020_71"
 o:spid="_x0000_i1060" type="#_x0000_t75" style='width:567pt;height:139.2pt;
 visibility:visible;mso-wrap-style:square'>
 <img src="Hadoop_02HDFS.files/image080.png" o:title=""/>
</v:shape></span></p>

<p class=MsoNormal style='margin-left:21.0pt;mso-para-margin-left:2.0gd;
line-height:150%'><span lang=EN-US style='color:black'><span style='mso-tab-count:
1'>       </span></span><span style='font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman";color:black'>把</span><span lang=EN-US
style='color:black'>/user/atguigu/input</span><span style='font-family:宋体;
mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:"Times New Roman";
color:black'>目录里面的所有文件归档成一个叫</span><span lang=EN-US style='color:black'>input.har</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman";color:black'>的归档文件，并把归档后文件存储到</span><span lang=EN-US
style='color:black'>/user/atguigu/output</span><span style='font-family:宋体;
mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:"Times New Roman";
color:black'>路径下。</span><span lang=EN-US style='mso-bidi-font-size:10.5pt;
line-height:150%'>input.har</span><span style='mso-bidi-font-size:10.5pt;
line-height:150%;font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>是归档之后的文件名，然后指定源目录、目标目录。这操作会走</span><span
lang=EN-US style='mso-bidi-font-size:10.5pt;line-height:150%'>MR</span><span
style='mso-bidi-font-size:10.5pt;line-height:150%;font-family:宋体;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>。</span><span
lang=EN-US style='color:black'><o:p></o:p></span></p>

<p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'>[atguigu@hadoop102
hadoop-2.7.2]$ bin/hadoop archive -archiveName <b style='mso-bidi-font-weight:
normal'>input.har</b> –p<span style='mso-spacerun:yes'>  </span><b
style='mso-bidi-font-weight:normal'>/user/atguigu/input</b><span
style='mso-spacerun:yes'>   </span><b style='mso-bidi-font-weight:normal'>/user/atguigu/output<o:p></o:p></b></span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span style='font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>结果</span></p>

<p class=MsoNormal><span lang=EN-US style='mso-no-proof:yes'><v:shape id="图片_x0020_72"
 o:spid="_x0000_i1059" type="#_x0000_t75" style='width:567pt;height:109.8pt;
 visibility:visible;mso-wrap-style:square'>
 <img src="Hadoop_02HDFS.files/image081.png" o:title=""/>
</v:shape></span></p>

<p class=MsoNormal><span lang=EN-US style='mso-no-proof:yes'><v:shape id="图片_x0020_73"
 o:spid="_x0000_i1058" type="#_x0000_t75" style='width:567pt;height:159pt;
 visibility:visible;mso-wrap-style:square'>
 <img src="Hadoop_02HDFS.files/image082.png" o:title=""/>
</v:shape></span></p>

<p class=MsoNormal style='margin-left:21.0pt;mso-para-margin-left:2.0gd;
line-height:150%'><span style='font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman";color:black'>（</span><span lang=EN-US
style='color:black'>3</span><span style='font-family:宋体;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman";color:black'>）查看归档</span><span
lang=EN-US style='color:black'><o:p></o:p></span></p>

<p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'>[atguigu@hadoop102
hadoop-2.7.2]$ hadoop fs -lsr /user/atguigu/output/input.har<o:p></o:p></span></p>

<p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'>[atguigu@hadoop102
hadoop-2.7.2]$ hadoop fs -lsr har:///user/atguigu/output/input.har<o:p></o:p></span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='mso-no-proof:yes'><v:shape id="图片_x0020_75"
 o:spid="_x0000_i1057" type="#_x0000_t75" style='width:567pt;height:174pt;
 visibility:visible;mso-wrap-style:square'>
 <img src="Hadoop_02HDFS.files/image083.png" o:title=""/>
</v:shape></span></p>

<p class=MsoNormal style='margin-left:21.0pt;mso-para-margin-left:2.0gd;
line-height:150%'><span style='font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman";color:black'>（</span><span lang=EN-US
style='color:black'>4</span><span style='font-family:宋体;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman";color:black'>）解归档文件</span><span
lang=EN-US style='color:black'><o:p></o:p></span></p>

<p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'>[atguigu@hadoop102
hadoop-2.7.2]$ hadoop fs -cp har:/// user/atguigu/output/input.har/*<span
style='mso-spacerun:yes'>    </span>/user/atguigu<o:p></o:p></span></p>

<h2 style='margin:0cm;margin-bottom:.0001pt'><span lang=EN-US style='font-size:
14.0pt;line-height:172%;font-family:"Times New Roman","serif"'>7.3 </span><span
style='font-size:14.0pt;line-height:172%;font-family:黑体;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>回收站</span><span
lang=EN-US style='font-size:14.0pt;line-height:172%;font-family:"Times New Roman","serif"'><o:p></o:p></span></h2>

<p class=MsoNormal style='text-indent:21.0pt;line-height:150%'><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>开启回收站功能，可以将删除的文件在不超时的情况下，恢复原数据，起到防止误删除、备份等作用。</span></p>

<p class=10 style='margin-top:6.2pt;text-indent:22.0pt'><span lang=EN-US>1</span><span
style='font-family:黑体;mso-ascii-font-family:Arial;mso-hansi-font-family:Arial'>．回收站参数设置及工作机制</span></p>

<p class=MsoNormal align=center style='text-align:center;line-height:150%'><span
lang=EN-US><v:shape id="_x0000_i1043" type="#_x0000_t75" style='width:407.4pt;
 height:229.2pt' o:ole="">
 <img src="Hadoop_02HDFS.files/image084.png" o:title=""/>
</v:shape><!--[if gte mso 9]><xml>
 <o:OLEObject Type="Embed" ProgID="PowerPoint.Show.12" ShapeID="_x0000_i1043"
  DrawAspect="Content" ObjectID="_1629747802">
 </o:OLEObject>
</xml><![endif]--></span></p>

<p class=MsoNormal align=center style='text-align:center;line-height:150%'><span
style='font-size:9.0pt;line-height:150%;font-family:宋体;mso-ascii-font-family:
Calibri;mso-hansi-font-family:Calibri;mso-bidi-font-family:Calibri'>图</span><span
lang=EN-US style='font-size:9.0pt;line-height:150%;font-family:"Calibri","sans-serif"'>3-19
</span><span style='font-size:9.0pt;line-height:150%;font-family:宋体;mso-ascii-font-family:
Calibri;mso-hansi-font-family:Calibri;mso-bidi-font-family:Calibri'>回收站</span><span
lang=EN-US style='font-family:"Calibri","sans-serif"'><o:p></o:p></span></p>

<p class=10 style='margin-top:6.2pt;text-indent:22.0pt'><span lang=EN-US>2</span><span
style='font-family:黑体;mso-ascii-font-family:Arial;mso-hansi-font-family:Arial'>．启用回收站</span></p>

<p class=MsoNormal style='text-indent:21.0pt;line-height:150%'><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>修改</span><span lang=EN-US>core-site.xml</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>，配置垃圾回收时间为</span><span lang=EN-US>1</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>分钟。</span></p>

<div style='mso-element:para-border-div;border:none windowtext 1.0pt;
mso-border-alt:none windowtext 0cm;padding:1.0pt 4.0pt 1.0pt 4.0pt;background:
#E0E0E0;margin-left:31.5pt;margin-right:0cm'>

<p class=a style='margin-left:0cm;mso-para-margin-left:3.0gd;background:#E0E0E0;
mso-layout-grid-align:none;punctuation-trim:leading;border:none;mso-border-alt:
none windowtext 0cm;padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span
lang=EN-US style='font-size:10.5pt'>&lt;property&gt;<o:p></o:p></span></p>

<p class=a style='margin-left:0cm;mso-para-margin-left:3.0gd;background:#E0E0E0;
mso-layout-grid-align:none;punctuation-trim:leading;border:none;mso-border-alt:
none windowtext 0cm;padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span
lang=EN-US style='font-size:10.5pt'><span style='mso-spacerun:yes'>  
</span>&lt;name&gt;fs.trash.interval&lt;/name&gt;<o:p></o:p></span></p>

<p class=a style='margin-left:0cm;mso-para-margin-left:3.0gd;text-indent:16.5pt;
background:#E0E0E0;mso-layout-grid-align:none;punctuation-trim:leading;
border:none;mso-border-alt:none windowtext 0cm;padding:0cm;mso-padding-alt:
1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US style='font-size:10.5pt'>&lt;value&gt;1&lt;/value&gt;<o:p></o:p></span></p>

<p class=a style='margin-left:0cm;mso-para-margin-left:3.0gd;background:#E0E0E0;
mso-layout-grid-align:none;punctuation-trim:leading;border:none;mso-border-alt:
none windowtext 0cm;padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span
lang=EN-US style='font-size:10.5pt'>&lt;/property&gt;<o:p></o:p></span></p>

</div>

<p class=10 style='margin-top:6.2pt;text-indent:22.0pt'><span lang=EN-US>3</span><span
style='font-family:黑体;mso-ascii-font-family:Arial;mso-hansi-font-family:Arial'>．查看回收站</span></p>

<p class=MsoNormal style='text-indent:21.0pt;line-height:150%'><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>回收站在集群中的路径：</span><span lang=EN-US>/user/atguigu/.Trash/….</span></p>

<p class=10 style='margin-top:6.2pt;text-indent:22.0pt'><span lang=EN-US>4</span><span
style='font-family:黑体;mso-ascii-font-family:Arial;mso-hansi-font-family:Arial'>．修改访问垃圾回收站用户名称</span></p>

<p class=MsoNormal style='line-height:150%'><span lang=EN-US><span
style='mso-tab-count:1'>       </span></span><span style='font-family:宋体;
mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:"Times New Roman"'>进入垃圾回收站用户名称，默认是</span><span
lang=EN-US>dr.who</span><span style='font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>，修改为</span><span lang=EN-US>atguigu</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>用户</span></p>

<p class=MsoNormal style='line-height:150%'><span lang=EN-US><span
style='mso-tab-count:1'>       </span>[core-site.xml]</span></p>

<div style='mso-element:para-border-div;border:none windowtext 1.0pt;
mso-border-alt:none windowtext 0cm;padding:1.0pt 4.0pt 1.0pt 4.0pt;background:
#E0E0E0;margin-left:31.5pt;margin-right:0cm'>

<p class=a style='margin-left:0cm;mso-para-margin-left:3.0gd;background:#E0E0E0;
mso-layout-grid-align:none;punctuation-trim:leading;border:none;mso-border-alt:
none windowtext 0cm;padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><a
name="OLE_LINK63"></a><a name="OLE_LINK62"></a><a name="OLE_LINK32"></a><a
name="OLE_LINK31"><span style='mso-bookmark:OLE_LINK32'><span style='mso-bookmark:
OLE_LINK62'><span style='mso-bookmark:OLE_LINK63'><span lang=EN-US
style='font-size:10.5pt'>&lt;property&gt;<o:p></o:p></span></span></span></span></a></p>

<p class=a style='margin-left:0cm;mso-para-margin-left:3.0gd;background:#E0E0E0;
mso-layout-grid-align:none;punctuation-trim:leading;border:none;mso-border-alt:
none windowtext 0cm;padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span
style='mso-bookmark:OLE_LINK31'><span style='mso-bookmark:OLE_LINK32'><span
style='mso-bookmark:OLE_LINK62'><span style='mso-bookmark:OLE_LINK63'><span
lang=EN-US style='font-size:10.5pt'><span style='mso-spacerun:yes'> 
</span>&lt;name&gt;hadoop.http.staticuser.user&lt;/name&gt;<o:p></o:p></span></span></span></span></span></p>

<p class=a style='margin-left:0cm;mso-para-margin-left:3.0gd;background:#E0E0E0;
mso-layout-grid-align:none;punctuation-trim:leading;border:none;mso-border-alt:
none windowtext 0cm;padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span
style='mso-bookmark:OLE_LINK31'><span style='mso-bookmark:OLE_LINK32'><span
style='mso-bookmark:OLE_LINK62'><span style='mso-bookmark:OLE_LINK63'><span
lang=EN-US style='font-size:10.5pt'><span style='mso-spacerun:yes'> 
</span>&lt;value&gt;atguigu&lt;/value&gt;<o:p></o:p></span></span></span></span></span></p>

<p class=a style='margin-left:0cm;mso-para-margin-left:3.0gd;background:#E0E0E0;
mso-layout-grid-align:none;punctuation-trim:leading;border:none;mso-border-alt:
none windowtext 0cm;padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span
style='mso-bookmark:OLE_LINK31'><span style='mso-bookmark:OLE_LINK32'><span
style='mso-bookmark:OLE_LINK62'><span style='mso-bookmark:OLE_LINK63'><span
lang=EN-US style='font-size:10.5pt'>&lt;/property&gt;</span></span></span></span></span><span
style='mso-bookmark:OLE_LINK62'><span style='mso-bookmark:OLE_LINK63'><span
lang=EN-US style='font-size:10.5pt'><o:p></o:p></span></span></span></p>

</div>

<span style='mso-bookmark:OLE_LINK63'></span><span style='mso-bookmark:OLE_LINK62'></span>

<p class=10 style='margin-top:6.2pt;text-indent:22.0pt'><span lang=EN-US>5.<span
style='mso-tab-count:1'>    </span></span><span style='font-family:黑体;
mso-ascii-font-family:Arial;mso-hansi-font-family:Arial'>通过程序删除的文件不会经过回收站，需要调用</span><span
lang=EN-US>moveToTrash()</span><span style='font-family:黑体;mso-ascii-font-family:
Arial;mso-hansi-font-family:Arial'>才进入回收站</span></p>

<p class=MsoNormal style='margin-left:21.0pt;mso-para-margin-left:2.0gd;
line-height:150%'><span lang=EN-US>Trash trash = New Trash(conf);</span></p>

<p class=MsoNormal style='margin-left:21.0pt;mso-para-margin-left:2.0gd;
line-height:150%'><span lang=EN-US>trash.moveToTrash(path);</span></p>

<p class=10 style='margin-top:6.2pt;margin-right:0cm;margin-bottom:0cm;
margin-left:40.0pt;margin-bottom:.0001pt;text-indent:-18.0pt;mso-char-indent-count:
0;mso-list:l4 level1 lfo5'><![if !supportLists]><span lang=EN-US
style='mso-fareast-font-family:Arial'><span style='mso-list:Ignore'>5.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><![endif]><span
style='font-family:黑体;mso-ascii-font-family:Arial;mso-hansi-font-family:Arial'>恢复回收站数据</span></p>

<div style='mso-element:para-border-div;border:none windowtext 1.0pt;
mso-border-alt:none windowtext 0cm;padding:1.0pt 4.0pt 1.0pt 4.0pt;background:
#E0E0E0;margin-left:31.5pt;margin-right:0cm'>

<p class=a style='margin-left:0cm;mso-para-margin-left:3.0gd;background:#E0E0E0;
mso-layout-grid-align:none;punctuation-trim:leading;border:none;mso-border-alt:
none windowtext 0cm;padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span
lang=EN-US style='font-size:10.5pt'>[atguigu@hadoop102 hadoop-2.7.2]$ hadoop fs
-mv<o:p></o:p></span></p>

<p class=a style='margin-left:0cm;mso-para-margin-left:3.0gd;background:#E0E0E0;
mso-layout-grid-align:none;punctuation-trim:leading;border:none;mso-border-alt:
none windowtext 0cm;padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span
lang=EN-US style='font-size:10.5pt'>/user/atguigu/.Trash/Current/user/atguigu/input<span
style='mso-spacerun:yes'>    </span>/user/atguigu/input<o:p></o:p></span></p>

</div>

<p class=10 style='margin-top:6.2pt;margin-right:0cm;margin-bottom:0cm;
margin-left:40.0pt;margin-bottom:.0001pt;text-indent:-18.0pt;mso-char-indent-count:
0;mso-list:l4 level1 lfo5'><![if !supportLists]><span lang=EN-US
style='mso-fareast-font-family:Arial'><span style='mso-list:Ignore'>6.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><![endif]><span
style='font-family:黑体;mso-ascii-font-family:Arial;mso-hansi-font-family:Arial'>清空回收站</span></p>

<div style='mso-element:para-border-div;border:none windowtext 1.0pt;
mso-border-alt:none windowtext 0cm;padding:1.0pt 4.0pt 1.0pt 4.0pt;background:
#E0E0E0;margin-left:31.5pt;margin-right:0cm'>

<p class=a style='margin-left:0cm;mso-para-margin-left:3.0gd;background:#E0E0E0;
mso-layout-grid-align:none;punctuation-trim:leading;border:none;mso-border-alt:
none windowtext 0cm;padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span
lang=EN-US style='font-size:10.5pt'>[atguigu@hadoop102 hadoop-2.7.2]$ hadoop fs
-expunge<o:p></o:p></span></p>

</div>

<h2 style='margin:0cm;margin-bottom:.0001pt'><span lang=EN-US style='font-size:
14.0pt;line-height:172%;font-family:"Times New Roman","serif"'>7.4 </span><span
style='font-size:14.0pt;line-height:172%;font-family:黑体;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>快照管理</span><span
lang=EN-US style='font-size:14.0pt;line-height:172%;font-family:"Times New Roman","serif"'><o:p></o:p></span></h2>

<p class=MsoNormal style='line-height:150%'><span lang=EN-US><v:shape id="_x0000_i1044"
 type="#_x0000_t75" style='width:458.4pt;height:257.4pt' o:ole="">
 <img src="Hadoop_02HDFS.files/image085.png" o:title=""/>
</v:shape><!--[if gte mso 9]><xml>
 <o:OLEObject Type="Embed" ProgID="PowerPoint.Show.12" ShapeID="_x0000_i1044"
  DrawAspect="Content" ObjectID="_1629747803">
 </o:OLEObject>
</xml><![endif]--></span></p>

<p class=MsoNormal style='line-height:150%'><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='line-height:150%'><span style='font-family:宋体;
mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:"Times New Roman"'>分析</span></p>

<p class=MsoNormal style='line-height:150%'><span lang=EN-US style='mso-no-proof:
yes'><v:shape id="图片_x0020_76" o:spid="_x0000_i1056" type="#_x0000_t75"
 style='width:567.6pt;height:49.2pt;visibility:visible;mso-wrap-style:square'>
 <img src="Hadoop_02HDFS.files/image086.png" o:title=""/>
</v:shape></span></p>

<p class=MsoNormal style='line-height:150%'><span lang=EN-US style='mso-no-proof:
yes'><v:shape id="图片_x0020_77" o:spid="_x0000_i1055" type="#_x0000_t75"
 style='width:567pt;height:47.4pt;visibility:visible;mso-wrap-style:square'>
 <img src="Hadoop_02HDFS.files/image087.png" o:title=""/>
</v:shape></span></p>

<p class=10 style='margin-top:6.2pt;text-indent:22.0pt'><span lang=EN-US>2</span><span
style='font-family:黑体;mso-ascii-font-family:Arial;mso-hansi-font-family:Arial'>．案例实操</span></p>

<p class=MsoNormal style='line-height:150%'><span lang=EN-US><span
style='mso-tab-count:1'>       </span></span><span style='font-family:宋体;
mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:"Times New Roman"'>（</span><span
lang=EN-US>1</span><span style='font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>）开启</span><span lang=EN-US>/</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>禁用指定目录的快照功能</span></p>

<p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'>[atguigu@hadoop102
hadoop-2.7.2]$ hdfs dfsadmin -allowSnapshot /user/atguigu/input<o:p></o:p></span></p>

<p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'><o:p>&nbsp;</o:p></span></p>

<p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'>[atguigu@hadoop102
hadoop-2.7.2]$ hdfs dfsadmin -disallowSnapshot /user/atguigu/input<o:p></o:p></span></p>

<p class=MsoNormal style='line-height:150%'><span lang=EN-US><span
style='mso-tab-count:1'>       </span></span><span style='font-family:宋体;
mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:"Times New Roman"'>（</span><span
lang=EN-US>2</span><span style='font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>）对目录创建快照</span></p>

<p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'>[atguigu@hadoop102
hadoop-2.7.2]$ hdfs dfs -createSnapshot /user/atguigu/input<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:31.5pt;line-height:150%'><span
lang=EN-US style='color:#00B050'>// </span><span style='font-family:宋体;
mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:"Times New Roman";
color:#00B050'>输出结果。快照和源文件使用相同数据</span><span lang=EN-US style='color:#00B050'><o:p></o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='mso-no-proof:yes'><v:shape id="图片_x0020_78"
 o:spid="_x0000_i1054" type="#_x0000_t75" style='width:519.6pt;height:16.8pt;
 visibility:visible;mso-wrap-style:square'>
 <img src="Hadoop_02HDFS.files/image088.png" o:title=""/>
</v:shape></span></p>

<p class=MsoNormal><span style='font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>根据上面的输出，访问对应的路径</span></p>

<p class=MsoNormal><span lang=EN-US style='mso-no-proof:yes'><v:shape id="图片_x0020_79"
 o:spid="_x0000_i1053" type="#_x0000_t75" style='width:567pt;height:138.6pt;
 visibility:visible;mso-wrap-style:square'>
 <img src="Hadoop_02HDFS.files/image089.png" o:title=""/>
</v:shape></span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span style='font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>查看快照目录</span></p>

<p class=MsoNormal><span lang=EN-US style='mso-no-proof:yes'><v:shape id="图片_x0020_80"
 o:spid="_x0000_i1052" type="#_x0000_t75" style='width:567pt;height:26.4pt;
 visibility:visible;mso-wrap-style:square'>
 <img src="Hadoop_02HDFS.files/image090.png" o:title=""/>
</v:shape></span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span style='font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>比较该目录与那个快照的不同</span></p>

<p class=MsoNormal><span lang=EN-US style='mso-no-proof:yes'><v:shape id="图片_x0020_81"
 o:spid="_x0000_i1051" type="#_x0000_t75" style='width:567pt;height:68.4pt;
 visibility:visible;mso-wrap-style:square'>
 <img src="Hadoop_02HDFS.files/image091.png" o:title=""/>
</v:shape></span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span style='font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>后面操作自行测试</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'>[atguigu@hadoop102
hadoop-2.7.2]$ hdfs dfs -lsr /user/atguigu/input/.snapshot/<o:p></o:p></span></p>

<p class=MsoNormal style='line-height:150%'><span lang=EN-US><span
style='mso-tab-count:1'>       </span></span><span style='font-family:宋体;
mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:"Times New Roman"'>（</span><span
lang=EN-US>3</span><span style='font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>）指定名称创建快照</span></p>

<p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'>[atguigu@hadoop102
hadoop-2.7.2]$ hdfs dfs -createSnapshot /user/atguigu/input<span
style='mso-spacerun:yes'>  </span>miao170508<o:p></o:p></span></p>

<p class=MsoNormal style='line-height:150%'><span lang=EN-US style='color:black'><span
style='mso-tab-count:1'>       </span></span><span style='font-family:宋体;
mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:"Times New Roman";
color:black'>（</span><span lang=EN-US style='color:black'>4</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman";color:black'>）重命名快照</span><span lang=EN-US style='color:black'><o:p></o:p></span></p>

<p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'>[atguigu@hadoop102
hadoop-2.7.2]$ hdfs dfs -renameSnapshot /user/atguigu/input/ <span
style='mso-spacerun:yes'> </span>miao170508 atguigu170508<o:p></o:p></span></p>

<p class=MsoNormal style='line-height:150%'><span lang=EN-US><span
style='mso-tab-count:1'>       </span></span><span style='font-family:宋体;
mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:"Times New Roman"'>（</span><span
lang=EN-US>5</span><span style='font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>）列出当前用户所有可快照目录</span></p>

<p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'>[atguigu@hadoop102
hadoop-2.7.2]$ hdfs lsSnapshottableDir<o:p></o:p></span></p>

<p class=MsoNormal style='line-height:150%'><span lang=EN-US><span
style='mso-tab-count:1'>       </span></span><span style='font-family:宋体;
mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:"Times New Roman"'>（</span><span
lang=EN-US>6</span><span style='font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>）比较两个快照目录的不同之处</span></p>

<p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'>[atguigu@hadoop102
hadoop-2.7.2]$ hdfs snapshotDiff<o:p></o:p></span></p>

<p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'><span
style='mso-spacerun:yes'> </span>/user/atguigu/input/<span
style='mso-spacerun:yes'>  </span>.<span style='mso-spacerun:yes'> 
</span>.snapshot/atguigu170508<span style='mso-tab-count:1'> </span><o:p></o:p></span></p>

<p class=MsoNormal style='line-height:150%'><span lang=EN-US><span
style='mso-tab-count:1'>       </span></span><span style='font-family:宋体;
mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:"Times New Roman"'>（</span><span
lang=EN-US>7</span><span style='font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>）恢复快照</span></p>

<p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'>[atguigu@hadoop102
hadoop-2.7.2]$ hdfs dfs -cp<o:p></o:p></span></p>

<p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'>/user/atguigu/input/.snapshot/s20170708-134303.027
/user<o:p></o:p></span></p>

<h1 style='margin:0cm;margin-bottom:.0001pt'><span style='font-size:15.0pt;
line-height:240%;font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>第</span><span lang=EN-US
style='font-size:15.0pt;line-height:240%'>8</span><span style='font-size:15.0pt;
line-height:240%;font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>章</span><span lang=EN-US
style='font-size:15.0pt;line-height:240%'> HDFS HA</span><span
style='font-size:15.0pt;line-height:240%;font-family:宋体;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>高可用</span><span
lang=EN-US style='font-size:15.0pt;line-height:240%'><o:p></o:p></span></h1>

<h2 style='margin:0cm;margin-bottom:.0001pt'><span lang=EN-US style='font-size:
14.0pt;line-height:172%;font-family:"Times New Roman","serif"'>8.1 HA</span><span
style='font-size:14.0pt;line-height:172%;font-family:黑体;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>概述</span><span
lang=EN-US style='font-size:14.0pt;line-height:172%;font-family:"Times New Roman","serif"'><o:p></o:p></span></h2>

<p class=MsoNormal style='line-height:150%'><span lang=EN-US>1</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>）所谓</span><span lang=EN-US>HA</span><span style='font-family:
宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:"Times New Roman"'>（</span><span
lang=EN-US>High Available</span><span style='font-family:宋体;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>），即高可用（</span><span
lang=EN-US>7*24</span><span style='font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>小时不中断服务）。</span></p>

<p class=MsoNormal style='line-height:150%'><span lang=EN-US>2</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>）实现高可用最关键的策略是消除单点故障。</span><span lang=EN-US>HA</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>严格来说应该分成各个组件的</span><span lang=EN-US>HA</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>机制：</span><span lang=EN-US>HDFS</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>的</span><span lang=EN-US>HA</span><span style='font-family:
宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:"Times New Roman"'>和</span><span
lang=EN-US>YARN</span><span style='font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>的</span><span lang=EN-US>HA</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>。</span></p>

<p class=MsoNormal style='line-height:150%'><span lang=EN-US>3</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>）</span><span lang=EN-US>Hadoop2.0</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>之前，在</span><span lang=EN-US>HDFS</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>集群中</span><span lang=EN-US>NameNode</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>存在单点故障（</span><span lang=EN-US>SPOF</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>）。</span></p>

<p class=MsoNormal style='line-height:150%'><span lang=EN-US>4</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>）</span><span lang=EN-US>NameNode</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>主要在以下两个方面影响</span><span lang=EN-US>HDFS</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>集群</span></p>

<p class=MsoNormal style='line-height:150%'><span lang=EN-US><span
style='mso-tab-count:1'>       </span>NameNode</span><span style='font-family:
宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:"Times New Roman"'>机器发生意外，如宕机，集群将无法使用，直到管理员重启</span></p>

<p class=MsoNormal style='line-height:150%'><span lang=EN-US><span
style='mso-tab-count:1'>       </span>NameNode</span><span style='font-family:
宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:"Times New Roman"'>机器需要升级，包括软件、硬件升级，此时集群也将无法使用</span></p>

<p class=MsoNormal style='text-indent:21.0pt;line-height:150%'><span
lang=EN-US>HDFS HA</span><span style='font-family:宋体;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>功能通过配置</span><span
lang=EN-US>Active/Standby</span><span style='font-family:宋体;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>两个</span><span
lang=EN-US>NameNodes</span><span style='font-family:宋体;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>实现在集群中对</span><span
lang=EN-US>NameNode</span><span style='font-family:宋体;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>的热备来解决上述问题。如果出现故障，如机器崩溃或机器需要升级维护，这时可通过此种方式将</span><span
lang=EN-US>NameNode</span><span style='font-family:宋体;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>很快的切换到另外一台机器。</span></p>

<h2 style='margin:0cm;margin-bottom:.0001pt'><span lang=EN-US style='font-size:
14.0pt;line-height:172%;font-family:"Times New Roman","serif"'>8.2 HDFS-HA</span><span
style='font-size:14.0pt;line-height:172%;font-family:黑体;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>工作机制</span><span
lang=EN-US style='font-size:14.0pt;line-height:172%;font-family:"Times New Roman","serif"'><o:p></o:p></span></h2>

<p class=MsoNormal style='text-indent:21.0pt;line-height:150%'><span
style='mso-bidi-font-size:10.5pt;line-height:150%;font-family:宋体;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>通过双</span><span
lang=EN-US style='mso-bidi-font-size:10.5pt;line-height:150%'>NameNode</span><span
style='mso-bidi-font-size:10.5pt;line-height:150%;font-family:宋体;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>消除单点故障</span><span
lang=EN-US style='mso-bidi-font-size:10.5pt;line-height:150%'><o:p></o:p></span></p>

<h3 style='margin:0cm;margin-bottom:.0001pt'><span lang=EN-US style='font-size:
14.0pt;line-height:172%'>8.2.1 HDFS-HA</span><span style='font-size:14.0pt;
line-height:172%;font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>工作要点</span><span lang=EN-US
style='font-size:14.0pt;line-height:172%'><o:p></o:p></span></h3>

<p class=10 style='margin-top:6.2pt;text-indent:22.0pt'><span lang=EN-US>1.<span
style='mso-tab-count:1'>    </span></span><span style='font-family:黑体;
mso-ascii-font-family:Arial;mso-hansi-font-family:Arial'>元数据管理方式需要改变</span></p>

<p class=MsoNormal style='text-indent:21.0pt;line-height:150%'><span
style='mso-bidi-font-size:10.5pt;line-height:150%;font-family:宋体;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>内存中各自保存一份元数据；</span><span
lang=EN-US style='mso-bidi-font-size:10.5pt;line-height:150%'><o:p></o:p></span></p>

<p class=MsoNormal style='text-indent:21.0pt;line-height:150%'><span
lang=EN-US style='mso-bidi-font-size:10.5pt;line-height:150%'>Edits</span><span
style='mso-bidi-font-size:10.5pt;line-height:150%;font-family:宋体;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>日志只有</span><span
lang=EN-US style='mso-bidi-font-size:10.5pt;line-height:150%'>Active</span><span
style='mso-bidi-font-size:10.5pt;line-height:150%;font-family:宋体;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>状态的</span><span
lang=EN-US style='mso-bidi-font-size:10.5pt;line-height:150%'>NameNode</span><span
style='mso-bidi-font-size:10.5pt;line-height:150%;font-family:宋体;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>节点可以做写操作；</span><span
lang=EN-US style='mso-bidi-font-size:10.5pt;line-height:150%'><o:p></o:p></span></p>

<p class=MsoNormal style='text-indent:21.0pt;line-height:150%'><span
style='mso-bidi-font-size:10.5pt;line-height:150%;font-family:宋体;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>两个</span><span
lang=EN-US style='mso-bidi-font-size:10.5pt;line-height:150%'>NameNode</span><span
style='mso-bidi-font-size:10.5pt;line-height:150%;font-family:宋体;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>都可以读取</span><span
lang=EN-US style='mso-bidi-font-size:10.5pt;line-height:150%'>Edits</span><span
style='mso-bidi-font-size:10.5pt;line-height:150%;font-family:宋体;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>；</span><span
lang=EN-US style='mso-bidi-font-size:10.5pt;line-height:150%'><o:p></o:p></span></p>

<p class=MsoNormal style='text-indent:21.0pt;line-height:150%'><span
style='mso-bidi-font-size:10.5pt;line-height:150%;font-family:宋体;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>共享的</span><span
lang=EN-US style='mso-bidi-font-size:10.5pt;line-height:150%'>Edits</span><span
style='mso-bidi-font-size:10.5pt;line-height:150%;font-family:宋体;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>放在一个共享存储中管理（</span><span
lang=EN-US style='mso-bidi-font-size:10.5pt;line-height:150%'>qjournal</span><span
style='mso-bidi-font-size:10.5pt;line-height:150%;font-family:宋体;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>和</span><span
lang=EN-US style='mso-bidi-font-size:10.5pt;line-height:150%'>NFS</span><span
style='mso-bidi-font-size:10.5pt;line-height:150%;font-family:宋体;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>两个主流实现）；</span><span
lang=EN-US style='mso-bidi-font-size:10.5pt;line-height:150%'><o:p></o:p></span></p>

<p class=10 style='margin-top:6.2pt;text-indent:22.0pt'><span lang=EN-US>2.<span
style='mso-tab-count:1'>    </span></span><span style='font-family:黑体;
mso-ascii-font-family:Arial;mso-hansi-font-family:Arial'>需要一个状态管理功能模块</span></p>

<p class=MsoNormal style='text-indent:21.0pt;line-height:150%'><span
style='mso-bidi-font-size:10.5pt;line-height:150%;font-family:宋体;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>实现了一个</span><span
lang=EN-US style='mso-bidi-font-size:10.5pt;line-height:150%'>zkfailover</span><span
style='mso-bidi-font-size:10.5pt;line-height:150%;font-family:宋体;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>，常驻在每一个</span><span
lang=EN-US style='mso-bidi-font-size:10.5pt;line-height:150%'>namenode</span><span
style='mso-bidi-font-size:10.5pt;line-height:150%;font-family:宋体;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>所在的节点，每一个</span><span
lang=EN-US style='mso-bidi-font-size:10.5pt;line-height:150%'>zkfailover</span><span
style='mso-bidi-font-size:10.5pt;line-height:150%;font-family:宋体;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>负责监控自己所在</span><span
lang=EN-US style='mso-bidi-font-size:10.5pt;line-height:150%'>NameNode</span><span
style='mso-bidi-font-size:10.5pt;line-height:150%;font-family:宋体;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>节点，利用</span><span
lang=EN-US style='mso-bidi-font-size:10.5pt;line-height:150%'>zk</span><span
style='mso-bidi-font-size:10.5pt;line-height:150%;font-family:宋体;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>进行状态标识，当需要进行状态切换时，由</span><span
lang=EN-US style='mso-bidi-font-size:10.5pt;line-height:150%'>zkfailover</span><span
style='mso-bidi-font-size:10.5pt;line-height:150%;font-family:宋体;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>来负责切换，切换时需要防止</span><span
lang=EN-US style='mso-bidi-font-size:10.5pt;line-height:150%'>brain split</span><span
style='mso-bidi-font-size:10.5pt;line-height:150%;font-family:宋体;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>现象的发生。</span><span
lang=EN-US style='mso-bidi-font-size:10.5pt;line-height:150%'><o:p></o:p></span></p>

<p class=10 style='margin-top:6.2pt;text-indent:22.0pt'><span lang=EN-US>3.<span
style='mso-tab-count:1'>    </span></span><span style='font-family:黑体;
mso-ascii-font-family:Arial;mso-hansi-font-family:Arial'>必须保证两个</span><span
lang=EN-US>NameNode</span><span style='font-family:黑体;mso-ascii-font-family:
Arial;mso-hansi-font-family:Arial'>之间能够</span><span lang=EN-US>ssh</span><span
style='font-family:黑体;mso-ascii-font-family:Arial;mso-hansi-font-family:Arial'>无密码登录</span></p>

<p class=10 style='margin-top:6.2pt;text-indent:22.0pt'><span lang=EN-US>4.<span
style='mso-tab-count:1'>    </span></span><span style='font-family:黑体;
mso-ascii-font-family:Arial;mso-hansi-font-family:Arial'>隔离（</span><span
lang=EN-US>Fence</span><span style='font-family:黑体;mso-ascii-font-family:Arial;
mso-hansi-font-family:Arial'>），即同一时刻仅仅有一个</span><span lang=EN-US>NameNode</span><span
style='font-family:黑体;mso-ascii-font-family:Arial;mso-hansi-font-family:Arial'>对外提供服务</span></p>

<h3 style='margin:0cm;margin-bottom:.0001pt'><span lang=EN-US style='font-size:
14.0pt;line-height:172%'>8.2.2 HDFS-HA</span><span style='font-size:14.0pt;
line-height:172%;font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>自动故障转移工作机制</span><span lang=EN-US
style='font-size:14.0pt;line-height:172%'><o:p></o:p></span></h3>

<p class=MsoNormal style='text-indent:21.0pt;line-height:150%'><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>前面学习了使用命令</span><span lang=EN-US>hdfs haadmin -failover</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>手动进行故障转移，在该模式下，即使现役</span><span lang=EN-US>NameNode</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>已经失效，系统也不会自动从现役</span><span lang=EN-US>NameNode</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>转移到待机</span><span lang=EN-US>NameNode</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>，下面学习如何配置部署</span><span lang=EN-US>HA</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>自动进行故障转移。自动故障转移为</span><span lang=EN-US>HDFS</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>部署增加了两个新组件：</span><span lang=EN-US>ZooKeeper</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>和</span><span lang=EN-US>ZKFailoverController</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>（</span><span lang=EN-US>ZKFC</span><span style='font-family:
宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:"Times New Roman"'>）进程，如图</span><span
lang=EN-US>3-20</span><span style='font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>所示。</span><span lang=EN-US>ZooKeeper</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>是维护少量协调数据，通知客户端这些数据的改变和监视客户端故障的高可用服务。</span><span
lang=EN-US>HA</span><span style='font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>的自动故障转移依赖于</span><span lang=EN-US>ZooKeeper</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>的以下功能：</span></p>

<p class=MsoNormal align=left style='text-align:left;text-indent:21.0pt;
line-height:150%;mso-pagination:widow-orphan;background:white'><b
style='mso-bidi-font-weight:normal'><span lang=EN-US>1</span></b><b
style='mso-bidi-font-weight:normal'><span style='font-family:宋体;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>）故障检测：</span></b><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>集群中的每个</span><span lang=EN-US>NameNode</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>在</span><span lang=EN-US>ZooKeeper</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>中维护了一个持久会话，如果机器崩溃，</span><span lang=EN-US>ZooKeeper</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>中的会话将终止，</span><span lang=EN-US>ZooKeeper</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>通知另一个</span><span lang=EN-US>NameNode</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>需要触发故障转移。</span></p>

<p class=MsoNormal align=left style='text-align:left;text-indent:21.0pt;
line-height:150%;mso-pagination:widow-orphan;background:white'><b
style='mso-bidi-font-weight:normal'><span lang=EN-US>2</span></b><b
style='mso-bidi-font-weight:normal'><span style='font-family:宋体;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>）现役</span><span
lang=EN-US>NameNode</span></b><b style='mso-bidi-font-weight:normal'><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>选择：</span></b><span lang=EN-US>ZooKeeper</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>提供了一个简单的机制用于唯一的选择一个节点为</span><span lang=EN-US>active</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>状态。如果目前现役</span><span lang=EN-US>NameNode</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>崩溃，另一个节点可能从</span><span lang=EN-US>ZooKeeper</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>获得特殊的排外锁以表明它应该成为现役</span><span lang=EN-US>NameNode</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>。</span></p>

<p class=MsoNormal style='text-indent:21.0pt;line-height:150%'><span
lang=EN-US style='mso-bidi-font-size:10.5pt;line-height:150%;mso-bidi-font-family:
Arial;color:black;background:white'>ZKFC</span><span style='mso-bidi-font-size:
10.5pt;line-height:150%;font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman";mso-bidi-font-family:Arial;color:black;
background:white'>是自动故障转移中的另一个新组件，是</span><span lang=EN-US style='mso-bidi-font-size:
10.5pt;line-height:150%;mso-bidi-font-family:Arial;color:black;background:white'>ZooKeeper</span><span
style='mso-bidi-font-size:10.5pt;line-height:150%;font-family:宋体;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman";mso-bidi-font-family:
Arial;color:black;background:white'>的客户端，也监视和管理</span><span lang=EN-US
style='mso-bidi-font-size:10.5pt;line-height:150%;mso-bidi-font-family:Arial;
color:black;background:white'>NameNode</span><span style='mso-bidi-font-size:
10.5pt;line-height:150%;font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman";mso-bidi-font-family:Arial;color:black;
background:white'>的状态。每个运行</span><span lang=EN-US style='mso-bidi-font-size:
10.5pt;line-height:150%;mso-bidi-font-family:Arial;color:black;background:white'>NameNode</span><span
style='mso-bidi-font-size:10.5pt;line-height:150%;font-family:宋体;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman";mso-bidi-font-family:
Arial;color:black;background:white'>的主机也运行了一个</span><span lang=EN-US
style='mso-bidi-font-size:10.5pt;line-height:150%;mso-bidi-font-family:Arial;
color:black;background:white'>ZKFC</span><span style='mso-bidi-font-size:10.5pt;
line-height:150%;font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman";mso-bidi-font-family:Arial;color:black;
background:white'>进程，</span><span lang=EN-US style='mso-bidi-font-size:10.5pt;
line-height:150%;mso-bidi-font-family:Arial;color:black;background:white'>ZKFC</span><span
style='mso-bidi-font-size:10.5pt;line-height:150%;font-family:宋体;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman";mso-bidi-font-family:
Arial;color:black;background:white'>负责：</span></p>

<p class=MsoNormal style='text-indent:21.0pt;line-height:150%'><b
style='mso-bidi-font-weight:normal'><span lang=EN-US>1</span></b><b
style='mso-bidi-font-weight:normal'><span style='font-family:宋体;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>）健康监测：</span></b><span
lang=EN-US>ZKFC</span><span style='font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>使用一个健康检查命令定期地</span><span lang=EN-US>ping</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>与之在相同主机的</span><span lang=EN-US>NameNode</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>，只要该</span><span lang=EN-US>NameNode</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>及时地回复健康状态，</span><span lang=EN-US>ZKFC</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>认为该节点是健康的。如果该节点崩溃，冻结或进入不健康状态，健康监测器标识该节点为非健康的。</span></p>

<p class=MsoNormal style='text-indent:21.0pt;line-height:150%'><b
style='mso-bidi-font-weight:normal'><span lang=EN-US>2</span></b><b
style='mso-bidi-font-weight:normal'><span style='font-family:宋体;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>）</span><span
lang=EN-US>ZooKeeper</span></b><b style='mso-bidi-font-weight:normal'><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>会话管理：</span></b><span style='font-family:宋体;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>当本地</span><span
lang=EN-US>NameNode</span><span style='font-family:宋体;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>是健康的，</span><span
lang=EN-US>ZKFC</span><span style='font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>保持一个在</span><span lang=EN-US>ZooKeeper</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>中打开的会话。如果本地</span><span lang=EN-US>NameNode</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>处于</span><span lang=EN-US>active</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>状态，</span><span lang=EN-US>ZKFC</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>也保持一个特殊的</span><span lang=EN-US>znode</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>锁，该锁使用了</span><span lang=EN-US>ZooKeeper</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>对短暂节点的支持，如果会话终止，锁节点将自动删除。</span></p>

<p class=MsoNormal style='text-indent:21.0pt;line-height:150%'><b
style='mso-bidi-font-weight:normal'><span lang=EN-US>3</span></b><b
style='mso-bidi-font-weight:normal'><span style='font-family:宋体;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>）基于</span><span
lang=EN-US>ZooKeeper</span></b><b style='mso-bidi-font-weight:normal'><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>的选择：</span></b><span style='font-family:宋体;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>如果本地</span><span
lang=EN-US>NameNode</span><span style='font-family:宋体;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>是健康的，且</span><span
lang=EN-US>ZKFC</span><span style='font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>发现没有其它的节点当前持有</span><span lang=EN-US>znode</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>锁，它将为自己获取该锁。如果成功，则它已经赢得了选择，并负责运行故障转移进程以使它的本地</span><span
lang=EN-US>NameNode</span><span style='font-family:宋体;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>为</span><span
lang=EN-US>Active</span><span style='font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>。故障转移进程与前面描述的手动故障转移相似，首先如果必要保护之前的现役</span><span
lang=EN-US>NameNode</span><span style='font-family:宋体;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>，然后本地</span><span
lang=EN-US>NameNode</span><span style='font-family:宋体;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>转换为</span><span
lang=EN-US>Active</span><span style='font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>状态。</span></p>

<p class=MsoNormal style='line-height:150%'><span lang=EN-US><v:shape id="_x0000_i1045"
 type="#_x0000_t75" style='width:412.8pt;height:232.2pt' o:ole="">
 <v:fill o:detectmouseclick="t"/>
 <img src="Hadoop_02HDFS.files/image092.png" o:title=""/>
</v:shape><!--[if gte mso 9]><xml>
 <o:OLEObject Type="Embed" ProgID="PowerPoint.Show.12" ShapeID="_x0000_i1045"
  DrawAspect="Content" ObjectID="_1629747804">
  <o:WordFieldCodes>\* MERGEFORMAT</o:WordFieldCodes>
 </o:OLEObject>
</xml><![endif]--></span></p>

<p class=MsoNormal align=center style='text-align:center;line-height:150%'><span
style='font-size:9.0pt;line-height:150%;font-family:宋体;mso-ascii-font-family:
Calibri;mso-hansi-font-family:Calibri;mso-bidi-font-family:Calibri'>图</span><span
lang=EN-US style='font-size:9.0pt;line-height:150%;font-family:"Calibri","sans-serif"'>3-20
HDFS-HA</span><span style='font-size:9.0pt;line-height:150%;font-family:宋体;
mso-ascii-font-family:Calibri;mso-hansi-font-family:Calibri;mso-bidi-font-family:
Calibri'>故障转移机制</span></p>

<h2 style='margin:0cm;margin-bottom:.0001pt'><span lang=EN-US style='font-size:
14.0pt;line-height:172%;font-family:"Times New Roman","serif"'>8.3 HDFS-HA</span><span
style='font-size:14.0pt;line-height:172%;font-family:黑体;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>集群配置</span><span
lang=EN-US style='font-size:14.0pt;line-height:172%;font-family:"Times New Roman","serif"'><o:p></o:p></span></h2>

<h3 style='margin:0cm;margin-bottom:.0001pt'><span lang=EN-US style='font-size:
14.0pt;line-height:172%'>8.3.1 </span><span style='font-size:14.0pt;line-height:
172%;font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>环境准备</span><span lang=EN-US style='font-size:14.0pt;
line-height:172%'><o:p></o:p></span></h3>

<p class=10 style='margin-top:6.2pt;text-indent:22.0pt'><span lang=EN-US>1.<span
style='mso-tab-count:1'>    </span></span><span style='font-family:黑体;
mso-ascii-font-family:Arial;mso-hansi-font-family:Arial'>修改</span><span
lang=EN-US>IP</span></p>

<p class=10 style='margin-top:6.2pt;text-indent:22.0pt'><span lang=EN-US>2.<span
style='mso-tab-count:1'>    </span></span><span style='font-family:黑体;
mso-ascii-font-family:Arial;mso-hansi-font-family:Arial'>修改主机名及主机名和</span><span
lang=EN-US>IP</span><span style='font-family:黑体;mso-ascii-font-family:Arial;
mso-hansi-font-family:Arial'>地址的映射</span></p>

<p class=10 style='margin-top:6.2pt;text-indent:22.0pt'><span lang=EN-US>3.<span
style='mso-tab-count:1'>    </span></span><span style='font-family:黑体;
mso-ascii-font-family:Arial;mso-hansi-font-family:Arial'>关闭防火墙</span></p>

<p class=10 style='margin-top:6.2pt;text-indent:22.0pt'><span lang=EN-US>4.<span
style='mso-tab-count:1'>    </span>ssh</span><span style='font-family:黑体;
mso-ascii-font-family:Arial;mso-hansi-font-family:Arial'>免密登录</span></p>

<p class=10 style='margin-top:6.2pt;text-indent:22.0pt'><span lang=EN-US>5.<span
style='mso-tab-count:1'>    </span></span><span style='font-family:黑体;
mso-ascii-font-family:Arial;mso-hansi-font-family:Arial'>安装</span><span
lang=EN-US>JDK</span><span style='font-family:黑体;mso-ascii-font-family:Arial;
mso-hansi-font-family:Arial'>，配置环境变量等</span></p>

<h3 style='margin:0cm;margin-bottom:.0001pt'><span lang=EN-US style='font-size:
14.0pt;line-height:172%'>8.3.2 </span><span style='font-size:14.0pt;line-height:
172%;font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>规划集群</span><span lang=EN-US style='font-size:14.0pt;
line-height:172%'><o:p></o:p></span></h3>

<p class=MsoNormal align=center style='text-align:center'><span
style='font-size:9.0pt;mso-bidi-font-size:10.0pt;font-family:黑体;mso-ascii-font-family:
Arial;mso-hansi-font-family:Arial'>表</span><span lang=EN-US style='font-size:
9.0pt;mso-bidi-font-size:10.0pt;font-family:"Arial","sans-serif";mso-fareast-font-family:
黑体;mso-bidi-font-family:"Times New Roman"'>3-1<o:p></o:p></span></p>

<table class=MsoNormalTable border=1 cellspacing=0 cellpadding=0
 style='border-collapse:collapse;border:none;mso-border-alt:solid windowtext .5pt;
 mso-padding-alt:0cm 5.4pt 0cm 5.4pt;mso-border-insideh:.5pt solid windowtext;
 mso-border-insidev:.5pt solid windowtext'>
 <tr style='mso-yfti-irow:0;mso-yfti-firstrow:yes'>
  <td width=237 valign=top style='width:142.0pt;border:solid windowtext 1.0pt;
  border-left:none;mso-border-top-alt:solid windowtext .5pt;mso-border-bottom-alt:
  solid windowtext .5pt;mso-border-right-alt:solid windowtext .5pt;padding:
  0cm 5.4pt 0cm 5.4pt'>
  <p class=a0><span lang=EN-US style='font-size:10.5pt;font-family:"Times New Roman","serif"'>hadoop102<span
  style='mso-spacerun:yes'>  </span><o:p></o:p></span></p>
  </td>
  <td width=237 valign=top style='width:142.05pt;border:solid windowtext 1.0pt;
  border-left:none;mso-border-left-alt:solid windowtext .5pt;mso-border-alt:
  solid windowtext .5pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=a0><span lang=EN-US style='font-size:10.5pt;font-family:"Times New Roman","serif"'>hadoop103<span
  style='mso-spacerun:yes'>  </span><o:p></o:p></span></p>
  </td>
  <td width=237 valign=top style='width:142.05pt;border-top:solid windowtext 1.0pt;
  border-left:none;border-bottom:solid windowtext 1.0pt;border-right:none;
  mso-border-left-alt:solid windowtext .5pt;mso-border-top-alt:solid windowtext .5pt;
  mso-border-left-alt:solid windowtext .5pt;mso-border-bottom-alt:solid windowtext .5pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=a0><span lang=EN-US style='font-size:10.5pt;font-family:"Times New Roman","serif"'>hadoop104<o:p></o:p></span></p>
  </td>
 </tr>
 <tr style='mso-yfti-irow:1'>
  <td width=237 valign=top style='width:142.0pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  mso-border-top-alt:solid windowtext .5pt;mso-border-top-alt:solid windowtext .5pt;
  mso-border-bottom-alt:solid windowtext .5pt;mso-border-right-alt:solid windowtext .5pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=a0><span lang=EN-US style='font-size:10.5pt;font-family:"Times New Roman","serif"'>NameNode<span
  style='mso-tab-count:1'>    </span><o:p></o:p></span></p>
  </td>
  <td width=237 valign=top style='width:142.05pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  mso-border-top-alt:solid windowtext .5pt;mso-border-left-alt:solid windowtext .5pt;
  mso-border-alt:solid windowtext .5pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=a0><span lang=EN-US style='font-size:10.5pt;font-family:"Times New Roman","serif"'>NameNode<o:p></o:p></span></p>
  </td>
  <td width=237 valign=top style='width:142.05pt;border:none;border-bottom:
  solid windowtext 1.0pt;mso-border-top-alt:solid windowtext .5pt;mso-border-left-alt:
  solid windowtext .5pt;mso-border-top-alt:solid windowtext .5pt;mso-border-left-alt:
  solid windowtext .5pt;mso-border-bottom-alt:solid windowtext .5pt;padding:
  0cm 5.4pt 0cm 5.4pt'>
  <p class=a0><span lang=EN-US style='font-size:10.5pt;font-family:"Times New Roman","serif"'><o:p>&nbsp;</o:p></span></p>
  </td>
 </tr>
 <tr style='mso-yfti-irow:2'>
  <td width=237 valign=top style='width:142.0pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  mso-border-top-alt:solid windowtext .5pt;mso-border-top-alt:solid windowtext .5pt;
  mso-border-bottom-alt:solid windowtext .5pt;mso-border-right-alt:solid windowtext .5pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=a0><span lang=EN-US style='font-size:10.5pt;font-family:"Times New Roman","serif"'>JournalNode<span
  style='mso-tab-count:1'>  </span><o:p></o:p></span></p>
  </td>
  <td width=237 valign=top style='width:142.05pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  mso-border-top-alt:solid windowtext .5pt;mso-border-left-alt:solid windowtext .5pt;
  mso-border-alt:solid windowtext .5pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=a0><span lang=EN-US style='font-size:10.5pt;font-family:"Times New Roman","serif"'>JournalNode<span
  style='mso-tab-count:1'>  </span><o:p></o:p></span></p>
  </td>
  <td width=237 valign=top style='width:142.05pt;border:none;border-bottom:
  solid windowtext 1.0pt;mso-border-top-alt:solid windowtext .5pt;mso-border-left-alt:
  solid windowtext .5pt;mso-border-top-alt:solid windowtext .5pt;mso-border-left-alt:
  solid windowtext .5pt;mso-border-bottom-alt:solid windowtext .5pt;padding:
  0cm 5.4pt 0cm 5.4pt'>
  <p class=a0><span lang=EN-US style='font-size:10.5pt;font-family:"Times New Roman","serif"'>JournalNode<span
  style='mso-tab-count:1'>  </span><o:p></o:p></span></p>
  </td>
 </tr>
 <tr style='mso-yfti-irow:3'>
  <td width=237 valign=top style='width:142.0pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  mso-border-top-alt:solid windowtext .5pt;mso-border-top-alt:solid windowtext .5pt;
  mso-border-bottom-alt:solid windowtext .5pt;mso-border-right-alt:solid windowtext .5pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=a0><span lang=EN-US style='font-size:10.5pt;font-family:"Times New Roman","serif"'>DataNode<o:p></o:p></span></p>
  </td>
  <td width=237 valign=top style='width:142.05pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  mso-border-top-alt:solid windowtext .5pt;mso-border-left-alt:solid windowtext .5pt;
  mso-border-alt:solid windowtext .5pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=a0><span lang=EN-US style='font-size:10.5pt;font-family:"Times New Roman","serif"'>DataNode<o:p></o:p></span></p>
  </td>
  <td width=237 valign=top style='width:142.05pt;border:none;border-bottom:
  solid windowtext 1.0pt;mso-border-top-alt:solid windowtext .5pt;mso-border-left-alt:
  solid windowtext .5pt;mso-border-top-alt:solid windowtext .5pt;mso-border-left-alt:
  solid windowtext .5pt;mso-border-bottom-alt:solid windowtext .5pt;padding:
  0cm 5.4pt 0cm 5.4pt'>
  <p class=a0><span lang=EN-US style='font-size:10.5pt;font-family:"Times New Roman","serif"'>DataNode<o:p></o:p></span></p>
  </td>
 </tr>
 <tr style='mso-yfti-irow:4'>
  <td width=237 valign=top style='width:142.0pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  mso-border-top-alt:solid windowtext .5pt;mso-border-top-alt:solid windowtext .5pt;
  mso-border-bottom-alt:solid windowtext .5pt;mso-border-right-alt:solid windowtext .5pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=a0><span lang=EN-US style='font-size:10.5pt;font-family:"Times New Roman","serif"'>ZK<span
  style='mso-tab-count:1'>  </span><o:p></o:p></span></p>
  </td>
  <td width=237 valign=top style='width:142.05pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  mso-border-top-alt:solid windowtext .5pt;mso-border-left-alt:solid windowtext .5pt;
  mso-border-alt:solid windowtext .5pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=a0><span lang=EN-US style='font-size:10.5pt;font-family:"Times New Roman","serif"'>ZK<span
  style='mso-tab-count:1'>  </span><o:p></o:p></span></p>
  </td>
  <td width=237 valign=top style='width:142.05pt;border:none;border-bottom:
  solid windowtext 1.0pt;mso-border-top-alt:solid windowtext .5pt;mso-border-left-alt:
  solid windowtext .5pt;mso-border-top-alt:solid windowtext .5pt;mso-border-left-alt:
  solid windowtext .5pt;mso-border-bottom-alt:solid windowtext .5pt;padding:
  0cm 5.4pt 0cm 5.4pt'>
  <p class=a0><span lang=EN-US style='font-size:10.5pt;font-family:"Times New Roman","serif"'>ZK<span
  style='mso-tab-count:1'>  </span><o:p></o:p></span></p>
  </td>
 </tr>
 <tr style='mso-yfti-irow:5'>
  <td width=237 valign=top style='width:142.0pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  mso-border-top-alt:solid windowtext .5pt;mso-border-top-alt:solid windowtext .5pt;
  mso-border-bottom-alt:solid windowtext .5pt;mso-border-right-alt:solid windowtext .5pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=a0><span lang=EN-US style='font-size:10.5pt;font-family:"Times New Roman","serif"'><o:p>&nbsp;</o:p></span></p>
  </td>
  <td width=237 valign=top style='width:142.05pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  mso-border-top-alt:solid windowtext .5pt;mso-border-left-alt:solid windowtext .5pt;
  mso-border-alt:solid windowtext .5pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=a0><span lang=EN-US style='font-size:10.5pt;font-family:"Times New Roman","serif"'>ResourceManager<o:p></o:p></span></p>
  </td>
  <td width=237 valign=top style='width:142.05pt;border:none;border-bottom:
  solid windowtext 1.0pt;mso-border-top-alt:solid windowtext .5pt;mso-border-left-alt:
  solid windowtext .5pt;mso-border-top-alt:solid windowtext .5pt;mso-border-left-alt:
  solid windowtext .5pt;mso-border-bottom-alt:solid windowtext .5pt;padding:
  0cm 5.4pt 0cm 5.4pt'>
  <p class=a0><span lang=EN-US style='font-size:10.5pt;font-family:"Times New Roman","serif"'><o:p>&nbsp;</o:p></span></p>
  </td>
 </tr>
 <tr style='mso-yfti-irow:6;mso-yfti-lastrow:yes'>
  <td width=237 valign=top style='width:142.0pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  mso-border-top-alt:solid windowtext .5pt;mso-border-top-alt:solid windowtext .5pt;
  mso-border-bottom-alt:solid windowtext .5pt;mso-border-right-alt:solid windowtext .5pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=a0><span lang=EN-US style='font-size:10.5pt;font-family:"Times New Roman","serif"'>NodeManager<span
  style='mso-tab-count:1'> </span><o:p></o:p></span></p>
  </td>
  <td width=237 valign=top style='width:142.05pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  mso-border-top-alt:solid windowtext .5pt;mso-border-left-alt:solid windowtext .5pt;
  mso-border-alt:solid windowtext .5pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=a0><span lang=EN-US style='font-size:10.5pt;font-family:"Times New Roman","serif"'>NodeManager<span
  style='mso-tab-count:1'> </span><o:p></o:p></span></p>
  </td>
  <td width=237 valign=top style='width:142.05pt;border:none;border-bottom:
  solid windowtext 1.0pt;mso-border-top-alt:solid windowtext .5pt;mso-border-left-alt:
  solid windowtext .5pt;mso-border-top-alt:solid windowtext .5pt;mso-border-left-alt:
  solid windowtext .5pt;mso-border-bottom-alt:solid windowtext .5pt;padding:
  0cm 5.4pt 0cm 5.4pt'>
  <p class=a0><span lang=EN-US style='font-size:10.5pt;font-family:"Times New Roman","serif"'>NodeManager<span
  style='mso-tab-count:1'> </span><o:p></o:p></span></p>
  </td>
 </tr>
</table>

<h3 style='margin:0cm;margin-bottom:.0001pt'><span lang=EN-US style='font-size:
14.0pt;line-height:172%'>8.3.3 </span><span style='font-size:14.0pt;line-height:
172%;font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>配置</span><span lang=EN-US style='font-size:14.0pt;
line-height:172%'>Zookeeper</span><span style='font-size:14.0pt;line-height:
172%;font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>集群</span><span lang=EN-US style='font-size:14.0pt;
line-height:172%'><o:p></o:p></span></h3>

<p class=10 style='margin-top:6.2pt;text-indent:22.0pt'><span lang=EN-US>1.<span
style='mso-tab-count:1'>    </span></span><span style='font-family:黑体;
mso-ascii-font-family:Arial;mso-hansi-font-family:Arial'>集群规划</span></p>

<p class=MsoNormal style='text-indent:21.0pt;line-height:150%'><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>在</span><span lang=EN-US style='mso-bidi-font-size:10.5pt;
line-height:150%'>hadoop102</span><span style='mso-bidi-font-size:10.5pt;
line-height:150%;font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>、</span><span lang=EN-US
style='mso-bidi-font-size:10.5pt;line-height:150%'>hadoop103</span><span
style='mso-bidi-font-size:10.5pt;line-height:150%;font-family:宋体;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>和</span><span
lang=EN-US style='mso-bidi-font-size:10.5pt;line-height:150%'>hadoop104</span><span
style='mso-bidi-font-size:10.5pt;line-height:150%;font-family:宋体;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>三个节点上部署</span><span
lang=EN-US style='mso-bidi-font-size:10.5pt;line-height:150%'>Zookeeper</span><span
style='mso-bidi-font-size:10.5pt;line-height:150%;font-family:宋体;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>。</span><span
lang=EN-US style='mso-bidi-font-size:10.5pt;line-height:150%'><o:p></o:p></span></p>

<p class=10 style='margin-top:6.2pt;text-indent:22.0pt'><span lang=EN-US>2.<span
style='mso-tab-count:1'>    </span></span><span style='font-family:黑体;
mso-ascii-font-family:Arial;mso-hansi-font-family:Arial'>解压安装</span></p>

<p class=MsoNormal style='margin-left:21.0pt;mso-para-margin-left:2.0gd;
line-height:150%'><span style='mso-bidi-font-size:10.5pt;line-height:150%;
font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>（</span><span lang=EN-US style='mso-bidi-font-size:10.5pt;
line-height:150%'>1</span><span style='mso-bidi-font-size:10.5pt;line-height:
150%;font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>）解压</span><span lang=EN-US style='mso-bidi-font-size:10.5pt;
line-height:150%'>Zookeeper</span><span style='mso-bidi-font-size:10.5pt;
line-height:150%;font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>安装包到</span><span lang=EN-US
style='mso-bidi-font-size:10.5pt;line-height:150%'>/opt/module/</span><span
style='mso-bidi-font-size:10.5pt;line-height:150%;font-family:宋体;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>目录下</span><span
lang=EN-US style='mso-bidi-font-size:10.5pt;line-height:150%'><o:p></o:p></span></p>

<div style='mso-element:para-border-div;border:none windowtext 1.0pt;
mso-border-alt:none windowtext 0cm;padding:1.0pt 4.0pt 1.0pt 4.0pt;background:
#E0E0E0;margin-left:31.5pt;margin-right:0cm'>

<p class=a style='margin-left:0cm;mso-para-margin-left:3.0gd;background:#E0E0E0;
mso-layout-grid-align:none;punctuation-trim:leading;border:none;mso-border-alt:
none windowtext 0cm;padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span
lang=EN-US style='font-size:10.5pt'>[atguigu@hadoop102 software]$ tar -zxvf
zookeeper-3.4.10.tar.gz -C /opt/module/<o:p></o:p></span></p>

</div>

<p class=MsoNormal style='margin-left:21.0pt;mso-para-margin-left:2.0gd;
line-height:150%'><span style='mso-bidi-font-size:10.5pt;line-height:150%;
font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>（</span><span lang=EN-US style='mso-bidi-font-size:10.5pt;
line-height:150%'>2</span><span style='mso-bidi-font-size:10.5pt;line-height:
150%;font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>）在</span><span lang=EN-US>/opt/module/zookeeper-3.4.10/</span><span
style='mso-bidi-font-size:10.5pt;line-height:150%;font-family:宋体;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>这个目录下创建</span><span
lang=EN-US style='mso-bidi-font-size:10.5pt;line-height:150%'>zkData<o:p></o:p></span></p>

<div style='mso-element:para-border-div;border:none windowtext 1.0pt;
mso-border-alt:none windowtext 0cm;padding:1.0pt 4.0pt 1.0pt 4.0pt;background:
#E0E0E0;margin-left:31.5pt;margin-right:0cm'>

<p class=a style='margin-left:0cm;mso-para-margin-left:3.0gd;background:#E0E0E0;
mso-layout-grid-align:none;punctuation-trim:leading;border:none;mso-border-alt:
none windowtext 0cm;padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span
lang=EN-US style='font-size:10.5pt'>mkdir -p zkData<o:p></o:p></span></p>

</div>

<p class=MsoNormal style='margin-left:21.0pt;mso-para-margin-left:2.0gd;
line-height:150%'><span style='mso-bidi-font-size:10.5pt;line-height:150%;
font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>（</span><span lang=EN-US style='mso-bidi-font-size:10.5pt;
line-height:150%'>3</span><span style='mso-bidi-font-size:10.5pt;line-height:
150%;font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>）重命名</span><span lang=EN-US>/opt/module/zookeeper-3.4.10/</span><span
lang=EN-US style='mso-bidi-font-size:10.5pt;line-height:150%'>conf</span><span
style='mso-bidi-font-size:10.5pt;line-height:150%;font-family:宋体;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>这个目录下的</span><span
lang=EN-US style='mso-bidi-font-size:10.5pt;line-height:150%'>zoo_sample.cfg</span><span
style='mso-bidi-font-size:10.5pt;line-height:150%;font-family:宋体;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>为</span><span
lang=EN-US style='mso-bidi-font-size:10.5pt;line-height:150%'>zoo.cfg<o:p></o:p></span></p>

<div style='mso-element:para-border-div;border:none windowtext 1.0pt;
mso-border-alt:none windowtext 0cm;padding:1.0pt 4.0pt 1.0pt 4.0pt;background:
#E0E0E0;margin-left:31.5pt;margin-right:0cm'>

<p class=a style='margin-left:0cm;mso-para-margin-left:3.0gd;background:#E0E0E0;
mso-layout-grid-align:none;punctuation-trim:leading;border:none;mso-border-alt:
none windowtext 0cm;padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span
lang=EN-US style='font-size:10.5pt'>mv zoo_sample.cfg zoo.cfg<o:p></o:p></span></p>

</div>

<p class=10 style='margin-top:6.2pt;text-indent:22.0pt'><span lang=EN-US>3.<span
style='mso-tab-count:1'>    </span></span><span style='font-family:黑体;
mso-ascii-font-family:Arial;mso-hansi-font-family:Arial'>配置</span><span
lang=EN-US>zoo.cfg</span><span style='font-family:黑体;mso-ascii-font-family:
Arial;mso-hansi-font-family:Arial'>文件</span></p>

<p class=MsoNormal style='line-height:150%'><span lang=EN-US style='mso-bidi-font-size:
10.5pt;line-height:150%'><span style='mso-tab-count:1'>       </span></span><span
style='mso-bidi-font-size:10.5pt;line-height:150%;font-family:宋体;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>（</span><span
lang=EN-US style='mso-bidi-font-size:10.5pt;line-height:150%'>1</span><span
style='mso-bidi-font-size:10.5pt;line-height:150%;font-family:宋体;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>）具体配置</span><span
lang=EN-US style='mso-bidi-font-size:10.5pt;line-height:150%'><o:p></o:p></span></p>

<div style='mso-element:para-border-div;border:none windowtext 1.0pt;
mso-border-alt:none windowtext 0cm;padding:1.0pt 4.0pt 1.0pt 4.0pt;background:
#E0E0E0;margin-left:31.5pt;margin-right:0cm'>

<p class=a style='margin-left:0cm;mso-para-margin-left:3.0gd;background:#E0E0E0;
mso-layout-grid-align:none;punctuation-trim:leading;border:none;mso-border-alt:
none windowtext 0cm;padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span
lang=EN-US style='font-size:10.5pt'>dataDir=/opt/module/zookeeper-3.4.10/zkData<o:p></o:p></span></p>

</div>

<p class=MsoNormal style='line-height:150%'><span lang=EN-US style='mso-bidi-font-size:
10.5pt;line-height:150%'><span style='mso-tab-count:1'>       </span></span><span
style='mso-bidi-font-size:10.5pt;line-height:150%;font-family:宋体;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>增加如下配置</span><span
lang=EN-US style='mso-bidi-font-size:10.5pt;line-height:150%'><o:p></o:p></span></p>

<div style='mso-element:para-border-div;border:none windowtext 1.0pt;
mso-border-alt:none windowtext 0cm;padding:1.0pt 4.0pt 1.0pt 4.0pt;background:
#E0E0E0;margin-left:31.5pt;margin-right:0cm'>

<p class=a style='margin-left:0cm;mso-para-margin-left:3.0gd;background:#E0E0E0;
mso-layout-grid-align:none;punctuation-trim:leading;border:none;mso-border-alt:
none windowtext 0cm;padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span
lang=EN-US style='font-size:10.5pt'>#######################cluster##########################<o:p></o:p></span></p>

<p class=a style='margin-left:0cm;mso-para-margin-left:3.0gd;background:#E0E0E0;
mso-layout-grid-align:none;punctuation-trim:leading;border:none;mso-border-alt:
none windowtext 0cm;padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span
lang=EN-US style='font-size:10.5pt'>server.2=hadoop102:2888:3888<o:p></o:p></span></p>

<p class=a style='margin-left:0cm;mso-para-margin-left:3.0gd;background:#E0E0E0;
mso-layout-grid-align:none;punctuation-trim:leading;border:none;mso-border-alt:
none windowtext 0cm;padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span
lang=EN-US style='font-size:10.5pt'>server.3=hadoop103:2888:3888<o:p></o:p></span></p>

<p class=a style='margin-left:0cm;mso-para-margin-left:3.0gd;background:#E0E0E0;
mso-layout-grid-align:none;punctuation-trim:leading;border:none;mso-border-alt:
none windowtext 0cm;padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span
lang=EN-US style='font-size:10.5pt'>server.4=hadoop104:2888:3888<o:p></o:p></span></p>

</div>

<p class=MsoNormal style='text-indent:21.0pt;line-height:150%'><span
style='mso-bidi-font-size:10.5pt;line-height:150%;font-family:宋体;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>（</span><span
lang=EN-US style='mso-bidi-font-size:10.5pt;line-height:150%'>2</span><span
style='mso-bidi-font-size:10.5pt;line-height:150%;font-family:宋体;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>）配置参数解读</span><span
lang=EN-US style='mso-bidi-font-size:10.5pt;line-height:150%'><o:p></o:p></span></p>

<p class=MsoNormal style='text-indent:21.0pt;line-height:150%'><span
lang=EN-US style='mso-bidi-font-size:10.5pt;line-height:150%'>Server.A=B:C:D</span><span
style='mso-bidi-font-size:10.5pt;line-height:150%;font-family:宋体;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>。</span><span
lang=EN-US style='mso-bidi-font-size:10.5pt;line-height:150%'><o:p></o:p></span></p>

<p class=MsoNormal style='text-indent:21.0pt;line-height:150%'><span
lang=EN-US style='mso-bidi-font-size:10.5pt;line-height:150%'>A</span><span
style='mso-bidi-font-size:10.5pt;line-height:150%;font-family:宋体;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>是一个数字，表示这个是第几号服务器；</span><span
lang=EN-US style='mso-bidi-font-size:10.5pt;line-height:150%'><o:p></o:p></span></p>

<p class=MsoNormal style='text-indent:21.0pt;line-height:150%'><span
lang=EN-US style='mso-bidi-font-size:10.5pt;line-height:150%'>B</span><span
style='mso-bidi-font-size:10.5pt;line-height:150%;font-family:宋体;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>是这个服务器的</span><span
lang=EN-US style='mso-bidi-font-size:10.5pt;line-height:150%'>IP</span><span
style='mso-bidi-font-size:10.5pt;line-height:150%;font-family:宋体;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>地址；</span><span
lang=EN-US style='mso-bidi-font-size:10.5pt;line-height:150%'><o:p></o:p></span></p>

<p class=MsoNormal style='text-indent:21.0pt;line-height:150%'><span
lang=EN-US style='mso-bidi-font-size:10.5pt;line-height:150%'>C</span><span
style='mso-bidi-font-size:10.5pt;line-height:150%;font-family:宋体;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>是这个服务器与集群中的</span><span
lang=EN-US style='mso-bidi-font-size:10.5pt;line-height:150%'>Leader</span><span
style='mso-bidi-font-size:10.5pt;line-height:150%;font-family:宋体;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>服务器交换信息的端口；</span><span
lang=EN-US style='mso-bidi-font-size:10.5pt;line-height:150%'><o:p></o:p></span></p>

<p class=MsoNormal style='text-indent:21.0pt;line-height:150%'><span
lang=EN-US style='mso-bidi-font-size:10.5pt;line-height:150%'>D</span><span
style='mso-bidi-font-size:10.5pt;line-height:150%;font-family:宋体;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>是万一集群中的</span><span
lang=EN-US style='mso-bidi-font-size:10.5pt;line-height:150%'>Leader</span><span
style='mso-bidi-font-size:10.5pt;line-height:150%;font-family:宋体;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>服务器挂了，需要一个端口来重新进行选举，选出一个新的</span><span
lang=EN-US style='mso-bidi-font-size:10.5pt;line-height:150%'>Leader</span><span
style='mso-bidi-font-size:10.5pt;line-height:150%;font-family:宋体;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>，而这个端口就是用来执行选举时服务器相互通信的端口。</span><span
lang=EN-US style='mso-bidi-font-size:10.5pt;line-height:150%'><o:p></o:p></span></p>

<p class=MsoNormal style='text-indent:21.0pt;line-height:150%'><span
style='mso-bidi-font-size:10.5pt;line-height:150%;font-family:宋体;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>集群模式下配置一个文件</span><span
lang=EN-US style='mso-bidi-font-size:10.5pt;line-height:150%'>myid</span><span
style='mso-bidi-font-size:10.5pt;line-height:150%;font-family:宋体;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>，这个文件在</span><span
lang=EN-US style='mso-bidi-font-size:10.5pt;line-height:150%'>dataDir</span><span
style='mso-bidi-font-size:10.5pt;line-height:150%;font-family:宋体;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>目录下，这个文件里面有一个数据就是</span><span
lang=EN-US style='mso-bidi-font-size:10.5pt;line-height:150%'>A</span><span
style='mso-bidi-font-size:10.5pt;line-height:150%;font-family:宋体;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>的值，</span><span
lang=EN-US style='mso-bidi-font-size:10.5pt;line-height:150%'>Zookeeper</span><span
style='mso-bidi-font-size:10.5pt;line-height:150%;font-family:宋体;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>启动时读取此文件，拿到里面的数据与</span><span
lang=EN-US style='mso-bidi-font-size:10.5pt;line-height:150%'>zoo.cfg</span><span
style='mso-bidi-font-size:10.5pt;line-height:150%;font-family:宋体;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>里面的配置信息比较从而判断到底是哪个</span><span
lang=EN-US style='mso-bidi-font-size:10.5pt;line-height:150%'>server</span><span
style='mso-bidi-font-size:10.5pt;line-height:150%;font-family:宋体;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>。</span><span
lang=EN-US style='mso-bidi-font-size:10.5pt;line-height:150%'><o:p></o:p></span></p>

<p class=10 style='margin-top:6.2pt;text-indent:22.0pt'><span lang=EN-US>4.<span
style='mso-tab-count:1'>    </span></span><span style='font-family:黑体;
mso-ascii-font-family:Arial;mso-hansi-font-family:Arial'>集群操作</span></p>

<p class=MsoNormal style='margin-left:21.0pt;mso-para-margin-left:2.0gd;
line-height:150%'><span style='mso-bidi-font-size:10.5pt;line-height:150%;
font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>（</span><span lang=EN-US style='mso-bidi-font-size:10.5pt;
line-height:150%'>1</span><span style='mso-bidi-font-size:10.5pt;line-height:
150%;font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>）在</span><span lang=EN-US style='mso-bidi-font-size:10.5pt;
line-height:150%'>/opt/module/zookeeper-3.4.10/zkData</span><span
style='mso-bidi-font-size:10.5pt;line-height:150%;font-family:宋体;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>目录下创建一个</span><span
lang=EN-US style='mso-bidi-font-size:10.5pt;line-height:150%'>myid</span><span
style='mso-bidi-font-size:10.5pt;line-height:150%;font-family:宋体;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>的文件</span><span
lang=EN-US style='mso-bidi-font-size:10.5pt;line-height:150%'><o:p></o:p></span></p>

<div style='mso-element:para-border-div;border:none windowtext 1.0pt;
mso-border-alt:none windowtext 0cm;padding:1.0pt 4.0pt 1.0pt 4.0pt;background:
#E0E0E0;margin-left:31.5pt;margin-right:0cm'>

<p class=a style='margin-left:0cm;mso-para-margin-left:3.0gd;background:#E0E0E0;
mso-layout-grid-align:none;punctuation-trim:leading;border:none;mso-border-alt:
none windowtext 0cm;padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span
lang=EN-US style='font-size:10.5pt'>touch myid<o:p></o:p></span></p>

</div>

<p class=MsoNormal style='margin-left:21.0pt;mso-para-margin-left:2.0gd;
text-indent:21.0pt;line-height:150%'><span style='mso-bidi-font-size:10.5pt;
line-height:150%;font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman";color:red;mso-ansi-language:EN;
mso-bidi-font-weight:bold'>添加</span><span lang=EN style='mso-bidi-font-size:
10.5pt;line-height:150%;color:red;mso-ansi-language:EN;mso-bidi-font-weight:
bold'>myid</span><span style='mso-bidi-font-size:10.5pt;line-height:150%;
font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman";color:red;mso-ansi-language:EN;mso-bidi-font-weight:bold'>文件，注意一定要在</span><span
lang=EN style='mso-bidi-font-size:10.5pt;line-height:150%;color:red;mso-ansi-language:
EN;mso-bidi-font-weight:bold'>linux</span><span style='mso-bidi-font-size:10.5pt;
line-height:150%;font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman";color:red;mso-ansi-language:EN;
mso-bidi-font-weight:bold'>里面创建，在</span><span lang=EN style='mso-bidi-font-size:
10.5pt;line-height:150%;color:red;mso-ansi-language:EN;mso-bidi-font-weight:
bold'>notepad++</span><span style='mso-bidi-font-size:10.5pt;line-height:150%;
font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman";color:red;mso-ansi-language:EN;mso-bidi-font-weight:bold'>里面很可能乱码</span><span
lang=EN style='mso-bidi-font-size:10.5pt;line-height:150%;color:red;mso-ansi-language:
EN'><o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:21.0pt;mso-para-margin-left:2.0gd;
line-height:150%'><span style='mso-bidi-font-size:10.5pt;line-height:150%;
font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>（</span><span lang=EN-US style='mso-bidi-font-size:10.5pt;
line-height:150%'>2</span><span style='mso-bidi-font-size:10.5pt;line-height:
150%;font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>）编辑</span><span lang=EN-US style='mso-bidi-font-size:10.5pt;
line-height:150%'>myid</span><span style='mso-bidi-font-size:10.5pt;line-height:
150%;font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>文件</span><span lang=EN-US style='mso-bidi-font-size:10.5pt;
line-height:150%'><o:p></o:p></span></p>

<div style='mso-element:para-border-div;border:none windowtext 1.0pt;
mso-border-alt:none windowtext 0cm;padding:1.0pt 4.0pt 1.0pt 4.0pt;background:
#E0E0E0;margin-left:31.5pt;margin-right:0cm'>

<p class=a style='margin-left:0cm;mso-para-margin-left:3.0gd;background:#E0E0E0;
mso-layout-grid-align:none;punctuation-trim:leading;border:none;mso-border-alt:
none windowtext 0cm;padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span
lang=EN-US style='font-size:10.5pt'>vi myid<o:p></o:p></span></p>

</div>

<p class=MsoNormal style='margin-left:21.0pt;mso-para-margin-left:2.0gd;
line-height:150%'><span lang=EN-US style='mso-bidi-font-size:10.5pt;line-height:
150%'><span style='mso-tab-count:1'>       </span></span><span
style='mso-bidi-font-size:10.5pt;line-height:150%;font-family:宋体;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>在文件中添加与</span><span
lang=EN-US style='mso-bidi-font-size:10.5pt;line-height:150%'>server</span><span
style='mso-bidi-font-size:10.5pt;line-height:150%;font-family:宋体;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>对应的编号：如</span><span
lang=EN-US style='mso-bidi-font-size:10.5pt;line-height:150%'>2<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:21.0pt;mso-para-margin-left:2.0gd;
line-height:150%'><span style='mso-bidi-font-size:10.5pt;line-height:150%;
font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>（</span><span lang=EN-US style='mso-bidi-font-size:10.5pt;
line-height:150%'>3</span><span style='mso-bidi-font-size:10.5pt;line-height:
150%;font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>）拷贝配置好的</span><span lang=EN-US style='mso-bidi-font-size:
10.5pt;line-height:150%'>zookeeper</span><span style='mso-bidi-font-size:10.5pt;
line-height:150%;font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>到其他机器上</span><span lang=EN-US
style='mso-bidi-font-size:10.5pt;line-height:150%'><o:p></o:p></span></p>

<div style='mso-element:para-border-div;border:none windowtext 1.0pt;
mso-border-alt:none windowtext 0cm;padding:1.0pt 4.0pt 1.0pt 4.0pt;background:
#E0E0E0;margin-left:31.5pt;margin-right:0cm'>

<p class=a style='margin-left:0cm;mso-para-margin-left:3.0gd;background:#E0E0E0;
mso-layout-grid-align:none;punctuation-trim:leading;border:none;mso-border-alt:
none windowtext 0cm;padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span
lang=EN-US style='font-size:10.5pt'>scp -r zookeeper-3.4.10/ </span><span
lang=EN-US><a href="mailto:root@hadoop103.atguigu.com:/opt/app/"><span
style='font-size:10.5pt;color:windowtext;text-decoration:none;text-underline:
none'>root@hadoop103.atguigu.com:/opt/app/</span></a></span><span lang=EN-US
style='font-size:10.5pt'><o:p></o:p></span></p>

<p class=a style='margin-left:0cm;mso-para-margin-left:3.0gd;background:#E0E0E0;
mso-layout-grid-align:none;punctuation-trim:leading;border:none;mso-border-alt:
none windowtext 0cm;padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span
lang=EN-US style='font-size:10.5pt'>scp -r zookeeper-3.4.10/ </span><span
lang=EN-US><a href="mailto:root@hadoop104.atguigu.com:/opt/app/"><span
style='font-size:10.5pt;color:windowtext;text-decoration:none;text-underline:
none'>root@hadoop104.atguigu.com:/opt/app/</span></a></span><span lang=EN-US
style='font-size:10.5pt'><o:p></o:p></span></p>

</div>

<p class=MsoNormal style='margin-left:21.0pt;mso-para-margin-left:2.0gd;
line-height:150%'><span lang=EN-US style='mso-bidi-font-size:10.5pt;line-height:
150%'><span style='mso-tab-count:1'>       </span></span><span
style='mso-bidi-font-size:10.5pt;line-height:150%;font-family:宋体;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>并分别修改</span><span
lang=EN-US style='mso-bidi-font-size:10.5pt;line-height:150%'>myid</span><span
style='mso-bidi-font-size:10.5pt;line-height:150%;font-family:宋体;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>文件中内容为</span><span
lang=EN-US style='mso-bidi-font-size:10.5pt;line-height:150%'>3</span><span
style='mso-bidi-font-size:10.5pt;line-height:150%;font-family:宋体;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>、</span><span
lang=EN-US style='mso-bidi-font-size:10.5pt;line-height:150%'>4<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:21.0pt;mso-para-margin-left:2.0gd;
line-height:150%'><span style='mso-bidi-font-size:10.5pt;line-height:150%;
font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>（</span><span lang=EN-US style='mso-bidi-font-size:10.5pt;
line-height:150%'>4</span><span style='mso-bidi-font-size:10.5pt;line-height:
150%;font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>）分别启动</span><span lang=EN-US style='mso-bidi-font-size:10.5pt;
line-height:150%'>zookeeper<o:p></o:p></span></p>

<div style='mso-element:para-border-div;border:none windowtext 1.0pt;
mso-border-alt:none windowtext 0cm;padding:1.0pt 4.0pt 1.0pt 4.0pt;background:
#E0E0E0;margin-left:31.5pt;margin-right:0cm'>

<p class=a style='margin-left:0cm;mso-para-margin-left:3.0gd;background:#E0E0E0;
mso-layout-grid-align:none;punctuation-trim:leading;border:none;mso-border-alt:
none windowtext 0cm;padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span
lang=EN-US style='font-size:10.5pt'>[root@hadoop102 zookeeper-3.4.10]#
bin/zkServer.sh start<o:p></o:p></span></p>

<p class=a style='margin-left:0cm;mso-para-margin-left:3.0gd;background:#E0E0E0;
mso-layout-grid-align:none;punctuation-trim:leading;border:none;mso-border-alt:
none windowtext 0cm;padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span
lang=EN-US style='font-size:10.5pt'>[root@hadoop103 zookeeper-3.4.10]#
bin/zkServer.sh start<o:p></o:p></span></p>

<p class=a style='margin-left:0cm;mso-para-margin-left:3.0gd;background:#E0E0E0;
mso-layout-grid-align:none;punctuation-trim:leading;border:none;mso-border-alt:
none windowtext 0cm;padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span
lang=EN-US style='font-size:10.5pt'>[root@hadoop104 zookeeper-3.4.10]#
bin/zkServer.sh start<o:p></o:p></span></p>

</div>

<p class=MsoNormal style='margin-left:21.0pt;mso-para-margin-left:2.0gd;
line-height:150%'><span style='mso-bidi-font-size:10.5pt;line-height:150%;
font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>（</span><span lang=EN-US style='mso-bidi-font-size:10.5pt;
line-height:150%'>5</span><span style='mso-bidi-font-size:10.5pt;line-height:
150%;font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>）查看状态</span><span lang=EN-US style='mso-bidi-font-size:10.5pt;
line-height:150%'><o:p></o:p></span></p>

<div style='mso-element:para-border-div;border:none windowtext 1.0pt;
mso-border-alt:none windowtext 0cm;padding:1.0pt 4.0pt 1.0pt 4.0pt;background:
#E0E0E0;margin-left:31.5pt;margin-right:0cm'>

<p class=a style='margin-left:0cm;mso-para-margin-left:3.0gd;background:#E0E0E0;
mso-layout-grid-align:none;punctuation-trim:leading;border:none;mso-border-alt:
none windowtext 0cm;padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span
lang=EN-US style='font-size:10.5pt'>[root@hadoop102 zookeeper-3.4.10]#
bin/zkServer.sh status<o:p></o:p></span></p>

<p class=a style='margin-left:0cm;mso-para-margin-left:3.0gd;background:#E0E0E0;
mso-layout-grid-align:none;punctuation-trim:leading;border:none;mso-border-alt:
none windowtext 0cm;padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span
lang=EN-US style='font-size:10.5pt'>JMX enabled by default<o:p></o:p></span></p>

<p class=a style='margin-left:0cm;mso-para-margin-left:3.0gd;background:#E0E0E0;
mso-layout-grid-align:none;punctuation-trim:leading;border:none;mso-border-alt:
none windowtext 0cm;padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span
lang=EN-US style='font-size:10.5pt'>Using config:
/opt/module/zookeeper-3.4.10/bin/../conf/zoo.cfg<o:p></o:p></span></p>

<p class=a style='margin-left:0cm;mso-para-margin-left:3.0gd;background:#E0E0E0;
mso-layout-grid-align:none;punctuation-trim:leading;border:none;mso-border-alt:
none windowtext 0cm;padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span
lang=EN-US style='font-size:10.5pt'>Mode: follower<o:p></o:p></span></p>

<p class=a style='margin-left:0cm;mso-para-margin-left:3.0gd;background:#E0E0E0;
mso-layout-grid-align:none;punctuation-trim:leading;border:none;mso-border-alt:
none windowtext 0cm;padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span
lang=EN-US style='font-size:10.5pt'>[root@hadoop103 zookeeper-3.4.10]#
bin/zkServer.sh status<o:p></o:p></span></p>

<p class=a style='margin-left:0cm;mso-para-margin-left:3.0gd;background:#E0E0E0;
mso-layout-grid-align:none;punctuation-trim:leading;border:none;mso-border-alt:
none windowtext 0cm;padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span
lang=EN-US style='font-size:10.5pt'>JMX enabled by default<o:p></o:p></span></p>

<p class=a style='margin-left:0cm;mso-para-margin-left:3.0gd;background:#E0E0E0;
mso-layout-grid-align:none;punctuation-trim:leading;border:none;mso-border-alt:
none windowtext 0cm;padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span
lang=EN-US style='font-size:10.5pt'>Using config:
/opt/module/zookeeper-3.4.10/bin/../conf/zoo.cfg<o:p></o:p></span></p>

<p class=a style='margin-left:0cm;mso-para-margin-left:3.0gd;background:#E0E0E0;
mso-layout-grid-align:none;punctuation-trim:leading;border:none;mso-border-alt:
none windowtext 0cm;padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span
lang=EN-US style='font-size:10.5pt'>Mode: leader<o:p></o:p></span></p>

<p class=a style='margin-left:0cm;mso-para-margin-left:3.0gd;background:#E0E0E0;
mso-layout-grid-align:none;punctuation-trim:leading;border:none;mso-border-alt:
none windowtext 0cm;padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span
lang=EN-US style='font-size:10.5pt'>[root@hadoop104 zookeeper-3.4.5]#
bin/zkServer.sh status<o:p></o:p></span></p>

<p class=a style='margin-left:0cm;mso-para-margin-left:3.0gd;background:#E0E0E0;
mso-layout-grid-align:none;punctuation-trim:leading;border:none;mso-border-alt:
none windowtext 0cm;padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span
lang=EN-US style='font-size:10.5pt'>JMX enabled by default<o:p></o:p></span></p>

<p class=a style='margin-left:0cm;mso-para-margin-left:3.0gd;background:#E0E0E0;
mso-layout-grid-align:none;punctuation-trim:leading;border:none;mso-border-alt:
none windowtext 0cm;padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span
lang=EN-US style='font-size:10.5pt'>Using config:
/opt/module/zookeeper-3.4.10/bin/../conf/zoo.cfg<o:p></o:p></span></p>

<p class=a style='margin-left:0cm;mso-para-margin-left:3.0gd;background:#E0E0E0;
mso-layout-grid-align:none;punctuation-trim:leading;border:none;mso-border-alt:
none windowtext 0cm;padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span
lang=EN-US style='font-size:10.5pt'>Mode: follower<o:p></o:p></span></p>

</div>

<h3 style='margin:0cm;margin-bottom:.0001pt'><span lang=EN-US style='font-size:
14.0pt;line-height:172%'>8.3.4 </span><span style='font-size:14.0pt;line-height:
172%;font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>配置</span><span lang=EN-US style='font-size:14.0pt;
line-height:172%'>HDFS-HA</span><span style='font-size:14.0pt;line-height:172%;
font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>集群</span><span lang=EN-US style='font-size:14.0pt;
line-height:172%'><o:p></o:p></span></h3>

<p class=10 style='margin-top:6.2pt;text-indent:22.0pt'><span lang=EN-US>1.<span
style='mso-tab-count:1'>    </span></span><span style='font-family:黑体;
mso-ascii-font-family:Arial;mso-hansi-font-family:Arial'>官方地址：</span><span
lang=EN-US><a href="http://hadoop.apache.org/">http://hadoop.apache.org/</a></span></p>

<p class=10 style='margin-top:6.2pt;text-indent:22.0pt'><span lang=EN-US>2.<span
style='mso-tab-count:1'>    </span></span><span style='font-family:黑体;
mso-ascii-font-family:Arial;mso-hansi-font-family:Arial'>在</span><span
lang=EN-US>opt</span><span style='font-family:黑体;mso-ascii-font-family:Arial;
mso-hansi-font-family:Arial'>目录下创建一个</span><span lang=EN-US>ha</span><span
style='font-family:黑体;mso-ascii-font-family:Arial;mso-hansi-font-family:Arial'>文件夹</span></p>

<p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;text-indent:
10.5pt;mso-layout-grid-align:none;punctuation-trim:leading'><span lang=EN-US
style='font-size:10.5pt'>mkdir ha<o:p></o:p></span></p>

<p class=10 style='margin-top:6.2pt;text-indent:22.0pt'><span lang=EN-US>3.<span
style='mso-tab-count:1'>    </span></span><span style='font-family:黑体;
mso-ascii-font-family:Arial;mso-hansi-font-family:Arial'>将</span><span
lang=EN-US>/opt/app/</span><span style='font-family:黑体;mso-ascii-font-family:
Arial;mso-hansi-font-family:Arial'>下的</span><span lang=EN-US> hadoop-2.7.2</span><span
style='font-family:黑体;mso-ascii-font-family:Arial;mso-hansi-font-family:Arial'>拷贝到</span><span
lang=EN-US>/opt/ha</span><span style='font-family:黑体;mso-ascii-font-family:
Arial;mso-hansi-font-family:Arial'>目录下</span></p>

<p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;text-indent:
10.5pt;mso-layout-grid-align:none;punctuation-trim:leading'><span lang=EN-US
style='font-size:10.5pt'>cp -r hadoop-2.7.2/ /opt/ha/<o:p></o:p></span></p>

<p class=10 style='margin-top:6.2pt;text-indent:22.0pt'><span lang=EN-US>4.<span
style='mso-tab-count:1'>    </span></span><span style='font-family:黑体;
mso-ascii-font-family:Arial;mso-hansi-font-family:Arial'>配置</span><span
lang=EN-US>hadoop-env.sh</span></p>

<table class=MsoNormalTable border=1 cellspacing=0 cellpadding=0
 style='margin-left:5.4pt;border-collapse:collapse;border:none;mso-border-alt:
 solid windowtext .5pt;mso-padding-alt:0cm 5.4pt 0cm 5.4pt;mso-border-insideh:
 .5pt solid windowtext;mso-border-insidev:.5pt solid windowtext'>
 <tr style='mso-yfti-irow:0;mso-yfti-firstrow:yes;mso-yfti-lastrow:yes'>
  <td width=685 valign=top style='width:411.1pt;border:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
  none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'>export
  JAVA_HOME=/opt/module/jdk1.8.0_144<span style='color:#7030A0'><o:p></o:p></span></span></p>
  </td>
 </tr>
</table>

<p class=10 style='margin-top:6.2pt;text-indent:22.0pt'><span lang=EN-US>5.<span
style='mso-tab-count:1'>    </span></span><span style='font-family:黑体;
mso-ascii-font-family:Arial;mso-hansi-font-family:Arial'>配置</span><span
lang=EN-US>core-site.xml</span></p>

<table class=MsoNormalTable border=0 cellspacing=0 cellpadding=0
 style='margin-left:5.4pt;border-collapse:collapse;mso-padding-alt:0cm 5.4pt 0cm 5.4pt'>
 <tr style='mso-yfti-irow:0;mso-yfti-firstrow:yes;mso-yfti-lastrow:yes'>
  <td width=685 valign=top style='width:411.1pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
  none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'>&lt;configuration&gt;<o:p></o:p></span></p>
  <p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
  none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'>&lt;!--
  </span><span style='font-size:10.5pt;font-family:宋体;mso-ascii-font-family:
  "Courier New";mso-hansi-font-family:"Courier New"'>把两个</span><span
  lang=EN-US style='font-size:10.5pt'>NameNode</span><span style='font-size:
  10.5pt;font-family:宋体;mso-ascii-font-family:"Courier New";mso-hansi-font-family:
  "Courier New"'>）的地址组装成一个集群</span><span lang=EN-US style='font-size:10.5pt'>mycluster
  --&gt;<o:p></o:p></span></p>
  <p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
  none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'><span
  style='mso-tab-count:2'>     </span>&lt;property&gt;<o:p></o:p></span></p>
  <p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
  none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'><span
  style='mso-tab-count:3'>        </span>&lt;name&gt;fs.defaultFS&lt;/name&gt;<o:p></o:p></span></p>
  <p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
  none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'><span
  style='mso-spacerun:yes'>        </span><span style='mso-tab-count:1'> </span>&lt;value&gt;hdfs://mycluster&lt;/value&gt;<o:p></o:p></span></p>
  <p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
  none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'><span
  style='mso-tab-count:2'>     </span>&lt;/property&gt;<o:p></o:p></span></p>
  <p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
  none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'><o:p>&nbsp;</o:p></span></p>
  <p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
  none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'><span
  style='mso-tab-count:2'>     </span>&lt;!-- </span><span style='font-size:
  10.5pt;font-family:宋体;mso-ascii-font-family:"Courier New";mso-hansi-font-family:
  "Courier New"'>指定</span><span lang=EN-US style='font-size:10.5pt'>hadoop</span><span
  style='font-size:10.5pt;font-family:宋体;mso-ascii-font-family:"Courier New";
  mso-hansi-font-family:"Courier New"'>运行时产生文件的存储目录</span><span lang=EN-US
  style='font-size:10.5pt'> --&gt;<o:p></o:p></span></p>
  <p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
  none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'><span
  style='mso-tab-count:2'>     </span>&lt;property&gt;<o:p></o:p></span></p>
  <p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
  none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'><span
  style='mso-tab-count:3'>        </span>&lt;name&gt;hadoop.tmp.dir&lt;/name&gt;<o:p></o:p></span></p>
  <p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
  none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'><span
  style='mso-tab-count:3'>        </span>&lt;value&gt;/opt/ha/hadoop-2.7.2/data/tmp&lt;/value&gt;<o:p></o:p></span></p>
  <p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
  none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'><span
  style='mso-tab-count:2'>     </span>&lt;/property&gt;<o:p></o:p></span></p>
  <p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
  none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'>&lt;/configuration&gt;</span></p>
  </td>
 </tr>
</table>

<p class=10 style='margin-top:6.2pt;text-indent:22.0pt'><span lang=EN-US>6.<span
style='mso-tab-count:1'>    </span></span><span style='font-family:黑体;
mso-ascii-font-family:Arial;mso-hansi-font-family:Arial'>配置</span><span
lang=EN-US>hdfs-site.xml</span></p>

<table class=MsoNormalTable border=0 cellspacing=0 cellpadding=0
 style='margin-left:5.4pt;border-collapse:collapse;mso-padding-alt:0cm 5.4pt 0cm 5.4pt'>
 <tr style='mso-yfti-irow:0;mso-yfti-firstrow:yes;mso-yfti-lastrow:yes'>
  <td width=685 valign=top style='width:411.1pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
  none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'>&lt;configuration&gt;<o:p></o:p></span></p>
  <p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
  none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'><span
  style='mso-tab-count:1'>  </span>&lt;!-- </span><span style='font-size:10.5pt;
  font-family:宋体;mso-ascii-font-family:"Courier New";mso-hansi-font-family:
  "Courier New"'>完全分布式集群名称</span><span lang=EN-US style='font-size:10.5pt'>
  --&gt;<o:p></o:p></span></p>
  <p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
  none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'><span
  style='mso-tab-count:1'>  </span>&lt;property&gt;<o:p></o:p></span></p>
  <p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
  none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'><span
  style='mso-tab-count:2'>     </span>&lt;name&gt;dfs.nameservices&lt;/name&gt;<o:p></o:p></span></p>
  <p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
  none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'><span
  style='mso-tab-count:2'>     </span>&lt;value&gt;mycluster&lt;/value&gt;<o:p></o:p></span></p>
  <p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
  none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'><span
  style='mso-tab-count:1'>  </span>&lt;/property&gt;<o:p></o:p></span></p>
  <p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
  none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'><o:p>&nbsp;</o:p></span></p>
  <p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
  none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'><span
  style='mso-tab-count:1'>  </span>&lt;!-- </span><span style='font-size:10.5pt;
  font-family:宋体;mso-ascii-font-family:"Courier New";mso-hansi-font-family:
  "Courier New"'>集群中</span><span lang=EN-US style='font-size:10.5pt'>NameNode</span><span
  style='font-size:10.5pt;font-family:宋体;mso-ascii-font-family:"Courier New";
  mso-hansi-font-family:"Courier New"'>节点都有哪些</span><span lang=EN-US
  style='font-size:10.5pt'> --&gt;<o:p></o:p></span></p>
  <p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
  none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'><span
  style='mso-tab-count:1'>  </span>&lt;property&gt;<o:p></o:p></span></p>
  <p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
  none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'><span
  style='mso-tab-count:2'>     </span>&lt;name&gt;dfs.ha.namenodes.mycluster&lt;/name&gt;<o:p></o:p></span></p>
  <p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
  none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'><span
  style='mso-tab-count:2'>     </span>&lt;value&gt;nn1,nn2&lt;/value&gt;<o:p></o:p></span></p>
  <p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
  none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'><span
  style='mso-tab-count:1'>  </span>&lt;/property&gt;<o:p></o:p></span></p>
  <p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
  none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'><o:p>&nbsp;</o:p></span></p>
  <p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
  none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'><span
  style='mso-tab-count:1'>  </span>&lt;!-- nn1</span><span style='font-size:
  10.5pt;font-family:宋体;mso-ascii-font-family:"Courier New";mso-hansi-font-family:
  "Courier New"'>的</span><span lang=EN-US style='font-size:10.5pt'>RPC</span><span
  style='font-size:10.5pt;font-family:宋体;mso-ascii-font-family:"Courier New";
  mso-hansi-font-family:"Courier New"'>通信地址</span><span lang=EN-US
  style='font-size:10.5pt'> --&gt;<o:p></o:p></span></p>
  <p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
  none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'><span
  style='mso-tab-count:1'>  </span>&lt;property&gt;<o:p></o:p></span></p>
  <p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
  none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'><span
  style='mso-tab-count:2'>     </span>&lt;name&gt;dfs.namenode.rpc-address.mycluster.nn1&lt;/name&gt;<o:p></o:p></span></p>
  <p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
  none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'><span
  style='mso-tab-count:2'>     </span>&lt;value&gt;hadoop102:9000&lt;/value&gt;<o:p></o:p></span></p>
  <p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
  none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'><span
  style='mso-tab-count:1'>  </span>&lt;/property&gt;<o:p></o:p></span></p>
  <p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
  none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'><o:p>&nbsp;</o:p></span></p>
  <p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
  none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'><span
  style='mso-tab-count:1'>  </span>&lt;!-- nn2</span><span style='font-size:
  10.5pt;font-family:宋体;mso-ascii-font-family:"Courier New";mso-hansi-font-family:
  "Courier New"'>的</span><span lang=EN-US style='font-size:10.5pt'>RPC</span><span
  style='font-size:10.5pt;font-family:宋体;mso-ascii-font-family:"Courier New";
  mso-hansi-font-family:"Courier New"'>通信地址</span><span lang=EN-US
  style='font-size:10.5pt'> --&gt;<o:p></o:p></span></p>
  <p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
  none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'><span
  style='mso-tab-count:1'>  </span>&lt;property&gt;<o:p></o:p></span></p>
  <p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
  none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'><span
  style='mso-tab-count:2'>     </span>&lt;name&gt;dfs.namenode.rpc-address.mycluster.nn2&lt;/name&gt;<o:p></o:p></span></p>
  <p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
  none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'><span
  style='mso-tab-count:2'>     </span>&lt;value&gt;hadoop103:9000&lt;/value&gt;<o:p></o:p></span></p>
  <p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
  none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'><span
  style='mso-tab-count:1'>  </span>&lt;/property&gt;<o:p></o:p></span></p>
  <p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
  none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'><o:p>&nbsp;</o:p></span></p>
  <p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
  none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'><span
  style='mso-tab-count:1'>  </span>&lt;!-- nn1</span><span style='font-size:
  10.5pt;font-family:宋体;mso-ascii-font-family:"Courier New";mso-hansi-font-family:
  "Courier New"'>的</span><span lang=EN-US style='font-size:10.5pt'>http</span><span
  style='font-size:10.5pt;font-family:宋体;mso-ascii-font-family:"Courier New";
  mso-hansi-font-family:"Courier New"'>通信地址</span><span lang=EN-US
  style='font-size:10.5pt'> --&gt;<o:p></o:p></span></p>
  <p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
  none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'><span
  style='mso-tab-count:1'>  </span>&lt;property&gt;<o:p></o:p></span></p>
  <p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
  none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'><span
  style='mso-tab-count:2'>     </span>&lt;name&gt;dfs.namenode.http-address.mycluster.nn1&lt;/name&gt;<o:p></o:p></span></p>
  <p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
  none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'><span
  style='mso-tab-count:2'>     </span>&lt;value&gt;hadoop102:50070&lt;/value&gt;<o:p></o:p></span></p>
  <p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
  none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'><span
  style='mso-tab-count:1'>  </span>&lt;/property&gt;<o:p></o:p></span></p>
  <p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
  none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'><o:p>&nbsp;</o:p></span></p>
  <p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
  none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'><span
  style='mso-tab-count:1'>  </span>&lt;!-- nn2</span><span style='font-size:
  10.5pt;font-family:宋体;mso-ascii-font-family:"Courier New";mso-hansi-font-family:
  "Courier New"'>的</span><span lang=EN-US style='font-size:10.5pt'>http</span><span
  style='font-size:10.5pt;font-family:宋体;mso-ascii-font-family:"Courier New";
  mso-hansi-font-family:"Courier New"'>通信地址</span><span lang=EN-US
  style='font-size:10.5pt'> --&gt;<o:p></o:p></span></p>
  <p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
  none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'><span
  style='mso-tab-count:1'>  </span>&lt;property&gt;<o:p></o:p></span></p>
  <p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
  none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'><span
  style='mso-tab-count:2'>     </span>&lt;name&gt;dfs.namenode.http-address.mycluster.nn2&lt;/name&gt;<o:p></o:p></span></p>
  <p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
  none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'><span
  style='mso-tab-count:2'>     </span>&lt;value&gt;hadoop103:50070&lt;/value&gt;<o:p></o:p></span></p>
  <p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
  none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'><span
  style='mso-tab-count:1'>  </span>&lt;/property&gt;<o:p></o:p></span></p>
  <p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
  none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'><o:p>&nbsp;</o:p></span></p>
  <p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
  none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'><span
  style='mso-tab-count:1'>  </span>&lt;!-- </span><span style='font-size:10.5pt;
  font-family:宋体;mso-ascii-font-family:"Courier New";mso-hansi-font-family:
  "Courier New"'>指定</span><span lang=EN-US style='font-size:10.5pt'>NameNode</span><span
  style='font-size:10.5pt;font-family:宋体;mso-ascii-font-family:"Courier New";
  mso-hansi-font-family:"Courier New"'>元数据在</span><span lang=EN-US
  style='font-size:10.5pt'>JournalNode</span><span style='font-size:10.5pt;
  font-family:宋体;mso-ascii-font-family:"Courier New";mso-hansi-font-family:
  "Courier New"'>上的存放位置</span><span lang=EN-US style='font-size:10.5pt'> --&gt;<o:p></o:p></span></p>
  <p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
  none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'><span
  style='mso-tab-count:1'>  </span>&lt;property&gt;<o:p></o:p></span></p>
  <p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
  none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'><span
  style='mso-tab-count:2'>     </span>&lt;name&gt;dfs.namenode.shared.edits.dir&lt;/name&gt;<o:p></o:p></span></p>
  <p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
  none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'><span
  style='mso-tab-count:1'>  </span>&lt;value&gt;qjournal://hadoop102:8485;hadoop103:8485;hadoop104:8485/mycluster&lt;/value&gt;<o:p></o:p></span></p>
  <p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
  none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'><span
  style='mso-tab-count:1'>  </span>&lt;/property&gt;<o:p></o:p></span></p>
  <p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
  none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'><o:p>&nbsp;</o:p></span></p>
  <p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
  none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'><span
  style='mso-tab-count:1'>  </span>&lt;!-- </span><span style='font-size:10.5pt;
  font-family:宋体;mso-ascii-font-family:"Courier New";mso-hansi-font-family:
  "Courier New"'>配置隔离机制，即同一时刻只能有一台服务器对外响应</span><span lang=EN-US
  style='font-size:10.5pt'> --&gt;<o:p></o:p></span></p>
  <p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
  none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'><span
  style='mso-tab-count:1'>  </span>&lt;property&gt;<o:p></o:p></span></p>
  <p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
  none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'><span
  style='mso-tab-count:2'>     </span>&lt;name&gt;dfs.ha.fencing.methods&lt;/name&gt;<o:p></o:p></span></p>
  <p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
  none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'><span
  style='mso-tab-count:1'>  </span><span style='mso-tab-count:1'>   </span>&lt;value&gt;sshfence&lt;/value&gt;<o:p></o:p></span></p>
  <p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
  none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'><span
  style='mso-tab-count:1'>  </span>&lt;/property&gt;<o:p></o:p></span></p>
  <p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
  none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'><o:p>&nbsp;</o:p></span></p>
  <p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
  none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'><span
  style='mso-tab-count:1'>  </span>&lt;!-- </span><span style='font-size:10.5pt;
  font-family:宋体;mso-ascii-font-family:"Courier New";mso-hansi-font-family:
  "Courier New"'>使用隔离机制时需要</span><span lang=EN-US style='font-size:10.5pt'>ssh</span><span
  style='font-size:10.5pt;font-family:宋体;mso-ascii-font-family:"Courier New";
  mso-hansi-font-family:"Courier New"'>无秘钥登录</span><span lang=EN-US
  style='font-size:10.5pt'>--&gt;<o:p></o:p></span></p>
  <p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
  none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'><span
  style='mso-tab-count:1'>  </span>&lt;property&gt;<o:p></o:p></span></p>
  <p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
  none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'><span
  style='mso-tab-count:2'>     </span>&lt;name&gt;dfs.ha.fencing.ssh.private-key-files&lt;/name&gt;<o:p></o:p></span></p>
  <p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
  none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'><span
  style='mso-tab-count:2'>     </span>&lt;value&gt;/home/atguigu/.ssh/id_rsa&lt;/value&gt;<o:p></o:p></span></p>
  <p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
  none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'><span
  style='mso-tab-count:1'>  </span>&lt;/property&gt;<o:p></o:p></span></p>
  <p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
  none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'><o:p>&nbsp;</o:p></span></p>
  <p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
  none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'><span
  style='mso-tab-count:1'>  </span>&lt;!-- </span><span style='font-size:10.5pt;
  font-family:宋体;mso-ascii-font-family:"Courier New";mso-hansi-font-family:
  "Courier New"'>声明</span><span lang=EN-US style='font-size:10.5pt'>journalnode</span><span
  style='font-size:10.5pt;font-family:宋体;mso-ascii-font-family:"Courier New";
  mso-hansi-font-family:"Courier New"'>服务器存储目录</span><span lang=EN-US
  style='font-size:10.5pt'>--&gt;<o:p></o:p></span></p>
  <p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
  none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'><span
  style='mso-tab-count:1'>  </span>&lt;property&gt;<o:p></o:p></span></p>
  <p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
  none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'><span
  style='mso-tab-count:2'>     </span>&lt;name&gt;dfs.journalnode.edits.dir&lt;/name&gt;<o:p></o:p></span></p>
  <p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
  none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'><span
  style='mso-tab-count:2'>     </span>&lt;value&gt;/opt/ha/hadoop-2.7.2/data/jn&lt;/value&gt;<o:p></o:p></span></p>
  <p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
  none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'><span
  style='mso-tab-count:1'>  </span>&lt;/property&gt;<o:p></o:p></span></p>
  <p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
  none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'><o:p>&nbsp;</o:p></span></p>
  <p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
  none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'><span
  style='mso-tab-count:1'>  </span>&lt;!-- </span><span style='font-size:10.5pt;
  font-family:宋体;mso-ascii-font-family:"Courier New";mso-hansi-font-family:
  "Courier New"'>关闭权限检查</span><span lang=EN-US style='font-size:10.5pt'>--&gt;<o:p></o:p></span></p>
  <p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
  none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'><span
  style='mso-tab-count:1'>  </span>&lt;property&gt;<o:p></o:p></span></p>
  <p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
  none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'><span
  style='mso-tab-count:2'>     </span>&lt;name&gt;dfs.permissions.enable&lt;/name&gt;<o:p></o:p></span></p>
  <p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
  none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'><span
  style='mso-tab-count:2'>     </span>&lt;value&gt;false&lt;/value&gt;<o:p></o:p></span></p>
  <p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
  none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'><span
  style='mso-tab-count:1'>  </span>&lt;/property&gt;<o:p></o:p></span></p>
  <p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
  none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'><o:p>&nbsp;</o:p></span></p>
  <p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
  none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'><span
  style='mso-tab-count:1'>  </span>&lt;!-- </span><span style='font-size:10.5pt;
  font-family:宋体;mso-ascii-font-family:"Courier New";mso-hansi-font-family:
  "Courier New"'>访问代理类：</span><span lang=EN-US style='font-size:10.5pt'>client</span><span
  style='font-size:10.5pt;font-family:宋体;mso-ascii-font-family:"Courier New";
  mso-hansi-font-family:"Courier New"'>，</span><span lang=EN-US
  style='font-size:10.5pt'>mycluster</span><span style='font-size:10.5pt;
  font-family:宋体;mso-ascii-font-family:"Courier New";mso-hansi-font-family:
  "Courier New"'>，</span><span lang=EN-US style='font-size:10.5pt'>active</span><span
  style='font-size:10.5pt;font-family:宋体;mso-ascii-font-family:"Courier New";
  mso-hansi-font-family:"Courier New"'>配置失败自动切换实现方式</span><span lang=EN-US
  style='font-size:10.5pt'>--&gt;<o:p></o:p></span></p>
  <p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
  none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'><span
  style='mso-tab-count:1'>  </span>&lt;property&gt;<o:p></o:p></span></p>
  <p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
  none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'><span
  style='mso-spacerun:yes'>  </span><span style='mso-tab-count:2'>      </span>&lt;name&gt;dfs.client.failover.proxy.provider.mycluster&lt;/name&gt;<o:p></o:p></span></p>
  <p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
  none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'><span
  style='mso-tab-count:1'>  </span>&lt;value&gt;org.apache.hadoop.hdfs.server.namenode.ha.ConfiguredFailoverProxyProvider&lt;/value&gt;<o:p></o:p></span></p>
  <p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
  none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'><span
  style='mso-tab-count:1'>  </span>&lt;/property&gt;<o:p></o:p></span></p>
  <p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
  none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'>&lt;/configuration&gt;</span></p>
  </td>
 </tr>
</table>

<p class=10 style='margin-top:6.2pt;text-indent:22.0pt'><span lang=EN-US>7.<span
style='mso-tab-count:1'>    </span></span><span style='font-family:黑体;
mso-ascii-font-family:Arial;mso-hansi-font-family:Arial'>拷贝配置好的</span><span
lang=EN-US>hadoop</span><span style='font-family:黑体;mso-ascii-font-family:Arial;
mso-hansi-font-family:Arial'>环境到其他节点</span></p>

<h3 style='margin:0cm;margin-bottom:.0001pt'><span lang=EN-US style='font-size:
14.0pt;line-height:172%'>8.3.5 </span><span style='font-size:14.0pt;line-height:
172%;font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>启动</span><span lang=EN-US style='font-size:14.0pt;
line-height:172%'>HDFS-HA</span><span style='font-size:14.0pt;line-height:172%;
font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>集群</span><span lang=EN-US style='font-size:14.0pt;
line-height:172%'><o:p></o:p></span></h3>

<p class=10 style='margin-top:6.2pt;text-indent:22.0pt'><span lang=EN-US>1.<span
style='mso-tab-count:1'>    </span></span><span style='font-family:黑体;
mso-ascii-font-family:Arial;mso-hansi-font-family:Arial'>在各个</span><span
lang=EN-US>JournalNode</span><span style='font-family:黑体;mso-ascii-font-family:
Arial;mso-hansi-font-family:Arial'>节点上，输入以下命令启动</span><span lang=EN-US>journalnode</span><span
style='font-family:黑体;mso-ascii-font-family:Arial;mso-hansi-font-family:Arial'>服务</span></p>

<p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'><span
style='mso-tab-count:1'>  </span>sbin/hadoop-daemon.sh start journalnode<o:p></o:p></span></p>

<p class=10 style='margin-top:6.2pt;text-indent:22.0pt'><span lang=EN-US>2.<span
style='mso-tab-count:1'>    </span></span><span style='font-family:黑体;
mso-ascii-font-family:Arial;mso-hansi-font-family:Arial'>在</span><span
lang=EN-US>[nn1]</span><span style='font-family:黑体;mso-ascii-font-family:Arial;
mso-hansi-font-family:Arial'>上，对其进行格式化，并启动</span></p>

<p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'><span
style='mso-tab-count:1'>  </span>bin/hdfs namenode -format<o:p></o:p></span></p>

<p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'><span
style='mso-tab-count:1'>  </span>sbin/hadoop-daemon.sh start namenode<o:p></o:p></span></p>

<p class=10 style='margin-top:6.2pt;text-indent:22.0pt'><span lang=EN-US>3.<span
style='mso-tab-count:1'>    </span></span><span style='font-family:黑体;
mso-ascii-font-family:Arial;mso-hansi-font-family:Arial'>在</span><span
lang=EN-US>[nn2]</span><span style='font-family:黑体;mso-ascii-font-family:Arial;
mso-hansi-font-family:Arial'>上，同步</span><span lang=EN-US>nn1</span><span
style='font-family:黑体;mso-ascii-font-family:Arial;mso-hansi-font-family:Arial'>的元数据信息</span></p>

<p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'><span
style='mso-tab-count:1'>  </span>bin/hdfs namenode -bootstrapStandby<o:p></o:p></span></p>

<p class=10 style='margin-top:6.2pt;text-indent:22.0pt'><span lang=EN-US>4.<span
style='mso-tab-count:1'>    </span></span><span style='font-family:黑体;
mso-ascii-font-family:Arial;mso-hansi-font-family:Arial'>启动</span><span
lang=EN-US>[nn2]</span></p>

<p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'><span
style='mso-tab-count:1'>  </span>sbin/hadoop-daemon.sh start namenode<o:p></o:p></span></p>

<p class=10 style='margin-top:6.2pt;text-indent:22.0pt'><span lang=EN-US>5.<span
style='mso-tab-count:1'>    </span></span><span style='font-family:黑体;
mso-ascii-font-family:Arial;mso-hansi-font-family:Arial'>查看</span><span
lang=EN-US>web</span><span style='font-family:黑体;mso-ascii-font-family:Arial;
mso-hansi-font-family:Arial'>页面显示，如图</span><span lang=EN-US>3-21</span><span
style='font-family:黑体;mso-ascii-font-family:Arial;mso-hansi-font-family:Arial'>，</span><span
lang=EN-US>3-22</span><span style='font-family:黑体;mso-ascii-font-family:Arial;
mso-hansi-font-family:Arial'>所示</span></p>

<p class=MsoNormal align=center style='margin-left:21.0pt;mso-para-margin-left:
2.0gd;text-align:center;text-indent:3.15pt;line-height:150%'><span lang=EN-US
style='mso-no-proof:yes'><v:shape id="_x0000_i1050" type="#_x0000_t75" style='width:271.8pt;
 height:89.4pt;visibility:visible;mso-wrap-style:square'>
 <img src="Hadoop_02HDFS.files/image093.png" o:title="" cropright="6281f"/>
</v:shape></span></p>

<p class=MsoNormal align=center style='margin-left:21.0pt;mso-para-margin-left:
2.0gd;text-align:center;text-indent:3.15pt;line-height:150%'><span
style='font-size:9.0pt;mso-bidi-font-size:10.0pt;line-height:150%;font-family:
宋体;mso-ascii-font-family:Calibri;mso-hansi-font-family:Calibri;mso-bidi-font-family:
Calibri'>图</span><span lang=EN-US style='font-size:9.0pt;mso-bidi-font-size:
10.0pt;line-height:150%;font-family:"Calibri","sans-serif"'>3-21<span
style='mso-spacerun:yes'>  </span>hadoop102(standby)</span><span lang=EN-US
style='font-family:"Calibri","sans-serif"'><o:p></o:p></span></p>

<p class=MsoNormal align=center style='margin-left:21.0pt;mso-para-margin-left:
2.0gd;text-align:center;text-indent:3.15pt;line-height:150%'><span lang=EN-US
style='mso-no-proof:yes'><v:shape id="_x0000_i1049" type="#_x0000_t75" style='width:271.8pt;
 height:91.8pt;visibility:visible;mso-wrap-style:square'>
 <img src="Hadoop_02HDFS.files/image094.png" o:title="" cropright="4628f"/>
</v:shape></span></p>

<p class=MsoNormal align=center style='margin-left:21.0pt;mso-para-margin-left:
2.0gd;text-align:center;text-indent:3.15pt;line-height:150%'><span
style='font-size:9.0pt;mso-bidi-font-size:10.0pt;line-height:150%;font-family:
宋体;mso-ascii-font-family:Calibri;mso-hansi-font-family:Calibri;mso-bidi-font-family:
Calibri'>图</span><span lang=EN-US style='font-size:9.0pt;mso-bidi-font-size:
10.0pt;line-height:150%;font-family:"Calibri","sans-serif"'>3-22 <span
style='mso-spacerun:yes'> </span>hadoop103(standby)</span><span lang=EN-US
style='font-family:"Calibri","sans-serif"'><o:p></o:p></span></p>

<p class=10 style='margin-top:6.2pt;text-indent:22.0pt'><span lang=EN-US>6.<span
style='mso-tab-count:1'>    </span></span><span style='font-family:黑体;
mso-ascii-font-family:Arial;mso-hansi-font-family:Arial'>在</span><span
lang=EN-US>[nn1]</span><span style='font-family:黑体;mso-ascii-font-family:Arial;
mso-hansi-font-family:Arial'>上，启动所有</span><span lang=EN-US>datanode</span></p>

<p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'><span
style='mso-tab-count:1'>  </span>sbin/hadoop-daemons.sh start datanode<o:p></o:p></span></p>

<p class=10 style='margin-top:6.2pt;text-indent:22.0pt'><span lang=EN-US>7.<span
style='mso-tab-count:1'>    </span></span><span style='font-family:黑体;
mso-ascii-font-family:Arial;mso-hansi-font-family:Arial'>将</span><span
lang=EN-US>[nn1]</span><span style='font-family:黑体;mso-ascii-font-family:Arial;
mso-hansi-font-family:Arial'>切换为</span><span lang=EN-US>Active</span></p>

<p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'><span
style='mso-tab-count:1'>  </span>bin/hdfs haadmin -transitionToActive nn1<o:p></o:p></span></p>

<p class=10 style='margin-top:6.2pt;margin-right:0cm;margin-bottom:0cm;
margin-left:40.0pt;margin-bottom:.0001pt;text-indent:-18.0pt;mso-char-indent-count:
0;mso-list:l4 level1 lfo5'><![if !supportLists]><span lang=EN-US
style='mso-fareast-font-family:Arial'><span style='mso-list:Ignore'>7.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><![endif]><span
style='font-family:黑体;mso-ascii-font-family:Arial;mso-hansi-font-family:Arial'>查看是否</span><span
lang=EN-US>Active</span></p>

<p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'><span
style='mso-tab-count:1'>  </span>bin/hdfs haadmin -getServiceState nn1<o:p></o:p></span></p>

<h3 style='margin:0cm;margin-bottom:.0001pt'><span lang=EN-US style='font-size:
14.0pt;line-height:172%'>8.3.6 </span><span style='font-size:14.0pt;line-height:
172%;font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>配置</span><span lang=EN-US style='font-size:14.0pt;
line-height:172%'>HDFS-HA</span><span style='font-size:14.0pt;line-height:172%;
font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>自动故障转移</span><span lang=EN-US style='font-size:14.0pt;
line-height:172%'><o:p></o:p></span></h3>

<p class=10 style='margin-top:6.2pt;text-indent:22.0pt'><span lang=EN-US>1.<span
style='mso-tab-count:1'>    </span></span><span style='font-family:黑体;
mso-ascii-font-family:Arial;mso-hansi-font-family:Arial'>具体配置</span></p>

<p class=MsoNormal style='line-height:150%'><span lang=EN-US><span
style='mso-tab-count:1'>       </span></span><span style='font-family:宋体;
mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:"Times New Roman"'>（</span><span
lang=EN-US>1</span><span style='font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>）在</span><span lang=EN-US>hdfs-site.xml</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>中增加</span></p>

<p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'>&lt;property&gt;<o:p></o:p></span></p>

<p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'><span
style='mso-tab-count:1'>  </span>&lt;name&gt;dfs.ha.automatic-failover.enabled&lt;/name&gt;<o:p></o:p></span></p>

<p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'><span
style='mso-tab-count:1'>  </span>&lt;value&gt;true&lt;/value&gt;<o:p></o:p></span></p>

<p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'>&lt;/property&gt;<o:p></o:p></span></p>

<p class=MsoNormal style='line-height:150%'><span lang=EN-US><span
style='mso-tab-count:1'>       </span></span><span style='font-family:宋体;
mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:"Times New Roman"'>（</span><span
lang=EN-US>2</span><span style='font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>）在</span><span lang=EN-US>core-site.xml</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>文件中增加</span></p>

<p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'>&lt;property&gt;<o:p></o:p></span></p>

<p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'><span
style='mso-tab-count:1'>  </span>&lt;name&gt;ha.zookeeper.quorum&lt;/name&gt;<o:p></o:p></span></p>

<p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'><span
style='mso-tab-count:1'> </span>&lt;value&gt;hadoop102:2181,hadoop103:2181,hadoop104:2181&lt;/value&gt;<o:p></o:p></span></p>

<p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'>&lt;/property&gt;<o:p></o:p></span></p>

<p class=10 style='margin-top:6.2pt;text-indent:22.0pt'><span lang=EN-US>2.<span
style='mso-tab-count:1'>    </span></span><span style='font-family:黑体;
mso-ascii-font-family:Arial;mso-hansi-font-family:Arial'>启动</span></p>

<p class=MsoNormal style='line-height:150%'><span lang=EN-US><span
style='mso-tab-count:1'>       </span></span><span style='font-family:宋体;
mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:"Times New Roman"'>（</span><span
lang=EN-US>1</span><span style='font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>）关闭所有</span><span lang=EN-US>HDFS</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>服务：</span></p>

<p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'>sbin/stop-dfs.sh<o:p></o:p></span></p>

<p class=MsoNormal style='line-height:150%'><span lang=EN-US><span
style='mso-tab-count:1'>       </span></span><span style='font-family:宋体;
mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:"Times New Roman"'>（</span><span
lang=EN-US>2</span><span style='font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>）启动</span><span lang=EN-US>Zookeeper</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>集群：</span></p>

<p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'>bin/zkServer.sh
start<o:p></o:p></span></p>

<p class=MsoNormal style='line-height:150%'><span lang=EN-US><span
style='mso-tab-count:1'>       </span></span><span style='font-family:宋体;
mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:"Times New Roman"'>（</span><span
lang=EN-US>3</span><span style='font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>）初始化</span><span lang=EN-US>HA</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>在</span><span lang=EN-US>Zookeeper</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>中状态：</span></p>

<p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'>bin/hdfs
zkfc -formatZK<o:p></o:p></span></p>

<p class=MsoNormal style='line-height:150%'><span lang=EN-US><span
style='mso-tab-count:1'>       </span></span><span style='font-family:宋体;
mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:"Times New Roman"'>（</span><span
lang=EN-US>4</span><span style='font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>）启动</span><span lang=EN-US>HDFS</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>服务：</span></p>

<p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'>sbin/start-dfs.sh<o:p></o:p></span></p>

<p class=MsoNormal style='line-height:150%'><span lang=EN-US><span
style='mso-tab-count:1'>       </span></span><span style='font-family:宋体;
mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:"Times New Roman"'>（</span><span
lang=EN-US>5</span><span style='font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>）在各个</span><span lang=EN-US>NameNode</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>节点上启动</span><span lang=EN-US>DFSZK Failover Controller</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>，先在哪台机器启动，哪个机器的</span><span lang=EN-US>NameNode</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>就是</span><span lang=EN-US>Active NameNode</span></p>

<p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'>sbin/hadoop-daemin.sh
start zkfc</span></p>

<p class=10 style='margin-top:6.2pt;text-indent:22.0pt'><span lang=EN-US>3.<span
style='mso-tab-count:1'>    </span></span><span style='font-family:黑体;
mso-ascii-font-family:Arial;mso-hansi-font-family:Arial'>验证</span></p>

<p class=MsoNormal style='line-height:150%'><span lang=EN-US><span
style='mso-tab-count:1'>       </span></span><span style='font-family:宋体;
mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:"Times New Roman"'>（</span><span
lang=EN-US>1</span><span style='font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>）将</span><span lang=EN-US>Active
NameNode</span><span style='font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>进程</span><span lang=EN-US>kill</span></p>

<p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'>kill
-9 namenode</span><span style='font-size:10.5pt;font-family:宋体;mso-ascii-font-family:
"Courier New";mso-hansi-font-family:"Courier New"'>的进程</span><span lang=EN-US
style='font-size:10.5pt'>id<o:p></o:p></span></p>

<p class=MsoNormal style='line-height:150%'><span lang=EN-US><span
style='mso-tab-count:1'>       </span></span><span style='font-family:宋体;
mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:"Times New Roman"'>（</span><span
lang=EN-US>2</span><span style='font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>）将</span><span lang=EN-US>Active
NameNode</span><span style='font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>机器断开网络</span></p>

<p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'>service
network stop<o:p></o:p></span></p>

<h2 style='margin:0cm;margin-bottom:.0001pt'><span lang=EN-US style='font-size:
14.0pt;line-height:172%;font-family:"Times New Roman","serif"'>8.4 YARN-HA</span><span
style='font-size:14.0pt;line-height:172%;font-family:黑体;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>配置</span><span
lang=EN-US style='font-size:14.0pt;line-height:172%;font-family:"Times New Roman","serif"'><o:p></o:p></span></h2>

<h3 style='margin:0cm;margin-bottom:.0001pt'><span lang=EN-US style='font-size:
14.0pt;line-height:172%'>8.4.1 YARN-HA</span><span style='font-size:14.0pt;
line-height:172%;font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>工作机制</span><span lang=EN-US
style='font-size:14.0pt;line-height:172%'><o:p></o:p></span></h3>

<p class=10 style='margin-top:6.2pt;text-indent:22.0pt'><span lang=EN-US>1.<span
style='mso-tab-count:1'>    </span></span><span style='font-family:黑体;
mso-ascii-font-family:Arial;mso-hansi-font-family:Arial'>官方文档：</span></p>

<p class=MsoNormal style='line-height:150%'><span lang=EN-US><a
href="http://hadoop.apache.org/docs/r2.7.2/hadoop-yarn/hadoop-yarn-site/ResourceManagerHA.html">http://hadoop.apache.org/docs/r2.7.2/hadoop-yarn/hadoop-yarn-site/ResourceManagerHA.html</a></span></p>

<p class=10 style='margin-top:6.2pt;text-indent:22.0pt'><span lang=EN-US>2.<span
style='mso-tab-count:1'>    </span>YARN-HA</span><span style='font-family:黑体;
mso-ascii-font-family:Arial;mso-hansi-font-family:Arial'>工作机制，如图</span><span
lang=EN-US>3-23</span><span style='font-family:黑体;mso-ascii-font-family:Arial;
mso-hansi-font-family:Arial'>所示</span></p>

<p class=MsoNormal align=center style='text-align:center'><span lang=EN-US
style='mso-no-proof:yes'><v:shape id="_x0000_i1048" type="#_x0000_t75" style='width:313.2pt;
 height:177pt;visibility:visible;mso-wrap-style:square'>
 <img src="Hadoop_02HDFS.files/image095.png" o:title="" croptop="5440f"
  cropbottom="5228f" cropleft="1865f" cropright="4138f"/>
</v:shape></span></p>

<p class=MsoNormal align=center style='text-align:center'><span
style='font-size:9.0pt;mso-bidi-font-size:10.0pt;font-family:宋体;mso-ascii-font-family:
Calibri;mso-hansi-font-family:Calibri;mso-bidi-font-family:Calibri'>图</span><span
lang=EN-US style='font-size:9.0pt;mso-bidi-font-size:10.0pt;font-family:"Calibri","sans-serif"'>3-22
<span style='mso-spacerun:yes'> </span>YARN-HA</span><span style='font-size:
9.0pt;mso-bidi-font-size:10.0pt;font-family:宋体;mso-ascii-font-family:Calibri;
mso-hansi-font-family:Calibri;mso-bidi-font-family:Calibri'>工作机制</span></p>

<h3 style='margin:0cm;margin-bottom:.0001pt'><span lang=EN-US style='font-size:
14.0pt;line-height:172%'>8.4.2 </span><span style='font-size:14.0pt;line-height:
172%;font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>配置</span><span lang=EN-US style='font-size:14.0pt;
line-height:172%'>YARN-HA</span><span style='font-size:14.0pt;line-height:172%;
font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>集群</span><span lang=EN-US style='font-size:14.0pt;
line-height:172%'><o:p></o:p></span></h3>

<p class=10 style='margin-top:6.2pt;text-indent:20.9pt;mso-char-indent-count:
1.9'><span lang=EN-US>1.<span style='mso-tab-count:1'>    </span></span><span
style='font-family:黑体;mso-ascii-font-family:Arial;mso-hansi-font-family:Arial'>环境准备</span></p>

<p class=MsoNormal style='margin-left:21.0pt;mso-para-margin-left:2.0gd;
line-height:150%'><span style='font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>（</span><span lang=EN-US>1</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>）修改</span><span lang=EN-US>IP</span></p>

<p class=MsoNormal style='margin-left:21.0pt;mso-para-margin-left:2.0gd;
line-height:150%'><span style='font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>（</span><span lang=EN-US>2</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>）修改主机名及主机名和</span><span lang=EN-US>IP</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>地址的映射</span></p>

<p class=MsoNormal style='margin-left:21.0pt;mso-para-margin-left:2.0gd;
line-height:150%'><span style='font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>（</span><span lang=EN-US>3</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>）关闭防火墙</span></p>

<p class=MsoNormal style='margin-left:21.0pt;mso-para-margin-left:2.0gd;
line-height:150%'><span style='font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>（</span><span lang=EN-US>4</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>）</span><span lang=EN-US>ssh</span><span style='font-family:
宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:"Times New Roman"'>免密登录</span></p>

<p class=MsoNormal style='margin-left:21.0pt;mso-para-margin-left:2.0gd;
line-height:150%'><span style='font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>（</span><span lang=EN-US>5</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>）安装</span><span lang=EN-US>JDK</span><span style='font-family:
宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:"Times New Roman"'>，配置环境变量等</span></p>

<p class=MsoNormal style='line-height:150%'><span lang=EN-US><span
style='mso-tab-count:1'>       </span></span><span style='font-family:宋体;
mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:"Times New Roman"'>（</span><span
lang=EN-US>6</span><span style='font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>）配置</span><span lang=EN-US>Zookeeper</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>集群</span></p>

<p class=10 style='margin-top:6.2pt;text-indent:22.0pt'><span lang=EN-US>2.<span
style='mso-tab-count:1'>    </span></span><span style='font-family:黑体;
mso-ascii-font-family:Arial;mso-hansi-font-family:Arial'>规划集群</span></p>

<p class=MsoNormal align=center style='text-align:center;line-height:150%'><span
style='font-size:9.0pt;mso-bidi-font-size:10.0pt;line-height:150%;font-family:
黑体;mso-ascii-font-family:Arial;mso-hansi-font-family:Arial'>表</span><span
lang=EN-US style='font-size:9.0pt;mso-bidi-font-size:10.0pt;line-height:150%;
font-family:"Arial","sans-serif";mso-fareast-font-family:黑体;mso-bidi-font-family:
"Times New Roman"'>3-2<o:p></o:p></span></p>

<table class=MsoNormalTable border=1 cellspacing=0 cellpadding=0
 style='border-collapse:collapse;border:none;mso-border-alt:solid windowtext .5pt;
 mso-padding-alt:0cm 5.4pt 0cm 5.4pt;mso-border-insideh:.5pt solid windowtext;
 mso-border-insidev:.5pt solid windowtext'>
 <tr style='mso-yfti-irow:0;mso-yfti-firstrow:yes'>
  <td width=237 valign=top style='width:142.0pt;border:solid windowtext 1.0pt;
  border-left:none;mso-border-top-alt:solid windowtext .5pt;mso-border-bottom-alt:
  solid windowtext .5pt;mso-border-right-alt:solid windowtext .5pt;padding:
  0cm 5.4pt 0cm 5.4pt'>
  <p class=a0><span lang=EN-US style='font-size:10.5pt;font-family:"Times New Roman","serif"'>hadoop102
  <o:p></o:p></span></p>
  </td>
  <td width=237 valign=top style='width:142.05pt;border:solid windowtext 1.0pt;
  border-left:none;mso-border-left-alt:solid windowtext .5pt;mso-border-alt:
  solid windowtext .5pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=a0><span lang=EN-US style='font-size:10.5pt;font-family:"Times New Roman","serif"'>hadoop103<span
  style='mso-spacerun:yes'>  </span><o:p></o:p></span></p>
  </td>
  <td width=237 valign=top style='width:142.05pt;border-top:solid windowtext 1.0pt;
  border-left:none;border-bottom:solid windowtext 1.0pt;border-right:none;
  mso-border-left-alt:solid windowtext .5pt;mso-border-top-alt:solid windowtext .5pt;
  mso-border-left-alt:solid windowtext .5pt;mso-border-bottom-alt:solid windowtext .5pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=a0><span lang=EN-US style='font-size:10.5pt;font-family:"Times New Roman","serif"'>hadoop104<o:p></o:p></span></p>
  </td>
 </tr>
 <tr style='mso-yfti-irow:1'>
  <td width=237 valign=top style='width:142.0pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  mso-border-top-alt:solid windowtext .5pt;mso-border-top-alt:solid windowtext .5pt;
  mso-border-bottom-alt:solid windowtext .5pt;mso-border-right-alt:solid windowtext .5pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=a0><span lang=EN-US style='font-size:10.5pt;font-family:"Times New Roman","serif"'>NameNode<span
  style='mso-tab-count:1'>    </span><o:p></o:p></span></p>
  </td>
  <td width=237 valign=top style='width:142.05pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  mso-border-top-alt:solid windowtext .5pt;mso-border-left-alt:solid windowtext .5pt;
  mso-border-alt:solid windowtext .5pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=a0><span lang=EN-US style='font-size:10.5pt;font-family:"Times New Roman","serif"'>NameNode<o:p></o:p></span></p>
  </td>
  <td width=237 valign=top style='width:142.05pt;border:none;border-bottom:
  solid windowtext 1.0pt;mso-border-top-alt:solid windowtext .5pt;mso-border-left-alt:
  solid windowtext .5pt;mso-border-top-alt:solid windowtext .5pt;mso-border-left-alt:
  solid windowtext .5pt;mso-border-bottom-alt:solid windowtext .5pt;padding:
  0cm 5.4pt 0cm 5.4pt'>
  <p class=a0><span lang=EN-US style='font-size:10.5pt;font-family:"Times New Roman","serif"'><o:p>&nbsp;</o:p></span></p>
  </td>
 </tr>
 <tr style='mso-yfti-irow:2'>
  <td width=237 valign=top style='width:142.0pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  mso-border-top-alt:solid windowtext .5pt;mso-border-top-alt:solid windowtext .5pt;
  mso-border-bottom-alt:solid windowtext .5pt;mso-border-right-alt:solid windowtext .5pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal style='line-height:150%'><span lang=EN-US
  style='mso-bidi-font-size:10.5pt;line-height:150%;position:relative;
  top:-4.0pt;mso-text-raise:4.0pt;layout-grid-mode:line'>JournalNode<span
  style='mso-tab-count:1'>  </span><o:p></o:p></span></p>
  </td>
  <td width=237 valign=top style='width:142.05pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  mso-border-top-alt:solid windowtext .5pt;mso-border-left-alt:solid windowtext .5pt;
  mso-border-alt:solid windowtext .5pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal style='line-height:150%'><span lang=EN-US
  style='mso-bidi-font-size:10.5pt;line-height:150%;position:relative;
  top:-4.0pt;mso-text-raise:4.0pt;layout-grid-mode:line'>JournalNode<span
  style='mso-tab-count:1'>  </span><o:p></o:p></span></p>
  </td>
  <td width=237 valign=top style='width:142.05pt;border:none;border-bottom:
  solid windowtext 1.0pt;mso-border-top-alt:solid windowtext .5pt;mso-border-left-alt:
  solid windowtext .5pt;mso-border-top-alt:solid windowtext .5pt;mso-border-left-alt:
  solid windowtext .5pt;mso-border-bottom-alt:solid windowtext .5pt;padding:
  0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal style='line-height:150%'><span lang=EN-US
  style='mso-bidi-font-size:10.5pt;line-height:150%;position:relative;
  top:-4.0pt;mso-text-raise:4.0pt;layout-grid-mode:line'>JournalNode<span
  style='mso-tab-count:1'>  </span><o:p></o:p></span></p>
  </td>
 </tr>
 <tr style='mso-yfti-irow:3'>
  <td width=237 valign=top style='width:142.0pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  mso-border-top-alt:solid windowtext .5pt;mso-border-top-alt:solid windowtext .5pt;
  mso-border-bottom-alt:solid windowtext .5pt;mso-border-right-alt:solid windowtext .5pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal style='line-height:150%'><span lang=EN-US
  style='mso-bidi-font-size:10.5pt;line-height:150%;position:relative;
  top:-4.0pt;mso-text-raise:4.0pt;layout-grid-mode:line'>DataNode<o:p></o:p></span></p>
  </td>
  <td width=237 valign=top style='width:142.05pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  mso-border-top-alt:solid windowtext .5pt;mso-border-left-alt:solid windowtext .5pt;
  mso-border-alt:solid windowtext .5pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal style='line-height:150%'><span lang=EN-US
  style='mso-bidi-font-size:10.5pt;line-height:150%;position:relative;
  top:-4.0pt;mso-text-raise:4.0pt;layout-grid-mode:line'>DataNode<o:p></o:p></span></p>
  </td>
  <td width=237 valign=top style='width:142.05pt;border:none;border-bottom:
  solid windowtext 1.0pt;mso-border-top-alt:solid windowtext .5pt;mso-border-left-alt:
  solid windowtext .5pt;mso-border-top-alt:solid windowtext .5pt;mso-border-left-alt:
  solid windowtext .5pt;mso-border-bottom-alt:solid windowtext .5pt;padding:
  0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal style='line-height:150%'><span lang=EN-US
  style='mso-bidi-font-size:10.5pt;line-height:150%;position:relative;
  top:-4.0pt;mso-text-raise:4.0pt;layout-grid-mode:line'>DataNode<o:p></o:p></span></p>
  </td>
 </tr>
 <tr style='mso-yfti-irow:4'>
  <td width=237 valign=top style='width:142.0pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  mso-border-top-alt:solid windowtext .5pt;mso-border-top-alt:solid windowtext .5pt;
  mso-border-bottom-alt:solid windowtext .5pt;mso-border-right-alt:solid windowtext .5pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal style='line-height:150%'><span lang=EN-US
  style='mso-bidi-font-size:10.5pt;line-height:150%;position:relative;
  top:-4.0pt;mso-text-raise:4.0pt;layout-grid-mode:line'>ZK<o:p></o:p></span></p>
  </td>
  <td width=237 valign=top style='width:142.05pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  mso-border-top-alt:solid windowtext .5pt;mso-border-left-alt:solid windowtext .5pt;
  mso-border-alt:solid windowtext .5pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal style='line-height:150%'><span lang=EN-US
  style='mso-bidi-font-size:10.5pt;line-height:150%;position:relative;
  top:-4.0pt;mso-text-raise:4.0pt;layout-grid-mode:line'>ZK<o:p></o:p></span></p>
  </td>
  <td width=237 valign=top style='width:142.05pt;border:none;border-bottom:
  solid windowtext 1.0pt;mso-border-top-alt:solid windowtext .5pt;mso-border-left-alt:
  solid windowtext .5pt;mso-border-top-alt:solid windowtext .5pt;mso-border-left-alt:
  solid windowtext .5pt;mso-border-bottom-alt:solid windowtext .5pt;padding:
  0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal style='line-height:150%'><span lang=EN-US
  style='mso-bidi-font-size:10.5pt;line-height:150%;position:relative;
  top:-4.0pt;mso-text-raise:4.0pt;layout-grid-mode:line'>ZK<o:p></o:p></span></p>
  </td>
 </tr>
 <tr style='mso-yfti-irow:5'>
  <td width=237 valign=top style='width:142.0pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  mso-border-top-alt:solid windowtext .5pt;mso-border-top-alt:solid windowtext .5pt;
  mso-border-bottom-alt:solid windowtext .5pt;mso-border-right-alt:solid windowtext .5pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal style='line-height:150%'><span lang=EN-US
  style='mso-bidi-font-size:10.5pt;line-height:150%;position:relative;
  top:-4.0pt;mso-text-raise:4.0pt;layout-grid-mode:line'>ResourceManager<span
  style='mso-tab-count:1'> </span><o:p></o:p></span></p>
  </td>
  <td width=237 valign=top style='width:142.05pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  mso-border-top-alt:solid windowtext .5pt;mso-border-left-alt:solid windowtext .5pt;
  mso-border-alt:solid windowtext .5pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal style='line-height:150%'><span lang=EN-US
  style='mso-bidi-font-size:10.5pt;line-height:150%;position:relative;
  top:-4.0pt;mso-text-raise:4.0pt;layout-grid-mode:line'>ResourceManager<span
  style='mso-tab-count:1'> </span><o:p></o:p></span></p>
  </td>
  <td width=237 valign=top style='width:142.05pt;border:none;border-bottom:
  solid windowtext 1.0pt;mso-border-top-alt:solid windowtext .5pt;mso-border-left-alt:
  solid windowtext .5pt;mso-border-top-alt:solid windowtext .5pt;mso-border-left-alt:
  solid windowtext .5pt;mso-border-bottom-alt:solid windowtext .5pt;padding:
  0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal style='line-height:150%'><span lang=EN-US
  style='mso-bidi-font-size:10.5pt;line-height:150%;position:relative;
  top:-4.0pt;mso-text-raise:4.0pt;layout-grid-mode:line'><o:p>&nbsp;</o:p></span></p>
  </td>
 </tr>
 <tr style='mso-yfti-irow:6;mso-yfti-lastrow:yes'>
  <td width=237 valign=top style='width:142.0pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  mso-border-top-alt:solid windowtext .5pt;mso-border-top-alt:solid windowtext .5pt;
  mso-border-bottom-alt:solid windowtext .5pt;mso-border-right-alt:solid windowtext .5pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal style='line-height:150%'><span lang=EN-US
  style='mso-bidi-font-size:10.5pt;line-height:150%;position:relative;
  top:-4.0pt;mso-text-raise:4.0pt;layout-grid-mode:line'>NodeManager<span
  style='mso-tab-count:1'> </span><o:p></o:p></span></p>
  </td>
  <td width=237 valign=top style='width:142.05pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  mso-border-top-alt:solid windowtext .5pt;mso-border-left-alt:solid windowtext .5pt;
  mso-border-alt:solid windowtext .5pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal style='line-height:150%'><span lang=EN-US
  style='mso-bidi-font-size:10.5pt;line-height:150%;position:relative;
  top:-4.0pt;mso-text-raise:4.0pt;layout-grid-mode:line'>NodeManager<span
  style='mso-tab-count:1'> </span><o:p></o:p></span></p>
  </td>
  <td width=237 valign=top style='width:142.05pt;border:none;border-bottom:
  solid windowtext 1.0pt;mso-border-top-alt:solid windowtext .5pt;mso-border-left-alt:
  solid windowtext .5pt;mso-border-top-alt:solid windowtext .5pt;mso-border-left-alt:
  solid windowtext .5pt;mso-border-bottom-alt:solid windowtext .5pt;padding:
  0cm 5.4pt 0cm 5.4pt'>
  <p class=a0><span lang=EN-US style='font-size:10.5pt;font-family:"Times New Roman","serif"'>NodeManager<span
  style='mso-tab-count:1'> </span><o:p></o:p></span></p>
  </td>
 </tr>
</table>

<p class=10 style='margin-top:6.2pt;text-indent:22.0pt'><span lang=EN-US>3.<span
style='mso-tab-count:1'>    </span></span><span style='font-family:黑体;
mso-ascii-font-family:Arial;mso-hansi-font-family:Arial'>具体配置</span></p>

<p class=MsoNormal style='text-indent:21.0pt;line-height:150%'><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>（</span><span lang=EN-US>1</span><span style='font-family:
宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:"Times New Roman"'>）</span><span
lang=EN-US>yarn-site.xml</span></p>

<table class=MsoNormalTable border=0 cellspacing=0 cellpadding=0
 style='margin-left:5.4pt;border-collapse:collapse;mso-padding-alt:0cm 5.4pt 0cm 5.4pt'>
 <tr style='mso-yfti-irow:0;mso-yfti-firstrow:yes;mso-yfti-lastrow:yes'>
  <td width=685 valign=top style='width:411.1pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
  none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'>&lt;configuration&gt;<o:p></o:p></span></p>
  <p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
  none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'><o:p>&nbsp;</o:p></span></p>
  <p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
  none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'><span
  style='mso-spacerun:yes'>    </span>&lt;property&gt;<o:p></o:p></span></p>
  <p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
  none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'><span
  style='mso-spacerun:yes'>       
  </span>&lt;name&gt;yarn.nodemanager.aux-services&lt;/name&gt;<o:p></o:p></span></p>
  <p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
  none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'><span
  style='mso-spacerun:yes'>       
  </span>&lt;value&gt;mapreduce_shuffle&lt;/value&gt;<o:p></o:p></span></p>
  <p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
  none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'><span
  style='mso-spacerun:yes'>    </span>&lt;/property&gt;<o:p></o:p></span></p>
  <p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
  none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'><o:p>&nbsp;</o:p></span></p>
  <p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
  none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'><span
  style='mso-spacerun:yes'>    </span>&lt;!--</span><span style='font-size:
  10.5pt;font-family:宋体;mso-ascii-font-family:"Courier New";mso-hansi-font-family:
  "Courier New"'>启用</span><span lang=EN-US style='font-size:10.5pt'>resourcemanager
  ha--&gt;<o:p></o:p></span></p>
  <p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
  none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'><span
  style='mso-spacerun:yes'>    </span>&lt;property&gt;<o:p></o:p></span></p>
  <p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
  none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'><span
  style='mso-spacerun:yes'>       
  </span>&lt;name&gt;yarn.resourcemanager.ha.enabled&lt;/name&gt;<o:p></o:p></span></p>
  <p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
  none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'><span
  style='mso-spacerun:yes'>        </span>&lt;value&gt;true&lt;/value&gt;<o:p></o:p></span></p>
  <p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
  none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'><span
  style='mso-spacerun:yes'>    </span>&lt;/property&gt;<o:p></o:p></span></p>
  <p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
  none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'><span
  style='mso-spacerun:yes'> </span><o:p></o:p></span></p>
  <p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
  none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'><span
  style='mso-spacerun:yes'>    </span>&lt;!--</span><span style='font-size:
  10.5pt;font-family:宋体;mso-ascii-font-family:"Courier New";mso-hansi-font-family:
  "Courier New"'>声明两台</span><span lang=EN-US style='font-size:10.5pt'>resourcemanager</span><span
  style='font-size:10.5pt;font-family:宋体;mso-ascii-font-family:"Courier New";
  mso-hansi-font-family:"Courier New"'>的地址</span><span lang=EN-US
  style='font-size:10.5pt'>--&gt;<o:p></o:p></span></p>
  <p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
  none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'><span
  style='mso-spacerun:yes'>    </span>&lt;property&gt;<o:p></o:p></span></p>
  <p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
  none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'><span
  style='mso-spacerun:yes'>       
  </span>&lt;name&gt;yarn.resourcemanager.cluster-id&lt;/name&gt;<o:p></o:p></span></p>
  <p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
  none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'><span
  style='mso-spacerun:yes'>       
  </span>&lt;value&gt;cluster-yarn1&lt;/value&gt;<o:p></o:p></span></p>
  <p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
  none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'><span
  style='mso-spacerun:yes'>  </span><span
  style='mso-spacerun:yes'>  </span>&lt;/property&gt;<o:p></o:p></span></p>
  <p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
  none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'><o:p>&nbsp;</o:p></span></p>
  <p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
  none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'><span
  style='mso-spacerun:yes'>    </span>&lt;property&gt;<o:p></o:p></span></p>
  <p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
  none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'><span
  style='mso-spacerun:yes'>       
  </span>&lt;name&gt;yarn.resourcemanager.ha.rm-ids&lt;/name&gt;<o:p></o:p></span></p>
  <p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
  none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'><span
  style='mso-spacerun:yes'>        </span>&lt;value&gt;rm1,rm2&lt;/value&gt;<o:p></o:p></span></p>
  <p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
  none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'><span
  style='mso-spacerun:yes'>    </span>&lt;/property&gt;<o:p></o:p></span></p>
  <p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
  none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'><o:p>&nbsp;</o:p></span></p>
  <p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
  none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'><span
  style='mso-spacerun:yes'>    </span>&lt;property&gt;<o:p></o:p></span></p>
  <p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
  none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'><span
  style='mso-spacerun:yes'>       
  </span>&lt;name&gt;yarn.resourcemanager.hostname.rm1&lt;/name&gt;<o:p></o:p></span></p>
  <p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
  none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'><span
  style='mso-spacerun:yes'>        </span>&lt;value&gt;hadoop102&lt;/value&gt;<o:p></o:p></span></p>
  <p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
  none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'><span
  style='mso-spacerun:yes'>    </span>&lt;/property&gt;<o:p></o:p></span></p>
  <p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
  none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'><o:p>&nbsp;</o:p></span></p>
  <p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
  none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'><span
  style='mso-spacerun:yes'>    </span>&lt;property&gt;<o:p></o:p></span></p>
  <p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
  none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'><span
  style='mso-spacerun:yes'>       
  </span>&lt;name&gt;yarn.resourcemanager.hostname.rm2&lt;/name&gt;<o:p></o:p></span></p>
  <p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
  none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'><span
  style='mso-spacerun:yes'>        </span>&lt;value&gt;hadoop103&lt;/value&gt;<o:p></o:p></span></p>
  <p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
  none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'><span
  style='mso-spacerun:yes'>    </span>&lt;/property&gt;<o:p></o:p></span></p>
  <p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
  none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'><span
  style='mso-spacerun:yes'> </span><o:p></o:p></span></p>
  <p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
  none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'><span
  style='mso-spacerun:yes'>    </span>&lt;!--</span><span style='font-size:
  10.5pt;font-family:宋体;mso-ascii-font-family:"Courier New";mso-hansi-font-family:
  "Courier New"'>指定</span><span lang=EN-US style='font-size:10.5pt'>zookeeper</span><span
  style='font-size:10.5pt;font-family:宋体;mso-ascii-font-family:"Courier New";
  mso-hansi-font-family:"Courier New"'>集群的地址</span><span lang=EN-US
  style='font-size:10.5pt'>--&gt; <o:p></o:p></span></p>
  <p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
  none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'><span
  style='mso-spacerun:yes'>    </span>&lt;property&gt;<o:p></o:p></span></p>
  <p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
  none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'><span
  style='mso-spacerun:yes'>       
  </span>&lt;name&gt;yarn.resourcemanager.zk-address&lt;/name&gt;<o:p></o:p></span></p>
  <p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
  none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'><span
  style='mso-spacerun:yes'>        </span>&lt;value&gt;hadoop102:2181,hadoop103:2181,hadoop104:2181&lt;/value&gt;<o:p></o:p></span></p>
  <p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
  none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'><span
  style='mso-spacerun:yes'>    </span>&lt;/property&gt;<o:p></o:p></span></p>
  <p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
  none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'><o:p>&nbsp;</o:p></span></p>
  <p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
  none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'><span
  style='mso-spacerun:yes'>    </span>&lt;!--</span><span style='font-size:
  10.5pt;font-family:宋体;mso-ascii-font-family:"Courier New";mso-hansi-font-family:
  "Courier New"'>启用自动恢复</span><span lang=EN-US style='font-size:10.5pt'>--&gt; <o:p></o:p></span></p>
  <p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
  none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'><span
  style='mso-spacerun:yes'>    </span>&lt;property&gt;<o:p></o:p></span></p>
  <p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
  none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'><span
  style='mso-spacerun:yes'>       
  </span>&lt;name&gt;yarn.resourcemanager.recovery.enabled&lt;/name&gt;<o:p></o:p></span></p>
  <p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
  none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'><span
  style='mso-spacerun:yes'>        </span>&lt;value&gt;true&lt;/value&gt;<o:p></o:p></span></p>
  <p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
  none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'><span
  style='mso-spacerun:yes'>    </span>&lt;/property&gt;<o:p></o:p></span></p>
  <p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
  none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'><span
  style='mso-spacerun:yes'> </span><o:p></o:p></span></p>
  <p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
  none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'><span
  style='mso-spacerun:yes'>    </span>&lt;!--</span><span style='font-size:
  10.5pt;font-family:宋体;mso-ascii-font-family:"Courier New";mso-hansi-font-family:
  "Courier New"'>指定</span><span lang=EN-US style='font-size:10.5pt'>resourcemanager</span><span
  style='font-size:10.5pt;font-family:宋体;mso-ascii-font-family:"Courier New";
  mso-hansi-font-family:"Courier New"'>的状态信息存储在</span><span lang=EN-US
  style='font-size:10.5pt'>zookeeper</span><span style='font-size:10.5pt;
  font-family:宋体;mso-ascii-font-family:"Courier New";mso-hansi-font-family:
  "Courier New"'>集群</span><span lang=EN-US style='font-size:10.5pt'>--&gt; <o:p></o:p></span></p>
  <p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
  none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'><span
  style='mso-spacerun:yes'>    </span>&lt;property&gt;<o:p></o:p></span></p>
  <p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
  none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'><span
  style='mso-spacerun:yes'>    </span><span
  style='mso-spacerun:yes'>    </span>&lt;name&gt;yarn.resourcemanager.store.class&lt;/name&gt;<span
  style='mso-spacerun:yes'>    
  </span>&lt;value&gt;org.apache.hadoop.yarn.server.resourcemanager.recovery.ZKRMStateStore&lt;/value&gt;<o:p></o:p></span></p>
  <p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
  none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'>&lt;/property&gt;<o:p></o:p></span></p>
  <p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
  none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'><o:p>&nbsp;</o:p></span></p>
  <p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
  none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'>&lt;/configuration&gt;</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='line-height:150%'><span lang=EN-US><span
style='mso-tab-count:1'>       </span></span><span style='font-family:宋体;
mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:"Times New Roman"'>（</span><span
lang=EN-US>2</span><span style='font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>）同步更新其他节点的配置信息</span></p>

<p class=10 style='margin-top:6.2pt;text-indent:22.0pt'><span lang=EN-US>4.<span
style='mso-tab-count:1'>    </span></span><span style='font-family:黑体;
mso-ascii-font-family:Arial;mso-hansi-font-family:Arial'>启动</span><span
lang=EN-US>hdfs </span></p>

<p class=MsoNormal style='margin-left:21.0pt;mso-para-margin-left:2.0gd;
line-height:150%'><span style='font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>（</span><span lang=EN-US>1</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>）在各个</span><span lang=EN-US>JournalNode</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>节点上，输入以下命令启动</span><span lang=EN-US>journalnode</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>服务：</span></p>

<p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'>sbin/hadoop-daemon.sh
start journalnode<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:21.0pt;mso-para-margin-left:2.0gd;
line-height:150%'><span style='font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>（</span><span lang=EN-US>2</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>）在</span><span lang=EN-US>[nn1]</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>上，对其进行格式化，并启动：</span></p>

<p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'>bin/hdfs
namenode -format<o:p></o:p></span></p>

<p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'>sbin/hadoop-daemon.sh
start namenode<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:21.0pt;mso-para-margin-left:2.0gd;
line-height:150%'><span style='font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>（</span><span lang=EN-US>3</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>）在</span><span lang=EN-US>[nn2]</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>上，同步</span><span lang=EN-US>nn1</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>的元数据信息：</span></p>

<p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'>bin/hdfs
namenode -bootstrapStandby<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:21.0pt;mso-para-margin-left:2.0gd;
line-height:150%'><span style='font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>（</span><span lang=EN-US>4</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>）启动</span><span lang=EN-US>[nn2]</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>：</span></p>

<p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'>sbin/hadoop-daemon.sh
start namenode<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:21.0pt;mso-para-margin-left:2.0gd;
line-height:150%'><span style='font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>（</span><span lang=EN-US>5</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>）启动所有</span><span lang=EN-US>DataNode</span></p>

<p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'>sbin/hadoop-daemons.sh
start datanode<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:21.0pt;mso-para-margin-left:2.0gd;
line-height:150%'><span style='font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>（</span><span lang=EN-US>6</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>）将</span><span lang=EN-US>[nn1]</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>切换为</span><span lang=EN-US>Active</span></p>

<p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'>bin/hdfs
haadmin -transitionToActive nn1<o:p></o:p></span></p>

<p class=10 style='margin-top:6.2pt;text-indent:22.0pt'><span lang=EN-US>5.<span
style='mso-tab-count:1'>    </span></span><span style='font-family:黑体;
mso-ascii-font-family:Arial;mso-hansi-font-family:Arial'>启动</span><span
lang=EN-US>YARN </span></p>

<p class=MsoNormal style='text-indent:21.0pt;line-height:150%'><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman";mso-bidi-font-family:Arial;color:#2F2F2F;background:white'>（</span><span
lang=EN-US style='mso-bidi-font-family:Arial;color:#2F2F2F;background:white'>1</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman";mso-bidi-font-family:Arial;color:#2F2F2F;background:white'>）在</span><span
lang=EN-US style='mso-bidi-font-family:Arial;color:#2F2F2F;background:white'>hadoop102</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman";mso-bidi-font-family:Arial;color:#2F2F2F;background:white'>中执行：</span><span
lang=EN-US style='mso-bidi-font-family:Arial;color:#2F2F2F;background:white'><o:p></o:p></span></p>

<p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'>sbin/start-yarn.sh<o:p></o:p></span></p>

<p class=MsoNormal style='text-indent:21.0pt;line-height:150%'><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman";mso-bidi-font-family:Arial;color:#2F2F2F;background:white'>（</span><span
lang=EN-US style='mso-bidi-font-family:Arial;color:#2F2F2F;background:white'>2</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman";mso-bidi-font-family:Arial;color:#2F2F2F;background:white'>）在</span><span
lang=EN-US style='mso-bidi-font-family:Arial;color:#2F2F2F;background:white'>hadoop103</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman";mso-bidi-font-family:Arial;color:#2F2F2F;background:white'>中执行：</span><span
lang=EN-US style='mso-bidi-font-family:Arial;color:#2F2F2F;background:white'><o:p></o:p></span></p>

<p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'>sbin/yarn-daemon.sh
start resourcemanager<o:p></o:p></span></p>

<p class=MsoNormal style='text-indent:21.0pt;line-height:150%'><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman";mso-bidi-font-family:Arial;background:white'>（</span><span
lang=EN-US style='mso-bidi-font-family:Arial;background:white'>3</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman";mso-bidi-font-family:Arial;background:white'>）查看服务状态，如图</span><span
lang=EN-US style='mso-bidi-font-family:Arial;background:white'>3-24</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman";mso-bidi-font-family:Arial;background:white'>所示</span><span
lang=EN-US style='mso-bidi-font-family:Arial;background:white'><o:p></o:p></span></p>

<p class=a style='margin-left:31.5pt;mso-para-margin-left:3.0gd;mso-layout-grid-align:
none;punctuation-trim:leading'><span lang=EN-US style='font-size:10.5pt'>bin/yarn
rmadmin -getServiceState rm1<o:p></o:p></span></p>

<p class=MsoNormal style='line-height:150%'><span lang=EN-US style='mso-no-proof:
yes'><v:shape id="图片_x0020_1" o:spid="_x0000_i1047" type="#_x0000_t75" style='width:415.2pt;
 height:133.8pt;visibility:visible;mso-wrap-style:square'>
 <img src="Hadoop_02HDFS.files/image096.png" o:title="" croptop="1368f"/>
</v:shape></span></p>

<p class=MsoNormal align=center style='text-align:center;line-height:150%'><span
style='font-size:9.0pt;mso-bidi-font-size:10.0pt;line-height:150%;font-family:
宋体;mso-ascii-font-family:Calibri;mso-hansi-font-family:Calibri;mso-bidi-font-family:
Calibri'>图</span><span lang=EN-US style='font-size:9.0pt;mso-bidi-font-size:
10.0pt;line-height:150%;font-family:"Calibri","sans-serif"'>3-24 <span
style='mso-spacerun:yes'> </span>YARN</span><span style='font-size:9.0pt;
mso-bidi-font-size:10.0pt;line-height:150%;font-family:宋体;mso-ascii-font-family:
Calibri;mso-hansi-font-family:Calibri;mso-bidi-font-family:Calibri'>的服务状态</span><span
lang=EN-US style='mso-bidi-font-family:Arial;color:#7030A0;background:white'><o:p></o:p></span></p>

<h2 style='margin:0cm;margin-bottom:.0001pt'><span lang=EN-US style='font-size:
14.0pt;line-height:172%;font-family:"Times New Roman","serif"'>8.5 HDFS
Federation</span><span style='font-size:14.0pt;line-height:172%;font-family:
黑体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:"Times New Roman"'>架构设计</span><span
lang=EN-US style='font-size:14.0pt;line-height:172%;font-family:"Times New Roman","serif"'><o:p></o:p></span></h2>

<p class=10 style='margin-top:6.2pt;text-indent:22.0pt'><span lang=EN-US>1.<span
style='mso-tab-count:1'>    </span>NameNode</span><span style='font-family:
黑体;mso-ascii-font-family:Arial;mso-hansi-font-family:Arial'>架构的局限性</span></p>

<p class=MsoNormal style='margin-left:18.0pt;line-height:150%'><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>（</span><span lang=EN-US>1</span><span style='font-family:
宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:"Times New Roman"'>）</span><span
lang=EN-US>Namespace</span><span style='font-family:宋体;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>（命名空间）的限制</span></p>

<p class=MsoNormal style='text-indent:21.0pt;line-height:150%'><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>由于</span><span lang=EN-US>NameNode</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>在内存中存储所有的元数据（</span><span lang=EN-US>metadata</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>），因此单个</span><span lang=EN-US>NameNode</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>所能存储的对象（文件</span><span lang=EN-US>+</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>块）数目受到</span><span lang=EN-US>NameNode</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>所在</span><span lang=EN-US>JVM</span><span style='font-family:
宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:"Times New Roman"'>的</span><span
lang=EN-US>heap size</span><span style='font-family:宋体;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>的限制。</span><span
lang=EN-US>50G</span><span style='font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>的</span><span lang=EN-US>heap</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>能够存储</span><span lang=EN-US>20</span><span style='font-family:
宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:"Times New Roman"'>亿（</span><span
lang=EN-US>200million</span><span style='font-family:宋体;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>）个对象，这</span><span
lang=EN-US>20</span><span style='font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>亿个对象支持</span><span lang=EN-US>4000</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>个</span><span lang=EN-US>DataNode</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>，</span><span lang=EN-US>12PB</span><span style='font-family:
宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:"Times New Roman"'>的存储（假设文件平均大小为</span><span
lang=EN-US>40MB</span><span style='font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>）。随着数据的飞速增长，存储的需求也随之增长。单个</span><span
lang=EN-US>DataNode</span><span style='font-family:宋体;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>从</span><span
lang=EN-US>4T</span><span style='font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>增长到</span><span lang=EN-US>36T</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>，集群的尺寸增长到</span><span lang=EN-US>8000</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>个</span><span lang=EN-US>DataNode</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>。存储的需求从</span><span lang=EN-US>12PB</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>增长到大于</span><span lang=EN-US>100PB</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>。</span></p>

<p class=MsoNormal style='text-indent:18.0pt;line-height:150%'><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>（</span><span lang=EN-US>2</span><span style='font-family:
宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:"Times New Roman"'>）隔离问题</span></p>

<p class=MsoNormal style='text-indent:21.0pt;line-height:150%'><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>由于</span><span lang=EN-US>HDFS</span><span style='font-family:
宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:"Times New Roman"'>仅有一个</span><span
lang=EN-US>NameNode</span><span style='font-family:宋体;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>，无法隔离各个程序，因此</span><span
lang=EN-US>HDFS</span><span style='font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>上的一个实验程序就很有可能影响整个</span><span
lang=EN-US>HDFS</span><span style='font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>上运行的程序。</span></p>

<p class=MsoNormal style='line-height:150%'><span lang=EN-US><span
style='mso-tab-count:1'>       </span></span><span style='font-family:宋体;
mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:"Times New Roman"'>（</span><span
lang=EN-US>3</span><span style='font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>）性能的瓶颈</span></p>

<p class=MsoNormal style='line-height:150%'><span lang=EN-US><span
style='mso-tab-count:1'>       </span></span><span style='font-family:宋体;
mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:"Times New Roman"'>由于是单个</span><span
lang=EN-US>NameNode</span><span style='font-family:宋体;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>的</span><span
lang=EN-US>HDFS</span><span style='font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>架构，因此整个</span><span lang=EN-US>HDFS</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>文件系统的吞吐量受限于单个</span><span lang=EN-US>NameNode</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>的吞吐量。</span></p>

<p class=10 style='margin-top:6.2pt;text-indent:22.0pt'><span lang=EN-US>2.<span
style='mso-tab-count:1'>    </span>HDFS Federation</span><span
style='font-family:黑体;mso-ascii-font-family:Arial;mso-hansi-font-family:Arial'>架构设计，如图</span><span
lang=EN-US>3-25</span><span style='font-family:黑体;mso-ascii-font-family:Arial;
mso-hansi-font-family:Arial'>所示</span></p>

<p class=MsoNormal style='margin-left:21.0pt;mso-para-margin-left:2.0gd;
line-height:150%'><span style='font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>能不能有多个</span><span lang=EN-US>NameNode</span></p>

<p class=MsoNormal align=center style='margin-left:21.0pt;mso-para-margin-left:
2.0gd;text-align:center;line-height:150%'><span style='font-size:9.0pt;
mso-bidi-font-size:10.0pt;line-height:150%;font-family:黑体;mso-ascii-font-family:
Arial;mso-hansi-font-family:Arial'>表</span><span lang=EN-US style='font-size:
9.0pt;mso-bidi-font-size:10.0pt;line-height:150%;font-family:"Arial","sans-serif";
mso-fareast-font-family:黑体;mso-bidi-font-family:"Times New Roman"'>3-3<o:p></o:p></span></p>

<table class=MsoNormalTable border=1 cellspacing=0 cellpadding=0
 style='border-collapse:collapse;border:none;mso-border-alt:solid windowtext .5pt;
 mso-padding-alt:0cm 5.4pt 0cm 5.4pt;mso-border-insideh:.5pt solid windowtext;
 mso-border-insidev:.5pt solid windowtext'>
 <tr style='mso-yfti-irow:0;mso-yfti-firstrow:yes'>
  <td width=237 valign=top style='width:142.0pt;border:solid windowtext 1.0pt;
  border-left:none;mso-border-top-alt:solid windowtext .5pt;mso-border-bottom-alt:
  solid windowtext .5pt;mso-border-right-alt:solid windowtext .5pt;padding:
  0cm 5.4pt 0cm 5.4pt'>
  <p class=a0><span lang=EN-US style='font-size:10.5pt;font-family:"Times New Roman","serif"'>NameNode<span
  style='mso-tab-count:1'>    </span><o:p></o:p></span></p>
  </td>
  <td width=237 valign=top style='width:142.05pt;border:solid windowtext 1.0pt;
  border-left:none;mso-border-left-alt:solid windowtext .5pt;mso-border-alt:
  solid windowtext .5pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=a0><span lang=EN-US style='font-size:10.5pt;font-family:"Times New Roman","serif"'>NameNode<span
  style='mso-tab-count:1'>    </span><o:p></o:p></span></p>
  </td>
  <td width=237 valign=top style='width:142.05pt;border-top:solid windowtext 1.0pt;
  border-left:none;border-bottom:solid windowtext 1.0pt;border-right:none;
  mso-border-left-alt:solid windowtext .5pt;mso-border-top-alt:solid windowtext .5pt;
  mso-border-left-alt:solid windowtext .5pt;mso-border-bottom-alt:solid windowtext .5pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=a0><span lang=EN-US style='font-size:10.5pt;font-family:"Times New Roman","serif"'>NameNode<span
  style='mso-tab-count:1'>    </span><o:p></o:p></span></p>
  </td>
 </tr>
 <tr style='mso-yfti-irow:1'>
  <td width=237 valign=top style='width:142.0pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  mso-border-top-alt:solid windowtext .5pt;mso-border-top-alt:solid windowtext .5pt;
  mso-border-bottom-alt:solid windowtext .5pt;mso-border-right-alt:solid windowtext .5pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=a0><span style='font-size:10.5pt;font-family:宋体;mso-ascii-font-family:
  "Times New Roman";mso-hansi-font-family:"Times New Roman"'>元数据</span><span
  lang=EN-US style='font-size:10.5pt;font-family:"Times New Roman","serif"'><o:p></o:p></span></p>
  </td>
  <td width=237 valign=top style='width:142.05pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  mso-border-top-alt:solid windowtext .5pt;mso-border-left-alt:solid windowtext .5pt;
  mso-border-alt:solid windowtext .5pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=a0><span style='font-size:10.5pt;font-family:宋体;mso-ascii-font-family:
  "Times New Roman";mso-hansi-font-family:"Times New Roman"'>元数据</span><span
  lang=EN-US style='font-size:10.5pt;font-family:"Times New Roman","serif"'><o:p></o:p></span></p>
  </td>
  <td width=237 valign=top style='width:142.05pt;border:none;border-bottom:
  solid windowtext 1.0pt;mso-border-top-alt:solid windowtext .5pt;mso-border-left-alt:
  solid windowtext .5pt;mso-border-top-alt:solid windowtext .5pt;mso-border-left-alt:
  solid windowtext .5pt;mso-border-bottom-alt:solid windowtext .5pt;padding:
  0cm 5.4pt 0cm 5.4pt'>
  <p class=a0><span style='font-size:10.5pt;font-family:宋体;mso-ascii-font-family:
  "Times New Roman";mso-hansi-font-family:"Times New Roman"'>元数据</span><span
  lang=EN-US style='font-size:10.5pt;font-family:"Times New Roman","serif"'><o:p></o:p></span></p>
  </td>
 </tr>
 <tr style='mso-yfti-irow:2;mso-yfti-lastrow:yes'>
  <td width=237 valign=top style='width:142.0pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  mso-border-top-alt:solid windowtext .5pt;mso-border-top-alt:solid windowtext .5pt;
  mso-border-bottom-alt:solid windowtext .5pt;mso-border-right-alt:solid windowtext .5pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=a0><span lang=EN-US style='font-size:10.5pt;font-family:"Times New Roman","serif"'>Log<span
  style='mso-tab-count:1'> </span><o:p></o:p></span></p>
  </td>
  <td width=237 valign=top style='width:142.05pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  mso-border-top-alt:solid windowtext .5pt;mso-border-left-alt:solid windowtext .5pt;
  mso-border-alt:solid windowtext .5pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=a0><span lang=EN-US style='font-size:10.5pt;font-family:"Times New Roman","serif"'>machine<o:p></o:p></span></p>
  </td>
  <td width=237 valign=top style='width:142.05pt;border:none;border-bottom:
  solid windowtext 1.0pt;mso-border-top-alt:solid windowtext .5pt;mso-border-left-alt:
  solid windowtext .5pt;mso-border-top-alt:solid windowtext .5pt;mso-border-left-alt:
  solid windowtext .5pt;mso-border-bottom-alt:solid windowtext .5pt;padding:
  0cm 5.4pt 0cm 5.4pt'>
  <p class=a0><span style='font-size:10.5pt;font-family:宋体;mso-ascii-font-family:
  "Times New Roman";mso-hansi-font-family:"Times New Roman"'>电商数据</span><span
  lang=EN-US style='font-size:10.5pt;font-family:"Times New Roman","serif"'>/</span><span
  style='font-size:10.5pt;font-family:宋体;mso-ascii-font-family:"Times New Roman";
  mso-hansi-font-family:"Times New Roman"'>话单数据</span><span lang=EN-US
  style='font-size:10.5pt;font-family:"Times New Roman","serif"'><o:p></o:p></span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal align=center style='text-align:center;line-height:150%'><span
lang=EN-US><v:shape id="对象_x0020_28" o:spid="_x0000_i1046" type="#_x0000_t75"
 style='width:278.4pt;height:208.2pt;mso-position-horizontal-relative:page;
 mso-position-vertical-relative:page' o:ole="">
 <img src="Hadoop_02HDFS.files/image097.png" o:title=""/>
</v:shape><!--[if gte mso 9]><xml>
 <o:OLEObject Type="Embed" ProgID="Visio.Drawing.15" ShapeID="对象_x0020_28"
  DrawAspect="Content" ObjectID="_1629747805">
 </o:OLEObject>
</xml><![endif]--></span></p>

<p class=MsoNormal align=center style='text-align:center;line-height:150%'><span
style='font-size:9.0pt;mso-bidi-font-size:10.0pt;line-height:150%;font-family:
宋体;mso-ascii-font-family:Calibri;mso-hansi-font-family:Calibri;mso-bidi-font-family:
Calibri'>图</span><span lang=EN-US style='font-size:9.0pt;mso-bidi-font-size:
10.0pt;line-height:150%;font-family:"Calibri","sans-serif"'>3-25 </span><span
lang=EN-US style='font-size:9.0pt;line-height:150%;font-family:"Calibri","sans-serif"'><span
style='mso-spacerun:yes'> </span>HDFS Federation</span><span style='font-size:
9.0pt;line-height:150%;font-family:宋体;mso-ascii-font-family:Calibri;mso-hansi-font-family:
Calibri;mso-bidi-font-family:Calibri'>架构设计</span></p>

<p class=10 style='margin-top:6.2pt;text-indent:22.0pt'><span lang=EN-US>3.<span
style='mso-tab-count:1'>    </span>HDFS Federation</span><span
style='font-family:黑体;mso-ascii-font-family:Arial;mso-hansi-font-family:Arial'>应用思考</span></p>

<p class=MsoNormal style='margin-left:18.0pt;line-height:150%'><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>不同应用可以使用不同</span><span lang=EN-US>NameNode</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>进行数据管理</span></p>

<p class=MsoNormal style='margin-left:18.0pt;line-height:150%'><span
lang=EN-US><span style='mso-tab-count:2'>        </span></span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>图片业务、爬虫业务、日志审计业务</span></p>

<p class=MsoNormal style='margin-left:21.0pt;text-indent:21.0pt;line-height:
150%'><span lang=EN-US>Hadoop</span><span style='font-family:宋体;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>生态系统中，不同的框架使用不同的</span><span
lang=EN-US>NameNode</span><span style='font-family:宋体;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>进行管理</span><span
lang=EN-US>NameSpace</span><span style='font-family:宋体;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>。（隔离性）</span></p>

</div>

</body>

</html>
