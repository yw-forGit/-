<html xmlns:v="urn:schemas-microsoft-com:vml"
xmlns:o="urn:schemas-microsoft-com:office:office"
xmlns:w="urn:schemas-microsoft-com:office:word"
xmlns:dt="uuid:C2F41010-65B3-11d1-A29F-00AA00C14882"
xmlns:m="http://schemas.microsoft.com/office/2004/12/omml"
xmlns="http://www.w3.org/TR/REC-html40">

<head>
<meta http-equiv=Content-Type content="text/html; charset=utf-8">
<meta name=ProgId content=Word.Document>
<meta name=Generator content="Microsoft Word 15">
<meta name=Originator content="Microsoft Word 15">
<link rel=File-List href="Elasticsearch.files/filelist.xml">
<link rel=Edit-Time-Data href="Elasticsearch.files/editdata.mso">
<link rel=OLE-Object-Data href="Elasticsearch.files/oledata.mso">
<link rel=themeData href="Elasticsearch.files/themedata.thmx">
<link rel=colorSchemeMapping href="Elasticsearch.files/colorschememapping.xml">

<link href="./css/treemenu.css" rel="stylesheet" type="text/css">
<!-- GitHub Pages只认./js/xxx这种相对定位，不认js/xxx这种 -->
<script src="./js/jquery-3.4.1.min.js"></script>
<script src="./js/test.js"></script>
<script src="./js/treemenu.js"></script>
</head>

<body lang=ZH-CN link=blue vlink=purple style='tab-interval:21.0pt;text-justify-trim:
punctuation'>

<div class=WordSection1 style='layout-grid:15.6pt'>

<div id="noScroll" class="divcss5-right">
	<ul id="menuId" class="tree">
	</ul>
	<div style="font-size: 10px; color: #161FB0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
 （Ctrl+滚动鼠标可缩放页面）</div>
</div> 

<p class=MsoNormal align=center style='text-align:center;mso-line-height-alt:
11.0pt'><span lang=EN-US style='font-size:22.0pt'>Elasticsearch<o:p></o:p></span></p>

<p class=MsoNormal align=right style='text-align:right;mso-line-height-alt:
11.0pt'><span style='font-size:12.0pt;font-family:宋体;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>作者：尚硅谷大海哥</span><span
lang=EN-US style='font-size:12.0pt;mso-bidi-font-size:11.0pt'><o:p></o:p></span></p>

<p class=MsoNormal align=right style='text-align:right;mso-line-height-alt:
11.0pt'><span style='font-size:12.0pt;mso-bidi-font-size:11.0pt;font-family:
宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:"Times New Roman"'>整理：小邹</span><span
lang=EN-US style='font-size:12.0pt;mso-bidi-font-size:11.0pt'>[yw_forgit@163.com]</span><span
lang=EN-US style='font-size:12.0pt'><o:p></o:p></span></p>

<p class=MsoNormal align=center style='text-align:center;mso-line-height-alt:
11.0pt'><span lang=EN-US style='font-size:12.0pt'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal align=center style='text-align:center;mso-line-height-alt:
11.0pt'><span style='font-size:12.0pt;font-family:"微软雅黑","sans-serif";
mso-hansi-font-family:"Times New Roman";mso-bidi-font-family:微软雅黑;mso-font-kerning:
0pt'>版本：<span lang=EN-US>V1.0<o:p></o:p></span></span></p>

<h1 style='margin:0cm;margin-bottom:.0001pt'><span style='font-size:15.0pt;
line-height:240%;font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>一</span><span style='font-size:15.0pt;
line-height:240%'> </span><span style='font-size:15.0pt;line-height:240%;
font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>概述</span><span lang=EN-US style='font-size:15.0pt;
line-height:240%'><o:p></o:p></span></h1>

<h2 style='margin:0cm;margin-bottom:.0001pt'><span lang=EN-US style='font-size:
14.0pt;line-height:172%'>1.1 </span><span style='font-size:14.0pt;line-height:
172%;font-family:黑体;mso-ascii-font-family:Arial;mso-hansi-font-family:Arial'>什么是搜索？</span><span
lang=EN-US style='font-size:14.0pt;line-height:172%'><o:p></o:p></span></h2>

<p class=MsoNormal style='text-indent:21.0pt;line-height:150%'><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>百度：我们比如说想找寻任何的信息的时候，就会上百度去搜索一下，比如说找一部自己喜欢的电影，或者说找一本喜欢的书，或者找一条感兴趣的新闻（提到搜索的第一印象）。<span
style='color:red'>百度</span></span><span lang=EN-US style='color:red'> != </span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman";color:red'>搜索</span><span lang=EN-US style='color:red'><o:p></o:p></span></p>

<p class=MsoNormal style='text-indent:21.0pt;line-height:150%'><span
lang=EN-US>1</span><span style='font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>）互联网的搜索：电商网站，招聘网站，新闻网站，各种</span><span
lang=EN-US>app</span></p>

<p class=MsoNormal style='text-indent:21.0pt;line-height:150%'><span
lang=EN-US>2</span><span style='font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>）</span><span lang=EN-US>IT</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>系统的搜索：</span><span lang=EN-US>OA</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>软件，办公自动化软件，会议管理，日程管理，项目管理。</span></p>

<p class=MsoNormal style='text-indent:21.0pt;line-height:150%'><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>搜索，就是在任何场景下，找寻你想要的信息，这个时候，会输入一段你要搜索的关键字，然后就期望找到这个关键字相关的有些信息</span></p>

<h2 style='margin:0cm;margin-bottom:.0001pt'><span lang=EN-US style='font-size:
14.0pt;line-height:172%'>1.2 </span><span style='font-size:14.0pt;line-height:
172%;font-family:黑体;mso-ascii-font-family:Arial;mso-hansi-font-family:Arial'>如果用数据库做搜索会怎么样？</span><span
lang=EN-US style='font-size:14.0pt;line-height:172%'><o:p></o:p></span></h2>

<p class=MsoNormal style='line-height:150%'><span lang=EN-US><!--[if gte vml 1]><v:shapetype
 id="_x0000_t75" coordsize="21600,21600" o:spt="75" o:preferrelative="t"
 path="m@4@5l@4@11@9@11@9@5xe" filled="f" stroked="f">
 <v:stroke joinstyle="miter"/>
 <v:formulas>
  <v:f eqn="if lineDrawn pixelLineWidth 0"/>
  <v:f eqn="sum @0 1 0"/>
  <v:f eqn="sum 0 0 @1"/>
  <v:f eqn="prod @2 1 2"/>
  <v:f eqn="prod @3 21600 pixelWidth"/>
  <v:f eqn="prod @3 21600 pixelHeight"/>
  <v:f eqn="sum @0 0 1"/>
  <v:f eqn="prod @6 1 2"/>
  <v:f eqn="prod @7 21600 pixelWidth"/>
  <v:f eqn="sum @8 21600 0"/>
  <v:f eqn="prod @7 21600 pixelHeight"/>
  <v:f eqn="sum @10 21600 0"/>
 </v:formulas>
 <v:path o:extrusionok="f" gradientshapeok="t" o:connecttype="rect"/>
 <o:lock v:ext="edit" aspectratio="t"/>
</v:shapetype><v:shape id="_x0000_i1025" type="#_x0000_t75" style='width:528pt;
 height:296.4pt' o:ole="">
 <v:imagedata src="Elasticsearch.files/image001.emz" o:title=""/>
</v:shape><![endif]--><![if !vml]><img width=880 height=494
src="Elasticsearch.files/image002.png" v:shapes="_x0000_i1025"><![endif]><!--[if gte mso 9]><xml>
 <o:OLEObject Type="Embed" ProgID="PowerPoint.Show.12" ShapeID="_x0000_i1025"
  DrawAspect="Content" ObjectID="_1629746588">
 </o:OLEObject>
</xml><![endif]--></span></p>

<p class=MsoNormal style='text-indent:21.0pt;line-height:150%'><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>用数据库来实现搜索，是不太靠谱的。通常来说，性能会很差的。</span></p>

<h2 style='margin:0cm;margin-bottom:.0001pt'><span lang=EN-US style='font-size:
14.0pt;line-height:172%'>1.3 </span><span style='font-size:14.0pt;line-height:
172%;font-family:黑体;mso-ascii-font-family:Arial;mso-hansi-font-family:Arial'>什么是全文检索和</span><span
lang=EN-US style='font-size:14.0pt;line-height:172%'>Lucene</span><span
style='font-size:14.0pt;line-height:172%;font-family:黑体;mso-ascii-font-family:
Arial;mso-hansi-font-family:Arial'>？</span><span lang=EN-US style='font-size:
14.0pt;line-height:172%'><o:p></o:p></span></h2>

<p class=MsoNormal style='text-indent:21.0pt;line-height:150%'><span
lang=EN-US>1</span><span style='font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>）全文检索，倒排索引</span></p>

<p class=MsoNormal style='text-indent:21.0pt;line-height:150%'><span
lang=EN-US><a
href="https://baike.baidu.com/item/%E5%85%A8%E6%96%87%E6%A3%80%E7%B4%A2/8028630"
target="_blank"><span lang=EN-US style='font-family:宋体;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'><span lang=EN-US>全文检索</span></span></a></span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>是指计算机索引程序通过扫描文章中的每一个词，对每一个词建立一个索引，指明该词在文章中出现的次数和位置，当用户查询时，检索程序就根据事先建立的索引进行查找，并将查找的结果反馈给用户的检索方式。这个过程类似于通过字典中的检索字表查字的过程。全文搜索搜索引擎数据库中的数据。</span></p>

<p class=MsoNormal style='line-height:150%'><span lang=EN-US><!--[if gte vml 1]><v:shape
 id="_x0000_i1026" type="#_x0000_t75" style='width:529.8pt;height:297.6pt'
 o:ole="">
 <v:imagedata src="Elasticsearch.files/image003.emz" o:title=""/>
</v:shape><![endif]--><![if !vml]><img border=0 width=883 height=496
src="Elasticsearch.files/image004.png" v:shapes="_x0000_i1026"><![endif]><!--[if gte mso 9]><xml>
 <o:OLEObject Type="Embed" ProgID="PowerPoint.Show.12" ShapeID="_x0000_i1026"
  DrawAspect="Content" ObjectID="_1629746589">
 </o:OLEObject>
</xml><![endif]--></span></p>

<p class=MsoNormal style='line-height:150%'><span lang=EN-US style='mso-no-proof:
yes'><!--[if gte vml 1]><v:shape id="图片_x0020_1" o:spid="_x0000_i1027" type="#_x0000_t75"
 style='width:420.6pt;height:145.8pt;visibility:visible'>
 <v:imagedata src="Elasticsearch.files/image005.png" o:title=""/>
</v:shape><![endif]--><![if !vml]><img border=0 width=701 height=243
src="Elasticsearch.files/image005.png" v:shapes="图片_x0020_1"><![endif]><o:p></o:p></span></p>

<p class=MsoNormal style='line-height:150%'><span style='font-family:宋体;
mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:"Times New Roman";
mso-no-proof:yes'>之前</span><span lang=EN-US style='mso-no-proof:yes'>hadoop</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman";mso-no-proof:yes'>项目</span><span lang=EN-US style='mso-no-proof:
yes'><o:p></o:p></span></p>

<p class=MsoNormal style='line-height:150%'><span lang=EN-US style='mso-no-proof:
yes'><!--[if gte vml 1]><v:shape id="_x0000_i1028" type="#_x0000_t75" style='width:374.4pt;
 height:294pt;visibility:visible'>
 <v:imagedata src="Elasticsearch.files/image006.png" o:title=""/>
</v:shape><![endif]--><![if !vml]><img border=0 width=624 height=490
src="Elasticsearch.files/image006.png" v:shapes="_x0000_i1028"><![endif]></span></p>

<p class=MsoNormal style='text-indent:21.0pt;line-height:150%'><span
lang=EN-US>2</span><span style='font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>）</span><span lang=EN-US>lucene</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>，就是一个</span><span lang=EN-US>jar</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>包，里面包含了封装好的各种建立倒排索引，以及进行搜索的代码，包括各种算法。我们就用</span><span
lang=EN-US>java</span><span style='font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>开发的时候，引入</span><span lang=EN-US>lucene
jar</span><span style='font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>，然后基于</span><span lang=EN-US>lucene</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>的</span><span lang=EN-US>api</span><span style='font-family:
宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:"Times New Roman"'>进行去进行开发就可以了。</span></p>

<h2 style='margin:0cm;margin-bottom:.0001pt'><span lang=EN-US style='font-size:
14.0pt;line-height:172%'>1.4 </span><span style='font-size:14.0pt;line-height:
172%;font-family:黑体;mso-ascii-font-family:Arial;mso-hansi-font-family:Arial'>什么是</span><span
lang=EN-US style='font-size:14.0pt;line-height:172%'>Elasticsearch</span><span
style='font-size:14.0pt;line-height:172%;font-family:黑体;mso-ascii-font-family:
Arial;mso-hansi-font-family:Arial'>？</span><span lang=EN-US style='font-size:
14.0pt;line-height:172%'><o:p></o:p></span></h2>

<p class=MsoNormal style='text-indent:21.0pt;line-height:150%'><span
lang=EN-US style='mso-bidi-font-size:10.5pt;line-height:150%;font-family:宋体;
mso-bidi-font-family:微软雅黑;color:red;mso-font-kerning:0pt'>Elasticsearch</span><span
style='mso-bidi-font-size:10.5pt;line-height:150%;font-family:宋体;mso-bidi-font-family:
微软雅黑;color:red;mso-font-kerning:0pt'>，基于<span lang=EN-US>lucene</span></span><span
style='mso-bidi-font-size:10.5pt;line-height:150%;font-family:宋体;mso-bidi-font-family:
微软雅黑;mso-font-kerning:0pt'>，隐藏复杂性，提供简单易用的<span lang=EN-US>restful api</span>接口、<span
lang=EN-US>java api</span>接口（还有其他语言的<span lang=EN-US>api</span>接口）。<span
lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='text-indent:21.0pt;line-height:150%'><span
style='mso-bidi-font-size:10.5pt;line-height:150%;font-family:宋体;mso-bidi-font-family:
微软雅黑;mso-font-kerning:0pt'>关于<span lang=EN-US>elasticsearch</span>的一个传说，有一个程序员失业了，陪着自己老婆去英国伦敦学习厨师课程。程序员在失业期间想给老婆写一个菜谱搜索引擎，觉得<span
lang=EN-US>lucene</span>实在太复杂了，就开发了一个封装了<span lang=EN-US>lucene</span>的开源项目，叫<span
lang=EN-US>compass</span>。后来程序员找到了工作，是做分布式的高性能项目的，觉得<span lang=EN-US>compass</span>不够，就写了<span
lang=EN-US>elasticsearch</span>，让<span lang=EN-US>lucene</span>变成分布式的系统。<span
lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='text-indent:21.0pt;line-height:150%'><span
lang=EN-US style='mso-bidi-font-size:10.5pt;line-height:150%;font-family:宋体;
mso-bidi-font-family:微软雅黑;color:red;mso-font-kerning:0pt'>Elasticsearch</span><span
style='mso-bidi-font-size:10.5pt;line-height:150%;font-family:宋体;mso-bidi-font-family:
微软雅黑;color:red;mso-font-kerning:0pt'>是一个实时分布式搜索和分析引擎。它用于全文搜索、结构化搜索、分析。<span
lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='text-indent:21.0pt;line-height:150%'><span
style='mso-bidi-font-size:10.5pt;line-height:150%;font-family:宋体;mso-bidi-font-family:
微软雅黑;mso-font-kerning:0pt'>全文检索：将非结构化数据中的一部分信息提取出来<span lang=EN-US>,</span>重新组织<span
lang=EN-US>,</span>使其变得有一定结构<span lang=EN-US>,</span>然后对此有一定结构的数据进行搜索<span
lang=EN-US>,</span>从而达到搜索相对较快的目的。<span lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='text-indent:21.0pt;line-height:150%'><span
style='mso-bidi-font-size:10.5pt;line-height:150%;font-family:宋体;mso-bidi-font-family:
微软雅黑;mso-font-kerning:0pt'>结构化检索：我想搜索商品分类为日化用品的商品都有哪些，<span lang=EN-US>select *
from products where category_id='</span>日化用品<span lang=EN-US>'<o:p></o:p></span></span></p>

<p class=MsoNormal style='text-indent:21.0pt;line-height:150%'><span
style='mso-bidi-font-size:10.5pt;line-height:150%;font-family:宋体;mso-bidi-font-family:
微软雅黑;mso-font-kerning:0pt'>数据分析：电商网站，最近<span lang=EN-US>7</span>天牙膏这种商品销量排名前<span
lang=EN-US>10</span>的商家有哪些；新闻网站，最近<span lang=EN-US>1</span>个月访问量排名前<span
lang=EN-US>3</span>的新闻版块是哪些<span lang=EN-US><o:p></o:p></span></span></p>

<h2 style='margin:0cm;margin-bottom:.0001pt'><span lang=EN-US style='font-size:
14.0pt;line-height:172%'>1.5 Elasticsearch</span><span style='font-size:14.0pt;
line-height:172%;font-family:黑体;mso-ascii-font-family:Arial;mso-hansi-font-family:
Arial'>的适用场景</span><span lang=EN-US style='font-size:14.0pt;line-height:172%'><o:p></o:p></span></h2>

<p class=MsoNormal style='line-height:150%'><span lang=EN-US style='mso-bidi-font-size:
10.5pt;line-height:150%;font-family:宋体;mso-bidi-font-family:微软雅黑;mso-font-kerning:
0pt'>1</span><span style='mso-bidi-font-size:10.5pt;line-height:150%;
font-family:宋体;mso-bidi-font-family:微软雅黑;mso-font-kerning:0pt'>）维基百科，类似百度百科，牙膏，牙膏的维基百科，全文检索，高亮，搜索推荐。<span
lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='line-height:150%'><span lang=EN-US style='mso-bidi-font-size:
10.5pt;line-height:150%;font-family:宋体;mso-bidi-font-family:微软雅黑;mso-font-kerning:
0pt'>2</span><span style='mso-bidi-font-size:10.5pt;line-height:150%;
font-family:宋体;mso-bidi-font-family:微软雅黑;mso-font-kerning:0pt'>）<span
lang=EN-US>The Guardian</span>（国外新闻网站），类似搜狐新闻，用户行为日志（点击，浏览，收藏，评论）<span
lang=EN-US>+ </span>社交网络数据（对某某新闻的相关看法），数据分析，给到每篇新闻文章的作者，让他知道他的文章的公众反馈（好，坏，热门，垃圾，鄙视，崇拜）。<span
lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='line-height:150%'><span lang=EN-US style='mso-bidi-font-size:
10.5pt;line-height:150%;font-family:宋体;mso-bidi-font-family:微软雅黑;mso-font-kerning:
0pt'>3</span><span style='mso-bidi-font-size:10.5pt;line-height:150%;
font-family:宋体;mso-bidi-font-family:微软雅黑;mso-font-kerning:0pt'>）<span
lang=EN-US>Stack Overflow</span>（国外的程序异常讨论论坛），<span lang=EN-US>IT</span>问题，程序的报错，提交上去，有人会跟你讨论和回答，全文检索，搜索相关问题和答案，程序报错了，就会将报错信息粘贴到里面去，搜索有没有对应的答案<span
lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='line-height:150%'><span lang=EN-US style='mso-bidi-font-size:
10.5pt;line-height:150%;font-family:宋体;mso-bidi-font-family:微软雅黑;mso-font-kerning:
0pt'>4</span><span style='mso-bidi-font-size:10.5pt;line-height:150%;
font-family:宋体;mso-bidi-font-family:微软雅黑;mso-font-kerning:0pt'>）<span
lang=EN-US>GitHub</span>（开源代码管理），搜索上千亿行代码。<span lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='line-height:150%'><span lang=EN-US style='mso-bidi-font-size:
10.5pt;line-height:150%;font-family:宋体;mso-bidi-font-family:微软雅黑;mso-font-kerning:
0pt'>5</span><span style='mso-bidi-font-size:10.5pt;line-height:150%;
font-family:宋体;mso-bidi-font-family:微软雅黑;mso-font-kerning:0pt'>）国内：站内搜索（电商，招聘，门户，等等），<span
lang=EN-US>IT</span>系统搜索（<span lang=EN-US>OA</span>，<span lang=EN-US>CRM</span>，<span
lang=EN-US>ERP</span>，等等），数据分析（<span lang=EN-US>ES</span>热门的一个使用场景）。<span
lang=EN-US><o:p></o:p></span></span></p>

<h2 style='margin:0cm;margin-bottom:.0001pt'><span lang=EN-US style='font-size:
14.0pt;line-height:172%'>1.6 Elasticsearch</span><span style='font-size:14.0pt;
line-height:172%;font-family:黑体;mso-ascii-font-family:Arial;mso-hansi-font-family:
Arial'>的特点</span><span lang=EN-US style='font-size:14.0pt;line-height:172%'><o:p></o:p></span></h2>

<p class=MsoNormal style='line-height:150%'><span lang=EN-US style='mso-bidi-font-size:
10.5pt;line-height:150%;font-family:宋体;mso-bidi-font-family:微软雅黑;mso-font-kerning:
0pt'>1</span><span style='mso-bidi-font-size:10.5pt;line-height:150%;
font-family:宋体;mso-bidi-font-family:微软雅黑;mso-font-kerning:0pt'>）可以作为一个大型分布式集群（数百台服务器）技术，处理<span
lang=EN-US>PB</span>级数据，服务大公司；也可以运行在单机上，服务小公司<span lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='line-height:150%'><span lang=EN-US style='mso-bidi-font-size:
10.5pt;line-height:150%;font-family:宋体;mso-bidi-font-family:微软雅黑;mso-font-kerning:
0pt'>2</span><span style='mso-bidi-font-size:10.5pt;line-height:150%;
font-family:宋体;mso-bidi-font-family:微软雅黑;mso-font-kerning:0pt'>）<span
lang=EN-US>Elasticsearch</span>不是什么新技术，主要是将全文检索、数据分析以及分布式技术，合并在了一起，才形成了独一无二的<span
lang=EN-US>ES</span>；<span lang=EN-US>lucene</span>（全文检索），商用的数据分析软件（也是有的），分布式数据库（<span
lang=EN-US>mycat</span>）<span lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='line-height:150%'><span lang=EN-US style='mso-bidi-font-size:
10.5pt;line-height:150%;font-family:宋体;mso-bidi-font-family:微软雅黑;mso-font-kerning:
0pt'>3</span><span style='mso-bidi-font-size:10.5pt;line-height:150%;
font-family:宋体;mso-bidi-font-family:微软雅黑;mso-font-kerning:0pt'>）对用户而言，是开箱即用的，非常简单，作为中小型的应用，直接<span
lang=EN-US>3</span>分钟部署一下<span lang=EN-US>ES</span>，就可以作为生产环境的系统来使用了，数据量不大，操作不是太复杂<span
lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='line-height:150%'><span lang=EN-US style='mso-bidi-font-size:
10.5pt;line-height:150%;font-family:宋体;mso-bidi-font-family:微软雅黑;mso-font-kerning:
0pt'>4</span><span style='mso-bidi-font-size:10.5pt;line-height:150%;
font-family:宋体;mso-bidi-font-family:微软雅黑;mso-font-kerning:0pt'>）数据库的功能面对很多领域是不够用的（事务，还有各种联机事务型的操作）；特殊的功能，比如全文检索，同义词处理，相关度排名，复杂数据分析，海量数据的近实时处理；<span
lang=EN-US>Elasticsearch</span>作为传统数据库的一个补充，提供了数据库所不能提供的很多功能<span lang=EN-US><o:p></o:p></span></span></p>

<h2 style='margin:0cm;margin-bottom:.0001pt'><span lang=EN-US style='font-size:
14.0pt;line-height:172%'>1.7 Elasticsearch</span><span style='font-size:14.0pt;
line-height:172%;font-family:黑体;mso-ascii-font-family:Arial;mso-hansi-font-family:
Arial'>的核心概念</span><span lang=EN-US style='font-size:14.0pt;line-height:172%'><o:p></o:p></span></h2>

<h3 style='margin:0cm;margin-bottom:.0001pt'><span lang=EN-US style='font-size:
12.0pt;line-height:172%'>1.7.1 </span><span style='font-size:12.0pt;line-height:
172%;font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>近实时</span><span lang=EN-US style='font-size:12.0pt;
line-height:172%'><o:p></o:p></span></h3>

<p class=MsoNormal style='text-indent:21.0pt;line-height:150%'><span
style='mso-bidi-font-size:10.5pt;line-height:150%;font-family:宋体;mso-bidi-font-family:
微软雅黑;mso-font-kerning:0pt'>近实时，两个意思，从写入数据到数据可以被搜索到有一个小延迟（大概<span lang=EN-US>1</span>秒）；基于<span
lang=EN-US>es</span>执行搜索和分析可以达到秒级。<span lang=EN-US><o:p></o:p></span></span></p>

<h3 style='margin:0cm;margin-bottom:.0001pt'><span lang=EN-US style='font-size:
12.0pt;line-height:172%'>1.7.2 Cluster</span><span style='font-size:12.0pt;
line-height:172%;font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>（集群）</span><span lang=EN-US
style='font-size:12.0pt;line-height:172%'><o:p></o:p></span></h3>

<p class=MsoNormal style='text-indent:21.0pt;line-height:150%'><span
style='mso-bidi-font-size:10.5pt;line-height:150%;font-family:宋体;mso-bidi-font-family:
微软雅黑;mso-font-kerning:0pt'>集群包含多个节点，每个节点属于哪个集群是通过一个配置（集群名称，默认是<span lang=EN-US>elasticsearch</span>）来决定的，对于中小型应用来说，刚开始一个集群就一个节点很正常<span
lang=EN-US><o:p></o:p></span></span></p>

<h3 style='margin:0cm;margin-bottom:.0001pt'><span lang=EN-US style='font-size:
12.0pt;line-height:172%'>1.7.3 Node</span><span style='font-size:12.0pt;
line-height:172%;font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>（节点）</span><span lang=EN-US
style='font-size:12.0pt;line-height:172%'><o:p></o:p></span></h3>

<p class=MsoNormal style='text-indent:21.0pt;line-height:150%'><span
style='mso-bidi-font-size:10.5pt;line-height:150%;font-family:宋体;mso-bidi-font-family:
微软雅黑;mso-font-kerning:0pt'>集群中的一个节点，节点也有一个名称（默认是随机分配的），节点名称很重要（在执行运维管理操作的时候），默认节点会去加入一个名称为“<span
lang=EN-US>elasticsearch</span>”的集群，如果直接启动一堆节点，那么它们会自动组成一个<span lang=EN-US>elasticsearch</span>集群，当然一个节点也可以组成一个<span
lang=EN-US>elasticsearch</span>集群。<span lang=EN-US><o:p></o:p></span></span></p>

<h3 style='margin:0cm;margin-bottom:.0001pt'><span lang=EN-US style='font-size:
12.0pt;line-height:172%'>1.7.4 Index</span><span style='font-size:12.0pt;
line-height:172%;font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>（索引</span><span lang=EN-US
style='font-size:12.0pt;line-height:172%'>-</span><span style='font-size:12.0pt;
line-height:172%;font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>数据库）</span><span lang=EN-US
style='font-size:12.0pt;line-height:172%'><o:p></o:p></span></h3>

<p class=MsoNormal><span style='font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>索引相当于数据库。</span></p>

<p class=MsoNormal style='text-indent:21.0pt;line-height:150%'><span
style='mso-bidi-font-size:10.5pt;line-height:150%;font-family:宋体;mso-bidi-font-family:
微软雅黑;mso-font-kerning:0pt'>索引包含一堆有相似结构的文档数据，比如可以有一个客户索引，商品分类索引，订单索引，索引有一个名称。一个<span
lang=EN-US>index</span>包含很多<span lang=EN-US>document</span>，一个<span lang=EN-US>index</span>就代表了一类类似的或者相同的<span
lang=EN-US>document</span>。比如说建立一个<span lang=EN-US>product index</span>，商品索引，里面可能就存放了所有的商品数据，所有的商品<span
lang=EN-US>document</span>。<span lang=EN-US><o:p></o:p></span></span></p>

<h3 style='margin:0cm;margin-bottom:.0001pt'><span lang=EN-US style='font-size:
12.0pt;line-height:172%'>1.7.5 Type</span><span style='font-size:12.0pt;
line-height:172%;font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>（类型</span><span lang=EN-US
style='font-size:12.0pt;line-height:172%'>-</span><span style='font-size:12.0pt;
line-height:172%;font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>表）</span><span lang=EN-US
style='font-size:12.0pt;line-height:172%'><o:p></o:p></span></h3>

<p class=MsoNormal><span style='font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>类型相当于表，后面以此类推。</span></p>

<p class=MsoNormal style='text-indent:21.0pt;line-height:150%'><span
style='mso-bidi-font-size:10.5pt;line-height:150%;font-family:宋体;mso-bidi-font-family:
微软雅黑;mso-font-kerning:0pt'>每个索引里都可以有一个或多个<span lang=EN-US>type</span>，<span
lang=EN-US>type</span>是<span lang=EN-US>index</span>中的一个逻辑数据分类，一个<span
lang=EN-US>type</span>下的<span lang=EN-US>document</span>，都有相同的<span lang=EN-US>field</span>（列），比如博客系统，有一个索引，可以定义用户数据<span
lang=EN-US>type</span>，博客数据<span lang=EN-US>type</span>，评论数据<span lang=EN-US>type</span>。<span
lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='text-indent:21.0pt;line-height:150%'><span
style='mso-bidi-font-size:10.5pt;line-height:150%;font-family:宋体;mso-bidi-font-family:
微软雅黑;mso-font-kerning:0pt'>商品<span lang=EN-US>index</span>，里面存放了所有的商品数据，商品<span
lang=EN-US>document<o:p></o:p></span></span></p>

<p class=MsoNormal style='text-indent:21.0pt;line-height:150%'><span
style='mso-bidi-font-size:10.5pt;line-height:150%;font-family:宋体;mso-bidi-font-family:
微软雅黑;mso-font-kerning:0pt'>但是商品分很多种类，每个种类的<span lang=EN-US>document</span>的<span
lang=EN-US>field</span>可能不太一样，比如说电器商品，可能还包含一些诸如售后时间范围这样的特殊<span lang=EN-US>field</span>；生鲜商品，还包含一些诸如生鲜保质期之类的特殊<span
lang=EN-US>field<o:p></o:p></span></span></p>

<p class=MsoNormal style='text-indent:21.0pt;line-height:150%'><span
lang=EN-US style='mso-bidi-font-size:10.5pt;line-height:150%;font-family:宋体;
mso-bidi-font-family:微软雅黑;mso-font-kerning:0pt'>type</span><span
style='mso-bidi-font-size:10.5pt;line-height:150%;font-family:宋体;mso-bidi-font-family:
微软雅黑;mso-font-kerning:0pt'>，日化商品<span lang=EN-US>type</span>，电器商品<span
lang=EN-US>type</span>，生鲜商品<span lang=EN-US>type<o:p></o:p></span></span></p>

<p class=MsoNormal style='text-indent:21.0pt;line-height:150%'><span
style='mso-bidi-font-size:10.5pt;line-height:150%;font-family:宋体;mso-bidi-font-family:
微软雅黑;mso-font-kerning:0pt'>日化商品<span lang=EN-US>type</span>：<span lang=EN-US>product_id</span>，<span
lang=EN-US>product_name</span>，<span lang=EN-US>product_desc</span>，<span
lang=EN-US>category_id</span>，<span lang=EN-US>category_name<o:p></o:p></span></span></p>

<p class=MsoNormal style='text-indent:21.0pt;line-height:150%'><span
style='mso-bidi-font-size:10.5pt;line-height:150%;font-family:宋体;mso-bidi-font-family:
微软雅黑;mso-font-kerning:0pt'>电器商品<span lang=EN-US>type</span>：<span lang=EN-US>product_id</span>，<span
lang=EN-US>product_name</span>，<span lang=EN-US>product_desc</span>，<span
lang=EN-US>category_id</span>，<span lang=EN-US>category_name</span>，<span
lang=EN-US>service_period<o:p></o:p></span></span></p>

<p class=MsoNormal style='text-indent:21.0pt;line-height:150%'><span
style='mso-bidi-font-size:10.5pt;line-height:150%;font-family:宋体;mso-bidi-font-family:
微软雅黑;mso-font-kerning:0pt'>生鲜商品<span lang=EN-US>type</span>：<span lang=EN-US>product_id</span>，<span
lang=EN-US>product_name</span>，<span lang=EN-US>product_desc</span>，<span
lang=EN-US>category_id</span>，<span lang=EN-US>category_name</span>，<span
lang=EN-US>eat_period<o:p></o:p></span></span></p>

<p class=MsoNormal style='text-indent:21.0pt;line-height:150%'><span
lang=EN-US style='mso-bidi-font-size:10.5pt;line-height:150%;font-family:宋体;
mso-bidi-font-family:微软雅黑;mso-font-kerning:0pt'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='text-indent:21.0pt;line-height:150%'><span
style='mso-bidi-font-size:10.5pt;line-height:150%;font-family:宋体;mso-bidi-font-family:
微软雅黑;mso-font-kerning:0pt'>每一个<span lang=EN-US>type</span>里面，都会包含一堆<span
lang=EN-US>document<o:p></o:p></span></span></p>

<table class=MsoNormalTable border=1 cellspacing=0 cellpadding=0
 style='margin-left:5.4pt;border-collapse:collapse;border:none;mso-border-alt:
 solid windowtext .5pt;mso-yfti-tbllook:1184;mso-padding-alt:0cm 5.4pt 0cm 5.4pt;
 mso-border-insideh:.5pt solid windowtext;mso-border-insidev:.5pt solid windowtext'>
 <tr style='mso-yfti-irow:0;mso-yfti-firstrow:yes;mso-yfti-lastrow:yes'>
  <td width=685 valign=top style='width:411.1pt;border:solid windowtext 1.0pt;
  mso-border-alt:solid windowtext .5pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal style='text-indent:21.0pt;line-height:150%'><span
  lang=EN-US style='mso-bidi-font-size:10.5pt;line-height:150%;font-family:
  宋体;mso-bidi-font-family:微软雅黑;mso-font-kerning:0pt'>{<o:p></o:p></span></p>
  <p class=MsoNormal style='text-indent:21.0pt;line-height:150%'><span
  lang=EN-US style='mso-bidi-font-size:10.5pt;line-height:150%;font-family:
  宋体;mso-bidi-font-family:微软雅黑;mso-font-kerning:0pt'><span
  style='mso-spacerun:yes'>  </span>&quot;product_id&quot;: &quot;1&quot;,<o:p></o:p></span></p>
  <p class=MsoNormal style='text-indent:21.0pt;line-height:150%'><span
  lang=EN-US style='mso-bidi-font-size:10.5pt;line-height:150%;font-family:
  宋体;mso-bidi-font-family:微软雅黑;mso-font-kerning:0pt'><span
  style='mso-spacerun:yes'>  </span>&quot;product_name&quot;: &quot;</span><span
  style='mso-bidi-font-size:10.5pt;line-height:150%;font-family:宋体;mso-bidi-font-family:
  微软雅黑;mso-font-kerning:0pt'>长虹电视机<span lang=EN-US>&quot;,<o:p></o:p></span></span></p>
  <p class=MsoNormal style='text-indent:21.0pt;line-height:150%'><span
  lang=EN-US style='mso-bidi-font-size:10.5pt;line-height:150%;font-family:
  宋体;mso-bidi-font-family:微软雅黑;mso-font-kerning:0pt'><span
  style='mso-spacerun:yes'>  </span>&quot;product_desc&quot;: &quot;4k</span><span
  style='mso-bidi-font-size:10.5pt;line-height:150%;font-family:宋体;mso-bidi-font-family:
  微软雅黑;mso-font-kerning:0pt'>高清<span lang=EN-US>&quot;,<o:p></o:p></span></span></p>
  <p class=MsoNormal style='text-indent:21.0pt;line-height:150%'><span
  lang=EN-US style='mso-bidi-font-size:10.5pt;line-height:150%;font-family:
  宋体;mso-bidi-font-family:微软雅黑;mso-font-kerning:0pt'><span
  style='mso-spacerun:yes'>  </span>&quot;category_id&quot;: &quot;3&quot;,<o:p></o:p></span></p>
  <p class=MsoNormal style='text-indent:21.0pt;line-height:150%'><span
  lang=EN-US style='mso-bidi-font-size:10.5pt;line-height:150%;font-family:
  宋体;mso-bidi-font-family:微软雅黑;mso-font-kerning:0pt'><span
  style='mso-spacerun:yes'>  </span>&quot;category_name&quot;: &quot;</span><span
  style='mso-bidi-font-size:10.5pt;line-height:150%;font-family:宋体;mso-bidi-font-family:
  微软雅黑;mso-font-kerning:0pt'>电器<span lang=EN-US>&quot;,<o:p></o:p></span></span></p>
  <p class=MsoNormal style='text-indent:21.0pt;line-height:150%'><span
  lang=EN-US style='mso-bidi-font-size:10.5pt;line-height:150%;font-family:
  宋体;mso-bidi-font-family:微软雅黑;mso-font-kerning:0pt'><span
  style='mso-spacerun:yes'> </span><span
  style='mso-spacerun:yes'> </span>&quot;service_period&quot;: &quot;1</span><span
  style='mso-bidi-font-size:10.5pt;line-height:150%;font-family:宋体;mso-bidi-font-family:
  微软雅黑;mso-font-kerning:0pt'>年<span lang=EN-US>&quot;<o:p></o:p></span></span></p>
  <p class=MsoNormal style='text-indent:21.0pt;line-height:150%'><span
  lang=EN-US style='mso-bidi-font-size:10.5pt;line-height:150%;font-family:
  宋体;mso-bidi-font-family:微软雅黑;mso-font-kerning:0pt'>}<o:p></o:p></span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='text-indent:21.0pt;line-height:150%'><span
lang=EN-US style='mso-bidi-font-size:10.5pt;line-height:150%;font-family:宋体;
mso-bidi-font-family:微软雅黑;mso-font-kerning:0pt'><o:p>&nbsp;</o:p></span></p>

<table class=MsoNormalTable border=1 cellspacing=0 cellpadding=0
 style='margin-left:5.4pt;border-collapse:collapse;border:none;mso-border-alt:
 solid windowtext .5pt;mso-yfti-tbllook:1184;mso-padding-alt:0cm 5.4pt 0cm 5.4pt;
 mso-border-insideh:.5pt solid windowtext;mso-border-insidev:.5pt solid windowtext'>
 <tr style='mso-yfti-irow:0;mso-yfti-firstrow:yes;mso-yfti-lastrow:yes'>
  <td width=685 valign=top style='width:411.1pt;border:solid windowtext 1.0pt;
  mso-border-alt:solid windowtext .5pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal style='text-indent:21.0pt;line-height:150%'><span
  lang=EN-US style='mso-bidi-font-size:10.5pt;line-height:150%;font-family:
  宋体;mso-bidi-font-family:微软雅黑;mso-font-kerning:0pt'>{<o:p></o:p></span></p>
  <p class=MsoNormal style='text-indent:21.0pt;line-height:150%'><span
  lang=EN-US style='mso-bidi-font-size:10.5pt;line-height:150%;font-family:
  宋体;mso-bidi-font-family:微软雅黑;mso-font-kerning:0pt'><span
  style='mso-spacerun:yes'>  </span>&quot;product_id&quot;: &quot;2&quot;,<o:p></o:p></span></p>
  <p class=MsoNormal style='text-indent:21.0pt;line-height:150%'><span
  lang=EN-US style='mso-bidi-font-size:10.5pt;line-height:150%;font-family:
  宋体;mso-bidi-font-family:微软雅黑;mso-font-kerning:0pt'><span
  style='mso-spacerun:yes'>  </span>&quot;product_name&quot;: &quot;</span><span
  style='mso-bidi-font-size:10.5pt;line-height:150%;font-family:宋体;mso-bidi-font-family:
  微软雅黑;mso-font-kerning:0pt'>基围虾<span lang=EN-US>&quot;,<o:p></o:p></span></span></p>
  <p class=MsoNormal style='text-indent:21.0pt;line-height:150%'><span
  lang=EN-US style='mso-bidi-font-size:10.5pt;line-height:150%;font-family:
  宋体;mso-bidi-font-family:微软雅黑;mso-font-kerning:0pt'><span
  style='mso-spacerun:yes'>  </span>&quot;product_desc&quot;: &quot;</span><span
  style='mso-bidi-font-size:10.5pt;line-height:150%;font-family:宋体;mso-bidi-font-family:
  微软雅黑;mso-font-kerning:0pt'>纯天然，冰岛产<span lang=EN-US>&quot;,<o:p></o:p></span></span></p>
  <p class=MsoNormal style='text-indent:21.0pt;line-height:150%'><span
  lang=EN-US style='mso-bidi-font-size:10.5pt;line-height:150%;font-family:
  宋体;mso-bidi-font-family:微软雅黑;mso-font-kerning:0pt'><span
  style='mso-spacerun:yes'>  </span>&quot;category_id&quot;: &quot;4&quot;,<o:p></o:p></span></p>
  <p class=MsoNormal style='text-indent:21.0pt;line-height:150%'><span
  lang=EN-US style='mso-bidi-font-size:10.5pt;line-height:150%;font-family:
  宋体;mso-bidi-font-family:微软雅黑;mso-font-kerning:0pt'><span
  style='mso-spacerun:yes'>  </span>&quot;category_name&quot;: &quot;</span><span
  style='mso-bidi-font-size:10.5pt;line-height:150%;font-family:宋体;mso-bidi-font-family:
  微软雅黑;mso-font-kerning:0pt'>生鲜<span lang=EN-US>&quot;,<o:p></o:p></span></span></p>
  <p class=MsoNormal style='text-indent:21.0pt;line-height:150%'><span
  lang=EN-US style='mso-bidi-font-size:10.5pt;line-height:150%;font-family:
  宋体;mso-bidi-font-family:微软雅黑;mso-font-kerning:0pt'><span
  style='mso-spacerun:yes'>  </span>&quot;eat_period&quot;: &quot;7</span><span
  style='mso-bidi-font-size:10.5pt;line-height:150%;font-family:宋体;mso-bidi-font-family:
  微软雅黑;mso-font-kerning:0pt'>天<span lang=EN-US>&quot;<o:p></o:p></span></span></p>
  <p class=MsoNormal style='text-indent:21.0pt;line-height:150%'><span
  lang=EN-US style='mso-bidi-font-size:10.5pt;line-height:150%;font-family:
  宋体;mso-bidi-font-family:微软雅黑;mso-font-kerning:0pt'>}<o:p></o:p></span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<h3 style='margin:0cm;margin-bottom:.0001pt'><span lang=EN-US style='font-size:
12.0pt;line-height:172%'>1.7.6 Document</span><span style='font-size:12.0pt;
line-height:172%;font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>（文档</span><span lang=EN-US
style='font-size:12.0pt;line-height:172%'>-</span><span style='font-size:12.0pt;
line-height:172%;font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>行）</span><span lang=EN-US
style='font-size:12.0pt;line-height:172%'><o:p></o:p></span></h3>

<p class=MsoNormal style='text-indent:21.0pt;line-height:150%'><span
style='mso-bidi-font-size:10.5pt;line-height:150%;font-family:宋体;mso-bidi-font-family:
微软雅黑;mso-font-kerning:0pt'>文档是<span lang=EN-US>es</span>中的最小数据单元，一个<span
lang=EN-US>document</span>可以是一条客户数据，一条商品分类数据，一条订单数据，通常用<span lang=EN-US>JSON</span>数据结构表示，每个<span
lang=EN-US>index</span>下的<span lang=EN-US>type</span>中，都可以去存储多个<span
lang=EN-US>document</span>。<span lang=EN-US><o:p></o:p></span></span></p>

<h3 style='margin:0cm;margin-bottom:.0001pt'><span lang=EN-US style='font-size:
12.0pt;line-height:172%'>1.7.7 Field</span><span style='font-size:12.0pt;
line-height:172%;font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>（字段</span><span lang=EN-US
style='font-size:12.0pt;line-height:172%'>-</span><span style='font-size:12.0pt;
line-height:172%;font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>列）</span><span lang=EN-US
style='font-size:12.0pt;line-height:172%'><o:p></o:p></span></h3>

<p class=MsoNormal style='text-indent:21.0pt;line-height:150%'><span
lang=EN-US style='mso-bidi-font-size:10.5pt;line-height:150%;font-family:宋体;
mso-bidi-font-family:微软雅黑;mso-font-kerning:0pt'>Field</span><span
style='mso-bidi-font-size:10.5pt;line-height:150%;font-family:宋体;mso-bidi-font-family:
微软雅黑;mso-font-kerning:0pt'>是<span lang=EN-US>Elasticsearch</span>的最小单位。一个<span
lang=EN-US>document</span>里面有多个<span lang=EN-US>field</span>，每个<span
lang=EN-US>field</span>就是一个数据字段。<span lang=EN-US><o:p></o:p></span></span></p>

<table class=MsoNormalTable border=1 cellspacing=0 cellpadding=0
 style='margin-left:5.4pt;border-collapse:collapse;border:none;mso-border-alt:
 solid windowtext .5pt;mso-yfti-tbllook:1184;mso-padding-alt:0cm 5.4pt 0cm 5.4pt;
 mso-border-insideh:.5pt solid windowtext;mso-border-insidev:.5pt solid windowtext'>
 <tr style='mso-yfti-irow:0;mso-yfti-firstrow:yes;mso-yfti-lastrow:yes'>
  <td width=685 valign=top style='width:411.1pt;border:solid windowtext 1.0pt;
  mso-border-alt:solid windowtext .5pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal style='text-indent:21.0pt;line-height:150%'><span
  lang=EN-US style='mso-bidi-font-size:10.5pt;line-height:150%;font-family:
  宋体;mso-bidi-font-family:微软雅黑;mso-font-kerning:0pt'>product document<o:p></o:p></span></p>
  <p class=MsoNormal style='text-indent:21.0pt;line-height:150%'><span
  lang=EN-US style='mso-bidi-font-size:10.5pt;line-height:150%;font-family:
  宋体;mso-bidi-font-family:微软雅黑;mso-font-kerning:0pt'>{<o:p></o:p></span></p>
  <p class=MsoNormal style='text-indent:21.0pt;line-height:150%'><span
  lang=EN-US style='mso-bidi-font-size:10.5pt;line-height:150%;font-family:
  宋体;mso-bidi-font-family:微软雅黑;mso-font-kerning:0pt'><span
  style='mso-spacerun:yes'>  </span>&quot;product_id&quot;: &quot;1&quot;,<o:p></o:p></span></p>
  <p class=MsoNormal style='text-indent:21.0pt;line-height:150%'><span
  lang=EN-US style='mso-bidi-font-size:10.5pt;line-height:150%;font-family:
  宋体;mso-bidi-font-family:微软雅黑;mso-font-kerning:0pt'><span
  style='mso-spacerun:yes'>  </span>&quot;product_name&quot;: &quot;</span><span
  style='mso-bidi-font-size:10.5pt;line-height:150%;font-family:宋体;mso-bidi-font-family:
  微软雅黑;mso-font-kerning:0pt'>高露洁牙膏<span lang=EN-US>&quot;,<o:p></o:p></span></span></p>
  <p class=MsoNormal style='text-indent:21.0pt;line-height:150%'><span
  lang=EN-US style='mso-bidi-font-size:10.5pt;line-height:150%;font-family:
  宋体;mso-bidi-font-family:微软雅黑;mso-font-kerning:0pt'><span
  style='mso-spacerun:yes'>  </span>&quot;product_desc&quot;: &quot;</span><span
  style='mso-bidi-font-size:10.5pt;line-height:150%;font-family:宋体;mso-bidi-font-family:
  微软雅黑;mso-font-kerning:0pt'>高效美白<span lang=EN-US>&quot;,<o:p></o:p></span></span></p>
  <p class=MsoNormal style='text-indent:21.0pt;line-height:150%'><span
  lang=EN-US style='mso-bidi-font-size:10.5pt;line-height:150%;font-family:
  宋体;mso-bidi-font-family:微软雅黑;mso-font-kerning:0pt'><span
  style='mso-spacerun:yes'>  </span>&quot;category_id&quot;: &quot;2&quot;,<o:p></o:p></span></p>
  <p class=MsoNormal style='text-indent:21.0pt;line-height:150%'><span
  lang=EN-US style='mso-bidi-font-size:10.5pt;line-height:150%;font-family:
  宋体;mso-bidi-font-family:微软雅黑;mso-font-kerning:0pt'><span
  style='mso-spacerun:yes'>  </span>&quot;category_name&quot;: &quot;</span><span
  style='mso-bidi-font-size:10.5pt;line-height:150%;font-family:宋体;mso-bidi-font-family:
  微软雅黑;mso-font-kerning:0pt'>日化用品<span lang=EN-US>&quot;<o:p></o:p></span></span></p>
  <p class=MsoNormal style='text-indent:21.0pt;line-height:150%'><span
  lang=EN-US style='mso-bidi-font-size:10.5pt;line-height:150%;font-family:
  宋体;mso-bidi-font-family:微软雅黑;mso-font-kerning:0pt'>}<o:p></o:p></span></p>
  </td>
 </tr>
</table>

<h3 style='margin:0cm;margin-bottom:.0001pt'><span lang=EN-US style='font-size:
12.0pt;line-height:172%'>1.7.8 mapping</span><span style='font-size:12.0pt;
line-height:172%;font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>（映射</span><span lang=EN-US
style='font-size:12.0pt;line-height:172%'>-</span><span style='font-size:12.0pt;
line-height:172%;font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>约束）</span><span lang=EN-US
style='font-size:12.0pt;line-height:172%'><o:p></o:p></span></h3>

<p class=MsoNormal style='text-indent:21.0pt;line-height:150%'><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>数据如何存放到索引对象上，需要有一个映射配置，包括：数据类型、是否存储、是否分词等。</span></p>

<p class=MsoNormal style='text-indent:21.0pt;line-height:150%'><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>这样就创建了一个名为</span><span lang=EN-US>blog</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>的</span><span lang=EN-US>Index</span><span style='font-family:
宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:"Times New Roman"'>。</span><span
lang=EN-US>Type</span><span style='font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>不用单独创建，在创建</span><span lang=EN-US>Mapping
</span><span style='font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>时指定就可以。</span><span lang=EN-US>Mapping</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>用来定义</span><span lang=EN-US>Document</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>中每个字段的类型，即所使用的</span><span lang=EN-US> analyzer</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>、是否索引等属性，非常关键等。创建</span><span lang=EN-US>Mapping </span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>的代码示例如下：</span></p>

<table class=MsoNormalTable border=1 cellspacing=0 cellpadding=0
 style='margin-left:5.4pt;border-collapse:collapse;border:none;mso-border-alt:
 solid windowtext .5pt;mso-yfti-tbllook:1184;mso-padding-alt:0cm 5.4pt 0cm 5.4pt;
 mso-border-insideh:.5pt solid windowtext;mso-border-insidev:.5pt solid windowtext'>
 <tr style='mso-yfti-irow:0;mso-yfti-firstrow:yes;mso-yfti-lastrow:yes'>
  <td width=685 valign=top style='width:411.1pt;border:solid windowtext 1.0pt;
  mso-border-alt:solid windowtext .5pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US>client.indices.putMapping({</span></p>
  <p class=MsoNormal><span lang=EN-US>&nbsp;&nbsp;&nbsp;&nbsp;index : 'blog',</span></p>
  <p class=MsoNormal><span lang=EN-US>&nbsp;&nbsp;&nbsp;&nbsp;type : 'article',</span></p>
  <p class=MsoNormal><span lang=EN-US>&nbsp;&nbsp;&nbsp;&nbsp;body : {</span></p>
  <p class=MsoNormal><span lang=EN-US>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;article:
  {</span></p>
  <p class=MsoNormal><span lang=EN-US>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;properties:
  {</span></p>
  <p class=MsoNormal><span lang=EN-US>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;id:
  {</span></p>
  <p class=MsoNormal><span lang=EN-US>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;type:
  'string',</span></p>
  <p class=MsoNormal><span lang=EN-US>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;analyzer:
  'ik',<span style='mso-spacerun:yes'>  </span></span><span style='font-family:
  宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:"Times New Roman"'>（分析器）</span></p>
  <p class=MsoNormal><span lang=EN-US>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;store:
  'yes',<span style='mso-spacerun:yes'>    </span></span><span
  style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
  "Times New Roman"'>（是否存储）</span></p>
  <p class=MsoNormal><span lang=EN-US>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;},</span></p>
  <p class=MsoNormal><span lang=EN-US>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;title:
  {</span></p>
  <p class=MsoNormal><span lang=EN-US>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;type:
  'string',</span></p>
  <p class=MsoNormal><span lang=EN-US>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;analyzer:
  'ik',</span></p>
  <p class=MsoNormal><span lang=EN-US>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;store:
  'no',</span></p>
  <p class=MsoNormal><span lang=EN-US>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;},</span></p>
  <p class=MsoNormal><span lang=EN-US>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;content:
  {</span></p>
  <p class=MsoNormal><span lang=EN-US>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;type:
  'string',</span></p>
  <p class=MsoNormal><span lang=EN-US>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;analyzer:
  'ik',</span></p>
  <p class=MsoNormal><span lang=EN-US>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;store:
  'yes',</span></p>
  <p class=MsoNormal><span lang=EN-US>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span></p>
  <p class=MsoNormal><span lang=EN-US>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span></p>
  <p class=MsoNormal><span lang=EN-US>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span></p>
  <p class=MsoNormal><span lang=EN-US>&nbsp;&nbsp;&nbsp;&nbsp;}</span></p>
  <p class=MsoNormal><span lang=EN-US>});</span></p>
  </td>
 </tr>
</table>

<h3 style='margin:0cm;margin-bottom:.0001pt'><span lang=EN-US style='font-size:
12.0pt;line-height:172%'>1.7.9 elasticsearch</span><span style='font-size:12.0pt;
line-height:172%;font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>与数据库的类比</span><span lang=EN-US
style='font-size:12.0pt;line-height:172%'><o:p></o:p></span></h3>

<table class=MsoNormalTable border=1 cellspacing=0 cellpadding=0
 style='margin-left:5.4pt;border-collapse:collapse;border:none;mso-border-alt:
 solid windowtext .5pt;mso-yfti-tbllook:1184;mso-padding-alt:0cm 5.4pt 0cm 5.4pt;
 mso-border-insideh:.5pt solid windowtext;mso-border-insidev:.5pt solid windowtext'>
 <tr style='mso-yfti-irow:0;mso-yfti-firstrow:yes'>
  <td width=331 valign=top style='width:7.0cm;border:solid windowtext 1.0pt;
  mso-border-alt:solid windowtext .5pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal style='line-height:150%'><span style='mso-bidi-font-size:
  10.5pt;line-height:150%;font-family:宋体;mso-bidi-font-family:微软雅黑;mso-font-kerning:
  0pt'>关系型数据库（比如<span lang=EN-US>Mysql</span>）<span lang=EN-US><o:p></o:p></span></span></p>
  </td>
  <td width=354 valign=top style='width:212.65pt;border:solid windowtext 1.0pt;
  border-left:none;mso-border-left-alt:solid windowtext .5pt;mso-border-alt:
  solid windowtext .5pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal style='line-height:150%'><span style='mso-bidi-font-size:
  10.5pt;line-height:150%;font-family:宋体;mso-bidi-font-family:微软雅黑;mso-font-kerning:
  0pt'>非关系型数据库（<span lang=EN-US>Elasticsearch</span>）<span lang=EN-US><o:p></o:p></span></span></p>
  </td>
 </tr>
 <tr style='mso-yfti-irow:1'>
  <td width=331 valign=top style='width:7.0cm;border:solid windowtext 1.0pt;
  border-top:none;mso-border-top-alt:solid windowtext .5pt;mso-border-alt:solid windowtext .5pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal style='line-height:150%'><span style='mso-bidi-font-size:
  10.5pt;line-height:150%;font-family:宋体;mso-bidi-font-family:微软雅黑;mso-font-kerning:
  0pt'>数据库<span lang=EN-US>Database<o:p></o:p></span></span></p>
  </td>
  <td width=354 valign=top style='width:212.65pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  mso-border-top-alt:solid windowtext .5pt;mso-border-left-alt:solid windowtext .5pt;
  mso-border-alt:solid windowtext .5pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal style='line-height:150%'><span style='mso-bidi-font-size:
  10.5pt;line-height:150%;font-family:宋体;mso-bidi-font-family:微软雅黑;mso-font-kerning:
  0pt'>索引<span lang=EN-US>Index<o:p></o:p></span></span></p>
  </td>
 </tr>
 <tr style='mso-yfti-irow:2'>
  <td width=331 valign=top style='width:7.0cm;border:solid windowtext 1.0pt;
  border-top:none;mso-border-top-alt:solid windowtext .5pt;mso-border-alt:solid windowtext .5pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal style='line-height:150%'><span style='mso-bidi-font-size:
  10.5pt;line-height:150%;font-family:宋体;mso-bidi-font-family:微软雅黑;mso-font-kerning:
  0pt'>表<span lang=EN-US>Table<o:p></o:p></span></span></p>
  </td>
  <td width=354 valign=top style='width:212.65pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  mso-border-top-alt:solid windowtext .5pt;mso-border-left-alt:solid windowtext .5pt;
  mso-border-alt:solid windowtext .5pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal style='line-height:150%'><span style='mso-bidi-font-size:
  10.5pt;line-height:150%;font-family:宋体;mso-bidi-font-family:微软雅黑;mso-font-kerning:
  0pt'>类型<span lang=EN-US>Type<o:p></o:p></span></span></p>
  </td>
 </tr>
 <tr style='mso-yfti-irow:3'>
  <td width=331 valign=top style='width:7.0cm;border:solid windowtext 1.0pt;
  border-top:none;mso-border-top-alt:solid windowtext .5pt;mso-border-alt:solid windowtext .5pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal style='line-height:150%'><span style='mso-bidi-font-size:
  10.5pt;line-height:150%;font-family:宋体;mso-bidi-font-family:微软雅黑;mso-font-kerning:
  0pt'>数据行<span lang=EN-US>Row<o:p></o:p></span></span></p>
  </td>
  <td width=354 valign=top style='width:212.65pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  mso-border-top-alt:solid windowtext .5pt;mso-border-left-alt:solid windowtext .5pt;
  mso-border-alt:solid windowtext .5pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal style='line-height:150%'><span style='mso-bidi-font-size:
  10.5pt;line-height:150%;font-family:宋体;mso-bidi-font-family:微软雅黑;mso-font-kerning:
  0pt'>文档<span lang=EN-US>Document<o:p></o:p></span></span></p>
  </td>
 </tr>
 <tr style='mso-yfti-irow:4'>
  <td width=331 valign=top style='width:7.0cm;border:solid windowtext 1.0pt;
  border-top:none;mso-border-top-alt:solid windowtext .5pt;mso-border-alt:solid windowtext .5pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal style='line-height:150%'><span style='mso-bidi-font-size:
  10.5pt;line-height:150%;font-family:宋体;mso-bidi-font-family:微软雅黑;mso-font-kerning:
  0pt'>数据列<span lang=EN-US>Column<o:p></o:p></span></span></p>
  </td>
  <td width=354 valign=top style='width:212.65pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  mso-border-top-alt:solid windowtext .5pt;mso-border-left-alt:solid windowtext .5pt;
  mso-border-alt:solid windowtext .5pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal style='line-height:150%'><span style='mso-bidi-font-size:
  10.5pt;line-height:150%;font-family:宋体;mso-bidi-font-family:微软雅黑;mso-font-kerning:
  0pt'>字段<span lang=EN-US>Field<o:p></o:p></span></span></p>
  </td>
 </tr>
 <tr style='mso-yfti-irow:5;mso-yfti-lastrow:yes'>
  <td width=331 valign=top style='width:7.0cm;border:solid windowtext 1.0pt;
  border-top:none;mso-border-top-alt:solid windowtext .5pt;mso-border-alt:solid windowtext .5pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal style='line-height:150%'><span style='mso-bidi-font-size:
  10.5pt;line-height:150%;font-family:宋体;mso-bidi-font-family:微软雅黑;mso-font-kerning:
  0pt'>约束 <span lang=EN-US>Schema<o:p></o:p></span></span></p>
  </td>
  <td width=354 valign=top style='width:212.65pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  mso-border-top-alt:solid windowtext .5pt;mso-border-left-alt:solid windowtext .5pt;
  mso-border-alt:solid windowtext .5pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal style='line-height:150%'><span style='mso-bidi-font-size:
  10.5pt;line-height:150%;font-family:宋体;mso-bidi-font-family:微软雅黑;mso-font-kerning:
  0pt'>映射<span lang=EN-US>Mapping<o:p></o:p></span></span></p>
  </td>
 </tr>
</table>

<h3 style='margin:0cm;margin-bottom:.0001pt'><span lang=EN-US style='font-size:
12.0pt;line-height:172%'>1.7.10 ES</span><span style='font-size:12.0pt;
line-height:172%;font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>存入数据和搜索数据机制</span><span lang=EN-US
style='font-size:12.0pt;line-height:172%'><o:p></o:p></span></h3>

<p class=MsoNormal style='line-height:150%'><span lang=EN-US style='mso-no-proof:
yes'><!--[if gte vml 1]><v:shape id="_x0000_i1029" type="#_x0000_t75" style='width:552.6pt;
 height:310.8pt' o:ole="">
 <v:imagedata src="Elasticsearch.files/image008.emz" o:title=""/>
</v:shape><![endif]--><![if !vml]><img border=0 width=921 height=518
src="Elasticsearch.files/image009.png" v:shapes="_x0000_i1029"><![endif]><!--[if gte mso 9]><xml>
 <o:OLEObject Type="Embed" ProgID="PowerPoint.Show.12" ShapeID="_x0000_i1029"
  DrawAspect="Content" ObjectID="_1629746590">
 </o:OLEObject>
</xml><![endif]--><o:p></o:p></span></p>

<p class=MsoNormal style='line-height:150%'><span lang=EN-US style='mso-no-proof:
yes'>1</span><span style='font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman";mso-no-proof:yes'>）索引对象（</span><span
lang=EN-US style='mso-no-proof:yes'>blog</span><span style='font-family:宋体;
mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:"Times New Roman";
mso-no-proof:yes'>）：存储数据的表结构</span><span style='mso-no-proof:yes'> </span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman";mso-no-proof:yes'>，任何搜索数据，存放在索引对象上</span><span
style='mso-no-proof:yes'> </span><span style='font-family:宋体;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman";mso-no-proof:yes'>。</span><span
lang=EN-US style='mso-no-proof:yes'><o:p></o:p></span></p>

<p class=MsoNormal style='line-height:150%'><span lang=EN-US style='mso-no-proof:
yes'>2</span><span style='font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman";mso-no-proof:yes'>）映射（</span><span
lang=EN-US style='mso-no-proof:yes'>mapping</span><span style='font-family:
宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:"Times New Roman";
mso-no-proof:yes'>）：数据如何存放到索引对象上，需要有一个映射配置，</span><span style='mso-no-proof:
yes'> </span><span style='font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman";mso-no-proof:yes'>包括：数据类型、是否存储、是否分词等。</span><span
lang=EN-US style='mso-no-proof:yes'><o:p></o:p></span></p>

<p class=MsoNormal style='line-height:150%'><span lang=EN-US style='mso-no-proof:
yes'>3</span><span style='font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman";mso-no-proof:yes'>）文档（</span><span
lang=EN-US style='mso-no-proof:yes'>document</span><span style='font-family:
宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:"Times New Roman";
mso-no-proof:yes'>）：一条数据记录，存在索引对象上</span><span style='mso-no-proof:yes'> <span
lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='line-height:150%'><span lang=EN-US style='mso-no-proof:
yes'>4</span><span style='font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman";mso-no-proof:yes'>）文档类型（</span><span
lang=EN-US style='mso-no-proof:yes'>type</span><span style='font-family:宋体;
mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:"Times New Roman";
mso-no-proof:yes'>）：一个索引对象，存放多种类型数据，数据用文档类型进行标识</span><span lang=EN-US
style='mso-no-proof:yes'><span style='mso-spacerun:yes'>  </span><o:p></o:p></span></p>

<h1 style='margin:0cm;margin-bottom:.0001pt'><span style='font-size:15.0pt;
line-height:240%;font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>二</span><span style='font-size:15.0pt;
line-height:240%'> </span><span style='font-size:15.0pt;line-height:240%;
font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>快速入门</span><span lang=EN-US style='font-size:15.0pt;
line-height:240%'><o:p></o:p></span></h1>

<p class=MsoNormal><span lang=EN-US>Java</span><span style='font-family:宋体;
mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:"Times New Roman"'>必须是</span><span
lang=EN-US>1.8</span><span style='font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>以上</span></p>

<h2 style='margin:0cm;margin-bottom:.0001pt'><span lang=EN-US style='font-size:
14.0pt;line-height:172%'>2.1 </span><span style='font-size:14.0pt;line-height:
172%;font-family:黑体;mso-ascii-font-family:Arial;mso-hansi-font-family:Arial'>安装包下载</span><span
lang=EN-US style='font-size:14.0pt;line-height:172%'><o:p></o:p></span></h2>

<p class=MsoNormal style='line-height:120%'><span lang=EN-US>1</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>）</span><span lang=EN-US>Elasticsearch</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>官网：</span> <span lang=EN-US><a
href="https://www.elastic.co/products/elasticsearch">https://www.elastic.co/products/elasticsearch</a>
</span></p>

<p class=MsoNormal style='line-height:150%'><span lang=EN-US style='mso-no-proof:
yes'><!--[if gte vml 1]><v:shape id="_x0000_i1030" type="#_x0000_t75" style='width:415.2pt;
 height:177pt;visibility:visible'>
 <v:imagedata src="Elasticsearch.files/image010.png" o:title=""/>
</v:shape><![endif]--><![if !vml]><img border=0 width=692 height=295
src="Elasticsearch.files/image010.png" v:shapes="_x0000_i1030"><![endif]><o:p></o:p></span></p>

<p class=MsoNormal style='line-height:150%'><span lang=EN-US style='mso-no-proof:
yes'><!--[if gte vml 1]><v:shape id="_x0000_i1031" type="#_x0000_t75" style='width:415.2pt;
 height:258.6pt;visibility:visible'>
 <v:imagedata src="Elasticsearch.files/image012.png" o:title=""/>
</v:shape><![endif]--><![if !vml]><img border=0 width=692 height=431
src="Elasticsearch.files/image012.png" v:shapes="_x0000_i1031"><![endif]><o:p></o:p></span></p>

<p class=MsoNormal style='line-height:150%'><span lang=EN-US style='mso-no-proof:
yes'><o:p>&nbsp;</o:p></span></p>

<h2 style='margin:0cm;margin-bottom:.0001pt'><span lang=EN-US style='font-size:
14.0pt;line-height:172%'>2.2 </span><span style='font-size:14.0pt;line-height:
172%;font-family:黑体;mso-ascii-font-family:Arial;mso-hansi-font-family:Arial'>安装</span><span
lang=EN-US style='font-size:14.0pt;line-height:172%'>Elasticsearch</span><span
style='font-size:14.0pt;line-height:172%;font-family:黑体;mso-ascii-font-family:
Arial;mso-hansi-font-family:Arial'>（单节点</span><span lang=EN-US
style='font-size:14.0pt;line-height:172%'>Linux</span><span style='font-size:
14.0pt;line-height:172%;font-family:黑体;mso-ascii-font-family:Arial;mso-hansi-font-family:
Arial'>环境）</span><span lang=EN-US style='font-size:14.0pt;line-height:172%'><o:p></o:p></span></h2>

<p class=MsoNormal style='line-height:150%'><span lang=EN-US>1</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>）解压</span><span lang=EN-US>elasticsearch-5.2.2.tar.gz</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>到</span><span lang=EN-US>/opt/module</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>目录下</span></p>

<p class=MsoNormal style='text-indent:21.0pt;line-height:150%'><span
lang=EN-US style='color:#7030A0'>[atguigu@hadoop102 software]$ tar -zxvf
elasticsearch-5.2.2.tar.gz -C /opt/module/<o:p></o:p></span></p>

<p class=MsoNormal style='line-height:150%'><span lang=EN-US style='color:black'>2</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman";color:black'>）在</span><span lang=EN-US style='color:black'>/opt/module/elasticsearch-5.2.2</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman";color:black'>路径下创建</span><span lang=EN-US style='color:black'>data</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman";color:black'>和</span><span lang=EN-US style='color:black'>logs</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman";color:black'>文件夹</span><span lang=EN-US style='color:black'><o:p></o:p></span></p>

<p class=MsoNormal style='text-indent:21.0pt;line-height:150%'><span
lang=EN-US style='color:#7030A0'>[atguigu@hadoop102 elasticsearch-5.2.2]$ mkdir
data<o:p></o:p></span></p>

<p class=MsoNormal style='text-indent:21.0pt;line-height:150%'><span
lang=EN-US style='color:#7030A0'>[atguigu@hadoop102 elasticsearch-5.2.2]$ mkdir
logs<o:p></o:p></span></p>

<p class=MsoNormal style='line-height:150%'><span lang=EN-US>3</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>）修改配置文件</span><span lang=EN-US>/opt/module/elasticsearch-5.2.2/config/elasticsearch.yml</span></p>

<p class=MsoNormal style='margin-left:21.0pt;mso-para-margin-left:2.0gd;
line-height:150%'><span lang=EN-US style='color:#7030A0'>[atguigu@hadoop102
config]$ pwd<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:21.0pt;mso-para-margin-left:2.0gd;
line-height:150%'><span lang=EN-US style='color:#7030A0'>/opt/module/elasticsearch-5.2.2/config<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:21.0pt;mso-para-margin-left:2.0gd;
line-height:150%'><span lang=EN-US style='color:#7030A0'>[atguigu@hadoop102
config]$ vi elasticsearch.yml<o:p></o:p></span></p>

<table class=MsoNormalTable border=1 cellspacing=0 cellpadding=0
 style='margin-left:21.0pt;border-collapse:collapse;border:none;mso-border-alt:
 solid windowtext .5pt;mso-yfti-tbllook:1184;mso-padding-alt:0cm 5.4pt 0cm 5.4pt;
 mso-border-insideh:.5pt solid windowtext;mso-border-insidev:.5pt solid windowtext'>
 <tr style='mso-yfti-irow:0;mso-yfti-firstrow:yes;mso-yfti-lastrow:yes'>
  <td width=659 valign=top style='width:395.5pt;border:solid windowtext 1.0pt;
  mso-border-alt:solid windowtext .5pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US># ----------------------------------
  Cluster -----------------------------------</span></p>
  <p class=MsoNormal><span lang=EN-US># </span><span style='font-family:宋体;
  mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:"Times New Roman"'>后面启动集群的时候就能根据名称自动关联集群（后面用</span><span
  lang=EN-US>API</span><span style='font-family:宋体;mso-ascii-font-family:"Times New Roman";
  mso-hansi-font-family:"Times New Roman"'>操作也是根据名称）</span></p>
  <p class=MsoNormal><span lang=EN-US style='color:red'>cluster.name:
  my-application<o:p></o:p></span></p>
  <p class=MsoNormal><span lang=EN-US># ------------------------------------
  Node ------------------------------------</span></p>
  <p class=MsoNormal><span lang=EN-US># </span><span style='font-family:宋体;
  mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:"Times New Roman"'>节点的名称</span></p>
  <p class=MsoNormal><span lang=EN-US style='color:red'>node.name: node-102<o:p></o:p></span></p>
  <p class=MsoNormal><span lang=EN-US># -----------------------------------
  Paths ------------------------------------</span></p>
  <p class=MsoNormal><span lang=EN-US># path</span><span style='font-family:
  宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:"Times New Roman"'>词前面不能有空格，</span><span
  lang=EN-US>:</span><span style='font-family:宋体;mso-ascii-font-family:"Times New Roman";
  mso-hansi-font-family:"Times New Roman"'>后面必须有空格</span></p>
  <p class=MsoNormal><span lang=EN-US style='color:red'>path.data:
  /opt/module/elasticsearch-5.2.2/data<o:p></o:p></span></p>
  <p class=MsoNormal><span lang=EN-US style='color:red'>path.logs:
  /opt/module/elasticsearch-5.2.2/logs<o:p></o:p></span></p>
  <p class=MsoNormal><span lang=EN-US># -----------------------------------
  Memory -----------------------------------</span></p>
  <p class=MsoNormal><span lang=EN-US># </span><span style='font-family:宋体;
  mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:"Times New Roman"'>要设置</span><span
  lang=EN-US>false</span><span style='font-family:宋体;mso-ascii-font-family:
  "Times New Roman";mso-hansi-font-family:"Times New Roman"'>，否则后面会报错</span></p>
  <p class=MsoNormal><span lang=EN-US style='color:red'>bootstrap.memory_lock:
  false<o:p></o:p></span></p>
  <p class=MsoNormal><span lang=EN-US style='color:red'>bootstrap.system_call_filter:
  false<o:p></o:p></span></p>
  <p class=MsoNormal><span lang=EN-US># ----------------------------------
  Network -----------------------------------</span></p>
  <p class=MsoNormal><span lang=EN-US># </span><span style='font-family:宋体;
  mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:"Times New Roman"'>主机的</span><span
  lang=EN-US>id</span><span style='font-family:宋体;mso-ascii-font-family:"Times New Roman";
  mso-hansi-font-family:"Times New Roman"'>地址</span></p>
  <p class=MsoNormal><span lang=EN-US style='color:red'>network.host:
  192.168.1.102 <o:p></o:p></span></p>
  <p class=MsoNormal><span lang=EN-US># ---------------------------------
  Discovery ----------------------------------</span></p>
  <p class=MsoNormal><span lang=EN-US># </span><span style='font-family:宋体;
  mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:"Times New Roman"'>让别人能访问，默认是</span><span
  lang=EN-US>localhost</span><span style='font-family:宋体;mso-ascii-font-family:
  "Times New Roman";mso-hansi-font-family:"Times New Roman"'>；集群就设置多个，逗号隔开；</span><span
  lang=EN-US>:</span><span style='font-family:宋体;mso-ascii-font-family:"Times New Roman";
  mso-hansi-font-family:"Times New Roman"'>后面有空格</span></p>
  <p class=MsoNormal><span lang=EN-US style='color:red'>discovery.zen.ping.unicast.hosts:
  [&quot;hadoop102&quot;]<o:p></o:p></span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='line-height:150%'><span lang=EN-US><span
style='mso-tab-count:1'>       </span></span><span style='font-family:宋体;
mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:"Times New Roman"'>（</span><span
lang=EN-US>1</span><span style='font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>）</span><span lang=EN-US>cluster.name</span></p>

<p class=MsoNormal style='text-indent:21.0pt;line-height:150%'><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>如果要配置集群需要两个节点上的</span><span lang=EN-US>elasticsearch</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>配置的</span><span lang=EN-US>cluster.name</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>相同，都启动可以自动组成集群，这里如果不改</span><span lang=EN-US>cluster.name</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>则默认是</span><span lang=EN-US>cluster.name=my-application</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>，</span></p>

<p class=MsoNormal style='text-indent:21.0pt;line-height:150%'><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>（</span><span lang=EN-US>2</span><span style='font-family:
宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:"Times New Roman"'>）</span><span
lang=EN-US>nodename</span><span style='font-family:宋体;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>随意取但是集群内的各节点不能相同</span></p>

<p class=MsoNormal style='text-indent:21.0pt;line-height:150%'><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman";color:red'>（</span><span lang=EN-US style='color:red'>3</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman";color:red'>）修改后的每行前面不能有空格，修改后的“：”后面必须有一个空格</span><span
lang=EN-US style='color:red'><o:p></o:p></span></p>

<p class=MsoNormal style='line-height:150%'><span lang=EN-US>5</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>）配置</span><span lang=EN-US>linux</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>系统环境（参考：</span><span lang=EN-US><a
href="http://blog.csdn.net/satiling/article/details/59697916">http://blog.csdn.net/satiling/article/details/59697916</a>
</span><span style='font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>）</span></p>

<p class=MsoNormal style='line-height:150%'><span lang=EN-US><span
style='mso-tab-count:1'>       </span></span><span style='font-family:宋体;
mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:"Times New Roman"'>（</span><span
lang=EN-US>1</span><span style='font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>）切换到</span><span lang=EN-US>root</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>用户，编辑</span><span lang=EN-US>limits.conf </span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>添加类似如下内容</span></p>

<p class=MsoNormal style='margin-left:52.5pt;mso-para-margin-left:5.0gd;
line-height:150%'><span lang=EN-US style='color:#7030A0'>[root@hadoop102
elasticsearch-5.2.2]# vi /etc/security/limits.conf<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:52.5pt;mso-para-margin-left:5.0gd;
line-height:150%'><span style='font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>添加如下内容</span><span lang=EN-US>:</span></p>

<p class=MsoNormal style='margin-left:52.5pt;mso-para-margin-left:5.0gd;
line-height:150%'><span lang=EN-US>* soft nofile 65536</span></p>

<p class=MsoNormal style='margin-left:52.5pt;mso-para-margin-left:5.0gd;
line-height:150%'><span lang=EN-US>* hard nofile 131072</span></p>

<p class=MsoNormal style='margin-left:52.5pt;mso-para-margin-left:5.0gd;
line-height:150%'><span lang=EN-US>* soft nproc 2048</span></p>

<p class=MsoNormal style='margin-left:52.5pt;mso-para-margin-left:5.0gd;
line-height:150%'><span lang=EN-US>* hard nproc 4096</span></p>

<p class=MsoNormal style='margin-left:52.5pt;mso-para-margin-left:5.0gd;
line-height:150%'><span lang=EN-US style='mso-no-proof:yes'><!--[if gte vml 1]><v:shape
 id="_x0000_i1032" type="#_x0000_t75" style='width:348.6pt;height:204pt;
 visibility:visible'>
 <v:imagedata src="Elasticsearch.files/image014.png" o:title=""/>
</v:shape><![endif]--><![if !vml]><img border=0 width=581 height=340
src="Elasticsearch.files/image014.png" v:shapes="_x0000_i1032"><![endif]></span></p>

<p class=MsoNormal style='line-height:150%'><span lang=EN-US><span
style='mso-tab-count:1'>       </span></span><span style='font-family:宋体;
mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:"Times New Roman"'>（</span><span
lang=EN-US>2</span><span style='font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>）切换到</span><span lang=EN-US>root</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>用户，进入</span><span lang=EN-US>limits.d</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>目录下修改配置文件。</span></p>

<p class=MsoNormal style='margin-left:52.5pt;mso-para-margin-left:5.0gd;
line-height:150%'><span lang=EN-US style='color:#7030A0'>[root@hadoop102
elasticsearch-5.2.2]# vi /etc/security/limits.d/90-nproc.conf<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:52.5pt;mso-para-margin-left:5.0gd;
line-height:150%'><span style='font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>修改如下内容：</span></p>

<p class=MsoNormal style='margin-left:52.5pt;mso-para-margin-left:5.0gd;
line-height:150%'><span lang=EN-US>* soft nproc 1024</span></p>

<p class=MsoNormal style='margin-left:52.5pt;mso-para-margin-left:5.0gd;
line-height:150%'><span lang=EN-US>#</span><span style='font-family:宋体;
mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:"Times New Roman"'>修改为</span></p>

<p class=MsoNormal style='margin-left:52.5pt;mso-para-margin-left:5.0gd;
line-height:150%'><span lang=EN-US>* soft nproc <span style='color:red'>2048<o:p></o:p></span></span></p>

<p class=MsoNormal style='margin-left:52.5pt;mso-para-margin-left:5.0gd;
line-height:150%'><span lang=EN-US style='mso-no-proof:yes'><!--[if gte vml 1]><v:shape
 id="_x0000_i1033" type="#_x0000_t75" style='width:384.6pt;height:163.8pt;
 visibility:visible'>
 <v:imagedata src="Elasticsearch.files/image016.png" o:title=""/>
</v:shape><![endif]--><![if !vml]><img border=0 width=641 height=273
src="Elasticsearch.files/image016.png" v:shapes="_x0000_i1033"><![endif]></span></p>

<p class=MsoNormal style='line-height:150%'><span lang=EN-US><span
style='mso-tab-count:1'>       </span></span><span style='font-family:宋体;
mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:"Times New Roman"'>（</span><span
lang=EN-US>3</span><span style='font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>）切换到</span><span lang=EN-US>root</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>用户修改配置</span><span lang=EN-US>sysctl.conf</span></p>

<p class=MsoNormal style='margin-left:63.0pt;mso-para-margin-left:6.0gd;
line-height:150%'><span lang=EN-US style='color:#7030A0'>[root@hadoop102
elasticsearch-5.2.2]# vi /etc/sysctl.conf&nbsp;<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:63.0pt;mso-para-margin-left:6.0gd;
line-height:150%'><span style='font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>添加下面配置：</span></p>

<p class=MsoNormal style='margin-left:63.0pt;mso-para-margin-left:6.0gd;
line-height:150%'><span lang=EN-US>vm.max_map_count=655360</span></p>

<p class=MsoNormal style='margin-left:63.0pt;mso-para-margin-left:6.0gd;
line-height:150%'><span style='font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>并执行命令：</span></p>

<p class=MsoNormal style='margin-left:63.0pt;mso-para-margin-left:6.0gd;
line-height:150%'><span lang=EN-US style='color:#7030A0'>[root@hadoop102
elasticsearch-5.2.2]# sysctl -p<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:63.0pt;mso-para-margin-left:6.0gd;
line-height:150%'><span style='font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>然后，重新启动</span><span lang=EN-US>elasticsearch</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>，即可启动成功。</span></p>

<p class=MsoNormal style='margin-left:63.0pt;mso-para-margin-left:6.0gd;
line-height:150%'><span lang=EN-US style='mso-no-proof:yes'><!--[if gte vml 1]><v:shape
 id="_x0000_i1034" type="#_x0000_t75" style='width:438pt;height:183pt;
 visibility:visible'>
 <v:imagedata src="Elasticsearch.files/image017.png" o:title=""/>
</v:shape><![endif]--><![if !vml]><img border=0 width=730 height=305
src="Elasticsearch.files/image017.png" v:shapes="_x0000_i1034"><![endif]></span></p>

<p class=MsoNormal style='line-height:150%'><span lang=EN-US style='color:black'>6</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman";color:black'>）启动集群</span><span lang=EN-US style='color:black'><o:p></o:p></span></p>

<p class=MsoNormal style='line-height:150%'><span style='font-family:宋体;
mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:"Times New Roman";
color:black'>不能用</span><span lang=EN-US style='color:black'>root</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman";color:black'>用户启动</span><span lang=EN-US style='color:black'><o:p></o:p></span></p>

<p class=MsoNormal style='line-height:150%'><span lang=EN-US style='mso-no-proof:
yes'><!--[if gte vml 1]><v:shape id="_x0000_i1035" type="#_x0000_t75" style='width:567pt;
 height:23.4pt;visibility:visible'>
 <v:imagedata src="Elasticsearch.files/image018.png" o:title=""/>
</v:shape><![endif]--><![if !vml]><img border=0 width=945 height=39
src="Elasticsearch.files/image018.png" v:shapes="_x0000_i1035"><![endif]></span><span
lang=EN-US style='color:black'><o:p></o:p></span></p>

<p class=MsoNormal style='text-indent:21.0pt;line-height:150%'><span
lang=EN-US style='color:#7030A0'>[atguigu@hadoop102 elasticsearch-5.2.2]$
bin/elasticsearch <o:p></o:p></span></p>

<p class=MsoNormal style='line-height:150%'><span lang=EN-US style='color:black'>7</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman";color:black'>）测试集群</span><span lang=EN-US style='color:black'><o:p></o:p></span></p>

<table class=MsoNormalTable border=1 cellspacing=0 cellpadding=0
 style='margin-left:26.7pt;border-collapse:collapse;border:none;mso-border-alt:
 solid windowtext .5pt;mso-yfti-tbllook:1184;mso-padding-alt:0cm 5.4pt 0cm 5.4pt;
 mso-border-insideh:.5pt solid windowtext;mso-border-insidev:.5pt solid windowtext'>
 <tr style='mso-yfti-irow:0;mso-yfti-firstrow:yes;mso-yfti-lastrow:yes'>
  <td width=650 valign=top style='width:389.8pt;border:solid windowtext 1.0pt;
  mso-border-alt:solid windowtext .5pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal style='line-height:150%'><span lang=EN-US
  style='color:#7030A0'>[atguigu@hadoop102 elasticsearch-5.2.2]$ curl http://hadoop102:9200<o:p></o:p></span></p>
  <p class=MsoNormal><span lang=EN-US style='color:black'>{<o:p></o:p></span></p>
  <p class=MsoNormal><span lang=EN-US style='color:black'><span
  style='mso-spacerun:yes'>  </span>&quot;name&quot; : &quot;node-102&quot;,<o:p></o:p></span></p>
  <p class=MsoNormal><span lang=EN-US style='color:black'><span
  style='mso-spacerun:yes'>  </span>&quot;cluster_name&quot; :
  &quot;my-application&quot;,<o:p></o:p></span></p>
  <p class=MsoNormal><span lang=EN-US style='color:black'><span
  style='mso-spacerun:yes'>  </span>&quot;cluster_uuid&quot; :
  &quot;v-nwhc7ITsmVHECpNQYzHw&quot;,<o:p></o:p></span></p>
  <p class=MsoNormal><span lang=EN-US style='color:black'><span
  style='mso-spacerun:yes'>  </span>&quot;version&quot; : {<o:p></o:p></span></p>
  <p class=MsoNormal><span lang=EN-US style='color:black'><span
  style='mso-spacerun:yes'>    </span>&quot;number&quot; : &quot;5.2.2&quot;,<o:p></o:p></span></p>
  <p class=MsoNormal><span lang=EN-US style='color:black'><span
  style='mso-spacerun:yes'>    </span>&quot;build_hash&quot; :
  &quot;57e20f3&quot;,<o:p></o:p></span></p>
  <p class=MsoNormal><span lang=EN-US style='color:black'><span
  style='mso-spacerun:yes'>    </span>&quot;build_date&quot; :
  &quot;2017-09-23T13:16:45.703Z&quot;,<o:p></o:p></span></p>
  <p class=MsoNormal><span lang=EN-US style='color:black'><span
  style='mso-spacerun:yes'>    </span>&quot;build_snapshot&quot; : false,<o:p></o:p></span></p>
  <p class=MsoNormal><span lang=EN-US style='color:black'><span
  style='mso-spacerun:yes'>    </span>&quot;lucene_version&quot; :
  &quot;6.6.1&quot;<o:p></o:p></span></p>
  <p class=MsoNormal><span lang=EN-US style='color:black'><span
  style='mso-spacerun:yes'>  </span>},<o:p></o:p></span></p>
  <p class=MsoNormal><span lang=EN-US style='color:black'><span
  style='mso-spacerun:yes'>  </span>&quot;tagline&quot; : &quot;You Know, for
  Search&quot;<o:p></o:p></span></p>
  <p class=MsoNormal><span lang=EN-US style='color:black'>}</span><span
  lang=EN-US style='color:#7030A0'><o:p></o:p></span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='text-indent:21.0pt;line-height:150%'><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman";mso-no-proof:yes'>访问</span><span lang=EN-US style='mso-no-proof:
yes'><o:p></o:p></span></p>

<p class=MsoNormal style='text-indent:21.0pt;line-height:150%'><span
lang=EN-US style='mso-no-proof:yes'><!--[if gte vml 1]><v:shape id="_x0000_i1036"
 type="#_x0000_t75" style='width:295.8pt;height:229.2pt;visibility:visible'>
 <v:imagedata src="Elasticsearch.files/image020.png" o:title=""/>
</v:shape><![endif]--><![if !vml]><img border=0 width=493 height=382
src="Elasticsearch.files/image020.png" v:shapes="_x0000_i1036"><![endif]><o:p></o:p></span></p>

<p class=MsoNormal style='line-height:150%'><span lang=EN-US style='color:black'>8</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman";color:black'>）停止集群</span><span lang=EN-US style='color:black'><o:p></o:p></span></p>

<p class=MsoNormal style='line-height:150%'><span lang=EN-US style='color:black'><span
style='mso-tab-count:1'>       </span>kill -9 </span><span style='font-family:
宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:"Times New Roman";
color:black'>进程号</span><span lang=EN-US style='color:black'><o:p></o:p></span></p>

<h2 style='margin:0cm;margin-bottom:.0001pt'><span lang=EN-US style='font-size:
14.0pt;line-height:172%'>2.3 </span><span style='font-size:14.0pt;line-height:
172%;font-family:黑体;mso-ascii-font-family:Arial;mso-hansi-font-family:Arial'>安装</span><span
lang=EN-US style='font-size:14.0pt;line-height:172%'>Elasticsearch</span><span
style='font-size:14.0pt;line-height:172%;font-family:黑体;mso-ascii-font-family:
Arial;mso-hansi-font-family:Arial'>（多节点集群</span><span lang=EN-US
style='font-size:14.0pt;line-height:172%'>Linux</span><span style='font-size:
14.0pt;line-height:172%;font-family:黑体;mso-ascii-font-family:Arial;mso-hansi-font-family:
Arial'>环境）</span><span lang=EN-US style='font-size:14.0pt;line-height:172%'><o:p></o:p></span></h2>

<p class=MsoNormal style='line-height:150%'><span style='font-family:宋体;
mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:"Times New Roman";
color:#7030A0'>略</span><span lang=EN-US style='color:#7030A0'><o:p></o:p></span></p>

<h2 style='margin:0cm;margin-bottom:.0001pt'><span lang=EN-US style='font-size:
14.0pt;line-height:172%'>2.4 Elasticsearch head</span><span style='font-size:
14.0pt;line-height:172%;font-family:黑体;mso-ascii-font-family:Arial;mso-hansi-font-family:
Arial'>插件安装</span><span lang=EN-US style='font-size:14.0pt;line-height:172%'><o:p></o:p></span></h2>

<p class=MsoNormal><span lang=EN-US style='mso-no-proof:yes'><!--[if gte vml 1]><v:shape
 id="_x0000_i1037" type="#_x0000_t75" style='width:309.6pt;height:115.8pt;
 visibility:visible'>
 <v:imagedata src="Elasticsearch.files/image022.png" o:title=""/>
</v:shape><![endif]--><![if !vml]><img border=0 width=516 height=193
src="Elasticsearch.files/image022.png" v:shapes="_x0000_i1037"><![endif]></span></p>

<p class=MsoNormal style='line-height:150%'><span lang=EN-US>1</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>）下载插件</span></p>

<p class=MsoNormal style='text-indent:21.0pt;line-height:150%'><span
lang=EN-US><a href="https://github.com/mobz/elasticsearch-head">https://github.com/mobz/elasticsearch-head</a></span></p>

<p class=MsoNormal style='text-indent:21.0pt;line-height:150%'><span
lang=EN-US>elasticsearch-head-master.zip</span></p>

<p class=MsoNormal style='line-height:150%'><span lang=EN-US>2</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>）</span><span lang=EN-US>nodejs</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>官网下载安装包</span></p>

<p class=MsoNormal style='text-indent:21.0pt;line-height:150%'><span
lang=EN-US><a href="https://nodejs.org/dist/">https://nodejs.org/dist/</a></span></p>

<p class=MsoNormal style='text-indent:21.0pt;line-height:150%'><span
lang=EN-US>node-v6.9.2-linux-x64.tar.xz</span></p>

<p class=MsoNormal style='line-height:150%'><span lang=EN-US>3</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>）将</span><span lang=EN-US>elasticsearch-head-master.zip</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>和</span><span lang=EN-US>node-v6.9.2-linux-x64.tar.xz</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>都导入到</span><span lang=EN-US>linux</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>的</span><span lang=EN-US>/opt/software</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>目录。</span></p>

<p class=MsoNormal style='line-height:150%'><span lang=EN-US>4</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>）安装</span><span lang=EN-US>nodejs</span></p>

<p class=MsoNormal style='text-indent:21.0pt;line-height:150%'><span
lang=EN-US style='color:#7030A0'>[atguigu@hadoop102 software]$ tar -zxvf
node-v6.9.2-linux-x64.tar.gz -C /opt/module/<o:p></o:p></span></p>

<p class=MsoNormal style='line-height:150%'><span lang=EN-US>5</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>）配置</span><span lang=EN-US>nodejs</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>环境变量</span></p>

<p class=MsoNormal style='margin-left:21.0pt;mso-para-margin-left:2.0gd;
line-height:150%'><span lang=EN-US style='color:#7030A0'>[root@hadoop102
software]# vi /etc/profile<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:21.0pt;mso-para-margin-left:2.0gd;
line-height:150%'><span lang=EN-US>export
NODE_HOME=/opt/module/node-v6.9.2-linux-x64</span></p>

<p class=MsoNormal style='margin-left:21.0pt;mso-para-margin-left:2.0gd;
line-height:150%'><span lang=EN-US>export PATH=$PATH:$NODE_HOME/bin</span></p>

<p class=MsoNormal style='text-indent:21.0pt;line-height:150%'><span
lang=EN-US style='color:#7030A0'>[root@hadoop102 software]# source /etc/profile
<o:p></o:p></span></p>

<p class=MsoNormal style='line-height:150%'><span lang=EN-US>6</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>）查看</span><span lang=EN-US>node</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>和</span><span lang=EN-US>npm</span><span style='font-family:
宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:"Times New Roman"'>版本（有版本说明安装成功）</span></p>

<p class=MsoNormal style='margin-left:21.0pt;mso-para-margin-left:2.0gd;
line-height:150%'><span lang=EN-US style='color:#7030A0'>[root@hadoop102
software]# node -v<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:21.0pt;mso-para-margin-left:2.0gd;
line-height:150%'><span lang=EN-US>v6.9.2 </span></p>

<p class=MsoNormal style='margin-left:21.0pt;mso-para-margin-left:2.0gd;
line-height:150%'><span lang=EN-US style='color:#7030A0'>[root@hadoop102
software]# npm -v<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:21.0pt;mso-para-margin-left:2.0gd;
line-height:150%'><span lang=EN-US>3.10.9 </span></p>

<p class=MsoNormal style='line-height:150%'><span lang=EN-US>7</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>）解压</span><span lang=EN-US>head</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>插件到</span><span lang=EN-US>/opt/module</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>目录下</span></p>

<p class=MsoNormal style='line-height:150%'><span lang=EN-US style='color:#7030A0'><span
style='mso-tab-count:1'>       </span>[atguigu@hadoop102 software]$ unzip
elasticsearch-head-master.zip -d /opt/module/<o:p></o:p></span></p>

<p class=MsoNormal style='line-height:150%'><span lang=EN-US>8</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>）查看当前</span><span lang=EN-US>head</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>插件目录下有无</span><span lang=EN-US>node_modules/grunt</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>目录：</span></p>

<p class=MsoNormal style='text-indent:21.0pt;line-height:150%'><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>没有就执行命令创建：（会下载东西）</span></p>

<p class=MsoNormal style='text-indent:21.0pt;line-height:150%'><span
lang=EN-US style='color:#7030A0'>[atguigu@hadoop102 elasticsearch-head-master]$
npm install grunt --save<o:p></o:p></span></p>

<p class=MsoNormal style='line-height:150%'><span lang=EN-US>9</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>）安装</span><span lang=EN-US>head</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>插件：</span></p>

<p class=MsoNormal style='text-indent:21.0pt;line-height:150%'><span
lang=EN-US style='color:#7030A0'>[atguigu@hadoop102 elasticsearch-head-master]$
npm install -g cnpm --registry=https://registry.npm.taobao.org<o:p></o:p></span></p>

<p class=MsoNormal style='line-height:150%'><span lang=EN-US>10</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>）安装</span><span lang=EN-US>grunt</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>：</span></p>

<p class=MsoNormal style='text-indent:21.0pt;line-height:150%'><span
lang=EN-US style='color:#7030A0'>[atguigu@hadoop102 elasticsearch-head-master]$
npm install -g grunt-cli<o:p></o:p></span></p>

<p class=MsoNormal style='line-height:150%'><span lang=EN-US>11</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>）编辑</span><span lang=EN-US>Gruntfile.js</span></p>

<p class=MsoNormal style='text-indent:21.0pt;line-height:150%'><span
lang=EN-US style='color:#7030A0'>[atguigu@hadoop102 elasticsearch-head-master]$
vim Gruntfile.js<o:p></o:p></span></p>

<p class=MsoNormal style='text-indent:21.0pt;line-height:150%'><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>文件</span><span lang=EN-US>93</span><span style='font-family:
宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:"Times New Roman"'>行添加</span><span
lang=EN-US>hostname:'0.0.0.0'</span></p>

<p class=MsoNormal style='text-indent:21.0pt;line-height:150%'><span
lang=EN-US>options: {</span></p>

<p class=MsoNormal style='text-indent:21.0pt;line-height:150%'><span
lang=EN-US style='color:red'><span style='mso-spacerun:yes'>       
</span>hostname:'0.0.0.0'</span><span lang=EN-US>,<span style='color:red'><o:p></o:p></span></span></p>

<p class=MsoNormal style='text-indent:21.0pt;line-height:150%'><span
lang=EN-US><span style='mso-spacerun:yes'>        </span>port: 9100,</span></p>

<p class=MsoNormal style='text-indent:21.0pt;line-height:150%'><span
lang=EN-US><span style='mso-spacerun:yes'>        </span>base: '.',</span></p>

<p class=MsoNormal style='text-indent:21.0pt;line-height:150%'><span
lang=EN-US><span style='mso-spacerun:yes'>        </span>keepalive: true</span></p>

<p class=MsoNormal style='text-indent:21.0pt;line-height:150%'><span
lang=EN-US><span style='mso-spacerun:yes'>      </span>}</span></p>

<p class=MsoNormal style='line-height:150%'><span lang=EN-US>12</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>）检查</span><span lang=EN-US>head</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>根目录下是否存在</span><span lang=EN-US>base</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>文件夹</span></p>

<p class=MsoNormal style='text-indent:21.0pt;line-height:150%'><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>没有就将</span><span lang=EN-US>&nbsp;_site</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>下的</span><span lang=EN-US>base</span><span style='font-family:
宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:"Times New Roman"'>文件夹及其内容复制到</span><span
lang=EN-US>head</span><span style='font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>根目录下</span></p>

<p class=MsoNormal style='text-indent:21.0pt;line-height:150%'><span
lang=EN-US style='color:#7030A0'>[atguigu@hadoop102 elasticsearch-head-master]$
mkdir base<o:p></o:p></span></p>

<p class=MsoNormal style='text-indent:21.0pt;line-height:150%'><span
lang=EN-US style='color:#7030A0'>[atguigu@hadoop102 _site]$ cp base/* ../base/<o:p></o:p></span></p>

<p class=MsoNormal style='line-height:150%'><span lang=EN-US>13</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>）启动</span><span lang=EN-US>grunt server</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>：（</span><span lang=EN-US>-d</span><span style='font-family:
宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:"Times New Roman"'>是后台运行）</span></p>

<p class=MsoNormal style='margin-left:21.0pt;mso-para-margin-left:2.0gd;
line-height:150%'><span lang=EN-US style='color:#7030A0'>[atguigu@hadoop102
elasticsearch-head-master]$ grunt server -d<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:21.0pt;mso-para-margin-left:2.0gd;
line-height:150%'><span lang=EN-US style='color:black'>Running
&quot;connect:server&quot; (connect) task<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:21.0pt;mso-para-margin-left:2.0gd;
line-height:150%'><span lang=EN-US style='color:black'>[D] Task source:
/opt/module/elasticsearch-head-master/node_modules/grunt-contrib-connect/tasks/connect.js<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:21.0pt;mso-para-margin-left:2.0gd;
line-height:150%'><span lang=EN-US style='color:black'>Waiting forever...<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:21.0pt;mso-para-margin-left:2.0gd;
line-height:150%'><span lang=EN-US style='color:black'>Started connect web
server on <a href="http://localhost:9100"><span style='color:black'>http://localhost:9100</span></a><o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:21.0pt;mso-para-margin-left:2.0gd;
line-height:150%'><span lang=EN-US style='color:#7030A0'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='margin-left:21.0pt;mso-para-margin-left:2.0gd;
line-height:150%'><span style='font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>如果提示</span><span lang=EN-US>grunt</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>的模块没有安装：</span></p>

<p class=MsoNormal style='margin-left:21.0pt;mso-para-margin-left:2.0gd;
line-height:150%'><span lang=EN-US>Local Npm module “grunt-contrib-clean” not
found. Is it installed?&nbsp;</span></p>

<p class=MsoNormal style='margin-left:21.0pt;mso-para-margin-left:2.0gd;
line-height:150%'><span lang=EN-US>Local Npm module “grunt-contrib-concat” not
found. Is it installed?&nbsp;</span></p>

<p class=MsoNormal style='margin-left:21.0pt;mso-para-margin-left:2.0gd;
line-height:150%'><span lang=EN-US>Local Npm module “grunt-contrib-watch” not
found. Is it installed?&nbsp;</span></p>

<p class=MsoNormal style='margin-left:21.0pt;mso-para-margin-left:2.0gd;
line-height:150%'><span lang=EN-US>Local Npm module “grunt-contrib-connect” not
found. Is it installed?&nbsp;</span></p>

<p class=MsoNormal style='margin-left:21.0pt;mso-para-margin-left:2.0gd;
line-height:150%'><span lang=EN-US>Local Npm module “grunt-contrib-copy” not
found. Is it installed?&nbsp;</span></p>

<p class=MsoNormal style='margin-left:21.0pt;mso-para-margin-left:2.0gd;
line-height:150%'><span lang=EN-US>Local Npm module “grunt-contrib-jasmine” not
found. Is it installed?&nbsp;</span></p>

<p class=MsoNormal style='margin-left:21.0pt;mso-para-margin-left:2.0gd;
line-height:150%'><span lang=EN-US>Warning: Task “connect:server” not found.
Use –force to continue.&nbsp;</span></p>

<p class=MsoNormal style='margin-left:21.0pt;mso-para-margin-left:2.0gd;
line-height:150%'><span style='font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>执行以下命令：</span><span lang=EN-US>&nbsp;</span></p>

<p class=MsoNormal style='margin-left:21.0pt;mso-para-margin-left:2.0gd;
line-height:150%'><span lang=EN-US style='color:#7030A0'>npm install
grunt-contrib-clean -registry=<a href="https://registry.npm.taobao.org/"
target="_blank"><span style='color:#7030A0;text-decoration:none;text-underline:
none'>https://registry.npm.taobao.org</span></a><o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:21.0pt;mso-para-margin-left:2.0gd;
line-height:150%'><span lang=EN-US style='color:#7030A0'>npm install
grunt-contrib-concat -registry=<a href="https://registry.npm.taobao.org/"
target="_blank"><span style='color:#7030A0;text-decoration:none;text-underline:
none'>https://registry.npm.taobao.org</span></a><o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:21.0pt;mso-para-margin-left:2.0gd;
line-height:150%'><span lang=EN-US style='color:#7030A0'>npm install
grunt-contrib-watch -registry=<a href="https://registry.npm.taobao.org/"
target="_blank"><span style='color:#7030A0;text-decoration:none;text-underline:
none'>https://registry.npm.taobao.org</span></a>&nbsp;<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:21.0pt;mso-para-margin-left:2.0gd;
line-height:150%'><span lang=EN-US style='color:#7030A0'>npm install
grunt-contrib-connect -registry=<a href="https://registry.npm.taobao.org/"
target="_blank"><span style='color:#7030A0;text-decoration:none;text-underline:
none'>https://registry.npm.taobao.org</span></a><o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:21.0pt;mso-para-margin-left:2.0gd;
line-height:150%'><span lang=EN-US style='color:#7030A0'>npm install
grunt-contrib-copy -registry=<a href="https://registry.npm.taobao.org/"
target="_blank"><span style='color:#7030A0;text-decoration:none;text-underline:
none'>https://registry.npm.taobao.org</span></a>&nbsp;<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:21.0pt;mso-para-margin-left:2.0gd;
line-height:150%'><span lang=EN-US style='color:#7030A0'>npm install
grunt-contrib-jasmine -registry=<a href="https://registry.npm.taobao.org/"
target="_blank"><span style='color:#7030A0;text-decoration:none;text-underline:
none'>https://registry.npm.taobao.org</span></a> </span><span style='font-family:
宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:"Times New Roman";
color:#7030A0'>（这个会一直等着）</span><span lang=EN-US style='color:#7030A0'><o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:21.0pt;mso-para-margin-left:2.0gd;
line-height:150%'><span lang=EN-US style='mso-no-proof:yes'><!--[if gte vml 1]><v:shape
 id="_x0000_i1038" type="#_x0000_t75" style='width:534pt;height:64.2pt;
 visibility:visible'>
 <v:imagedata src="Elasticsearch.files/image023.png" o:title=""/>
</v:shape><![endif]--><![if !vml]><img border=0 width=890 height=107
src="Elasticsearch.files/image023.png" v:shapes="_x0000_i1038"><![endif]></span><span
lang=EN-US style='color:#7030A0'><o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:21.0pt;mso-para-margin-left:2.0gd;
line-height:150%'><span style='font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>最后一个模块可能安装不成功，但是不影响使用。</span></p>

<p class=MsoNormal style='margin-left:21.0pt;mso-para-margin-left:2.0gd;
line-height:150%'><span style='font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>安装完重新启动</span></p>

<p class=MsoNormal style='margin-left:21.0pt;mso-para-margin-left:2.0gd;
line-height:150%'><span lang=EN-US style='mso-no-proof:yes'><!--[if gte vml 1]><v:shape
 id="_x0000_i1039" type="#_x0000_t75" style='width:502.8pt;height:76.8pt;
 visibility:visible'>
 <v:imagedata src="Elasticsearch.files/image024.png" o:title=""/>
</v:shape><![endif]--><![if !vml]><img border=0 width=838 height=128
src="Elasticsearch.files/image024.png" v:shapes="_x0000_i1039"><![endif]></span></p>

<p class=MsoNormal style='line-height:150%'><span lang=EN-US>14</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>）浏览器访问</span><span lang=EN-US>head</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>插件：</span></p>

<p class=MsoNormal style='line-height:150%'><span lang=EN-US><a
href="http://hadoop102:9100">http://hadoop102:9100</a> </span></p>

<p class=MsoNormal style='text-indent:21.0pt;line-height:150%'><span
lang=EN-US><a href="http://hadoop102:9100#"><span style='mso-no-proof:yes'><!--[if gte vml 1]><v:shape
 id="_x0000_i1040" type="#_x0000_t75" style='width:415.2pt;height:93.6pt;
 visibility:visible'>
 <v:imagedata src="Elasticsearch.files/image026.png" o:title=""/>
</v:shape><![endif]--><![if !vml]><img border=0 width=692 height=156
src="Elasticsearch.files/image026.png" v:shapes="_x0000_i1040"><![endif]></span></a></span></p>

<p class=MsoNormal style='text-indent:21.0pt;line-height:150%'><span
lang=EN-US>15</span><span style='font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>）启动集群插件后发现集群未连接</span></p>

<p class=MsoNormal style='line-height:150%'><span style='font-family:宋体;
mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:"Times New Roman"'>在</span><span
lang=EN-US>/opt/module/elasticsearch-5.2.2/config</span><span style='font-family:
宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:"Times New Roman"'>路径下修改配置文件</span><span
lang=EN-US>elasticsearch.yml</span><span style='font-family:宋体;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>，在文件末尾增加</span></p>

<p class=MsoNormal style='line-height:150%'><span lang=EN-US style='color:#7030A0'>[atguigu@hadoop102
config]$ pwd<o:p></o:p></span></p>

<p class=MsoNormal style='line-height:150%'><span lang=EN-US>/opt/module/elasticsearch-5.2.2/config</span></p>

<p class=MsoNormal style='line-height:150%'><span lang=EN-US style='color:#7030A0'>[atguigu@hadoop102
config]$ vi elasticsearch.yml<o:p></o:p></span></p>

<p class=MsoNormal style='line-height:150%'><span style='font-family:宋体;
mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:"Times New Roman"'>（允许跨域）</span></p>

<p class=MsoNormal style='line-height:150%'><span lang=EN-US style='color:red'>http.cors.enabled:
true<o:p></o:p></span></p>

<p class=MsoNormal style='line-height:150%'><span lang=EN-US style='color:red'>http.cors.allow-origin:
&quot;*&quot;<o:p></o:p></span></p>

<p class=MsoNormal style='line-height:150%'><span style='font-family:宋体;
mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:"Times New Roman"'>再重新启动</span><span
lang=EN-US>elasticsearch</span><span style='font-family:宋体;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>、重启插件</span></p>

<p class=MsoNormal style='line-height:150%'><span lang=EN-US style='mso-no-proof:
yes'><!--[if gte vml 1]><v:shape id="_x0000_i1041" type="#_x0000_t75" style='width:566.4pt;
 height:99.6pt;visibility:visible'>
 <v:imagedata src="Elasticsearch.files/image028.png" o:title=""/>
</v:shape><![endif]--><![if !vml]><img border=0 width=944 height=166
src="Elasticsearch.files/image028.png" v:shapes="_x0000_i1041"><![endif]></span></p>

<p class=MsoNormal style='line-height:150%'><span lang=EN-US>16</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>）关闭插件服务</span></p>

<p class=MsoNormal style='line-height:150%'><span lang=EN-US>ctrl+c</span></p>

<p class=MsoNormal style='line-height:150%'><span lang=EN-US style='color:#7030A0'>[atguigu@hadoop102
elasticsearch-head-master]$ netstat -lntp | grep 9100<o:p></o:p></span></p>

<p class=MsoNormal style='line-height:150%'><span lang=EN-US>tcp<span
style='mso-spacerun:yes'>        </span>0<span style='mso-spacerun:yes'>     
</span>0 192.168.1.102:9100<span style='mso-spacerun:yes'>         
</span>0.0.0.0:*<span style='mso-spacerun:yes'>                   </span>LISTEN<span
style='mso-spacerun:yes'>      </span><span style='color:red'>6070</span>/grunt</span></p>

<h1 style='margin:0cm;margin-bottom:.0001pt'><span style='font-size:15.0pt;
line-height:240%;font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>三</span><span style='font-size:15.0pt;
line-height:240%'> <span lang=EN-US>Java API</span></span><span
style='font-size:15.0pt;line-height:240%;font-family:宋体;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>操作</span><span
lang=EN-US style='font-size:15.0pt;line-height:240%'><o:p></o:p></span></h1>

<p class=2 style='text-indent:0cm;mso-char-indent-count:0;line-height:150%'><span
lang=EN-US><span style='mso-spacerun:yes'>    </span>Elasticsearch</span><span
style='font-family:宋体;mso-ascii-font-family:Calibri;mso-hansi-font-family:Calibri'>的</span><span
lang=EN-US>Java</span><span style='font-family:宋体;mso-ascii-font-family:Calibri;
mso-hansi-font-family:Calibri'>客户端非常强大；它可以建立一个嵌入式实例并在必要时运行管理任务。</span></p>

<p class=2 style='text-indent:0cm;mso-char-indent-count:0;line-height:150%'><span
lang=EN-US><span style='mso-spacerun:yes'>    </span></span><span
style='font-family:宋体;mso-ascii-font-family:Calibri;mso-hansi-font-family:Calibri'>运行一个</span><span
lang=EN-US>Java</span><span style='font-family:宋体;mso-ascii-font-family:Calibri;
mso-hansi-font-family:Calibri'>应用程序和</span><span lang=EN-US>Elasticsearch</span><span
style='font-family:宋体;mso-ascii-font-family:Calibri;mso-hansi-font-family:Calibri'>时，有两种操作模式可供使用。该应用程序可在</span><span
lang=EN-US>Elasticsearch</span><span style='font-family:宋体;mso-ascii-font-family:
Calibri;mso-hansi-font-family:Calibri'>集群中扮演更加主动或更加被动的角色。在更加主动的情况下（称为</span><span
lang=EN-US>Node Client</span><span style='font-family:宋体;mso-ascii-font-family:
Calibri;mso-hansi-font-family:Calibri'>），应用程序实例将从集群接收请求，确定哪个节点应处理该请求，就像正常节点所做的一样。（应用程序甚至可以托管索引和处理请求。）另一种模式称为</span><span
lang=EN-US>Transport Client</span><span style='font-family:宋体;mso-ascii-font-family:
Calibri;mso-hansi-font-family:Calibri'>，它将所有请求都转发到另一个</span><span lang=EN-US>Elasticsearch</span><span
style='font-family:宋体;mso-ascii-font-family:Calibri;mso-hansi-font-family:Calibri'>节点，由后者来确定最终目标。</span></p>

<h2 style='margin:0cm;margin-bottom:.0001pt'><span lang=EN-US style='font-size:
14.0pt;line-height:172%'>3.1 API</span><span style='font-size:14.0pt;
line-height:172%;font-family:黑体;mso-ascii-font-family:Arial;mso-hansi-font-family:
Arial'>基本操作</span><span lang=EN-US style='font-size:14.0pt;line-height:172%'><o:p></o:p></span></h2>

<h3 style='margin:0cm;margin-bottom:.0001pt'><span lang=EN-US style='font-size:
12.0pt;line-height:172%'>3.1.1 </span><span style='font-size:12.0pt;line-height:
172%;font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>操作环境准备</span><span lang=EN-US style='font-size:12.0pt;
line-height:172%'><o:p></o:p></span></h3>

<p class=MsoNormal style='line-height:150%'><span lang=EN-US>1</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>）创建</span><span lang=EN-US>maven</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>工程</span></p>

<p class=MsoNormal><span lang=EN-US style='mso-no-proof:yes'><!--[if gte vml 1]><v:shape
 id="_x0000_i1042" type="#_x0000_t75" style='width:365.4pt;height:327.6pt;
 visibility:visible'>
 <v:imagedata src="Elasticsearch.files/image030.png" o:title=""/>
</v:shape><![endif]--><![if !vml]><img border=0 width=609 height=546
src="Elasticsearch.files/image030.png" v:shapes="_x0000_i1042"><![endif]></span></p>

<p class=MsoNormal style='line-height:150%'><span lang=EN-US>2</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>）添加</span><span lang=EN-US>pom</span><span style='font-family:
宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:"Times New Roman"'>文件</span></p>

<table class=MsoNormalTable border=1 cellspacing=0 cellpadding=0
 style='margin-left:5.4pt;border-collapse:collapse;border:none;mso-border-alt:
 solid windowtext .5pt;mso-yfti-tbllook:1184;mso-padding-alt:0cm 5.4pt 0cm 5.4pt;
 mso-border-insideh:.5pt solid windowtext;mso-border-insidev:.5pt solid windowtext'>
 <tr style='mso-yfti-irow:0;mso-yfti-firstrow:yes;mso-yfti-lastrow:yes'>
  <td width=685 valign=top style='width:411.1pt;border:solid windowtext 1.0pt;
  mso-border-alt:solid windowtext .5pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>       </span>&lt;dependencies&gt;</span></p>
  <p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>              </span>&lt;dependency&gt;</span></p>
  <p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:3'>                     </span>&lt;groupId&gt;<u>junit</u>&lt;/groupId&gt;</span></p>
  <p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:3'>                     </span>&lt;artifactId&gt;<u>junit</u>&lt;/artifactId&gt;</span></p>
  <p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:3'>                     </span>&lt;version&gt;3.8.1&lt;/version&gt;</span></p>
  <p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:3'>                     </span>&lt;scope&gt;test&lt;/scope&gt;</span></p>
  <p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>              </span>&lt;/dependency&gt;</span></p>
  <p class=MsoNormal><span lang=EN-US style='color:red'><span style='mso-tab-count:
  2'>              </span>&lt;dependency&gt;<o:p></o:p></span></p>
  <p class=MsoNormal><span lang=EN-US style='color:red'><span style='mso-tab-count:
  3'>                     </span>&lt;groupId&gt;org.elasticsearch&lt;/groupId&gt;<o:p></o:p></span></p>
  <p class=MsoNormal><span lang=EN-US style='color:red'><span style='mso-tab-count:
  3'>                     </span>&lt;artifactId&gt;<u>elasticsearch</u>&lt;/artifactId&gt;<o:p></o:p></span></p>
  <p class=MsoNormal><span lang=EN-US style='color:red'><span style='mso-tab-count:
  3'>                     </span>&lt;version&gt;5.2.2&lt;/version&gt;<o:p></o:p></span></p>
  <p class=MsoNormal><span lang=EN-US style='color:red'><span style='mso-tab-count:
  2'>              </span>&lt;/dependency&gt;<o:p></o:p></span></p>
  <p class=MsoNormal><span lang=EN-US style='color:red'><o:p>&nbsp;</o:p></span></p>
  <p class=MsoNormal><span lang=EN-US style='color:red'><span style='mso-tab-count:
  2'>              </span>&lt;dependency&gt;<o:p></o:p></span></p>
  <p class=MsoNormal><span lang=EN-US style='color:red'><span style='mso-tab-count:
  3'>                     </span>&lt;groupId&gt;org.elasticsearch.client&lt;/groupId&gt;<o:p></o:p></span></p>
  <p class=MsoNormal><span lang=EN-US style='color:red'><span style='mso-tab-count:
  3'>                     </span>&lt;artifactId&gt;transport&lt;/artifactId&gt;<o:p></o:p></span></p>
  <p class=MsoNormal><span lang=EN-US style='color:red'><span style='mso-tab-count:
  3'>                     </span>&lt;version&gt;5.2.2&lt;/version&gt;<o:p></o:p></span></p>
  <p class=MsoNormal><span lang=EN-US style='color:red'><span style='mso-tab-count:
  2'>              </span>&lt;/dependency&gt;<o:p></o:p></span></p>
  <p class=MsoNormal><span lang=EN-US style='color:red'><o:p>&nbsp;</o:p></span></p>
  <p class=MsoNormal><span lang=EN-US style='color:red'><span style='mso-tab-count:
  2'>              </span>&lt;dependency&gt;<o:p></o:p></span></p>
  <p class=MsoNormal><span lang=EN-US style='color:red'><span style='mso-tab-count:
  3'>                     </span>&lt;groupId&gt;org.apache.logging.log4j&lt;/groupId&gt;<o:p></o:p></span></p>
  <p class=MsoNormal><span lang=EN-US style='color:red'><span style='mso-tab-count:
  3'>                     </span>&lt;artifactId&gt;log4j-core&lt;/artifactId&gt;<o:p></o:p></span></p>
  <p class=MsoNormal><span lang=EN-US style='color:red'><span style='mso-tab-count:
  3'>                     </span>&lt;version&gt;2.9.0&lt;/version&gt;<o:p></o:p></span></p>
  <p class=MsoNormal><span lang=EN-US style='color:red'><span style='mso-tab-count:
  2'>              </span>&lt;/dependency&gt;<o:p></o:p></span></p>
  <p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>       </span>&lt;/dependencies&gt;</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='line-height:150%'><span lang=EN-US>3</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>）等待依赖的</span><span lang=EN-US>jar</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>包下载完成</span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span lang=EN-US
style='mso-no-proof:yes'><!--[if gte vml 1]><v:shape id="_x0000_i1043" type="#_x0000_t75"
 style='width:270pt;height:432.6pt;visibility:visible'>
 <v:imagedata src="Elasticsearch.files/image032.png" o:title=""/>
</v:shape><![endif]--><![if !vml]><img border=0 width=450 height=721
src="Elasticsearch.files/image032.png" v:shapes="_x0000_i1043"><![endif]><o:p></o:p></span></p>

<p class=MsoNormal style='text-indent:21.75pt;line-height:150%'><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>当直接在</span><span lang=EN-US>ElasticSearch </span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>建立文档对象时，如果索引不存在的，默认会自动创建，映射采用默认方式</span> </p>

<h3 style='margin:0cm;margin-bottom:.0001pt'><span lang=EN-US style='font-size:
12.0pt;line-height:172%'>3.1.2 </span><span style='font-size:12.0pt;line-height:
172%;font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>获取</span><span lang=EN-US style='font-size:12.0pt;
line-height:172%'>Transport Client<o:p></o:p></span></h3>

<p class=MsoNormal style='margin-left:21.0pt;line-height:150%'><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>（</span><span lang=EN-US>1</span><span style='font-family:
宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:"Times New Roman"'>）</span><span
lang=EN-US>ElasticSearch</span><span style='font-family:宋体;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>服务默认端口</span><span
lang=EN-US>9300</span><span style='font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>。</span></p>

<p class=MsoNormal style='margin-left:21.0pt;line-height:150%'><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>（</span><span lang=EN-US>2</span><span style='font-family:
宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:"Times New Roman"'>）</span><span
lang=EN-US>Web</span><span style='font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>管理平台端口</span><span lang=EN-US>9200</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>。</span></p>

<table class=MsoNormalTable border=1 cellspacing=0 cellpadding=0
 style='margin-left:5.4pt;border-collapse:collapse;border:none;mso-border-alt:
 solid windowtext .5pt;mso-yfti-tbllook:1184;mso-padding-alt:0cm 5.4pt 0cm 5.4pt;
 mso-border-insideh:.5pt solid windowtext;mso-border-insidev:.5pt solid windowtext'>
 <tr style='mso-yfti-irow:0;mso-yfti-firstrow:yes;mso-yfti-lastrow:yes'>
  <td width=886 valign=top style='width:531.6pt;border:solid windowtext 1.0pt;
  mso-border-alt:solid windowtext .5pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='mso-bidi-font-weight:bold'><span
  style='mso-tab-count:1'>       </span>private TransportClient client;<o:p></o:p></span></p>
  <p class=MsoNormal><span lang=EN-US style='mso-bidi-font-weight:bold'><o:p>&nbsp;</o:p></span></p>
  <p class=MsoNormal><span lang=EN-US style='mso-bidi-font-weight:bold'><span
  style='mso-tab-count:1'>       </span>@SuppressWarnings(&quot;unchecked&quot;)<o:p></o:p></span></p>
  <p class=MsoNormal><span lang=EN-US style='mso-bidi-font-weight:bold'><span
  style='mso-tab-count:1'>       </span>@Before<o:p></o:p></span></p>
  <p class=MsoNormal><span lang=EN-US style='mso-bidi-font-weight:bold'><span
  style='mso-tab-count:1'>       </span>public void getClient() throws Exception
  {<o:p></o:p></span></p>
  <p class=MsoNormal><span lang=EN-US style='mso-bidi-font-weight:bold'><o:p>&nbsp;</o:p></span></p>
  <p class=MsoNormal><span lang=EN-US style='mso-bidi-font-weight:bold'><span
  style='mso-tab-count:2'>              </span>// 1 </span><span
  style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
  "Times New Roman";mso-bidi-font-weight:bold'>设置连接的集群名称（客户端连接的哪个集群）</span><span
  lang=EN-US style='mso-bidi-font-weight:bold'><o:p></o:p></span></p>
  <p class=MsoNormal><span lang=EN-US style='mso-bidi-font-weight:bold'><span
  style='mso-tab-count:2'>              </span>Settings settings = Settings.<i>builder</i>().put(&quot;cluster.name&quot;,
  &quot;my-application&quot;).build();<o:p></o:p></span></p>
  <p class=MsoNormal><span lang=EN-US style='mso-bidi-font-weight:bold'><o:p>&nbsp;</o:p></span></p>
  <p class=MsoNormal><span lang=EN-US style='mso-bidi-font-weight:bold'><span
  style='mso-tab-count:2'>              </span>// 2 </span><span
  style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
  "Times New Roman";mso-bidi-font-weight:bold'>连接集群</span><span lang=EN-US
  style='mso-bidi-font-weight:bold'><o:p></o:p></span></p>
  <p class=MsoNormal><span lang=EN-US style='mso-bidi-font-weight:bold'><span
  style='mso-tab-count:2'>              </span>client = new
  PreBuiltTransportClient(settings);<o:p></o:p></span></p>
  <p class=MsoNormal><span lang=EN-US style='mso-bidi-font-weight:bold'><span
  style='mso-spacerun:yes'> </span><span style='mso-spacerun:yes'>      
  </span>// hadoop102</span><span style='font-family:宋体;mso-ascii-font-family:
  "Times New Roman";mso-hansi-font-family:"Times New Roman";mso-bidi-font-weight:
  bold'>就是要连接的主机名，</span><span lang=EN-US style='mso-bidi-font-weight:bold'>JavaAPI</span><span
  style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
  "Times New Roman";mso-bidi-font-weight:bold'>访问是用</span><span lang=EN-US
  style='mso-bidi-font-weight:bold'>9300</span><span style='font-family:宋体;
  mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:"Times New Roman";
  mso-bidi-font-weight:bold'>，</span><span lang=EN-US style='mso-bidi-font-weight:
  bold'>http</span><span style='font-family:宋体;mso-ascii-font-family:"Times New Roman";
  mso-hansi-font-family:"Times New Roman";mso-bidi-font-weight:bold'>访问是</span><span
  lang=EN-US style='mso-bidi-font-weight:bold'>9200<o:p></o:p></span></p>
  <p class=MsoNormal><span lang=EN-US style='mso-bidi-font-weight:bold'><span
  style='mso-tab-count:2'>              </span>client.addTransportAddress(new
  InetSocketTransportAddress(InetAddress.<i>getByName</i>(&quot;hadoop102&quot;),
  9300));<o:p></o:p></span></p>
  <p class=MsoNormal><span lang=EN-US style='mso-bidi-font-weight:bold'><o:p>&nbsp;</o:p></span></p>
  <p class=MsoNormal><span lang=EN-US style='mso-bidi-font-weight:bold'><span
  style='mso-tab-count:2'>              </span>// 3 </span><span
  style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
  "Times New Roman";mso-bidi-font-weight:bold'>打印集群名称</span><span lang=EN-US
  style='mso-bidi-font-weight:bold'><o:p></o:p></span></p>
  <p class=MsoNormal><span lang=EN-US style='mso-bidi-font-weight:bold'><span
  style='mso-tab-count:2'>              </span>System.<i>out</i>.println(client.toString());<o:p></o:p></span></p>
  <p class=MsoNormal><span lang=EN-US style='mso-bidi-font-weight:bold'><span
  style='mso-tab-count:1'>       </span>}</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal><span lang=EN-US style='mso-no-proof:yes'><!--[if gte vml 1]><v:shape
 id="_x0000_i1044" type="#_x0000_t75" style='width:566.4pt;height:179.4pt;
 visibility:visible'>
 <v:imagedata src="Elasticsearch.files/image034.png" o:title=""/>
</v:shape><![endif]--><![if !vml]><img border=0 width=944 height=299
src="Elasticsearch.files/image034.png" v:shapes="_x0000_i1044"><![endif]><o:p></o:p></span></p>

<p class=MsoNormal><span style='font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman";mso-no-proof:yes'>注意</span></p>

<p class=MsoNormal><span lang=EN-US style='mso-no-proof:yes'><!--[if gte vml 1]><v:shape
 id="_x0000_i1045" type="#_x0000_t75" style='width:567pt;height:99.6pt;
 visibility:visible'>
 <v:imagedata src="Elasticsearch.files/image036.png" o:title=""/>
</v:shape><![endif]--><![if !vml]><img border=0 width=945 height=166
src="Elasticsearch.files/image036.png" v:shapes="_x0000_i1045"><![endif]><o:p></o:p></span></p>

<p class=MsoNormal><span style='font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman";mso-no-proof:yes'>参数可变的注解</span><span
lang=EN-US style='mso-no-proof:yes'><o:p></o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='mso-no-proof:yes'><!--[if gte vml 1]><v:shape
 id="_x0000_i1046" type="#_x0000_t75" style='width:386.4pt;height:57pt;
 visibility:visible'>
 <v:imagedata src="Elasticsearch.files/image038.png" o:title=""/>
</v:shape><![endif]--><![if !vml]><img border=0 width=644 height=95
src="Elasticsearch.files/image038.png" v:shapes="_x0000_i1046"><![endif]></span></p>

<h3 style='margin:0cm;margin-bottom:.0001pt'><span lang=EN-US style='font-size:
12.0pt;line-height:172%'>3.1.3 </span><span style='font-size:12.0pt;line-height:
172%;font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>创建索引</span><span style='font-size:12.0pt;line-height:172%'> <span
lang=EN-US><o:p></o:p></span></span></h3>

<p class=MsoNormal style='line-height:150%'><span lang=EN-US>1</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>）源代码</span></p>

<table class=MsoNormalTable border=1 cellspacing=0 cellpadding=0
 style='margin-left:5.4pt;border-collapse:collapse;border:none;mso-border-alt:
 solid windowtext .5pt;mso-yfti-tbllook:1184;mso-padding-alt:0cm 5.4pt 0cm 5.4pt;
 mso-border-insideh:.5pt solid windowtext;mso-border-insidev:.5pt solid windowtext'>
 <tr style='mso-yfti-irow:0;mso-yfti-firstrow:yes;mso-yfti-lastrow:yes'>
  <td width=685 valign=top style='width:411.1pt;border:solid windowtext 1.0pt;
  mso-border-alt:solid windowtext .5pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>       </span>@Test</span></p>
  <p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>       </span><b>public</b>
  <b>void</b> createIndex_blog(){</span></p>
  <p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>              </span>//
  1 </span><span style='font-family:宋体;mso-ascii-font-family:"Times New Roman";
  mso-hansi-font-family:"Times New Roman"'>创建索引（</span><span lang=EN-US>client</span><span
  style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
  "Times New Roman"'>是前面获取到的），索引名称</span><span lang=EN-US>blog2</span></p>
  <p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>              </span>client.admin().indices().prepareCreate(&quot;blog2&quot;).get();</span></p>
  <p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>              </span></span></p>
  <p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>              </span>//
  2 </span><span style='font-family:宋体;mso-ascii-font-family:"Times New Roman";
  mso-hansi-font-family:"Times New Roman"'>关闭连接</span></p>
  <p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>              </span>client.close();</span></p>
  <p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>       </span>}</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='line-height:150%'><span lang=EN-US>2</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>）查看结果</span></p>

<p class=MsoNormal style='line-height:150%'><span style='font-family:宋体;
mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:"Times New Roman"'>黄色部分是</span><span
lang=EN-US>5</span><span style='font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>个切片，而</span><span lang=EN-US>10</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>是每个切片都一个副本，黄色是警告，因为只有一个机器。</span></p>

<p class=MsoNormal style='line-height:150%'><span lang=EN-US style='mso-no-proof:
yes'><!--[if gte vml 1]><v:shape id="_x0000_i1047" type="#_x0000_t75" style='width:567pt;
 height:147pt;visibility:visible'>
 <v:imagedata src="Elasticsearch.files/image040.png" o:title=""/>
</v:shape><![endif]--><![if !vml]><img border=0 width=945 height=245
src="Elasticsearch.files/image040.png" v:shapes="_x0000_i1047"><![endif]><o:p></o:p></span></p>

<p class=MsoNormal style='line-height:150%'><span lang=EN-US style='mso-no-proof:
yes'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='line-height:150%'><span lang=EN-US style='mso-no-proof:
yes'><!--[if gte vml 1]><v:shape id="_x0000_i1048" type="#_x0000_t75" style='width:293.4pt;
 height:131.4pt;visibility:visible'>
 <v:imagedata src="Elasticsearch.files/image041.png" o:title=""/>
</v:shape><![endif]--><![if !vml]><img border=0 width=489 height=219
src="Elasticsearch.files/image041.png" v:shapes="_x0000_i1048"><![endif]><o:p></o:p></span></p>

<p class=MsoNormal style='line-height:150%'><span lang=EN-US style='mso-no-proof:
yes'><!--[if gte vml 1]><v:shape id="_x0000_i1049" type="#_x0000_t75" style='width:417pt;
 height:389.4pt;visibility:visible'>
 <v:imagedata src="Elasticsearch.files/image043.png" o:title=""/>
</v:shape><![endif]--><![if !vml]><img border=0 width=695 height=649
src="Elasticsearch.files/image043.png" v:shapes="_x0000_i1049"><![endif]></span></p>

<h3 style='margin:0cm;margin-bottom:.0001pt'><span lang=EN-US style='font-size:
12.0pt;line-height:172%'>3.1.4 </span><span style='font-size:12.0pt;line-height:
172%;font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>删除索引</span><span lang=EN-US style='font-size:12.0pt;
line-height:172%'><o:p></o:p></span></h3>

<p class=MsoNormal style='line-height:150%'><span lang=EN-US>1</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>）源代码</span></p>

<table class=MsoNormalTable border=1 cellspacing=0 cellpadding=0
 style='margin-left:5.4pt;border-collapse:collapse;border:none;mso-border-alt:
 solid windowtext .5pt;mso-yfti-tbllook:1184;mso-padding-alt:0cm 5.4pt 0cm 5.4pt;
 mso-border-insideh:.5pt solid windowtext;mso-border-insidev:.5pt solid windowtext'>
 <tr style='mso-yfti-irow:0;mso-yfti-firstrow:yes;mso-yfti-lastrow:yes'>
  <td width=685 valign=top style='width:411.1pt;border:solid windowtext 1.0pt;
  mso-border-alt:solid windowtext .5pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>       </span>@Test</span></p>
  <p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>       </span><b>public</b>
  <b>void</b> deleteIndex(){</span></p>
  <p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>              </span>//
  1 </span><span style='font-family:宋体;mso-ascii-font-family:"Times New Roman";
  mso-hansi-font-family:"Times New Roman"'>删除索引</span></p>
  <p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>              </span>client.admin().indices().prepareDelete(&quot;blog2&quot;).get();</span></p>
  <p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>              </span></span></p>
  <p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>              </span>//
  2 </span><span style='font-family:宋体;mso-ascii-font-family:"Times New Roman";
  mso-hansi-font-family:"Times New Roman"'>关闭连接</span></p>
  <p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>              </span>client.close();</span></p>
  <p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>       </span>}</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='line-height:150%'><span lang=EN-US>2</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>）查看结果</span></p>

<p class=MsoNormal style='line-height:150%'><span style='font-family:宋体;
mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:"Times New Roman"'>浏览器查看</span><span
lang=EN-US>http://hadoop102:9200/blog2</span></p>

<p class=MsoNormal style='line-height:150%'><span style='font-family:宋体;
mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:"Times New Roman"'>没有</span><span
lang=EN-US>blog2</span><span style='font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>索引了。</span></p>

<p class=MsoNormal style='line-height:150%'><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<h3 style='margin:0cm;margin-bottom:.0001pt'><span lang=EN-US style='font-size:
12.0pt;line-height:172%'>3.1.5 </span><span style='font-size:12.0pt;line-height:
172%;font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>新建文档（源数据</span><span lang=EN-US style='font-size:12.0pt;
line-height:172%'>json</span><span style='font-size:12.0pt;line-height:172%;
font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>串）</span><span lang=EN-US style='font-size:12.0pt;
line-height:172%'><o:p></o:p></span></h3>

<p class=MsoNormal style='text-indent:21.0pt;line-height:150%'><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>当直接在</span><span lang=EN-US>ElasticSearch</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>建立文档对象时，如果索引不存在的，默认会自动创建，映射采用默认方式。</span></p>

<p class=MsoNormal style='margin-left:21.0pt;line-height:150%'><span
lang=EN-US>ElasticSearch</span><span style='font-family:宋体;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>服务默认端口</span><span
lang=EN-US>9300</span></p>

<p class=MsoNormal style='text-indent:21.0pt;line-height:150%'><span
lang=EN-US>Web</span><span style='font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>管理平台端口</span><span lang=EN-US>9200</span></p>

<p class=MsoNormal style='line-height:150%'><span lang=EN-US>1</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>）源代码</span></p>

<table class=MsoNormalTable border=1 cellspacing=0 cellpadding=0
 style='margin-left:5.4pt;border-collapse:collapse;border:none;mso-border-alt:
 solid windowtext .5pt;mso-yfti-tbllook:1184;mso-padding-alt:0cm 5.4pt 0cm 5.4pt;
 mso-border-insideh:.5pt solid windowtext;mso-border-insidev:.5pt solid windowtext'>
 <tr style='mso-yfti-irow:0;mso-yfti-firstrow:yes;mso-yfti-lastrow:yes'>
  <td width=933 valign=top style='width:559.95pt;border:solid windowtext 1.0pt;
  mso-border-alt:solid windowtext .5pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>       </span>@Test</span></p>
  <p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>       </span>public
  void createIndexByJson() throws UnknownHostException {</span></p>
  <p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>
  <p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>              </span>//
  1 </span><span style='font-family:宋体;mso-ascii-font-family:"Times New Roman";
  mso-hansi-font-family:"Times New Roman"'>文档数据准备</span></p>
  <p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>              </span>String
  json = &quot;{&quot; + &quot;\&quot;id\&quot;:\&quot;1\&quot;,&quot; +
  &quot;\&quot;title\&quot;:\&quot;</span><span style='font-family:宋体;
  mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:"Times New Roman"'>基于</span><span
  lang=EN-US>Lucene</span><span style='font-family:宋体;mso-ascii-font-family:
  "Times New Roman";mso-hansi-font-family:"Times New Roman"'>的搜索服务器</span><span
  lang=EN-US>\&quot;,&quot;</span></p>
  <p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:4'>                            </span>+
  &quot;\&quot;content\&quot;:\&quot;</span><span style='font-family:宋体;
  mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:"Times New Roman"'>它提供了一个分布式多用户能力的全文搜索引擎，基于</span><span
  lang=EN-US>RESTful web</span><span style='font-family:宋体;mso-ascii-font-family:
  "Times New Roman";mso-hansi-font-family:"Times New Roman"'>接口</span><span
  lang=EN-US>\&quot;&quot; + &quot;}&quot;;</span></p>
  <p class=MsoNormal><span lang=EN-US style='mso-no-proof:yes'><!--[if gte vml 1]><v:shape
   id="_x0000_i1050" type="#_x0000_t75" style='width:528.6pt;height:118.8pt;
   visibility:visible'>
   <v:imagedata src="Elasticsearch.files/image044.png" o:title=""/>
  </v:shape><![endif]--><![if !vml]><img border=0 width=881 height=198
  src="Elasticsearch.files/image044.png" v:shapes="_x0000_i1050"><![endif]></span></p>
  <p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>              </span>//
  2 </span><span style='font-family:宋体;mso-ascii-font-family:"Times New Roman";
  mso-hansi-font-family:"Times New Roman"'>创建文档。</span><span lang=EN-US>&quot;blog&quot;,
  &quot;article&quot;, &quot;1&quot;</span><span style='font-family:宋体;
  mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:"Times New Roman"'>分别是索引、类型、</span><span
  lang=EN-US>id</span></p>
  <p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>              </span>IndexResponse
  indexResponse = client.prepareIndex(&quot;blog&quot;, &quot;article&quot;,
  &quot;1&quot;).setSource(json).execute().actionGet();</span></p>
  <p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>
  <p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>              </span>//
  3 </span><span style='font-family:宋体;mso-ascii-font-family:"Times New Roman";
  mso-hansi-font-family:"Times New Roman"'>打印返回的结果</span></p>
  <p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>              </span>System.out.println(&quot;</span><span
  style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
  "Times New Roman"'>索引</span><span lang=EN-US>:&quot; +
  indexResponse.getIndex());</span></p>
  <p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>              </span>System.out.println(&quot;</span><span
  style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
  "Times New Roman"'>类型</span><span lang=EN-US>:&quot; +
  indexResponse.getType());</span></p>
  <p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>              </span>System.out.println(&quot;id:&quot;
  + indexResponse.getId());</span></p>
  <p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>              </span>System.out.println(&quot;</span><span
  style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
  "Times New Roman"'>版本号</span><span lang=EN-US>:&quot; +
  indexResponse.getVersion());</span></p>
  <p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>              </span>System.out.println(&quot;</span><span
  style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
  "Times New Roman"'>结果</span><span lang=EN-US>&quot; +
  indexResponse.getResult());</span></p>
  <p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>
  <p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>              </span>//
  4 </span><span style='font-family:宋体;mso-ascii-font-family:"Times New Roman";
  mso-hansi-font-family:"Times New Roman"'>关闭连接</span></p>
  <p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>              </span>client.close();</span></p>
  <p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>       </span>}</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='line-height:150%'><span lang=EN-US>2</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>）结果查看</span></p>

<p class=MsoNormal><span lang=EN-US style='mso-no-proof:yes'><!--[if gte vml 1]><v:shape
 id="_x0000_i1051" type="#_x0000_t75" style='width:524.4pt;height:173.4pt;
 visibility:visible'>
 <v:imagedata src="Elasticsearch.files/image046.png" o:title=""/>
</v:shape><![endif]--><![if !vml]><img border=0 width=874 height=289
src="Elasticsearch.files/image046.png" v:shapes="_x0000_i1051"><![endif]><o:p></o:p></span></p>

<p class=MsoNormal><span style='font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman";mso-no-proof:yes'>可视化看</span><span
lang=EN-US style='mso-no-proof:yes'><o:p></o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='mso-no-proof:yes'><!--[if gte vml 1]><v:shape
 id="_x0000_i1052" type="#_x0000_t75" style='width:567pt;height:174pt;
 visibility:visible'>
 <v:imagedata src="Elasticsearch.files/image048.png" o:title=""/>
</v:shape><![endif]--><![if !vml]><img border=0 width=945 height=290
src="Elasticsearch.files/image048.png" v:shapes="_x0000_i1052"><![endif]><o:p></o:p></span></p>

<h3 style='margin:0cm;margin-bottom:.0001pt'><span lang=EN-US style='font-size:
12.0pt;line-height:172%'>3.1.6 </span><span style='font-size:12.0pt;line-height:
172%;font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>新建文档（源数据</span><span lang=EN-US style='font-size:12.0pt;
line-height:172%'>map</span><span style='font-size:12.0pt;line-height:172%;
font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>方式添加</span><span lang=EN-US style='font-size:12.0pt;
line-height:172%'>json</span><span style='font-size:12.0pt;line-height:172%;
font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>）</span><span lang=EN-US style='font-size:12.0pt;line-height:
172%'><o:p></o:p></span></h3>

<p class=MsoNormal style='line-height:150%'><span lang=EN-US>1</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>）源代码</span></p>

<table class=MsoNormalTable border=1 cellspacing=0 cellpadding=0
 style='margin-left:5.4pt;border-collapse:collapse;border:none;mso-border-alt:
 solid windowtext .5pt;mso-yfti-tbllook:1184;mso-padding-alt:0cm 5.4pt 0cm 5.4pt;
 mso-border-insideh:.5pt solid windowtext;mso-border-insidev:.5pt solid windowtext'>
 <tr style='mso-yfti-irow:0;mso-yfti-firstrow:yes;mso-yfti-lastrow:yes'>
  <td width=921 valign=top style='width:552.85pt;border:solid windowtext 1.0pt;
  mso-border-alt:solid windowtext .5pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal style='text-indent:21.0pt;mso-char-indent-count:2.0'><span
  lang=EN-US>@Test</span></p>
  <p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>       </span><b>public</b>
  <b>void</b> createIndexByMap() {</span></p>
  <p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>
  <p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>              </span>//
  1 </span><span style='font-family:宋体;mso-ascii-font-family:"Times New Roman";
  mso-hansi-font-family:"Times New Roman"'>文档数据准备（</span><span lang=EN-US>Map</span><span
  style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
  "Times New Roman"'>）</span></p>
  <p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>              </span>Map&lt;String,
  Object&gt; json = <b>new</b> HashMap&lt;String, Object&gt;();</span></p>
  <p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>              </span>json.put(&quot;id&quot;,
  &quot;2&quot;);</span></p>
  <p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>              </span>json.put(&quot;title&quot;,
  &quot;</span><span style='font-family:宋体;mso-ascii-font-family:"Times New Roman";
  mso-hansi-font-family:"Times New Roman"'>基于</span><span lang=EN-US>Lucene</span><span
  style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
  "Times New Roman"'>的搜索服务器</span><span lang=EN-US>&quot;);</span></p>
  <p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>              </span>json.put(&quot;content&quot;,
  &quot;</span><span style='font-family:宋体;mso-ascii-font-family:"Times New Roman";
  mso-hansi-font-family:"Times New Roman"'>它提供了一个分布式多用户能力的全文搜索引擎，基于</span><span
  lang=EN-US>RESTful web</span><span style='font-family:宋体;mso-ascii-font-family:
  "Times New Roman";mso-hansi-font-family:"Times New Roman"'>接口</span><span
  lang=EN-US>&quot;);</span></p>
  <p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>
  <p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>              </span>//
  2 </span><span style='font-family:宋体;mso-ascii-font-family:"Times New Roman";
  mso-hansi-font-family:"Times New Roman"'>创建文档</span></p>
  <p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>              </span>IndexResponse
  indexResponse = client.prepareIndex(&quot;blog&quot;, &quot;article&quot;,
  &quot;2&quot;).setSource(json).execute().actionGet();</span></p>
  <p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>
  <p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>              </span>//
  3 </span><span style='font-family:宋体;mso-ascii-font-family:"Times New Roman";
  mso-hansi-font-family:"Times New Roman"'>打印返回的结果</span></p>
  <p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>              </span>System.out.println(&quot;</span><span
  style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
  "Times New Roman"'>索引</span><span lang=EN-US>:&quot; +
  indexResponse.getIndex());</span></p>
  <p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>              </span>System.out.println(&quot;</span><span
  style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
  "Times New Roman"'>类型</span><span lang=EN-US>:&quot; +
  indexResponse.getType());</span></p>
  <p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>              </span>System.out.println(&quot;id:&quot;
  + indexResponse.getId());</span></p>
  <p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>              </span>System.out.println(&quot;</span><span
  style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
  "Times New Roman"'>版本号</span><span lang=EN-US>:&quot; +
  indexResponse.getVersion());</span></p>
  <p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>              </span>System.out.println(&quot;</span><span
  style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
  "Times New Roman"'>结果</span><span lang=EN-US>&quot; +
  indexResponse.getResult());</span></p>
  <p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>
  <p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>              </span>//
  4 </span><span style='font-family:宋体;mso-ascii-font-family:"Times New Roman";
  mso-hansi-font-family:"Times New Roman"'>关闭连接</span></p>
  <p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>              </span>client.close();</span></p>
  <p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>       </span>}</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='line-height:150%'><span lang=EN-US>2</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>）结果查看</span></p>

<p class=MsoNormal><span lang=EN-US style='mso-no-proof:yes'><!--[if gte vml 1]><v:shape
 id="_x0000_i1053" type="#_x0000_t75" style='width:260.4pt;height:153.6pt;
 visibility:visible'>
 <v:imagedata src="Elasticsearch.files/image050.png" o:title=""/>
</v:shape><![endif]--><![if !vml]><img border=0 width=434 height=256
src="Elasticsearch.files/image050.png" v:shapes="_x0000_i1053"><![endif]><o:p></o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='mso-no-proof:yes'><!--[if gte vml 1]><v:shape
 id="_x0000_i1054" type="#_x0000_t75" style='width:567pt;height:133.2pt;
 visibility:visible'>
 <v:imagedata src="Elasticsearch.files/image052.png" o:title=""/>
</v:shape><![endif]--><![if !vml]><img border=0 width=945 height=222
src="Elasticsearch.files/image052.png" v:shapes="_x0000_i1054"><![endif]><o:p></o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='mso-no-proof:yes'><!--[if gte vml 1]><v:shape
 id="_x0000_i1055" type="#_x0000_t75" style='width:238.2pt;height:193.8pt;
 visibility:visible'>
 <v:imagedata src="Elasticsearch.files/image054.png" o:title=""/>
</v:shape><![endif]--><![if !vml]><img border=0 width=397 height=323
src="Elasticsearch.files/image054.png" v:shapes="_x0000_i1055"><![endif]><o:p></o:p></span></p>

<h3 style='margin:0cm;margin-bottom:.0001pt'><span lang=EN-US style='font-size:
12.0pt;line-height:172%'>3.1.7 </span><span style='font-size:12.0pt;line-height:
172%;font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>新建文档（源数据</span><span lang=EN-US style='font-size:12.0pt;
line-height:172%'>es</span><span style='font-size:12.0pt;line-height:172%;
font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>构建器添加</span><span lang=EN-US style='font-size:12.0pt;
line-height:172%'>json</span><span style='font-size:12.0pt;line-height:172%;
font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>）</span><span lang=EN-US style='font-size:12.0pt;line-height:
172%'><o:p></o:p></span></h3>

<p class=MsoNormal style='line-height:150%'><span lang=EN-US>1</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>）源代码</span></p>

<table class=MsoNormalTable border=1 cellspacing=0 cellpadding=0
 style='margin-left:5.4pt;border-collapse:collapse;border:none;mso-border-alt:
 solid windowtext .5pt;mso-yfti-tbllook:1184;mso-padding-alt:0cm 5.4pt 0cm 5.4pt;
 mso-border-insideh:.5pt solid windowtext;mso-border-insidev:.5pt solid windowtext'>
 <tr style='mso-yfti-irow:0;mso-yfti-firstrow:yes;mso-yfti-lastrow:yes'>
  <td width=945 valign=top style='width:20.0cm;border:solid windowtext 1.0pt;
  mso-border-alt:solid windowtext .5pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal style='text-indent:21.0pt;mso-char-indent-count:2.0'><span
  lang=EN-US>@Test</span></p>
  <p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>       </span>public
  void createIndex() throws Exception {</span></p>
  <p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>
  <p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>              </span>//
  1 </span><span style='font-family:宋体;mso-ascii-font-family:"Times New Roman";
  mso-hansi-font-family:"Times New Roman"'>通过</span><span lang=EN-US>es</span><span
  style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
  "Times New Roman"'>自带的帮助类，构建</span><span lang=EN-US>json</span><span
  style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
  "Times New Roman"'>数据（类似于解析</span><span lang=EN-US>xml</span><span
  style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
  "Times New Roman"'>）</span></p>
  <p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>              </span>XContentBuilder
  builder = XContentFactory.jsonBuilder().startObject()</span></p>
  <p class=MsoNormal style='text-indent:84.0pt;mso-char-indent-count:8.0'><span
  lang=EN-US>.field(&quot;id&quot;, 3)</span></p>
  <p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:4'>                            </span>.field(&quot;title&quot;,
  &quot;</span><span style='font-family:宋体;mso-ascii-font-family:"Times New Roman";
  mso-hansi-font-family:"Times New Roman"'>基于</span><span lang=EN-US>Lucene</span><span
  style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
  "Times New Roman"'>的搜索服务器</span><span lang=EN-US>&quot;)</span></p>
  <p class=MsoNormal style='text-indent:84.0pt;mso-char-indent-count:8.0'><span
  lang=EN-US>.field(&quot;content&quot;, &quot;</span><span style='font-family:
  宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:"Times New Roman"'>它提供了一个分布式多用户能力的全文搜索引擎，基于</span><span
  lang=EN-US>RESTful web</span><span style='font-family:宋体;mso-ascii-font-family:
  "Times New Roman";mso-hansi-font-family:"Times New Roman"'>接口。</span><span
  lang=EN-US>&quot;)</span></p>
  <p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:4'>                            </span>.endObject();</span></p>
  <p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>
  <p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>              </span>//
  2 </span><span style='font-family:宋体;mso-ascii-font-family:"Times New Roman";
  mso-hansi-font-family:"Times New Roman"'>创建文档</span></p>
  <p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>              </span>IndexResponse
  indexResponse = client.prepareIndex(&quot;blog&quot;, &quot;article&quot;,
  &quot;3&quot;).setSource(builder).get();</span></p>
  <p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>
  <p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>              </span>//
  3 </span><span style='font-family:宋体;mso-ascii-font-family:"Times New Roman";
  mso-hansi-font-family:"Times New Roman"'>打印返回的结果</span></p>
  <p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>              </span>System.out.println(&quot;index:&quot;
  + indexResponse.getIndex());</span></p>
  <p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>              </span>System.out.println(&quot;type:&quot;
  + indexResponse.getType());</span></p>
  <p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>              </span>System.out.println(&quot;id:&quot;
  + indexResponse.getId());</span></p>
  <p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>              </span>System.out.println(&quot;version:&quot;
  + indexResponse.getVersion());</span></p>
  <p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>              </span>System.out.println(&quot;result:&quot;
  + indexResponse.getResult());</span></p>
  <p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>
  <p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>              </span>//
  4 </span><span style='font-family:宋体;mso-ascii-font-family:"Times New Roman";
  mso-hansi-font-family:"Times New Roman"'>关闭连接</span></p>
  <p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>              </span>client.close();</span></p>
  <p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>       </span>}</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='line-height:150%'><span lang=EN-US>2</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>）结果查看</span></p>

<p class=MsoNormal><span lang=EN-US style='mso-no-proof:yes'><!--[if gte vml 1]><v:shape
 id="_x0000_i1056" type="#_x0000_t75" style='width:415.2pt;height:129.6pt;
 visibility:visible'>
 <v:imagedata src="Elasticsearch.files/image055.png" o:title=""/>
</v:shape><![endif]--><![if !vml]><img border=0 width=692 height=216
src="Elasticsearch.files/image055.png" v:shapes="_x0000_i1056"><![endif]><o:p></o:p></span></p>

<h3 style='margin:0cm;margin-bottom:.0001pt'><span lang=EN-US style='font-size:
12.0pt;line-height:172%'>3.1.8 </span><span style='font-size:12.0pt;line-height:
172%;font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>搜索文档数据（单个索引）</span><span lang=EN-US style='font-size:12.0pt;
line-height:172%'><o:p></o:p></span></h3>

<p class=MsoNormal style='line-height:150%'><span lang=EN-US>1</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>）源代码</span></p>

<table class=MsoNormalTable border=1 cellspacing=0 cellpadding=0
 style='margin-left:5.4pt;border-collapse:collapse;border:none;mso-border-alt:
 solid windowtext .5pt;mso-yfti-tbllook:1184;mso-padding-alt:0cm 5.4pt 0cm 5.4pt;
 mso-border-insideh:.5pt solid windowtext;mso-border-insidev:.5pt solid windowtext'>
 <tr style='mso-yfti-irow:0;mso-yfti-firstrow:yes;mso-yfti-lastrow:yes'>
  <td width=685 valign=top style='width:411.1pt;border:solid windowtext 1.0pt;
  mso-border-alt:solid windowtext .5pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>       </span>@Test</span></p>
  <p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>       </span><b>public</b>
  <b>void</b> getData() <b>throws</b> Exception {</span></p>
  <p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>              </span></span></p>
  <p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>              </span>//
  1 </span><span style='font-family:宋体;mso-ascii-font-family:"Times New Roman";
  mso-hansi-font-family:"Times New Roman"'>查询文档</span></p>
  <p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>              </span>GetResponse
  response = client.prepareGet(&quot;blog&quot;, &quot;article&quot;,
  &quot;1&quot;).get();</span></p>
  <p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>              </span></span></p>
  <p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>              </span>//
  2 </span><span style='font-family:宋体;mso-ascii-font-family:"Times New Roman";
  mso-hansi-font-family:"Times New Roman"'>打印搜索的结果</span></p>
  <p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>              </span>System.<b><i>out</i></b>.println(response.getSourceAsString());</span></p>
  <p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>              </span></span></p>
  <p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>              </span>//
  3 </span><span style='font-family:宋体;mso-ascii-font-family:"Times New Roman";
  mso-hansi-font-family:"Times New Roman"'>关闭连接</span></p>
  <p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>              </span>client.close();</span></p>
  <p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>       </span>}</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='line-height:150%'><span lang=EN-US>2</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>）结果查看</span></p>

<p class=MsoNormal><span lang=EN-US style='mso-no-proof:yes'><!--[if gte vml 1]><v:shape
 id="_x0000_i1057" type="#_x0000_t75" style='width:415.2pt;height:46.2pt;
 visibility:visible'>
 <v:imagedata src="Elasticsearch.files/image056.png" o:title=""/>
</v:shape><![endif]--><![if !vml]><img border=0 width=692 height=77
src="Elasticsearch.files/image056.png" v:shapes="_x0000_i1057"><![endif]></span></p>

<h3 style='margin:0cm;margin-bottom:.0001pt'><span lang=EN-US style='font-size:
12.0pt;line-height:172%'>3.1.9 </span><span style='font-size:12.0pt;line-height:
172%;font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>搜索文档数据（多个索引）</span><span lang=EN-US style='font-size:12.0pt;
line-height:172%'><o:p></o:p></span></h3>

<p class=MsoNormal style='line-height:150%'><span lang=EN-US>1</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>）源代码</span></p>

<table class=MsoNormalTable border=1 cellspacing=0 cellpadding=0
 style='margin-left:5.4pt;border-collapse:collapse;border:none;mso-border-alt:
 solid windowtext .5pt;mso-yfti-tbllook:1184;mso-padding-alt:0cm 5.4pt 0cm 5.4pt;
 mso-border-insideh:.5pt solid windowtext;mso-border-insidev:.5pt solid windowtext'>
 <tr style='mso-yfti-irow:0;mso-yfti-firstrow:yes;mso-yfti-lastrow:yes'>
  <td width=898 valign=top style='width:19.0cm;border:solid windowtext 1.0pt;
  mso-border-alt:solid windowtext .5pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal style='text-indent:21.0pt;mso-char-indent-count:2.0'><span
  lang=EN-US>@Test</span></p>
  <p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>       </span><b>public</b>
  <b>void</b> getMultiData() {</span></p>
  <p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>              </span></span></p>
  <p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>              </span>//
  1 </span><span style='font-family:宋体;mso-ascii-font-family:"Times New Roman";
  mso-hansi-font-family:"Times New Roman"'>查询多个文档</span></p>
  <p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>              </span>MultiGetResponse
  response = client.prepareMultiGet()</span></p>
  <p class=MsoNormal style='text-indent:84.0pt;mso-char-indent-count:8.0'><span
  lang=EN-US>.add(&quot;blog&quot;, &quot;article&quot;, &quot;1&quot;)</span></p>
  <p class=MsoNormal style='text-indent:84.0pt;mso-char-indent-count:8.0'><span
  lang=EN-US>.add(&quot;blog&quot;, &quot;article&quot;, &quot;2&quot;,
  &quot;3&quot;)<span style='mso-spacerun:yes'>  </span>// </span><span
  style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
  "Times New Roman"'>可多个</span><span lang=EN-US>id</span></p>
  <p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:4'>                            </span>.add(&quot;blog&quot;,
  &quot;article&quot;, &quot;2&quot;).get();</span></p>
  <p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>              </span></span></p>
  <p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>              </span>//
  2 </span><span style='font-family:宋体;mso-ascii-font-family:"Times New Roman";
  mso-hansi-font-family:"Times New Roman"'>遍历返回的结果</span></p>
  <p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>              </span><b>for</b>(MultiGetItemResponse
  itemResponse:response){</span></p>
  <p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:3'>                     </span>GetResponse
  getResponse = itemResponse.getResponse();</span></p>
  <p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:3'>                     </span></span></p>
  <p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:3'>                     </span>//
  </span><span style='font-family:宋体;mso-ascii-font-family:"Times New Roman";
  mso-hansi-font-family:"Times New Roman"'>如果获取到查询结果</span></p>
  <p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:3'>                     </span><b>if</b>
  (getResponse.isExists()) {</span></p>
  <p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:4'>                            </span>String
  sourceAsString = getResponse.getSourceAsString();</span></p>
  <p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:4'>                            </span>System.<b><i>out</i></b>.println(sourceAsString);</span></p>
  <p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:3'>                     </span>}</span></p>
  <p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>              </span>}</span></p>
  <p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>              </span></span></p>
  <p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>              </span>//
  3 </span><span style='font-family:宋体;mso-ascii-font-family:"Times New Roman";
  mso-hansi-font-family:"Times New Roman"'>关闭资源</span></p>
  <p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>              </span>client.close();</span></p>
  <p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>       </span>}</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='line-height:150%'><span lang=EN-US>2</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>）结果查看</span></p>

<p class=MsoNormal style='margin-left:21.0pt;mso-para-margin-left:2.0gd'><span
lang=EN-US style='font-size:8.0pt;mso-bidi-font-size:9.0pt'>{&quot;id&quot;:&quot;1&quot;,&quot;title&quot;:&quot;</span><span
style='font-size:8.0pt;mso-bidi-font-size:9.0pt;font-family:宋体;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>基于</span><span
lang=EN-US style='font-size:8.0pt;mso-bidi-font-size:9.0pt'>Lucene</span><span
style='font-size:8.0pt;mso-bidi-font-size:9.0pt;font-family:宋体;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>的搜索服务器</span><span
lang=EN-US style='font-size:8.0pt;mso-bidi-font-size:9.0pt'>&quot;,&quot;content&quot;:&quot;</span><span
style='font-size:8.0pt;mso-bidi-font-size:9.0pt;font-family:宋体;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>它提供了一个分布式多用户能力的全文搜索引擎，基于</span><span
lang=EN-US style='font-size:8.0pt;mso-bidi-font-size:9.0pt'>RESTful web</span><span
style='font-size:8.0pt;mso-bidi-font-size:9.0pt;font-family:宋体;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>接口</span><span
lang=EN-US style='font-size:8.0pt;mso-bidi-font-size:9.0pt'>&quot;}<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:21.0pt;mso-para-margin-left:2.0gd'><span
lang=EN-US style='font-size:8.0pt;mso-bidi-font-size:9.0pt'>{&quot;content&quot;:&quot;</span><span
style='font-size:8.0pt;mso-bidi-font-size:9.0pt;font-family:宋体;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>它提供了一个分布式多用户能力的全文搜索引擎，基于</span><span
lang=EN-US style='font-size:8.0pt;mso-bidi-font-size:9.0pt'>RESTful web</span><span
style='font-size:8.0pt;mso-bidi-font-size:9.0pt;font-family:宋体;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>接口</span><span
lang=EN-US style='font-size:8.0pt;mso-bidi-font-size:9.0pt'>&quot;,&quot;id&quot;:&quot;2&quot;,&quot;title&quot;:&quot;</span><span
style='font-size:8.0pt;mso-bidi-font-size:9.0pt;font-family:宋体;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>基于</span><span
lang=EN-US style='font-size:8.0pt;mso-bidi-font-size:9.0pt'>Lucene</span><span
style='font-size:8.0pt;mso-bidi-font-size:9.0pt;font-family:宋体;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>的搜索服务器</span><span
lang=EN-US style='font-size:8.0pt;mso-bidi-font-size:9.0pt'>&quot;}<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:21.0pt;mso-para-margin-left:2.0gd'><span
lang=EN-US style='font-size:8.0pt;mso-bidi-font-size:9.0pt'>{&quot;id&quot;:3,&quot;titile&quot;:&quot;ElasticSearch</span><span
style='font-size:8.0pt;mso-bidi-font-size:9.0pt;font-family:宋体;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>是一个基于</span><span
lang=EN-US style='font-size:8.0pt;mso-bidi-font-size:9.0pt'>Lucene</span><span
style='font-size:8.0pt;mso-bidi-font-size:9.0pt;font-family:宋体;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>的搜索服务器</span><span
lang=EN-US style='font-size:8.0pt;mso-bidi-font-size:9.0pt'>&quot;,&quot;content&quot;:&quot;</span><span
style='font-size:8.0pt;mso-bidi-font-size:9.0pt;font-family:宋体;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>它提供了一个分布式多用户能力的全文搜索引擎，基于</span><span
lang=EN-US style='font-size:8.0pt;mso-bidi-font-size:9.0pt'>RESTful web</span><span
style='font-size:8.0pt;mso-bidi-font-size:9.0pt;font-family:宋体;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>接口。</span><span
lang=EN-US style='font-size:8.0pt;mso-bidi-font-size:9.0pt'>&quot;}<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:21.0pt;mso-para-margin-left:2.0gd'><span
lang=EN-US style='font-size:8.0pt;mso-bidi-font-size:9.0pt'>{&quot;content&quot;:&quot;</span><span
style='font-size:8.0pt;mso-bidi-font-size:9.0pt;font-family:宋体;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>它提供了一个分布式多用户能力的全文搜索引擎，基于</span><span
lang=EN-US style='font-size:8.0pt;mso-bidi-font-size:9.0pt'>RESTful web</span><span
style='font-size:8.0pt;mso-bidi-font-size:9.0pt;font-family:宋体;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>接口</span><span
lang=EN-US style='font-size:8.0pt;mso-bidi-font-size:9.0pt'>&quot;,&quot;id&quot;:&quot;2&quot;,&quot;title&quot;:&quot;</span><span
style='font-size:8.0pt;mso-bidi-font-size:9.0pt;font-family:宋体;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>基于</span><span
lang=EN-US style='font-size:8.0pt;mso-bidi-font-size:9.0pt'>Lucene</span><span
style='font-size:8.0pt;mso-bidi-font-size:9.0pt;font-family:宋体;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>的搜索服务器</span><span
lang=EN-US style='font-size:8.0pt;mso-bidi-font-size:9.0pt'>&quot;}<o:p></o:p></span></p>

<h3 style='margin:0cm;margin-bottom:.0001pt'><span lang=EN-US style='font-size:
12.0pt;line-height:172%'>3.1.10 </span><span style='font-size:12.0pt;
line-height:172%;font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>更新文档数据（</span><span lang=EN-US
style='font-size:12.0pt;line-height:172%'>update</span><span style='font-size:
12.0pt;line-height:172%;font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>）</span><span lang=EN-US
style='font-size:12.0pt;line-height:172%'><o:p></o:p></span></h3>

<p class=MsoNormal style='line-height:150%'><span lang=EN-US>1</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>）源代码</span></p>

<table class=MsoNormalTable border=1 cellspacing=0 cellpadding=0
 style='margin-left:5.4pt;border-collapse:collapse;border:none;mso-border-alt:
 solid windowtext .5pt;mso-yfti-tbllook:1184;mso-padding-alt:0cm 5.4pt 0cm 5.4pt;
 mso-border-insideh:.5pt solid windowtext;mso-border-insidev:.5pt solid windowtext'>
 <tr style='mso-yfti-irow:0;mso-yfti-firstrow:yes;mso-yfti-lastrow:yes'>
  <td width=945 valign=top style='width:20.0cm;border:solid windowtext 1.0pt;
  mso-border-alt:solid windowtext .5pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal style='text-indent:21.0pt;mso-char-indent-count:2.0'><span
  lang=EN-US>@Test</span></p>
  <p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>       </span><b>public</b>
  <b>void</b> updateData() <b>throws</b> Throwable {</span></p>
  <p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>
  <p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>              </span>//
  1 </span><span style='font-family:宋体;mso-ascii-font-family:"Times New Roman";
  mso-hansi-font-family:"Times New Roman"'>创建更新数据的请求对象</span></p>
  <p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>              </span>UpdateRequest
  updateRequest = <b>new</b> UpdateRequest();</span></p>
  <p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>              </span>updateRequest.index(&quot;blog&quot;);</span></p>
  <p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>              </span>updateRequest.type(&quot;article&quot;);</span></p>
  <p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>              </span>updateRequest.id(&quot;3&quot;);</span></p>
  <p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>
  <p class=MsoNormal><span lang=EN-US><span style='mso-spacerun:yes'> </span><span
  style='mso-spacerun:yes'>       </span>// </span><span style='font-family:
  宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:"Times New Roman"'>修改为这内容（如果这里没有设置，则</span><span
  lang=EN-US>update</span><span style='font-family:宋体;mso-ascii-font-family:
  "Times New Roman";mso-hansi-font-family:"Times New Roman"'>方法就不会做更改，只是查询）</span></p>
  <p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>              </span>updateRequest.doc(XContentFactory.<i>jsonBuilder</i>().startObject()</span></p>
  <p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:4'>                            </span>//
  </span><span style='font-family:宋体;mso-ascii-font-family:"Times New Roman";
  mso-hansi-font-family:"Times New Roman"'>对没有的字段添加</span><span lang=EN-US>, </span><span
  style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
  "Times New Roman"'>对已有的字段替换</span></p>
  <p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:4'>                            </span>.field(&quot;title&quot;,
  &quot;</span><span style='font-family:宋体;mso-ascii-font-family:"Times New Roman";
  mso-hansi-font-family:"Times New Roman"'>基于</span><span lang=EN-US>Lucene</span><span
  style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
  "Times New Roman"'>的搜索服务器</span><span lang=EN-US>&quot;)</span></p>
  <p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:4'>                            </span>.field(&quot;content&quot;,
  </span><span lang=EN-US style='font-size:9.0pt;mso-bidi-font-size:10.0pt'>&quot;</span><span
  style='font-size:9.0pt;mso-bidi-font-size:10.0pt;font-family:宋体;mso-ascii-font-family:
  "Times New Roman";mso-hansi-font-family:"Times New Roman"'>它提供了一个分布式多用户能力的全文搜索引擎，基于</span><span
  lang=EN-US style='font-size:9.0pt;mso-bidi-font-size:10.0pt'>RESTful web</span><span
  style='font-size:9.0pt;mso-bidi-font-size:10.0pt;font-family:宋体;mso-ascii-font-family:
  "Times New Roman";mso-hansi-font-family:"Times New Roman"'>接口。<span
  style='color:red'>大数据前景无限</span></span><span lang=EN-US style='font-size:
  9.0pt;mso-bidi-font-size:10.0pt'>&quot;)</span></p>
  <p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:4'>                            </span><span
  style='color:red'>.field(&quot;createDate&quot;, &quot;2017-8-22&quot;).</span>endObject());</span></p>
  <p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>
  <p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>              </span>//
  2 </span><span style='font-family:宋体;mso-ascii-font-family:"Times New Roman";
  mso-hansi-font-family:"Times New Roman"'>获取更新后的值</span></p>
  <p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>              </span>UpdateResponse
  indexResponse = client.<b>update</b>(updateRequest).get();</span></p>
  <p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>              </span></span></p>
  <p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>              </span>//
  3 </span><span style='font-family:宋体;mso-ascii-font-family:"Times New Roman";
  mso-hansi-font-family:"Times New Roman"'>打印返回的结果</span></p>
  <p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>              </span>System.<b><i>out</i></b>.println(&quot;index:&quot;
  + indexResponse.getIndex());</span></p>
  <p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>              </span>System.<b><i>out</i></b>.println(&quot;type:&quot;
  + indexResponse.getType());</span></p>
  <p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>              </span>System.<b><i>out</i></b>.println(&quot;id:&quot;
  + indexResponse.getId());</span></p>
  <p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>              </span>System.<b><i>out</i></b>.println(&quot;version:&quot;
  + indexResponse.getVersion());</span></p>
  <p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>              </span>System.<b><i>out</i></b>.println(&quot;create:&quot;
  + indexResponse.getResult());</span></p>
  <p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>
  <p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>              </span>//
  4 </span><span style='font-family:宋体;mso-ascii-font-family:"Times New Roman";
  mso-hansi-font-family:"Times New Roman"'>关闭连接</span></p>
  <p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>              </span>client.close();</span></p>
  <p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>       </span>}</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='line-height:150%'><span lang=EN-US>2</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>）结果查看</span></p>

<p class=MsoNormal><span lang=EN-US style='mso-no-proof:yes'><!--[if gte vml 1]><v:shape
 id="_x0000_i1059" type="#_x0000_t75" style='width:538.2pt;height:160.8pt;
 visibility:visible'>
 <v:imagedata src="Elasticsearch.files/image058.png" o:title=""/>
</v:shape><![endif]--><![if !vml]><img border=0 width=897 height=268
src="Elasticsearch.files/image058.png" v:shapes="_x0000_i1059"><![endif]><o:p></o:p></span></p>

<h3 style='margin:0cm;margin-bottom:.0001pt'><span lang=EN-US style='font-size:
12.0pt;line-height:172%'>3.1.11 </span><span style='font-size:12.0pt;
line-height:172%;font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>更新文档数据（</span><span lang=EN-US
style='font-size:12.0pt;line-height:172%'>upsert</span><span style='font-size:
12.0pt;line-height:172%;font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>）</span><span lang=EN-US
style='font-size:12.0pt;line-height:172%'><o:p></o:p></span></h3>

<p class=MsoNormal style='line-height:150%'><span style='font-family:宋体;
mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:"Times New Roman"'>设置查询条件</span><span
lang=EN-US>, </span><span style='font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>查找不到则添加</span><span lang=EN-US
style='color:red'>indexRequest</span><span style='font-family:宋体;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>内容，查找到则按照</span><span
lang=EN-US style='color:red'>upsert</span><span style='font-family:宋体;
mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:"Times New Roman"'>更新。</span></p>

<table class=MsoNormalTable border=1 cellspacing=0 cellpadding=0
 style='margin-left:5.4pt;border-collapse:collapse;border:none;mso-border-alt:
 solid windowtext .5pt;mso-yfti-tbllook:1184;mso-padding-alt:0cm 5.4pt 0cm 5.4pt;
 mso-border-insideh:.5pt solid windowtext;mso-border-insidev:.5pt solid windowtext'>
 <tr style='mso-yfti-irow:0;mso-yfti-firstrow:yes;mso-yfti-lastrow:yes'>
  <td width=945 valign=top style='width:20.0cm;border:solid windowtext 1.0pt;
  mso-border-alt:solid windowtext .5pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal style='text-indent:21.0pt;mso-char-indent-count:2.0'><span
  lang=EN-US>@Test</span></p>
  <p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>       </span><b>public</b>
  <b>void</b> testUpsert() <b>throws</b> Exception {</span></p>
  <p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>
  <p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>              </span>//
  </span><span style='font-family:宋体;mso-ascii-font-family:"Times New Roman";
  mso-hansi-font-family:"Times New Roman"'>设置查询条件</span><span lang=EN-US>, </span><span
  style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
  "Times New Roman"'>查找不到则添加（没有这个文档就创建）</span></p>
  <p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>              </span>IndexRequest
  <span style='color:red'>indexRequest</span> = <b>new</b>
  IndexRequest(&quot;blog&quot;, &quot;article&quot;, &quot;5&quot;)</span></p>
  <p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:4'>                            </span>.source(XContentFactory.<i>jsonBuilder</i>().startObject().field(&quot;title&quot;,
  &quot;</span><span style='font-family:宋体;mso-ascii-font-family:"Times New Roman";
  mso-hansi-font-family:"Times New Roman"'>搜索服务器</span><span lang=EN-US>&quot;)</span></p>
  <p class=MsoNormal style='text-indent:84.0pt;mso-char-indent-count:8.0'><span
  lang=EN-US>.field(&quot;content&quot;,&quot;</span><span style='font-family:
  宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:"Times New Roman"'>它提供了一个分布式多用户能力的全文搜索引擎，基于</span><span
  lang=EN-US>RESTful web</span><span style='font-family:宋体;mso-ascii-font-family:
  "Times New Roman";mso-hansi-font-family:"Times New Roman"'>接口。</span><span
  lang=EN-US>Elasticsearch</span><span style='font-family:宋体;mso-ascii-font-family:
  "Times New Roman";mso-hansi-font-family:"Times New Roman"'>是用</span><span
  lang=EN-US>Java</span><span style='font-family:宋体;mso-ascii-font-family:"Times New Roman";
  mso-hansi-font-family:"Times New Roman"'>开发的，并作为</span><span lang=EN-US>Apache</span><span
  style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
  "Times New Roman"'>许可条款下的开放源码发布，是当前流行的企业级搜索引擎。设计用于云计算中，能够达到实时搜索，稳定，可靠，快速，安装使用方便。</span><span
  lang=EN-US>&quot;)</span></p>
  <p class=MsoNormal style='text-indent:84.0pt;mso-char-indent-count:8.0'><span
  lang=EN-US>.endObject());</span></p>
  <p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>              </span></span></p>
  <p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>              </span>//
  </span><span style='font-family:宋体;mso-ascii-font-family:"Times New Roman";
  mso-hansi-font-family:"Times New Roman"'>设置更新</span><span lang=EN-US>, </span><span
  style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
  "Times New Roman"'>查找到更新下面的设置（有文档内容就更新）</span></p>
  <p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>              </span>UpdateRequest
  <span style='color:red'>upsert</span> = <b>new</b>
  UpdateRequest(&quot;blog&quot;, &quot;article&quot;, &quot;5&quot;)</span></p>
  <p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:4'>                            </span>.doc(XContentFactory.<i>jsonBuilder</i>().startObject().field(&quot;user&quot;,
  &quot;</span><span style='font-family:宋体;mso-ascii-font-family:"Times New Roman";
  mso-hansi-font-family:"Times New Roman"'>李四</span><span lang=EN-US>&quot;).endObject()).upsert(<span
  style='color:red'>indexRequest</span>);</span></p>
  <p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>
  <p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>              </span>client.update(<span
  style='color:red'>upsert</span>).get();</span></p>
  <p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>              </span>client.close();</span></p>
  <p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>       </span>}</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='line-height:150%'><span style='font-family:宋体;
mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:"Times New Roman";
mso-no-proof:yes'>第一次执行</span><span lang=EN-US style='mso-no-proof:yes'><o:p></o:p></span></p>

<p class=MsoNormal style='line-height:150%'><span lang=EN-US style='mso-no-proof:
yes'>hadoop102:9200/blog/article/5</span><span style='font-family:宋体;
mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:"Times New Roman";
mso-no-proof:yes'>（创建）</span><span lang=EN-US style='mso-no-proof:yes'><o:p></o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='mso-no-proof:yes'><!--[if gte vml 1]><v:shape
 id="_x0000_i1060" type="#_x0000_t75" style='width:541.2pt;height:57pt;
 visibility:visible'>
 <v:imagedata src="Elasticsearch.files/image060.png" o:title=""/>
</v:shape><![endif]--><![if !vml]><img border=0 width=902 height=95
src="Elasticsearch.files/image060.png" v:shapes="_x0000_i1060"><![endif]><o:p></o:p></span></p>

<p class=MsoNormal style='line-height:150%'><span style='font-family:宋体;
mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:"Times New Roman"'>第二次执行</span></p>

<p class=MsoNormal style='line-height:150%'><span lang=EN-US style='mso-no-proof:
yes'>hadoop102:9200/blog/article/5</span><span style='font-family:宋体;
mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:"Times New Roman";
mso-no-proof:yes'>（更新）</span><span lang=EN-US style='mso-no-proof:yes'><o:p></o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='mso-no-proof:yes'><!--[if gte vml 1]><v:shape
 id="_x0000_i1061" type="#_x0000_t75" style='width:540.6pt;height:58.8pt;
 visibility:visible'>
 <v:imagedata src="Elasticsearch.files/image062.png" o:title=""/>
</v:shape><![endif]--><![if !vml]><img border=0 width=901 height=98
src="Elasticsearch.files/image062.png" v:shapes="_x0000_i1061"><![endif]></span></p>

<h3 style='margin:0cm;margin-bottom:.0001pt'><span lang=EN-US style='font-size:
12.0pt;line-height:172%'>3.1.12 </span><span style='font-size:12.0pt;
line-height:172%;font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>删除文档数据（</span><span lang=EN-US
style='font-size:10.5pt;mso-bidi-font-size:11.0pt;line-height:172%;font-family:
"Calibri","sans-serif";mso-bidi-font-family:"Times New Roman";font-weight:normal'>prepareDelete</span><span
style='font-size:12.0pt;line-height:172%;font-family:宋体;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>）</span><span
lang=EN-US style='font-size:12.0pt;line-height:172%'><o:p></o:p></span></h3>

<p class=MsoNormal style='line-height:150%'><span lang=EN-US>1</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>）源代码</span></p>

<table class=MsoNormalTable border=1 cellspacing=0 cellpadding=0
 style='margin-left:5.4pt;border-collapse:collapse;border:none;mso-border-alt:
 solid windowtext .5pt;mso-yfti-tbllook:1184;mso-padding-alt:0cm 5.4pt 0cm 5.4pt;
 mso-border-insideh:.5pt solid windowtext;mso-border-insidev:.5pt solid windowtext'>
 <tr style='mso-yfti-irow:0;mso-yfti-firstrow:yes;mso-yfti-lastrow:yes'>
  <td width=685 valign=top style='width:411.1pt;border:solid windowtext 1.0pt;
  mso-border-alt:solid windowtext .5pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>       </span>@Test</span></p>
  <p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>       </span><b>public</b>
  <b>void</b> deleteData() {</span></p>
  <p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>              </span></span></p>
  <p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>              </span>//
  1 </span><span style='font-family:宋体;mso-ascii-font-family:"Times New Roman";
  mso-hansi-font-family:"Times New Roman"'>删除文档数据</span></p>
  <p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>              </span>DeleteResponse
  indexResponse = client.prepareDelete(&quot;blog&quot;, &quot;article&quot;,
  &quot;5&quot;).get();</span></p>
  <p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>
  <p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>              </span>//
  2 </span><span style='font-family:宋体;mso-ascii-font-family:"Times New Roman";
  mso-hansi-font-family:"Times New Roman"'>打印返回的结果</span></p>
  <p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>              </span>System.<b><i>out</i></b>.println(&quot;index:&quot;
  + indexResponse.getIndex());</span></p>
  <p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>              </span>System.<b><i>out</i></b>.println(&quot;type:&quot;
  + indexResponse.getType());</span></p>
  <p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>              </span>System.<b><i>out</i></b>.println(&quot;id:&quot;
  + indexResponse.getId());</span></p>
  <p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>              </span>System.<b><i>out</i></b>.println(&quot;version:&quot;
  + indexResponse.getVersion());</span></p>
  <p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>              </span>System.<b><i>out</i></b>.println(&quot;found:&quot;
  + indexResponse.getResult());</span></p>
  <p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>
  <p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>              </span>//
  3 </span><span style='font-family:宋体;mso-ascii-font-family:"Times New Roman";
  mso-hansi-font-family:"Times New Roman"'>关闭连接</span></p>
  <p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>              </span>client.close();</span></p>
  <p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>       </span>}</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='line-height:150%'><span lang=EN-US>2</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>）结果查看</span></p>

<p class=MsoNormal><span lang=EN-US style='mso-no-proof:yes'><!--[if gte vml 1]><v:shape
 id="_x0000_i1062" type="#_x0000_t75" style='width:415.2pt;height:113.4pt;
 visibility:visible'>
 <v:imagedata src="Elasticsearch.files/image064.png" o:title=""/>
</v:shape><![endif]--><![if !vml]><img border=0 width=692 height=189
src="Elasticsearch.files/image064.png" v:shapes="_x0000_i1062"><![endif]><o:p></o:p></span></p>

<h2 style='margin:0cm;margin-bottom:.0001pt'><span lang=EN-US style='font-size:
14.0pt;line-height:172%'>3.2 </span><span style='font-size:14.0pt;line-height:
172%;font-family:黑体;mso-ascii-font-family:Arial;mso-hansi-font-family:Arial'>条件查询</span><span
lang=EN-US style='font-size:14.0pt;line-height:172%'>QueryBuilder<o:p></o:p></span></h2>

<h3 style='margin:0cm;margin-bottom:.0001pt'><span lang=EN-US style='font-size:
12.0pt;line-height:172%'>3.2.1 </span><span style='font-size:12.0pt;line-height:
172%;font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>查询所有（</span><span lang=EN-US style='font-size:12.0pt;
line-height:172%'>matchAllQuery</span><span style='font-size:12.0pt;line-height:
172%;font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>）</span><span lang=EN-US style='font-size:12.0pt;line-height:
172%'><o:p></o:p></span></h3>

<p class=MsoNormal style='line-height:150%'><span lang=EN-US>1</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>）源代码</span></p>

<table class=MsoNormalTable border=1 cellspacing=0 cellpadding=0
 style='margin-left:5.4pt;border-collapse:collapse;border:none;mso-border-alt:
 solid windowtext .5pt;mso-yfti-tbllook:1184;mso-padding-alt:0cm 5.4pt 0cm 5.4pt;
 mso-border-insideh:.5pt solid windowtext;mso-border-insidev:.5pt solid windowtext'>
 <tr style='mso-yfti-irow:0;mso-yfti-firstrow:yes;mso-yfti-lastrow:yes'>
  <td width=839 valign=top style='width:503.25pt;border:solid windowtext 1.0pt;
  mso-border-alt:solid windowtext .5pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal style='text-indent:21.0pt;mso-char-indent-count:2.0'><span
  lang=EN-US>@Test</span></p>
  <p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>       </span><b>public</b>
  <b>void</b> matchAllQuery() {</span></p>
  <p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>              </span></span></p>
  <p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>       </span><span
  style='mso-tab-count:1'>       </span>// 1 </span><span style='font-family:
  宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:"Times New Roman"'>执行查询（</span><span
  lang=EN-US>QueryBuilders.<i>matchAllQuery</i>()</span><span style='font-family:
  宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:"Times New Roman"'>查询所有）</span></p>
  <p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>              </span>SearchResponse
  searchResponse =
  client.prepareSearch(&quot;blog&quot;).setTypes(&quot;article&quot;)</span></p>
  <p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:4'>                            </span>.setQuery(QueryBuilders.<i>matchAllQuery</i>()).get();</span></p>
  <p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>
  <p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>              </span>//
  2 </span><span style='font-family:宋体;mso-ascii-font-family:"Times New Roman";
  mso-hansi-font-family:"Times New Roman"'>打印查询结果</span></p>
  <p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>              </span>SearchHits
  hits = searchResponse.getHits(); // </span><span style='font-family:宋体;
  mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:"Times New Roman"'>获取命中次数，查询结果有多少对象</span></p>
  <p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>              </span>System.<b><i>out</i></b>.println(&quot;</span><span
  style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
  "Times New Roman"'>查询结果有：</span><span lang=EN-US>&quot; + hits.getTotalHits()
  + &quot;</span><span style='font-family:宋体;mso-ascii-font-family:"Times New Roman";
  mso-hansi-font-family:"Times New Roman"'>条</span><span lang=EN-US>&quot;);</span></p>
  <p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>
  <p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>              </span>Iterator&lt;SearchHit&gt;
  iterator = hits.iterator();</span></p>
  <p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>
  <p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>              </span><b>while</b>
  (iterator.hasNext()) {</span></p>
  <p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:3'>                     </span>SearchHit
  searchHit = iterator.next(); // </span><span style='font-family:宋体;
  mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:"Times New Roman"'>每个查询对象</span></p>
  <p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>
  <p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:3'>                     </span>System.<b><i>out</i></b>.println(searchHit.getSourceAsString());
  // </span><span style='font-family:宋体;mso-ascii-font-family:"Times New Roman";
  mso-hansi-font-family:"Times New Roman"'>获取字符串格式打印</span></p>
  <p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>              </span>}</span></p>
  <p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>
  <p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>              </span>//
  3 </span><span style='font-family:宋体;mso-ascii-font-family:"Times New Roman";
  mso-hansi-font-family:"Times New Roman"'>关闭连接</span></p>
  <p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>              </span>client.close();</span></p>
  <p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>       </span>}</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='line-height:150%'><span lang=EN-US>2</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>）结果查看</span></p>

<p class=MsoNormal><span lang=EN-US style='mso-no-proof:yes'><!--[if gte vml 1]><v:shape
 id="_x0000_i1063" type="#_x0000_t75" style='width:526.2pt;height:75pt;
 visibility:visible'>
 <v:imagedata src="Elasticsearch.files/image066.png" o:title=""/>
</v:shape><![endif]--><![if !vml]><img border=0 width=877 height=125
src="Elasticsearch.files/image066.png" v:shapes="_x0000_i1063"><![endif]></span></p>

<h3 style='margin:0cm;margin-bottom:.0001pt'><span lang=EN-US style='font-size:
12.0pt;line-height:172%'>3.2.2 </span><span style='font-size:12.0pt;line-height:
172%;font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>对所有字段分词查询（</span><span lang=EN-US style='font-size:12.0pt;
line-height:172%'>queryStringQuery</span><span style='font-size:12.0pt;
line-height:172%;font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>）</span><span lang=EN-US
style='font-size:12.0pt;line-height:172%'><o:p></o:p></span></h3>

<p class=MsoNormal style='line-height:150%'><span lang=EN-US>1</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>）源代码</span></p>

<table class=MsoNormalTable border=1 cellspacing=0 cellpadding=0
 style='margin-left:5.4pt;border-collapse:collapse;border:none;mso-border-alt:
 solid windowtext .5pt;mso-yfti-tbllook:1184;mso-padding-alt:0cm 5.4pt 0cm 5.4pt;
 mso-border-insideh:.5pt solid windowtext;mso-border-insidev:.5pt solid windowtext'>
 <tr style='mso-yfti-irow:0;mso-yfti-firstrow:yes;mso-yfti-lastrow:yes'>
  <td width=803 valign=top style='width:17.0cm;border:solid windowtext 1.0pt;
  mso-border-alt:solid windowtext .5pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>       </span>@Test</span></p>
  <p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>       </span><b>public</b>
  <b>void</b> query() {</span></p>
  <p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>              </span>//
  1 </span><span style='font-family:宋体;mso-ascii-font-family:"Times New Roman";
  mso-hansi-font-family:"Times New Roman"'>条件查询（</span><span lang=EN-US>&quot;</span><span
  style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
  "Times New Roman"'>全文</span><span lang=EN-US>&quot;</span><span
  style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
  "Times New Roman"'>表示全字能查到的、文字能查到的都返回，是把一个个字做索引，但是只要符合一个索引的都拿过来）</span></p>
  <p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>              </span>SearchResponse
  searchResponse = client.prepareSearch(&quot;blog&quot;).setTypes(&quot;article&quot;)</span></p>
  <p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:4'>                            </span>.setQuery(QueryBuilders.<i>queryStringQuery</i>(&quot;</span><span
  style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
  "Times New Roman"'>全文</span><span lang=EN-US>&quot;)).get();</span></p>
  <p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>
  <p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>              </span>//
  2 </span><span style='font-family:宋体;mso-ascii-font-family:"Times New Roman";
  mso-hansi-font-family:"Times New Roman"'>打印查询结果</span></p>
  <p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>              </span>SearchHits
  hits = searchResponse.getHits(); // </span><span style='font-family:宋体;
  mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:"Times New Roman"'>获取命中次数，查询结果有多少对象</span></p>
  <p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>              </span>System.<b><i>out</i></b>.println(&quot;</span><span
  style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
  "Times New Roman"'>查询结果有：</span><span lang=EN-US>&quot; + hits.getTotalHits()
  + &quot;</span><span style='font-family:宋体;mso-ascii-font-family:"Times New Roman";
  mso-hansi-font-family:"Times New Roman"'>条</span><span lang=EN-US>&quot;);</span></p>
  <p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>              </span></span></p>
  <p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>              </span>Iterator&lt;SearchHit&gt;
  iterator = hits.iterator();</span></p>
  <p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>              </span></span></p>
  <p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>              </span><b>while</b>
  (iterator.hasNext()) {</span></p>
  <p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:3'>                     </span>SearchHit
  searchHit = iterator.next(); // </span><span style='font-family:宋体;
  mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:"Times New Roman"'>每个查询对象</span></p>
  <p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:3'>                     </span></span></p>
  <p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:3'>                     </span>System.<b><i>out</i></b>.println(searchHit.getSourceAsString());
  // </span><span style='font-family:宋体;mso-ascii-font-family:"Times New Roman";
  mso-hansi-font-family:"Times New Roman"'>获取字符串格式打印</span></p>
  <p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>              </span>}</span></p>
  <p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>              </span></span></p>
  <p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>              </span>//
  3 </span><span style='font-family:宋体;mso-ascii-font-family:"Times New Roman";
  mso-hansi-font-family:"Times New Roman"'>关闭连接</span></p>
  <p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>              </span>client.close();</span></p>
  <p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>       </span>}</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='line-height:150%'><span lang=EN-US>2</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>）结果查看</span></p>

<p class=MsoNormal><span lang=EN-US style='mso-no-proof:yes'><!--[if gte vml 1]><v:shape
 id="_x0000_i1064" type="#_x0000_t75" style='width:554.4pt;height:73.2pt;
 visibility:visible'>
 <v:imagedata src="Elasticsearch.files/image068.png" o:title=""/>
</v:shape><![endif]--><![if !vml]><img border=0 width=924 height=122
src="Elasticsearch.files/image068.png" v:shapes="_x0000_i1064"><![endif]><o:p></o:p></span></p>

<h3 style='margin:0cm;margin-bottom:.0001pt'><span lang=EN-US style='font-size:
12.0pt;line-height:172%'>3.2.3 </span><span style='font-size:12.0pt;line-height:
172%;font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>通配符查询（</span><span lang=EN-US style='font-size:12.0pt;
line-height:172%'>wildcardQuery</span><span style='font-size:12.0pt;line-height:
172%;font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>）</span><span lang=EN-US style='font-size:12.0pt;line-height:
172%'><o:p></o:p></span></h3>

<p class=MsoNormal style='line-height:150%'><span lang=EN-US>*</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>：表示多个字符（任意的字符）</span></p>

<p class=MsoNormal style='line-height:150%'><span style='font-family:宋体;
mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:"Times New Roman"'>？：表示单个字符</span></p>

<p class=MsoNormal style='line-height:150%'><span lang=EN-US>1</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>）源代码</span></p>

<table class=MsoNormalTable border=1 cellspacing=0 cellpadding=0
 style='margin-left:5.4pt;border-collapse:collapse;border:none;mso-border-alt:
 solid windowtext .5pt;mso-yfti-tbllook:1184;mso-padding-alt:0cm 5.4pt 0cm 5.4pt;
 mso-border-insideh:.5pt solid windowtext;mso-border-insidev:.5pt solid windowtext'>
 <tr style='mso-yfti-irow:0;mso-yfti-firstrow:yes;mso-yfti-lastrow:yes'>
  <td width=803 valign=top style='width:17.0cm;border:solid windowtext 1.0pt;
  mso-border-alt:solid windowtext .5pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal style='text-indent:21.0pt;mso-char-indent-count:2.0'><span
  lang=EN-US>@Test</span></p>
  <p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>       </span><b>public</b>
  <b>void</b> wildcardQuery() {</span></p>
  <p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>
  <p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>              </span>//
  1 </span><span style='font-family:宋体;mso-ascii-font-family:"Times New Roman";
  mso-hansi-font-family:"Times New Roman"'>通配符查询</span></p>
  <p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>              </span>SearchResponse
  searchResponse =
  client.prepareSearch(&quot;blog&quot;).setTypes(&quot;article&quot;)</span></p>
  <p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:4'>                            </span>.setQuery(QueryBuilders.<i>wildcardQuery</i>(&quot;content&quot;,
  &quot;*</span><span style='font-family:宋体;mso-ascii-font-family:"Times New Roman";
  mso-hansi-font-family:"Times New Roman"'>全</span><span lang=EN-US>*&quot;)).get();</span></p>
  <p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>
  <p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>              </span>//
  2 </span><span style='font-family:宋体;mso-ascii-font-family:"Times New Roman";
  mso-hansi-font-family:"Times New Roman"'>打印查询结果</span></p>
  <p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>              </span>SearchHits
  hits = searchResponse.getHits(); // </span><span style='font-family:宋体;
  mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:"Times New Roman"'>获取命中次数，查询结果有多少对象</span></p>
  <p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>              </span>System.<b><i>out</i></b>.println(&quot;</span><span
  style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
  "Times New Roman"'>查询结果有：</span><span lang=EN-US>&quot; + hits.getTotalHits()
  + &quot;</span><span style='font-family:宋体;mso-ascii-font-family:"Times New Roman";
  mso-hansi-font-family:"Times New Roman"'>条</span><span lang=EN-US>&quot;);</span></p>
  <p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>
  <p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>              </span>Iterator&lt;SearchHit&gt;
  iterator = hits.iterator();</span></p>
  <p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>
  <p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>              </span><b>while</b>
  (iterator.hasNext()) {</span></p>
  <p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:3'>                     </span>SearchHit
  searchHit = iterator.next(); // </span><span style='font-family:宋体;
  mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:"Times New Roman"'>每个查询对象</span></p>
  <p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>
  <p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:3'>                     </span>System.<b><i>out</i></b>.println(searchHit.getSourceAsString());
  // </span><span style='font-family:宋体;mso-ascii-font-family:"Times New Roman";
  mso-hansi-font-family:"Times New Roman"'>获取字符串格式打印</span></p>
  <p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>              </span>}</span></p>
  <p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>
  <p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>              </span>//
  3 </span><span style='font-family:宋体;mso-ascii-font-family:"Times New Roman";
  mso-hansi-font-family:"Times New Roman"'>关闭连接</span></p>
  <p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>              </span>client.close();</span></p>
  <p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>       </span>}</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='line-height:150%'><span lang=EN-US>2</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>）结果查看</span></p>

<p class=MsoNormal><span lang=EN-US style='mso-no-proof:yes'><!--[if gte vml 1]><v:shape
 id="_x0000_i1065" type="#_x0000_t75" style='width:496.8pt;height:69.6pt;
 visibility:visible'>
 <v:imagedata src="Elasticsearch.files/image070.png" o:title=""/>
</v:shape><![endif]--><![if !vml]><img border=0 width=828 height=116
src="Elasticsearch.files/image070.png" v:shapes="_x0000_i1065"><![endif]></span></p>

<h3 style='margin:0cm;margin-bottom:.0001pt'><span lang=EN-US style='font-size:
12.0pt;line-height:172%'>3.2.4 </span><span style='font-size:12.0pt;line-height:
172%;font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>词条查询（</span><span lang=EN-US style='font-size:12.0pt;
line-height:172%'>TermQuery</span><span style='font-size:12.0pt;line-height:
172%;font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>）</span><span lang=EN-US style='font-size:12.0pt;line-height:
172%'><o:p></o:p></span></h3>

<p class=MsoNormal style='line-height:150%'><span lang=EN-US>1</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>）源代码</span></p>

<table class=MsoNormalTable border=1 cellspacing=0 cellpadding=0
 style='margin-left:5.4pt;border-collapse:collapse;border:none;mso-border-alt:
 solid windowtext .5pt;mso-yfti-tbllook:1184;mso-padding-alt:0cm 5.4pt 0cm 5.4pt;
 mso-border-insideh:.5pt solid windowtext;mso-border-insidev:.5pt solid windowtext'>
 <tr style='mso-yfti-irow:0;mso-yfti-firstrow:yes;mso-yfti-lastrow:yes'>
  <td width=780 valign=top style='width:467.8pt;border:solid windowtext 1.0pt;
  mso-border-alt:solid windowtext .5pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal style='text-indent:21.0pt;mso-char-indent-count:2.0'><span
  lang=EN-US>@Test</span></p>
  <p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>       </span><b>public</b>
  <b>void</b> termQuery() {</span></p>
  <p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>              </span></span></p>
  <p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>              </span>//
  1 </span><span style='font-family:宋体;mso-ascii-font-family:"Times New Roman";
  mso-hansi-font-family:"Times New Roman"'>第一</span><span lang=EN-US>field</span><span
  style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
  "Times New Roman"'>查询（</span><span lang=EN-US>&quot;content&quot;, &quot;</span><span
  style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
  "Times New Roman"'>全</span><span lang=EN-US>&quot;</span><span
  style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
  "Times New Roman"'>表示</span><span lang=EN-US>content</span><span
  style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
  "Times New Roman"'>字段中有全字的，注意这是对一个个字做索引，如果有改为“全文”则无结果，因为没有该“全文”索引，用</span><span
  lang=EN-US>ik</span><span style='font-family:宋体;mso-ascii-font-family:"Times New Roman";
  mso-hansi-font-family:"Times New Roman"'>的方式才会对每个词做索引）</span></p>
  <p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>              </span>SearchResponse
  searchResponse =
  client.prepareSearch(&quot;blog&quot;).setTypes(&quot;article&quot;)</span></p>
  <p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:4'>                            </span>.setQuery(QueryBuilders.<i>termQuery</i>(&quot;content&quot;,
  &quot;</span><span style='font-family:宋体;mso-ascii-font-family:"Times New Roman";
  mso-hansi-font-family:"Times New Roman"'>全</span><span lang=EN-US>&quot;)).get();</span></p>
  <p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>              </span></span></p>
  <p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>              </span>//
  2 </span><span style='font-family:宋体;mso-ascii-font-family:"Times New Roman";
  mso-hansi-font-family:"Times New Roman"'>打印查询结果</span></p>
  <p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>              </span>SearchHits
  hits = searchResponse.getHits(); // </span><span style='font-family:宋体;
  mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:"Times New Roman"'>获取命中次数，查询结果有多少对象</span></p>
  <p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>              </span>System.<b><i>out</i></b>.println(&quot;</span><span
  style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
  "Times New Roman"'>查询结果有：</span><span lang=EN-US>&quot; + hits.getTotalHits()
  + &quot;</span><span style='font-family:宋体;mso-ascii-font-family:"Times New Roman";
  mso-hansi-font-family:"Times New Roman"'>条</span><span lang=EN-US>&quot;);</span></p>
  <p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>
  <p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>              </span>Iterator&lt;SearchHit&gt;
  iterator = hits.iterator();</span></p>
  <p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>
  <p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>              </span><b>while</b>
  (iterator.hasNext()) {</span></p>
  <p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:3'>                     </span>SearchHit
  searchHit = iterator.next(); // </span><span style='font-family:宋体;
  mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:"Times New Roman"'>每个查询对象</span></p>
  <p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>
  <p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:3'>                     </span>System.<b><i>out</i></b>.println(searchHit.getSourceAsString());
  // </span><span style='font-family:宋体;mso-ascii-font-family:"Times New Roman";
  mso-hansi-font-family:"Times New Roman"'>获取字符串格式打印</span></p>
  <p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>       </span><span
  style='mso-tab-count:1'>       </span>}</span></p>
  <p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>
  <p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>              </span>//
  3 </span><span style='font-family:宋体;mso-ascii-font-family:"Times New Roman";
  mso-hansi-font-family:"Times New Roman"'>关闭连接</span></p>
  <p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>              </span>client.close();</span></p>
  <p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>       </span>}</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='line-height:150%'><span lang=EN-US>2</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>）结果查看</span></p>

<p class=MsoNormal><span lang=EN-US style='mso-no-proof:yes'><!--[if gte vml 1]><v:shape
 id="_x0000_i1066" type="#_x0000_t75" style='width:540pt;height:77.4pt;
 visibility:visible'>
 <v:imagedata src="Elasticsearch.files/image072.png" o:title=""/>
</v:shape><![endif]--><![if !vml]><img border=0 width=900 height=129
src="Elasticsearch.files/image072.png" v:shapes="_x0000_i1066"><![endif]><o:p></o:p></span></p>

<h3 style='margin:0cm;margin-bottom:.0001pt'><span lang=EN-US style='font-size:
12.0pt;line-height:172%'>3.2.5 </span><span style='font-size:12.0pt;line-height:
172%;font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>模糊查询（</span><span lang=EN-US style='font-size:12.0pt;
line-height:172%'>fuzzy</span><span style='font-size:12.0pt;line-height:172%;
font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>）</span><span lang=EN-US style='font-size:12.0pt;line-height:
172%'><o:p></o:p></span></h3>

<p class=MsoNormal><span style='font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>强大</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<table class=MsoNormalTable border=1 cellspacing=0 cellpadding=0
 style='margin-left:5.4pt;border-collapse:collapse;border:none;mso-border-alt:
 solid windowtext .5pt;mso-yfti-tbllook:1184;mso-padding-alt:0cm 5.4pt 0cm 5.4pt;
 mso-border-insideh:.5pt solid windowtext;mso-border-insidev:.5pt solid windowtext'>
 <tr style='mso-yfti-irow:0;mso-yfti-firstrow:yes;mso-yfti-lastrow:yes'>
  <td width=780 valign=top style='width:467.8pt;border:solid windowtext 1.0pt;
  mso-border-alt:solid windowtext .5pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal style='text-indent:21.0pt;mso-char-indent-count:2.0'><span
  lang=EN-US>@Test</span></p>
  <p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>       </span><b>public</b>
  <b>void</b> fuzzy() {</span></p>
  <p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>              </span></span></p>
  <p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>              </span>//
  1 </span><span style='font-family:宋体;mso-ascii-font-family:"Times New Roman";
  mso-hansi-font-family:"Times New Roman"'>模糊查询</span></p>
  <p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>              </span>SearchResponse
  searchResponse =
  client.prepareSearch(&quot;blog&quot;).setTypes(&quot;article&quot;)</span></p>
  <p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:4'>                            </span>.setQuery(QueryBuilders.<i>fuzzyQuery</i>(&quot;title&quot;,
  &quot;lucene&quot;)).get();</span></p>
  <p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>              </span></span></p>
  <p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>              </span>//
  2 </span><span style='font-family:宋体;mso-ascii-font-family:"Times New Roman";
  mso-hansi-font-family:"Times New Roman"'>打印查询结果</span></p>
  <p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>              </span>SearchHits
  hits = searchResponse.getHits(); // </span><span style='font-family:宋体;
  mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:"Times New Roman"'>获取命中次数，查询结果有多少对象</span></p>
  <p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>              </span>System.<b><i>out</i></b>.println(&quot;</span><span
  style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
  "Times New Roman"'>查询结果有：</span><span lang=EN-US>&quot; + hits.getTotalHits()
  + &quot;</span><span style='font-family:宋体;mso-ascii-font-family:"Times New Roman";
  mso-hansi-font-family:"Times New Roman"'>条</span><span lang=EN-US>&quot;);</span></p>
  <p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>
  <p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>              </span>Iterator&lt;SearchHit&gt;
  iterator = hits.iterator();</span></p>
  <p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>
  <p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>              </span><b>while</b>
  (iterator.hasNext()) {</span></p>
  <p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:3'>                     </span>SearchHit
  searchHit = iterator.next(); // </span><span style='font-family:宋体;
  mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:"Times New Roman"'>每个查询对象</span></p>
  <p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>
  <p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:3'>                     </span>System.<b><i>out</i></b>.println(searchHit.getSourceAsString());
  // </span><span style='font-family:宋体;mso-ascii-font-family:"Times New Roman";
  mso-hansi-font-family:"Times New Roman"'>获取字符串格式打印</span></p>
  <p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>              </span>}</span></p>
  <p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>
  <p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>              </span>//
  3 </span><span style='font-family:宋体;mso-ascii-font-family:"Times New Roman";
  mso-hansi-font-family:"Times New Roman"'>关闭连接</span></p>
  <p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>              </span>client.close();</span></p>
  <p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>       </span>}</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal><span style='font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>本来是大写，查询用了小写，也能查询，查询</span><span
lang=EN-US>lucen</span><span style='font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>也是能查询的，</span><span lang=EN-US>luce</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>就不行了，错的太离谱了。</span></p>

<p class=MsoNormal><span lang=EN-US style='mso-no-proof:yes'><!--[if gte vml 1]><v:shape
 id="_x0000_i1067" type="#_x0000_t75" style='width:567pt;height:22.8pt;
 visibility:visible'>
 <v:imagedata src="Elasticsearch.files/image074.png" o:title=""/>
</v:shape><![endif]--><![if !vml]><img border=0 width=945 height=38
src="Elasticsearch.files/image074.png" v:shapes="_x0000_i1067"><![endif]></span></p>

<h2 style='margin:0cm;margin-bottom:.0001pt'><span lang=EN-US style='font-size:
14.0pt;line-height:172%'>3.3 </span><span style='font-size:14.0pt;line-height:
172%;font-family:黑体;mso-ascii-font-family:Arial;mso-hansi-font-family:Arial'>映射相关操作</span><span
style='font-size:14.0pt;line-height:172%'> <span lang=EN-US><o:p></o:p></span></span></h2>

<p class=MsoNormal><span style='font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>也就是建表过程的限制条件。</span></p>

<p class=MsoNormal style='line-height:150%'><span lang=EN-US>1</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>）源代码</span></p>

<table class=MsoNormalTable border=1 cellspacing=0 cellpadding=0
 style='margin-left:5.4pt;border-collapse:collapse;border:none;mso-border-alt:
 solid windowtext .5pt;mso-yfti-tbllook:1184;mso-padding-alt:0cm 5.4pt 0cm 5.4pt;
 mso-border-insideh:.5pt solid windowtext;mso-border-insidev:.5pt solid windowtext'>
 <tr style='mso-yfti-irow:0;mso-yfti-firstrow:yes;mso-yfti-lastrow:yes'>
  <td width=921 valign=top style='width:552.85pt;border:solid windowtext 1.0pt;
  mso-border-alt:solid windowtext .5pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal style='text-indent:21.0pt;mso-char-indent-count:2.0'><span
  lang=EN-US>@Test</span></p>
  <p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>       </span>public
  void createMapping() throws Exception {</span></p>
  <p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>              </span></span></p>
  <p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>              </span>//
  1</span><span style='font-family:宋体;mso-ascii-font-family:"Times New Roman";
  mso-hansi-font-family:"Times New Roman"'>设置</span><span lang=EN-US>mapping</span><span
  style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
  "Times New Roman"'>（如果已经有了</span><span lang=EN-US>mapping</span><span
  style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
  "Times New Roman"'>就不能创建了，删除重建。而且索引要先创建，才能建立</span><span lang=EN-US>mapping</span><span
  style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
  "Times New Roman"'>）</span></p>
  <p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>              </span>XContentBuilder
  <span style='color:red'>builder</span> = XContentFactory.jsonBuilder()</span></p>
  <p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:4'>                            </span>.startObject()</span></p>
  <p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:5'>                                   </span>.startObject(&quot;article&quot;)</span></p>
  <p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:6'>                                          </span>.startObject(&quot;properties&quot;)</span></p>
  <p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:7'>                                                 </span>.startObject(&quot;id1&quot;)</span></p>
  <p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:8'>                                                        </span>.field(&quot;type&quot;,
  &quot;string&quot;)</span></p>
  <p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:8'>                                                        </span>.field(&quot;store&quot;,
  &quot;yes&quot;)</span></p>
  <p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:7'>                                                 </span>.endObject()</span></p>
  <p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:7'>                                                 </span>.startObject(&quot;title2&quot;)</span></p>
  <p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:8'>                                                        </span>.field(&quot;type&quot;,
  &quot;string&quot;)</span></p>
  <p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:8'>                                                        </span>.field(&quot;store&quot;,
  &quot;no&quot;)</span></p>
  <p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:7'>                                                 </span>.endObject()</span></p>
  <p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:7'>                                                 </span>.startObject(&quot;content&quot;)</span></p>
  <p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:8'>                                                        </span>.field(&quot;type&quot;,
  &quot;string&quot;)</span></p>
  <p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:3'>                     </span><span
  style='mso-tab-count:5'>                                   </span>.field(&quot;store&quot;,
  &quot;yes&quot;)</span></p>
  <p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:7'>                                                 </span>.endObject()</span></p>
  <p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:6'>                                          </span>.endObject()</span></p>
  <p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:5'>                                   </span>.endObject()</span></p>
  <p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:4'>                            </span>.endObject();</span></p>
  <p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>
  <p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>              </span>//
  2 </span><span style='font-family:宋体;mso-ascii-font-family:"Times New Roman";
  mso-hansi-font-family:"Times New Roman"'>添加</span><span lang=EN-US>mapping</span></p>
  <p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>              </span>PutMappingRequest
  <span style='color:red'>mapping</span> =
  Requests.putMappingRequest(&quot;blog4&quot;).type(&quot;article&quot;).source(<span
  style='color:red'>builder</span>);</span></p>
  <p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>              </span></span></p>
  <p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>              </span>client.admin().indices().putMapping(<span
  style='color:red'>mapping</span>).get();</span></p>
  <p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>              </span></span></p>
  <p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>              </span>//
  3 </span><span style='font-family:宋体;mso-ascii-font-family:"Times New Roman";
  mso-hansi-font-family:"Times New Roman"'>关闭资源</span></p>
  <p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>              </span>client.close();</span></p>
  <p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>       </span>}</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='line-height:150%'><span lang=EN-US>2</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>）查看结果</span></p>

<p class=MsoNormal><span lang=EN-US style='mso-no-proof:yes'><!--[if gte vml 1]><v:shape
 id="_x0000_i1068" type="#_x0000_t75" style='width:415.2pt;height:390.6pt;
 visibility:visible'>
 <v:imagedata src="Elasticsearch.files/image075.png" o:title=""/>
</v:shape><![endif]--><![if !vml]><img border=0 width=692 height=651
src="Elasticsearch.files/image075.png" v:shapes="_x0000_i1068"><![endif]></span></p>

</div>

</body>

</html>
