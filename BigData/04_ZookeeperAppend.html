<html xmlns:v="urn:schemas-microsoft-com:vml"
xmlns:o="urn:schemas-microsoft-com:office:office"
xmlns:w="urn:schemas-microsoft-com:office:word"
xmlns:m="http://schemas.microsoft.com/office/2004/12/omml"
xmlns="http://www.w3.org/TR/REC-html40">

<head>
<meta http-equiv=Content-Type content="text/html; charset=utf-8">
<meta name=ProgId content=Word.Document>
<meta name=Generator content="Microsoft Word 15">
<meta name=Originator content="Microsoft Word 15">
<link rel=File-List href="04_ZookeeperAppend.files/filelist.xml">
<link rel=Edit-Time-Data href="04_ZookeeperAppend.files/editdata.mso">
<link rel=themeData href="04_ZookeeperAppend.files/themedata.thmx">
<link rel=colorSchemeMapping
href="04_ZookeeperAppend.files/colorschememapping.xml">

<link href="./css/treemenu.css" rel="stylesheet" type="text/css">
<!-- GitHub Pages只认./js/xxx这种相对定位，不认js/xxx这种 -->
<script src="./js/jquery-3.4.1.min.js"></script>
<script src="./js/test.js"></script>
<script src="./js/treemenu.js"></script>
</head>

<body lang=ZH-CN link="#0563C1" vlink="#954F72" style='tab-interval:21.0pt;
text-justify-trim:punctuation'>

<div class=WordSection1 style='layout-grid:15.6pt'>

<div id="noScroll" class="divcss5-right">
	<ul id="menuId" class="tree">
	</ul>
	<div style="font-size: 10px; color: #161FB0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
 （Ctrl+滚动鼠标可缩放页面）</div>
</div> 

<p class=MsoNormal align=center style='text-align:center'><b style='mso-bidi-font-weight:
normal'><span lang=EN-US style='font-size:22.0pt;line-height:125%;font-family:
宋体'>Zookeeper</span></b><b style='mso-bidi-font-weight:normal'><span
style='font-size:22.0pt;line-height:125%;font-family:宋体'>入门<span lang=EN-US> - </span>追加<span
lang=EN-US><o:p></o:p></span></span></b></p>

<p class=MsoNormal align=right style='text-align:right;word-break:break-all'><span
style='font-size:12.0pt;mso-bidi-font-size:11.0pt;line-height:125%;font-family:
宋体;mso-ascii-font-family:Calibri;mso-ascii-theme-font:minor-latin;mso-hansi-font-family:
Calibri;mso-hansi-theme-font:minor-latin'>参考：马士兵</span><span lang=EN-US
style='font-size:12.0pt;mso-bidi-font-size:11.0pt;line-height:125%;mso-fareast-font-family:
宋体'> - Zookeeper</span><span style='font-size:12.0pt;mso-bidi-font-size:11.0pt;
line-height:125%;font-family:宋体;mso-ascii-font-family:Calibri;mso-ascii-theme-font:
minor-latin;mso-hansi-font-family:Calibri;mso-hansi-theme-font:minor-latin'>、尚硅谷的</span><span
lang=EN-US style='font-size:12.0pt;mso-bidi-font-size:11.0pt;line-height:125%;
mso-fareast-font-family:宋体'><o:p></o:p></span></p>

<p class=MsoNormal align=right style='text-align:right;word-break:break-all'><span
style='font-size:12.0pt;mso-bidi-font-size:11.0pt;line-height:125%;font-family:
宋体;mso-ascii-font-family:Calibri;mso-ascii-theme-font:minor-latin;mso-hansi-font-family:
Calibri;mso-hansi-theme-font:minor-latin'>制作日期：</span><span lang=EN-US
style='font-size:12.0pt;mso-bidi-font-size:11.0pt;line-height:125%;mso-fareast-font-family:
宋体'>2019-03-19 - 2019-03-21 | 2019-06-12 - <o:p></o:p></span></p>

<p class=MsoNormal align=right style='text-align:right'><span style='font-size:
12.0pt;mso-bidi-font-size:11.0pt;line-height:125%;font-family:宋体;mso-ascii-font-family:
Calibri;mso-ascii-theme-font:minor-latin;mso-hansi-font-family:Calibri;
mso-hansi-theme-font:minor-latin'>制作人：小</span><span style='font-family:宋体;
mso-ascii-font-family:Calibri;mso-ascii-theme-font:minor-latin;mso-fareast-theme-font:
minor-fareast;mso-hansi-font-family:Calibri;mso-hansi-theme-font:minor-latin'>邹</span><span
lang=EN-US style='font-size:12.0pt;mso-bidi-font-size:11.0pt;line-height:125%;
mso-fareast-font-family:宋体'>[yw_forgit@163.com]<o:p></o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='font-size:12.0pt;mso-bidi-font-size:
11.0pt;line-height:125%;mso-fareast-font-family:宋体'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='font-size:12.0pt;mso-bidi-font-size:
11.0pt;line-height:125%;mso-fareast-font-family:宋体'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span style='font-size:12.0pt;mso-bidi-font-size:11.0pt;
line-height:125%;font-family:宋体;mso-ascii-font-family:Calibri;mso-ascii-theme-font:
minor-latin;mso-hansi-font-family:Calibri;mso-hansi-theme-font:minor-latin'>最好是有前面</span><span
lang=EN-US style='font-size:12.0pt;mso-bidi-font-size:11.0pt;line-height:125%;
mso-fareast-font-family:宋体'>Hadoop</span><span style='font-size:12.0pt;
mso-bidi-font-size:11.0pt;line-height:125%;font-family:宋体;mso-ascii-font-family:
Calibri;mso-ascii-theme-font:minor-latin;mso-hansi-font-family:Calibri;
mso-hansi-theme-font:minor-latin'>这些知识，当然没有也可以。预备知识：</span><span lang=EN-US
style='font-size:12.0pt;mso-bidi-font-size:11.0pt;line-height:125%;mso-fareast-font-family:
宋体'>Linux</span><span style='font-size:12.0pt;mso-bidi-font-size:11.0pt;
line-height:125%;font-family:宋体;mso-ascii-font-family:Calibri;mso-ascii-theme-font:
minor-latin;mso-hansi-font-family:Calibri;mso-hansi-theme-font:minor-latin'>基础、</span><span
lang=EN-US style='font-size:12.0pt;mso-bidi-font-size:11.0pt;line-height:125%;
mso-fareast-font-family:宋体'>Java</span><span style='font-size:12.0pt;
mso-bidi-font-size:11.0pt;line-height:125%;font-family:宋体;mso-ascii-font-family:
Calibri;mso-ascii-theme-font:minor-latin;mso-hansi-font-family:Calibri;
mso-hansi-theme-font:minor-latin'>编程基础。</span><span lang=EN-US
style='font-size:12.0pt;mso-bidi-font-size:11.0pt;line-height:125%;mso-fareast-font-family:
宋体'><o:p></o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='font-size:12.0pt;mso-bidi-font-size:
11.0pt;line-height:125%;mso-fareast-font-family:宋体'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span style='font-size:12.0pt;mso-bidi-font-size:11.0pt;
line-height:125%;font-family:宋体;mso-ascii-font-family:Calibri;mso-ascii-theme-font:
minor-latin;mso-hansi-font-family:Calibri;mso-hansi-theme-font:minor-latin'>目标：学完今天就会开发分布式程序了，不是用，而是开发。</span><span
lang=EN-US style='font-size:12.0pt;mso-bidi-font-size:11.0pt;line-height:125%;
mso-fareast-font-family:宋体'><o:p></o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='font-size:12.0pt;mso-bidi-font-size:
11.0pt;line-height:125%;mso-fareast-font-family:宋体'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='font-size:12.0pt;mso-bidi-font-size:
11.0pt;line-height:125%;mso-fareast-font-family:宋体'><o:p>&nbsp;</o:p></span></p>

<h1><span lang=EN-US>1</span><span style='font-family:宋体;mso-ascii-font-family:
Calibri;mso-ascii-theme-font:minor-latin;mso-fareast-theme-font:minor-fareast;
mso-hansi-font-family:Calibri;mso-hansi-theme-font:minor-latin'>、</span><span
lang=EN-US>Zookeeper</span><span style='font-family:宋体;mso-ascii-font-family:
Calibri;mso-ascii-theme-font:minor-latin;mso-fareast-theme-font:minor-fareast;
mso-hansi-font-family:Calibri;mso-hansi-theme-font:minor-latin'>是什么、有什么用</span></h1>

<h2><span lang=EN-US>Zookeeper</span><span style='font-family:宋体;mso-ascii-font-family:
"Calibri Light";mso-ascii-theme-font:major-latin;mso-fareast-theme-font:major-fareast;
mso-hansi-font-family:"Calibri Light";mso-hansi-theme-font:major-latin'>核心</span></h2>

<p class=MsoNormal><b style='mso-bidi-font-weight:normal'><span lang=EN-US
style='font-size:12.0pt;mso-bidi-font-size:11.0pt;line-height:125%;mso-fareast-font-family:
宋体;color:red'>Zookeeper</span></b><b style='mso-bidi-font-weight:normal'><span
style='font-size:12.0pt;mso-bidi-font-size:11.0pt;line-height:125%;font-family:
宋体;mso-ascii-font-family:Calibri;mso-ascii-theme-font:minor-latin;mso-hansi-font-family:
Calibri;mso-hansi-theme-font:minor-latin;color:red'>核心：一致、有头、数据树。</span></b><b
style='mso-bidi-font-weight:normal'><span lang=EN-US style='font-size:12.0pt;
mso-bidi-font-size:11.0pt;line-height:125%;mso-fareast-font-family:宋体;
color:red'><o:p></o:p></span></b></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='font-size:12.0pt;mso-bidi-font-size:
11.0pt;line-height:125%;mso-fareast-font-family:宋体'>Hadoop</span><span
style='font-size:12.0pt;mso-bidi-font-size:11.0pt;line-height:125%;font-family:
宋体;mso-ascii-font-family:Calibri;mso-ascii-theme-font:minor-latin;mso-hansi-font-family:
Calibri;mso-hansi-theme-font:minor-latin'>这些分布式的程序都是以这个为基础的，</span><span
lang=EN-US style='font-size:12.0pt;mso-bidi-font-size:11.0pt;line-height:125%;
mso-fareast-font-family:宋体'>Zookeeper</span><span style='font-size:12.0pt;
mso-bidi-font-size:11.0pt;line-height:125%;font-family:宋体;mso-ascii-font-family:
Calibri;mso-ascii-theme-font:minor-latin;mso-hansi-font-family:Calibri;
mso-hansi-theme-font:minor-latin'>是开发其他分布式程序的</span><span lang=EN-US
style='font-size:12.0pt;mso-bidi-font-size:11.0pt;line-height:125%;mso-fareast-font-family:
宋体'>API</span><span style='font-size:12.0pt;mso-bidi-font-size:11.0pt;
line-height:125%;font-family:宋体;mso-ascii-font-family:Calibri;mso-ascii-theme-font:
minor-latin;mso-hansi-font-family:Calibri;mso-hansi-theme-font:minor-latin'>或者</span><span
lang=EN-US style='font-size:12.0pt;mso-bidi-font-size:11.0pt;line-height:125%;
mso-fareast-font-family:宋体'>lib</span><span style='font-size:12.0pt;mso-bidi-font-size:
11.0pt;line-height:125%;font-family:宋体;mso-ascii-font-family:Calibri;
mso-ascii-theme-font:minor-latin;mso-hansi-font-family:Calibri;mso-hansi-theme-font:
minor-latin'>，不算一个完整的产品。</span><span lang=EN-US style='font-size:12.0pt;
mso-bidi-font-size:11.0pt;line-height:125%;mso-fareast-font-family:宋体'><o:p></o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='font-size:12.0pt;mso-bidi-font-size:
11.0pt;line-height:125%;mso-fareast-font-family:宋体'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='font-size:12.0pt;mso-bidi-font-size:
11.0pt;line-height:125%;mso-fareast-font-family:宋体'>1</span><span
style='font-size:12.0pt;mso-bidi-font-size:11.0pt;line-height:125%;font-family:
宋体;mso-ascii-font-family:Calibri;mso-ascii-theme-font:minor-latin;mso-hansi-font-family:
Calibri;mso-hansi-theme-font:minor-latin'>）解决分布式系统数据一致性的问题。</span><span
lang=EN-US style='font-size:12.0pt;mso-bidi-font-size:11.0pt;line-height:125%;
mso-fareast-font-family:宋体'><o:p></o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='font-size:12.0pt;mso-bidi-font-size:
11.0pt;line-height:125%;mso-fareast-font-family:宋体'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='font-size:12.0pt;mso-bidi-font-size:
11.0pt;line-height:125%;mso-fareast-font-family:宋体'>2</span><span
style='font-size:12.0pt;mso-bidi-font-size:11.0pt;line-height:125%;font-family:
宋体;mso-ascii-font-family:Calibri;mso-ascii-theme-font:minor-latin;mso-hansi-font-family:
Calibri;mso-hansi-theme-font:minor-latin'>）协调一堆动物，</span><span lang=EN-US
style='font-size:12.0pt;mso-bidi-font-size:11.0pt;line-height:125%;mso-fareast-font-family:
宋体'>Zookeeper</span><span style='font-size:12.0pt;mso-bidi-font-size:11.0pt;
line-height:125%;font-family:宋体;mso-ascii-font-family:Calibri;mso-ascii-theme-font:
minor-latin;mso-hansi-font-family:Calibri;mso-hansi-theme-font:minor-latin'>的意思就是动物园管理者。比如协调</span><span
lang=EN-US style='font-size:12.0pt;mso-bidi-font-size:11.0pt;line-height:125%;
mso-fareast-font-family:宋体'>hadoop</span><span style='font-size:12.0pt;
mso-bidi-font-size:11.0pt;line-height:125%;font-family:宋体;mso-ascii-font-family:
Calibri;mso-ascii-theme-font:minor-latin;mso-hansi-font-family:Calibri;
mso-hansi-theme-font:minor-latin'>、</span><span lang=EN-US style='font-size:
12.0pt;mso-bidi-font-size:11.0pt;line-height:125%;mso-fareast-font-family:宋体'>impala</span><span
style='font-size:12.0pt;mso-bidi-font-size:11.0pt;line-height:125%;font-family:
宋体;mso-ascii-font-family:Calibri;mso-ascii-theme-font:minor-latin;mso-hansi-font-family:
Calibri;mso-hansi-theme-font:minor-latin'>、</span><span lang=EN-US
style='font-size:12.0pt;mso-bidi-font-size:11.0pt;line-height:125%;mso-fareast-font-family:
宋体'>shark</span><span style='font-size:12.0pt;mso-bidi-font-size:11.0pt;
line-height:125%;font-family:宋体;mso-ascii-font-family:Calibri;mso-ascii-theme-font:
minor-latin;mso-hansi-font-family:Calibri;mso-hansi-theme-font:minor-latin'>、</span><span
lang=EN-US style='font-size:12.0pt;mso-bidi-font-size:11.0pt;line-height:125%;
mso-fareast-font-family:宋体'>hive</span><span style='font-size:12.0pt;
mso-bidi-font-size:11.0pt;line-height:125%;font-family:宋体;mso-ascii-font-family:
Calibri;mso-ascii-theme-font:minor-latin;mso-hansi-font-family:Calibri;
mso-hansi-theme-font:minor-latin'>、</span><span lang=EN-US style='font-size:
12.0pt;mso-bidi-font-size:11.0pt;line-height:125%;mso-fareast-font-family:宋体'>mahout</span><span
style='font-size:12.0pt;mso-bidi-font-size:11.0pt;line-height:125%;font-family:
宋体;mso-ascii-font-family:Calibri;mso-ascii-theme-font:minor-latin;mso-hansi-font-family:
Calibri;mso-hansi-theme-font:minor-latin'>等。</span><span lang=EN-US
style='font-size:12.0pt;mso-bidi-font-size:11.0pt;line-height:125%;mso-fareast-font-family:
宋体'><o:p></o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='font-size:12.0pt;mso-bidi-font-size:
11.0pt;line-height:125%;mso-fareast-font-family:宋体'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='font-size:12.0pt;mso-bidi-font-size:
11.0pt;line-height:125%;mso-fareast-font-family:宋体'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='font-size:12.0pt;mso-bidi-font-size:
11.0pt;line-height:125%;mso-fareast-font-family:宋体'>Google</span><span
style='font-size:12.0pt;mso-bidi-font-size:11.0pt;line-height:125%;font-family:
宋体;mso-ascii-font-family:Calibri;mso-ascii-theme-font:minor-latin;mso-hansi-font-family:
Calibri;mso-hansi-theme-font:minor-latin'>的三篇论文</span><span lang=EN-US
style='font-size:12.0pt;mso-bidi-font-size:11.0pt;line-height:125%;mso-fareast-font-family:
宋体'><o:p></o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='font-size:12.0pt;mso-bidi-font-size:
11.0pt;line-height:125%;mso-fareast-font-family:宋体;color:red'>GFS</span><span
style='font-size:12.0pt;mso-bidi-font-size:11.0pt;line-height:125%;font-family:
宋体;mso-ascii-font-family:Calibri;mso-ascii-theme-font:minor-latin;mso-hansi-font-family:
Calibri;mso-hansi-theme-font:minor-latin;color:red'>（</span><span lang=EN-US
style='font-size:12.0pt;mso-bidi-font-size:11.0pt;line-height:125%;mso-fareast-font-family:
宋体;color:red'>Google File System</span><span style='font-size:12.0pt;
mso-bidi-font-size:11.0pt;line-height:125%;font-family:宋体;mso-ascii-font-family:
Calibri;mso-ascii-theme-font:minor-latin;mso-hansi-font-family:Calibri;
mso-hansi-theme-font:minor-latin;color:red'>）</span><span style='font-size:
11.0pt;line-height:125%;mso-fareast-font-family:宋体'> <span lang=EN-US>-- </span></span><span
style='font-size:11.0pt;line-height:125%;font-family:宋体;mso-ascii-font-family:
Calibri;mso-ascii-theme-font:minor-latin;mso-hansi-font-family:Calibri;
mso-hansi-theme-font:minor-latin'>延伸为</span><span style='font-size:11.0pt;
line-height:125%;mso-fareast-font-family:宋体'> <span lang=EN-US>--&gt;</span></span><span
lang=EN-US style='font-size:12.0pt;mso-bidi-font-size:11.0pt;line-height:125%;
mso-fareast-font-family:宋体'> <span style='mso-spacerun:yes'> </span><b
style='mso-bidi-font-weight:normal'><span style='color:red'>HDFS</span></b><o:p></o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='font-size:12.0pt;mso-bidi-font-size:
11.0pt;line-height:125%;mso-fareast-font-family:宋体;color:red'>BigTable</span><span
lang=EN-US style='font-size:12.0pt;mso-bidi-font-size:11.0pt;line-height:125%;
mso-fareast-font-family:宋体'><span style='mso-spacerun:yes'>  </span><span
style='mso-spacerun:yes'>              </span></span><span lang=EN-US
style='font-size:11.0pt;line-height:125%;mso-fareast-font-family:宋体'><span
style='mso-spacerun:yes'> </span>-- </span><span style='font-size:11.0pt;
line-height:125%;font-family:宋体;mso-ascii-font-family:Calibri;mso-ascii-theme-font:
minor-latin;mso-hansi-font-family:Calibri;mso-hansi-theme-font:minor-latin'>延伸为</span><span
style='font-size:11.0pt;line-height:125%;mso-fareast-font-family:宋体'> <span
lang=EN-US>--&gt;</span></span><span lang=EN-US style='font-size:12.0pt;
mso-bidi-font-size:11.0pt;line-height:125%;mso-fareast-font-family:宋体'><span
style='mso-spacerun:yes'>  </span><b style='mso-bidi-font-weight:normal'><span
style='color:red'>HBase</span></b></span><span style='font-size:8.0pt;
mso-bidi-font-size:11.0pt;line-height:125%;font-family:宋体;mso-ascii-font-family:
Calibri;mso-ascii-theme-font:minor-latin;mso-hansi-font-family:Calibri;
mso-hansi-theme-font:minor-latin'>（以前用</span><span lang=EN-US style='font-size:
8.0pt;mso-bidi-font-size:11.0pt;line-height:125%;mso-fareast-font-family:宋体'>MySQL</span><span
style='font-size:8.0pt;mso-bidi-font-size:11.0pt;line-height:125%;font-family:
宋体;mso-ascii-font-family:Calibri;mso-ascii-theme-font:minor-latin;mso-hansi-font-family:
Calibri;mso-hansi-theme-font:minor-latin'>的，现在是把</span><span lang=EN-US
style='font-size:8.0pt;mso-bidi-font-size:11.0pt;line-height:125%;mso-fareast-font-family:
宋体'>MySQL</span><span style='font-size:8.0pt;mso-bidi-font-size:11.0pt;
line-height:125%;font-family:宋体;mso-ascii-font-family:Calibri;mso-ascii-theme-font:
minor-latin;mso-hansi-font-family:Calibri;mso-hansi-theme-font:minor-latin'>的一部分功能抽出来用</span><span
lang=EN-US style='font-size:8.0pt;mso-bidi-font-size:11.0pt;line-height:125%;
mso-fareast-font-family:宋体'>HBase</span><span style='font-size:8.0pt;
mso-bidi-font-size:11.0pt;line-height:125%;font-family:宋体;mso-ascii-font-family:
Calibri;mso-ascii-theme-font:minor-latin;mso-hansi-font-family:Calibri;
mso-hansi-theme-font:minor-latin'>替代）</span><span lang=EN-US style='font-size:
12.0pt;mso-bidi-font-size:11.0pt;line-height:125%;mso-fareast-font-family:宋体'><o:p></o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='font-size:12.0pt;mso-bidi-font-size:
11.0pt;line-height:125%;mso-fareast-font-family:宋体;color:red'>MapReduce</span><span
lang=EN-US style='font-size:12.0pt;mso-bidi-font-size:11.0pt;line-height:125%;
mso-fareast-font-family:宋体'><span style='mso-spacerun:yes'>  </span><span
style='mso-spacerun:yes'>           </span></span><span lang=EN-US
style='font-size:11.0pt;line-height:125%;mso-fareast-font-family:宋体'><span
style='mso-spacerun:yes'> </span>-- </span><span style='font-size:11.0pt;
line-height:125%;font-family:宋体;mso-ascii-font-family:Calibri;mso-ascii-theme-font:
minor-latin;mso-hansi-font-family:Calibri;mso-hansi-theme-font:minor-latin'>延伸为</span><span
style='font-size:11.0pt;line-height:125%;mso-fareast-font-family:宋体'> <span
lang=EN-US>--&gt;</span></span><span lang=EN-US style='font-size:12.0pt;
mso-bidi-font-size:11.0pt;line-height:125%;mso-fareast-font-family:宋体'><span
style='mso-spacerun:yes'>  </span><b style='mso-bidi-font-weight:normal'><span
style='color:red'>HadoopMapReduce</span></b><o:p></o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='font-size:12.0pt;mso-bidi-font-size:
11.0pt;line-height:125%;mso-fareast-font-family:宋体'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='font-size:12.0pt;mso-bidi-font-size:
11.0pt;line-height:125%;mso-fareast-font-family:宋体'>Google</span><span
style='font-size:12.0pt;mso-bidi-font-size:11.0pt;line-height:125%;font-family:
宋体;mso-ascii-font-family:Calibri;mso-ascii-theme-font:minor-latin;mso-hansi-font-family:
Calibri;mso-hansi-theme-font:minor-latin'>公开了这三篇论文，才有了分布式的大发展。</span><span
lang=EN-US style='font-size:12.0pt;mso-bidi-font-size:11.0pt;line-height:125%;
mso-fareast-font-family:宋体'><o:p></o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='font-size:12.0pt;mso-bidi-font-size:
11.0pt;line-height:125%;mso-fareast-font-family:宋体'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='font-size:12.0pt;mso-bidi-font-size:
11.0pt;line-height:125%;mso-fareast-font-family:宋体'>SpringCloud</span><span
style='font-size:12.0pt;mso-bidi-font-size:11.0pt;line-height:125%;font-family:
宋体;mso-ascii-font-family:Calibri;mso-ascii-theme-font:minor-latin;mso-hansi-font-family:
Calibri;mso-hansi-theme-font:minor-latin'>功能比</span><span lang=EN-US
style='font-size:12.0pt;mso-bidi-font-size:11.0pt;line-height:125%;mso-fareast-font-family:
宋体'>Dubbo</span><span style='font-size:12.0pt;mso-bidi-font-size:11.0pt;
line-height:125%;font-family:宋体;mso-ascii-font-family:Calibri;mso-ascii-theme-font:
minor-latin;mso-hansi-font-family:Calibri;mso-hansi-theme-font:minor-latin'>多，但是</span><span
lang=EN-US style='font-size:12.0pt;mso-bidi-font-size:11.0pt;line-height:125%;
mso-fareast-font-family:宋体'>Dubbo</span><span style='font-size:12.0pt;
mso-bidi-font-size:11.0pt;line-height:125%;font-family:宋体;mso-ascii-font-family:
Calibri;mso-ascii-theme-font:minor-latin;mso-hansi-font-family:Calibri;
mso-hansi-theme-font:minor-latin'>经过阿里的检验，应该性能比</span><span lang=EN-US
style='font-size:12.0pt;mso-bidi-font-size:11.0pt;line-height:125%;mso-fareast-font-family:
宋体'>SpringCloud</span><span style='font-size:12.0pt;mso-bidi-font-size:11.0pt;
line-height:125%;font-family:宋体;mso-ascii-font-family:Calibri;mso-ascii-theme-font:
minor-latin;mso-hansi-font-family:Calibri;mso-hansi-theme-font:minor-latin'>高。</span><span
lang=EN-US style='font-size:12.0pt;mso-bidi-font-size:11.0pt;line-height:125%;
mso-fareast-font-family:宋体'><o:p></o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='font-size:12.0pt;mso-bidi-font-size:
11.0pt;line-height:125%;mso-fareast-font-family:宋体'><o:p>&nbsp;</o:p></span></p>

<h2><span lang=EN-US>Zookeeper</span><span style='font-family:宋体;mso-ascii-font-family:
"Calibri Light";mso-ascii-theme-font:major-latin;mso-fareast-theme-font:major-fareast;
mso-hansi-font-family:"Calibri Light";mso-hansi-theme-font:major-latin'>工作机制</span></h2>

<p class=MsoNormal><span lang=EN-US style='mso-no-proof:yes'><!--[if gte vml 1]><v:shapetype
 id="_x0000_t75" coordsize="21600,21600" o:spt="75" o:preferrelative="t"
 path="m@4@5l@4@11@9@11@9@5xe" filled="f" stroked="f">
 <v:stroke joinstyle="miter"/>
 <v:formulas>
  <v:f eqn="if lineDrawn pixelLineWidth 0"/>
  <v:f eqn="sum @0 1 0"/>
  <v:f eqn="sum 0 0 @1"/>
  <v:f eqn="prod @2 1 2"/>
  <v:f eqn="prod @3 21600 pixelWidth"/>
  <v:f eqn="prod @3 21600 pixelHeight"/>
  <v:f eqn="sum @0 0 1"/>
  <v:f eqn="prod @6 1 2"/>
  <v:f eqn="prod @7 21600 pixelWidth"/>
  <v:f eqn="sum @8 21600 0"/>
  <v:f eqn="prod @7 21600 pixelHeight"/>
  <v:f eqn="sum @10 21600 0"/>
 </v:formulas>
 <v:path o:extrusionok="f" gradientshapeok="t" o:connecttype="rect"/>
 <o:lock v:ext="edit" aspectratio="t"/>
</v:shapetype><v:shape id="图片_x0020_4" o:spid="_x0000_i1119" type="#_x0000_t75"
 style='width:294pt;height:115.5pt;visibility:visible;mso-wrap-style:square'>
 <v:imagedata src="04_ZookeeperAppend.files/image001.png" o:title=""/>
</v:shape><![endif]--><![if !vml]><img width=392 height=154
src="04_ZookeeperAppend.files/image001.png" v:shapes="图片_x0020_4"><![endif]></span></p>

<p class=MsoNormal><span style='font-family:宋体;mso-ascii-font-family:Calibri;
mso-ascii-theme-font:minor-latin;mso-fareast-theme-font:minor-fareast;
mso-hansi-font-family:Calibri;mso-hansi-theme-font:minor-latin'>如下图，服务器启动就去</span><span
lang=EN-US>zk</span><span style='font-family:宋体;mso-ascii-font-family:Calibri;
mso-ascii-theme-font:minor-latin;mso-fareast-theme-font:minor-fareast;
mso-hansi-font-family:Calibri;mso-hansi-theme-font:minor-latin'>注册，即创建临时节点，客户端从</span><span
lang=EN-US>zk</span><span style='font-family:宋体;mso-ascii-font-family:Calibri;
mso-ascii-theme-font:minor-latin;mso-fareast-theme-font:minor-fareast;
mso-hansi-font-family:Calibri;mso-hansi-theme-font:minor-latin'>监听临时节点的变化，只要服务器挂了（停机或者退出连接</span><span
lang=EN-US>zk</span><span style='font-family:宋体;mso-ascii-font-family:Calibri;
mso-ascii-theme-font:minor-latin;mso-fareast-theme-font:minor-fareast;
mso-hansi-font-family:Calibri;mso-hansi-theme-font:minor-latin'>都算），临时节点就会消失，此时就会通知客户端，哪个临时节点没了（即哪个服务器挂了），以后客户端就不访问那个服务器了。需要注意的，这里的服务器、客户端访问了</span><span
lang=EN-US>zk</span><span style='font-family:宋体;mso-ascii-font-family:Calibri;
mso-ascii-theme-font:minor-latin;mso-fareast-theme-font:minor-fareast;
mso-hansi-font-family:Calibri;mso-hansi-theme-font:minor-latin'>，对于</span><span
lang=EN-US>zk</span><span style='font-family:宋体;mso-ascii-font-family:Calibri;
mso-ascii-theme-font:minor-latin;mso-fareast-theme-font:minor-fareast;
mso-hansi-font-family:Calibri;mso-hansi-theme-font:minor-latin'>来说，他们都是</span><span
lang=EN-US>Client</span><span style='font-family:宋体;mso-ascii-font-family:Calibri;
mso-ascii-theme-font:minor-latin;mso-fareast-theme-font:minor-fareast;
mso-hansi-font-family:Calibri;mso-hansi-theme-font:minor-latin'>，而当客户端访问服务器的时候，就不需要经过</span><span
lang=EN-US>zk</span><span style='font-family:宋体;mso-ascii-font-family:Calibri;
mso-ascii-theme-font:minor-latin;mso-fareast-theme-font:minor-fareast;
mso-hansi-font-family:Calibri;mso-hansi-theme-font:minor-latin'>了。</span></p>

<p class=MsoNormal><span lang=EN-US style='mso-no-proof:yes'><!--[if gte vml 1]><v:shape
 id="图片_x0020_13" o:spid="_x0000_i1118" type="#_x0000_t75" style='width:530.25pt;
 height:273.75pt;visibility:visible;mso-wrap-style:square'>
 <v:imagedata src="04_ZookeeperAppend.files/image002.png" o:title=""/>
</v:shape><![endif]--><![if !vml]><img width=707 height=365
src="04_ZookeeperAppend.files/image003.jpg" v:shapes="图片_x0020_13"><![endif]></span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span style='font-family:宋体;mso-ascii-font-family:Calibri;
mso-ascii-theme-font:minor-latin;mso-fareast-theme-font:minor-fareast;
mso-hansi-font-family:Calibri;mso-hansi-theme-font:minor-latin'>所以</span><span
lang=EN-US>Zk = </span><span style='font-family:宋体;mso-ascii-font-family:Calibri;
mso-ascii-theme-font:minor-latin;mso-fareast-theme-font:minor-fareast;
mso-hansi-font-family:Calibri;mso-hansi-theme-font:minor-latin'>文件系统（创建节点等）</span><span
lang=EN-US> + </span><span style='font-family:宋体;mso-ascii-font-family:Calibri;
mso-ascii-theme-font:minor-latin;mso-fareast-theme-font:minor-fareast;
mso-hansi-font-family:Calibri;mso-hansi-theme-font:minor-latin'>通知机制（注册、监听）</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<h2><span lang=EN-US>Zookeeper</span><span style='font-family:宋体;mso-ascii-font-family:
"Calibri Light";mso-ascii-theme-font:major-latin;mso-fareast-theme-font:major-fareast;
mso-hansi-font-family:"Calibri Light";mso-hansi-theme-font:major-latin'>的特点</span></h2>

<p class=MsoNormal><span lang=EN-US style='mso-no-proof:yes'><!--[if gte vml 1]><v:shape
 id="图片_x0020_18" o:spid="_x0000_i1117" type="#_x0000_t75" style='width:510.75pt;
 height:314.25pt;visibility:visible;mso-wrap-style:square'>
 <v:imagedata src="04_ZookeeperAppend.files/image005.png" o:title=""/>
</v:shape><![endif]--><![if !vml]><img width=681 height=419
src="04_ZookeeperAppend.files/image005.png" v:shapes="图片_x0020_18"><![endif]></span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<h2><span style='font-family:宋体;mso-ascii-font-family:"Calibri Light";
mso-ascii-theme-font:major-latin;mso-fareast-theme-font:major-fareast;
mso-hansi-font-family:"Calibri Light";mso-hansi-theme-font:major-latin'>数据结构</span></h2>

<p class=MsoNormal><span lang=EN-US style='mso-no-proof:yes'><!--[if gte vml 1]><v:shape
 id="图片_x0020_29" o:spid="_x0000_i1116" type="#_x0000_t75" style='width:532.5pt;
 height:208.5pt;visibility:visible;mso-wrap-style:square'>
 <v:imagedata src="04_ZookeeperAppend.files/image007.png" o:title=""/>
</v:shape><![endif]--><![if !vml]><img width=710 height=278
src="04_ZookeeperAppend.files/image007.png" v:shapes="图片_x0020_29"><![endif]></span></p>

<p class=MsoNormal><span lang=EN-US style='font-size:12.0pt;mso-bidi-font-size:
11.0pt;line-height:125%;mso-fareast-font-family:宋体'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='font-size:12.0pt;mso-bidi-font-size:
11.0pt;line-height:125%;mso-fareast-font-family:宋体'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='font-size:12.0pt;mso-bidi-font-size:
11.0pt;line-height:125%;mso-fareast-font-family:宋体'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='font-size:12.0pt;mso-bidi-font-size:
11.0pt;line-height:125%;mso-fareast-font-family:宋体'><o:p>&nbsp;</o:p></span></p>

<h1><span lang=EN-US>2</span><span style='font-family:宋体;mso-ascii-font-family:
Calibri;mso-ascii-theme-font:minor-latin;mso-fareast-theme-font:minor-fareast;
mso-hansi-font-family:Calibri;mso-hansi-theme-font:minor-latin'>、安装、配置、启动、监控等</span></h1>

<h2><span style='font-family:宋体;mso-ascii-font-family:"Calibri Light";
mso-ascii-theme-font:major-latin;mso-fareast-theme-font:major-fareast;
mso-hansi-font-family:"Calibri Light";mso-hansi-theme-font:major-latin'>下载安装</span></h2>

<p class=MsoNormal><span style='font-size:12.0pt;mso-bidi-font-size:11.0pt;
line-height:125%;font-family:宋体;mso-ascii-font-family:Calibri;mso-ascii-theme-font:
minor-latin;mso-hansi-font-family:Calibri;mso-hansi-theme-font:minor-latin'>官网下载</span><span
lang=EN-US style='font-size:12.0pt;mso-bidi-font-size:11.0pt;line-height:125%;
mso-fareast-font-family:宋体'><o:p></o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='mso-no-proof:yes'><!--[if gte vml 1]><v:shape
 id="图片_x0020_5" o:spid="_x0000_i1115" type="#_x0000_t75" style='width:405.75pt;
 height:168.75pt;visibility:visible;mso-wrap-style:square'>
 <v:imagedata src="04_ZookeeperAppend.files/image009.png" o:title=""/>
</v:shape><![endif]--><![if !vml]><img width=541 height=225
src="04_ZookeeperAppend.files/image009.png" v:shapes="图片_x0020_5"><![endif]></span><span
lang=EN-US style='font-size:12.0pt;mso-bidi-font-size:11.0pt;line-height:125%;
mso-fareast-font-family:宋体'><o:p></o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='font-size:12.0pt;mso-bidi-font-size:
11.0pt;line-height:125%;mso-fareast-font-family:宋体'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='font-size:12.0pt;mso-bidi-font-size:
11.0pt;line-height:125%;mso-fareast-font-family:宋体'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span style='font-size:12.0pt;mso-bidi-font-size:11.0pt;
line-height:125%;font-family:宋体;mso-ascii-font-family:Calibri;mso-ascii-theme-font:
minor-latin;mso-hansi-font-family:Calibri;mso-hansi-theme-font:minor-latin'>启动了四台虚拟机，以前作为</span><span
lang=EN-US style='font-size:12.0pt;mso-bidi-font-size:11.0pt;line-height:125%;
mso-fareast-font-family:宋体'>Hadoop</span><span style='font-size:12.0pt;
mso-bidi-font-size:11.0pt;line-height:125%;font-family:宋体;mso-ascii-font-family:
Calibri;mso-ascii-theme-font:minor-latin;mso-hansi-font-family:Calibri;
mso-hansi-theme-font:minor-latin'>集群的，所有才有了</span><span lang=EN-US
style='font-size:12.0pt;mso-bidi-font-size:11.0pt;line-height:125%;mso-fareast-font-family:
宋体'>master</span><span style='font-size:12.0pt;mso-bidi-font-size:11.0pt;
line-height:125%;font-family:宋体;mso-ascii-font-family:Calibri;mso-ascii-theme-font:
minor-latin;mso-hansi-font-family:Calibri;mso-hansi-theme-font:minor-latin'>、</span><span
lang=EN-US style='font-size:12.0pt;mso-bidi-font-size:11.0pt;line-height:125%;
mso-fareast-font-family:宋体'>slave1</span><span style='font-size:12.0pt;
mso-bidi-font-size:11.0pt;line-height:125%;font-family:宋体;mso-ascii-font-family:
Calibri;mso-ascii-theme-font:minor-latin;mso-hansi-font-family:Calibri;
mso-hansi-theme-font:minor-latin'>、</span><span lang=EN-US style='font-size:
12.0pt;mso-bidi-font-size:11.0pt;line-height:125%;mso-fareast-font-family:宋体'>2</span><span
style='font-size:12.0pt;mso-bidi-font-size:11.0pt;line-height:125%;font-family:
宋体;mso-ascii-font-family:Calibri;mso-ascii-theme-font:minor-latin;mso-hansi-font-family:
Calibri;mso-hansi-theme-font:minor-latin'>、</span><span lang=EN-US
style='font-size:12.0pt;mso-bidi-font-size:11.0pt;line-height:125%;mso-fareast-font-family:
宋体'>3</span><span style='font-size:12.0pt;mso-bidi-font-size:11.0pt;line-height:
125%;font-family:宋体;mso-ascii-font-family:Calibri;mso-ascii-theme-font:minor-latin;
mso-hansi-font-family:Calibri;mso-hansi-theme-font:minor-latin'>这种命名。现在</span><span
lang=EN-US style='font-size:12.0pt;mso-bidi-font-size:11.0pt;line-height:125%;
mso-fareast-font-family:宋体'>slave1</span><span style='font-size:12.0pt;
mso-bidi-font-size:11.0pt;line-height:125%;font-family:宋体;mso-ascii-font-family:
Calibri;mso-ascii-theme-font:minor-latin;mso-hansi-font-family:Calibri;
mso-hansi-theme-font:minor-latin'>、</span><span lang=EN-US style='font-size:
12.0pt;mso-bidi-font-size:11.0pt;line-height:125%;mso-fareast-font-family:宋体'>2</span><span
style='font-size:12.0pt;mso-bidi-font-size:11.0pt;line-height:125%;font-family:
宋体;mso-ascii-font-family:Calibri;mso-ascii-theme-font:minor-latin;mso-hansi-font-family:
Calibri;mso-hansi-theme-font:minor-latin'>、</span><span lang=EN-US
style='font-size:12.0pt;mso-bidi-font-size:11.0pt;line-height:125%;mso-fareast-font-family:
宋体'>3</span><span style='font-size:12.0pt;mso-bidi-font-size:11.0pt;line-height:
125%;font-family:宋体;mso-ascii-font-family:Calibri;mso-ascii-theme-font:minor-latin;
mso-hansi-font-family:Calibri;mso-hansi-theme-font:minor-latin'>作为</span><span
lang=EN-US style='font-size:12.0pt;mso-bidi-font-size:11.0pt;line-height:125%;
mso-fareast-font-family:宋体'>Zookeeper</span><span style='font-size:12.0pt;
mso-bidi-font-size:11.0pt;line-height:125%;font-family:宋体;mso-ascii-font-family:
Calibri;mso-ascii-theme-font:minor-latin;mso-hansi-font-family:Calibri;
mso-hansi-theme-font:minor-latin'>（</span><span lang=EN-US style='font-size:
12.0pt;mso-bidi-font-size:11.0pt;line-height:125%;mso-fareast-font-family:宋体'>zk</span><span
style='font-size:12.0pt;mso-bidi-font-size:11.0pt;line-height:125%;font-family:
宋体;mso-ascii-font-family:Calibri;mso-ascii-theme-font:minor-latin;mso-hansi-font-family:
Calibri;mso-hansi-theme-font:minor-latin'>）的集群，</span><span lang=EN-US
style='font-size:12.0pt;mso-bidi-font-size:11.0pt;line-height:125%;mso-fareast-font-family:
宋体'>master</span><span style='font-size:12.0pt;mso-bidi-font-size:11.0pt;
line-height:125%;font-family:宋体;mso-ascii-font-family:Calibri;mso-ascii-theme-font:
minor-latin;mso-hansi-font-family:Calibri;mso-hansi-theme-font:minor-latin'>作为一个连接</span><span
lang=EN-US style='font-size:12.0pt;mso-bidi-font-size:11.0pt;line-height:125%;
mso-fareast-font-family:宋体'>zk</span><span style='font-size:12.0pt;mso-bidi-font-size:
11.0pt;line-height:125%;font-family:宋体;mso-ascii-font-family:Calibri;
mso-ascii-theme-font:minor-latin;mso-hansi-font-family:Calibri;mso-hansi-theme-font:
minor-latin'>集群的客户端。</span><span lang=EN-US style='font-size:12.0pt;mso-bidi-font-size:
11.0pt;line-height:125%;mso-fareast-font-family:宋体'><o:p></o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='mso-no-proof:yes'><!--[if gte vml 1]><v:shape
 id="图片_x0020_6" o:spid="_x0000_i1114" type="#_x0000_t75" style='width:220.5pt;
 height:167.25pt;visibility:visible;mso-wrap-style:square'>
 <v:imagedata src="04_ZookeeperAppend.files/image011.png" o:title=""/>
</v:shape><![endif]--><![if !vml]><img width=294 height=223
src="04_ZookeeperAppend.files/image011.png" v:shapes="图片_x0020_6"><![endif]></span><span
lang=EN-US style='font-size:12.0pt;mso-bidi-font-size:11.0pt;line-height:125%;
mso-fareast-font-family:宋体'><o:p></o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='font-size:12.0pt;mso-bidi-font-size:
11.0pt;line-height:125%;mso-fareast-font-family:宋体'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span style='font-size:12.0pt;mso-bidi-font-size:11.0pt;
line-height:125%;font-family:宋体;mso-ascii-font-family:Calibri;mso-ascii-theme-font:
minor-latin;mso-hansi-font-family:Calibri;mso-hansi-theme-font:minor-latin'>分别给三台</span><span
lang=EN-US style='font-size:12.0pt;mso-bidi-font-size:11.0pt;line-height:125%;
mso-fareast-font-family:宋体'>zk</span><span style='font-size:12.0pt;mso-bidi-font-size:
11.0pt;line-height:125%;font-family:宋体;mso-ascii-font-family:Calibri;
mso-ascii-theme-font:minor-latin;mso-hansi-font-family:Calibri;mso-hansi-theme-font:
minor-latin'>集群上传</span><span lang=EN-US style='font-size:12.0pt;mso-bidi-font-size:
11.0pt;line-height:125%;mso-fareast-font-family:宋体'>tar.gz</span><span
style='font-size:12.0pt;mso-bidi-font-size:11.0pt;line-height:125%;font-family:
宋体;mso-ascii-font-family:Calibri;mso-ascii-theme-font:minor-latin;mso-hansi-font-family:
Calibri;mso-hansi-theme-font:minor-latin'>安装包</span><span lang=EN-US
style='font-size:12.0pt;mso-bidi-font-size:11.0pt;line-height:125%;mso-fareast-font-family:
宋体'><o:p></o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='mso-no-proof:yes'><!--[if gte vml 1]><v:shape
 id="图片_x0020_7" o:spid="_x0000_i1113" type="#_x0000_t75" style='width:566.25pt;
 height:222pt;visibility:visible;mso-wrap-style:square'>
 <v:imagedata src="04_ZookeeperAppend.files/image012.png" o:title=""/>
</v:shape><![endif]--><![if !vml]><img width=755 height=296
src="04_ZookeeperAppend.files/image012.png" v:shapes="图片_x0020_7"><![endif]></span><span
lang=EN-US style='font-size:12.0pt;mso-bidi-font-size:11.0pt;line-height:125%;
mso-fareast-font-family:宋体'><o:p></o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='font-size:12.0pt;mso-bidi-font-size:
11.0pt;line-height:125%;mso-fareast-font-family:宋体'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span style='font-size:12.0pt;mso-bidi-font-size:11.0pt;
line-height:125%;font-family:宋体;mso-ascii-font-family:Calibri;mso-ascii-theme-font:
minor-latin;mso-hansi-font-family:Calibri;mso-hansi-theme-font:minor-latin'>三台机器都解压</span><span
lang=EN-US style='font-size:12.0pt;mso-bidi-font-size:11.0pt;line-height:125%;
mso-fareast-font-family:宋体'><o:p></o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='mso-no-proof:yes'><!--[if gte vml 1]><v:shape
 id="图片_x0020_8" o:spid="_x0000_i1112" type="#_x0000_t75" style='width:291.75pt;
 height:21.75pt;visibility:visible;mso-wrap-style:square'>
 <v:imagedata src="04_ZookeeperAppend.files/image014.png" o:title=""/>
</v:shape><![endif]--><![if !vml]><img width=389 height=29
src="04_ZookeeperAppend.files/image014.png" v:shapes="图片_x0020_8"><![endif]></span><span
lang=EN-US style='font-size:12.0pt;mso-bidi-font-size:11.0pt;line-height:125%;
mso-fareast-font-family:宋体'><o:p></o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='font-size:12.0pt;mso-bidi-font-size:
11.0pt;line-height:125%;mso-fareast-font-family:宋体'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span style='font-size:12.0pt;mso-bidi-font-size:11.0pt;
line-height:125%;font-family:宋体;mso-ascii-font-family:Calibri;mso-ascii-theme-font:
minor-latin;mso-hansi-font-family:Calibri;mso-hansi-theme-font:minor-latin'>解压完毕，进入目录看一下</span><span
lang=EN-US style='font-size:12.0pt;mso-bidi-font-size:11.0pt;line-height:125%;
mso-fareast-font-family:宋体'><o:p></o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='mso-no-proof:yes'><!--[if gte vml 1]><v:shape
 id="图片_x0020_9" o:spid="_x0000_i1111" type="#_x0000_t75" style='width:471.75pt;
 height:75pt;visibility:visible;mso-wrap-style:square'>
 <v:imagedata src="04_ZookeeperAppend.files/image015.png" o:title=""/>
</v:shape><![endif]--><![if !vml]><img width=629 height=100
src="04_ZookeeperAppend.files/image015.png" v:shapes="图片_x0020_9"><![endif]></span><span
lang=EN-US style='font-size:12.0pt;mso-bidi-font-size:11.0pt;line-height:125%;
mso-fareast-font-family:宋体'><o:p></o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='font-size:12.0pt;mso-bidi-font-size:
11.0pt;line-height:125%;mso-fareast-font-family:宋体'><o:p>&nbsp;</o:p></span></p>

<h2><span style='font-family:宋体;mso-ascii-font-family:"Calibri Light";
mso-ascii-theme-font:major-latin;mso-fareast-theme-font:major-fareast;
mso-hansi-font-family:"Calibri Light";mso-hansi-theme-font:major-latin'>配置</span></h2>

<h3><span lang=EN-US>zoo.cfg</span></h3>

<p class=MsoNormal><span style='font-size:12.0pt;mso-bidi-font-size:11.0pt;
line-height:125%;font-family:宋体;mso-ascii-font-family:Calibri;mso-ascii-theme-font:
minor-latin;mso-hansi-font-family:Calibri;mso-hansi-theme-font:minor-latin'>进入</span><span
lang=EN-US style='font-size:12.0pt;mso-bidi-font-size:11.0pt;line-height:125%;
mso-fareast-font-family:宋体'>conf</span><span style='font-size:12.0pt;
mso-bidi-font-size:11.0pt;line-height:125%;font-family:宋体;mso-ascii-font-family:
Calibri;mso-ascii-theme-font:minor-latin;mso-hansi-font-family:Calibri;
mso-hansi-theme-font:minor-latin'>目录</span><span lang=EN-US style='font-size:
12.0pt;mso-bidi-font-size:11.0pt;line-height:125%;mso-fareast-font-family:宋体'><o:p></o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='mso-no-proof:yes'><!--[if gte vml 1]><v:shape
 id="图片_x0020_10" o:spid="_x0000_i1110" type="#_x0000_t75" style='width:567pt;
 height:255pt;visibility:visible;mso-wrap-style:square'>
 <v:imagedata src="04_ZookeeperAppend.files/image016.png" o:title=""/>
</v:shape><![endif]--><![if !vml]><img width=756 height=340
src="04_ZookeeperAppend.files/image016.png" v:shapes="图片_x0020_10"><![endif]></span><span
lang=EN-US style='font-size:12.0pt;mso-bidi-font-size:11.0pt;line-height:125%;
mso-fareast-font-family:宋体'><o:p></o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='font-size:12.0pt;mso-bidi-font-size:
11.0pt;line-height:125%;mso-fareast-font-family:宋体'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span style='font-size:12.0pt;mso-bidi-font-size:11.0pt;
line-height:125%;font-family:宋体;mso-ascii-font-family:Calibri;mso-ascii-theme-font:
minor-latin;mso-hansi-font-family:Calibri;mso-hansi-theme-font:minor-latin'>复制</span><span
lang=EN-US style='font-size:12.0pt;mso-bidi-font-size:11.0pt;line-height:125%;
mso-fareast-font-family:宋体'>zoo_sample.cfg</span><span style='font-size:12.0pt;
mso-bidi-font-size:11.0pt;line-height:125%;font-family:宋体;mso-ascii-font-family:
Calibri;mso-ascii-theme-font:minor-latin;mso-hansi-font-family:Calibri;
mso-hansi-theme-font:minor-latin'>为</span><span lang=EN-US style='font-size:
12.0pt;mso-bidi-font-size:11.0pt;line-height:125%;mso-fareast-font-family:宋体'>zoo.cfg</span><span
style='font-size:12.0pt;mso-bidi-font-size:11.0pt;line-height:125%;font-family:
宋体;mso-ascii-font-family:Calibri;mso-ascii-theme-font:minor-latin;mso-hansi-font-family:
Calibri;mso-hansi-theme-font:minor-latin'>，然后编辑</span><span lang=EN-US
style='font-size:12.0pt;mso-bidi-font-size:11.0pt;line-height:125%;mso-fareast-font-family:
宋体'><o:p></o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='mso-no-proof:yes'><!--[if gte vml 1]><v:shape
 id="图片_x0020_11" o:spid="_x0000_i1109" type="#_x0000_t75" style='width:567pt;
 height:312pt;visibility:visible;mso-wrap-style:square'>
 <v:imagedata src="04_ZookeeperAppend.files/image018.png" o:title=""/>
</v:shape><![endif]--><![if !vml]><img width=756 height=416
src="04_ZookeeperAppend.files/image018.png" v:shapes="图片_x0020_11"><![endif]></span><span
lang=EN-US style='font-size:12.0pt;mso-bidi-font-size:11.0pt;line-height:125%;
mso-fareast-font-family:宋体'><o:p></o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='font-size:12.0pt;mso-bidi-font-size:
11.0pt;line-height:125%;mso-fareast-font-family:宋体'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span style='font-size:12.0pt;mso-bidi-font-size:11.0pt;
line-height:125%;font-family:宋体;mso-ascii-font-family:Calibri;mso-ascii-theme-font:
minor-latin;mso-hansi-font-family:Calibri;mso-hansi-theme-font:minor-latin'>了解一下，特别是</span><span
lang=EN-US style='font-size:12.0pt;mso-bidi-font-size:11.0pt;line-height:125%;
mso-fareast-font-family:宋体'>2181</span><span style='font-size:12.0pt;
mso-bidi-font-size:11.0pt;line-height:125%;font-family:宋体;mso-ascii-font-family:
Calibri;mso-ascii-theme-font:minor-latin;mso-hansi-font-family:Calibri;
mso-hansi-theme-font:minor-latin'>端口，后面会用到。</span><span lang=EN-US
style='font-size:12.0pt;mso-bidi-font-size:11.0pt;line-height:125%;mso-fareast-font-family:
宋体'>dataDir</span><span style='font-size:12.0pt;mso-bidi-font-size:11.0pt;
line-height:125%;font-family:宋体;mso-ascii-font-family:Calibri;mso-ascii-theme-font:
minor-latin;mso-hansi-font-family:Calibri;mso-hansi-theme-font:minor-latin'>目录默认是临时目录，可以改为自己创建的目录。</span><span
lang=EN-US style='font-size:12.0pt;mso-bidi-font-size:11.0pt;line-height:125%;
mso-fareast-font-family:宋体'><o:p></o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='mso-no-proof:yes'><!--[if gte vml 1]><v:shape
 id="图片_x0020_12" o:spid="_x0000_i1108" type="#_x0000_t75" style='width:567pt;
 height:419.25pt;visibility:visible;mso-wrap-style:square'>
 <v:imagedata src="04_ZookeeperAppend.files/image020.png" o:title=""/>
</v:shape><![endif]--><![if !vml]><img width=756 height=559
src="04_ZookeeperAppend.files/image020.png" v:shapes="图片_x0020_12"><![endif]></span><span
lang=EN-US style='font-size:12.0pt;mso-bidi-font-size:11.0pt;line-height:125%;
mso-fareast-font-family:宋体'><o:p></o:p></span></p>

<p class=MsoNormal><span style='font-size:12.0pt;mso-bidi-font-size:11.0pt;
line-height:125%;font-family:宋体;mso-ascii-font-family:Calibri;mso-ascii-theme-font:
minor-latin;mso-hansi-font-family:Calibri;mso-hansi-theme-font:minor-latin'>（注意，</span><span
lang=EN-US style='font-size:12.0pt;mso-bidi-font-size:11.0pt;line-height:125%;
mso-fareast-font-family:宋体'>dataDir</span><span style='font-size:12.0pt;
mso-bidi-font-size:11.0pt;line-height:125%;font-family:宋体;mso-ascii-font-family:
Calibri;mso-ascii-theme-font:minor-latin;mso-hansi-font-family:Calibri;
mso-hansi-theme-font:minor-latin'>目录要修改，不要放</span><span lang=EN-US
style='font-size:12.0pt;mso-bidi-font-size:11.0pt;line-height:125%;mso-fareast-font-family:
宋体'>/tmp</span><span style='font-size:12.0pt;mso-bidi-font-size:11.0pt;
line-height:125%;font-family:宋体;mso-ascii-font-family:Calibri;mso-ascii-theme-font:
minor-latin;mso-hansi-font-family:Calibri;mso-hansi-theme-font:minor-latin'>，当时没管，导致后面</span><span
lang=EN-US style='font-size:12.0pt;mso-bidi-font-size:11.0pt;line-height:125%;
mso-fareast-font-family:宋体'>/tmp</span><span style='font-size:12.0pt;
mso-bidi-font-size:11.0pt;line-height:125%;font-family:宋体;mso-ascii-font-family:
Calibri;mso-ascii-theme-font:minor-latin;mso-hansi-font-family:Calibri;
mso-hansi-theme-font:minor-latin'>的</span><span lang=EN-US style='font-size:
12.0pt;mso-bidi-font-size:11.0pt;line-height:125%;mso-fareast-font-family:宋体'>myid</span><span
style='font-size:12.0pt;mso-bidi-font-size:11.0pt;line-height:125%;font-family:
宋体;mso-ascii-font-family:Calibri;mso-ascii-theme-font:minor-latin;mso-hansi-font-family:
Calibri;mso-hansi-theme-font:minor-latin'>文件丢失了）</span><span lang=EN-US
style='font-size:12.0pt;mso-bidi-font-size:11.0pt;line-height:125%;mso-fareast-font-family:
宋体'><o:p></o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='font-size:12.0pt;mso-bidi-font-size:
11.0pt;line-height:125%;mso-fareast-font-family:宋体'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span style='font-size:12.0pt;mso-bidi-font-size:11.0pt;
line-height:125%;font-family:宋体;mso-ascii-font-family:Calibri;mso-ascii-theme-font:
minor-latin;mso-hansi-font-family:Calibri;mso-hansi-theme-font:minor-latin'>参数解读</span><span
lang=EN-US style='font-size:12.0pt;mso-bidi-font-size:11.0pt;line-height:125%;
mso-fareast-font-family:宋体'><o:p></o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='mso-no-proof:yes'><!--[if gte vml 1]><v:shape
 id="图片_x0020_61" o:spid="_x0000_i1107" type="#_x0000_t75" style='width:417pt;
 height:282pt;visibility:visible;mso-wrap-style:square'>
 <v:imagedata src="04_ZookeeperAppend.files/image022.png" o:title=""/>
</v:shape><![endif]--><![if !vml]><img width=556 height=376
src="04_ZookeeperAppend.files/image022.png" v:shapes="图片_x0020_61"><![endif]><span
style='mso-spacerun:yes'> </span><!--[if gte vml 1]><v:shape id="图片_x0020_62"
 o:spid="_x0000_i1106" type="#_x0000_t75" style='width:242.25pt;height:45.75pt;
 visibility:visible;mso-wrap-style:square'>
 <v:imagedata src="04_ZookeeperAppend.files/image024.png" o:title=""/>
</v:shape><![endif]--><![if !vml]><img width=323 height=61
src="04_ZookeeperAppend.files/image024.png" v:shapes="图片_x0020_62"><![endif]></span><span
lang=EN-US style='font-size:12.0pt;mso-bidi-font-size:11.0pt;line-height:125%;
mso-fareast-font-family:宋体'><o:p></o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='font-size:12.0pt;mso-bidi-font-size:
11.0pt;line-height:125%;mso-fareast-font-family:宋体'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span style='font-size:12.0pt;mso-bidi-font-size:11.0pt;
line-height:125%;font-family:宋体;mso-ascii-font-family:Calibri;mso-ascii-theme-font:
minor-latin;mso-hansi-font-family:Calibri;mso-hansi-theme-font:minor-latin'>三台集群同时对外提供服务的，所以要告诉每一台机器，集群里头有哪些机器，配置如下图。</span><span
lang=EN-US style='font-size:12.0pt;mso-bidi-font-size:11.0pt;line-height:125%;
mso-fareast-font-family:宋体'>ip</span><span style='font-size:12.0pt;mso-bidi-font-size:
11.0pt;line-height:125%;font-family:宋体;mso-ascii-font-family:Calibri;
mso-ascii-theme-font:minor-latin;mso-hansi-font-family:Calibri;mso-hansi-theme-font:
minor-latin'>就是这三台机器的</span><span lang=EN-US style='font-size:12.0pt;
mso-bidi-font-size:11.0pt;line-height:125%;mso-fareast-font-family:宋体'>ip</span><span
style='font-size:12.0pt;mso-bidi-font-size:11.0pt;line-height:125%;font-family:
宋体;mso-ascii-font-family:Calibri;mso-ascii-theme-font:minor-latin;mso-hansi-font-family:
Calibri;mso-hansi-theme-font:minor-latin'>，而</span><span lang=EN-US
style='font-size:12.0pt;mso-bidi-font-size:11.0pt;line-height:125%;mso-fareast-font-family:
宋体'>ip</span><span style='font-size:12.0pt;mso-bidi-font-size:11.0pt;
line-height:125%;font-family:宋体;mso-ascii-font-family:Calibri;mso-ascii-theme-font:
minor-latin;mso-hansi-font-family:Calibri;mso-hansi-theme-font:minor-latin'>后面要指定两个端口，</span><span
lang=EN-US style='font-size:12.0pt;mso-bidi-font-size:11.0pt;line-height:125%;
mso-fareast-font-family:宋体'>2888</span><span style='font-size:12.0pt;
mso-bidi-font-size:11.0pt;line-height:125%;font-family:宋体;mso-ascii-font-family:
Calibri;mso-ascii-theme-font:minor-latin;mso-hansi-font-family:Calibri;
mso-hansi-theme-font:minor-latin'>是</span><span lang=EN-US style='font-size:
12.0pt;mso-bidi-font-size:11.0pt;line-height:125%;mso-fareast-font-family:宋体'>leader</span><span
style='font-size:12.0pt;mso-bidi-font-size:11.0pt;line-height:125%;font-family:
宋体;mso-ascii-font-family:Calibri;mso-ascii-theme-font:minor-latin;mso-hansi-font-family:
Calibri;mso-hansi-theme-font:minor-latin'>机器与其他</span><span lang=EN-US
style='font-size:12.0pt;mso-bidi-font-size:11.0pt;line-height:125%;mso-fareast-font-family:
宋体'>flower</span><span style='font-size:12.0pt;mso-bidi-font-size:11.0pt;
line-height:125%;font-family:宋体;mso-ascii-font-family:Calibri;mso-ascii-theme-font:
minor-latin;mso-hansi-font-family:Calibri;mso-hansi-theme-font:minor-latin'>机器通讯的端口号，</span><span
lang=EN-US style='font-size:12.0pt;mso-bidi-font-size:11.0pt;line-height:125%;
mso-fareast-font-family:宋体'>3888</span><span style='font-size:12.0pt;
mso-bidi-font-size:11.0pt;line-height:125%;font-family:宋体;mso-ascii-font-family:
Calibri;mso-ascii-theme-font:minor-latin;mso-hansi-font-family:Calibri;
mso-hansi-theme-font:minor-latin'>是选举</span><span lang=EN-US style='font-size:
12.0pt;mso-bidi-font-size:11.0pt;line-height:125%;mso-fareast-font-family:宋体'>leader</span><span
style='font-size:12.0pt;mso-bidi-font-size:11.0pt;line-height:125%;font-family:
宋体;mso-ascii-font-family:Calibri;mso-ascii-theme-font:minor-latin;mso-hansi-font-family:
Calibri;mso-hansi-theme-font:minor-latin'>用的端口。</span><span lang=EN-US
style='font-size:12.0pt;mso-bidi-font-size:11.0pt;line-height:125%;mso-fareast-font-family:
宋体'><o:p></o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='mso-no-proof:yes'><!--[if gte vml 1]><v:shape
 id="图片_x0020_22" o:spid="_x0000_i1105" type="#_x0000_t75" style='width:567pt;
 height:445.5pt;visibility:visible;mso-wrap-style:square'>
 <v:imagedata src="04_ZookeeperAppend.files/image026.png" o:title=""/>
</v:shape><![endif]--><![if !vml]><img width=756 height=594
src="04_ZookeeperAppend.files/image026.png" v:shapes="图片_x0020_22"><![endif]></span><span
lang=EN-US style='font-size:12.0pt;mso-bidi-font-size:11.0pt;line-height:125%;
mso-fareast-font-family:宋体'><o:p></o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='font-size:12.0pt;mso-bidi-font-size:
11.0pt;line-height:125%;mso-fareast-font-family:宋体'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span style='font-size:12.0pt;mso-bidi-font-size:11.0pt;
line-height:125%;font-family:宋体;mso-ascii-font-family:Calibri;mso-ascii-theme-font:
minor-latin;mso-hansi-font-family:Calibri;mso-hansi-theme-font:minor-latin'>注意</span><span
lang=EN-US style='font-size:12.0pt;mso-bidi-font-size:11.0pt;line-height:125%;
mso-fareast-font-family:宋体'>id</span><span style='font-size:12.0pt;mso-bidi-font-size:
11.0pt;line-height:125%;font-family:宋体;mso-ascii-font-family:Calibri;
mso-ascii-theme-font:minor-latin;mso-hansi-font-family:Calibri;mso-hansi-theme-font:
minor-latin'>号不要重复了，复制容易出错，比如我之前的配置</span><span lang=EN-US style='font-size:
12.0pt;mso-bidi-font-size:11.0pt;line-height:125%;mso-fareast-font-family:宋体'><o:p></o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='mso-no-proof:yes'><!--[if gte vml 1]><v:shape
 id="图片_x0020_21" o:spid="_x0000_i1104" type="#_x0000_t75" style='width:220.5pt;
 height:69pt;visibility:visible;mso-wrap-style:square'>
 <v:imagedata src="04_ZookeeperAppend.files/image028.png" o:title=""/>
</v:shape><![endif]--><![if !vml]><img width=294 height=92
src="04_ZookeeperAppend.files/image028.png" v:shapes="图片_x0020_21"><![endif]></span><span
lang=EN-US style='font-size:12.0pt;mso-bidi-font-size:11.0pt;line-height:125%;
mso-fareast-font-family:宋体'><o:p></o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='font-size:12.0pt;mso-bidi-font-size:
11.0pt;line-height:125%;mso-fareast-font-family:宋体'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span style='font-size:12.0pt;mso-bidi-font-size:11.0pt;
line-height:125%;font-family:宋体;mso-ascii-font-family:Calibri;mso-ascii-theme-font:
minor-latin;mso-hansi-font-family:Calibri;mso-hansi-theme-font:minor-latin'>否则查看状态会是单机版，本应该是</span><span
lang=EN-US style='font-size:12.0pt;mso-bidi-font-size:11.0pt;line-height:125%;
mso-fareast-font-family:宋体'>leader</span><span style='font-size:12.0pt;
mso-bidi-font-size:11.0pt;line-height:125%;font-family:宋体;mso-ascii-font-family:
Calibri;mso-ascii-theme-font:minor-latin;mso-hansi-font-family:Calibri;
mso-hansi-theme-font:minor-latin'>或</span><span lang=EN-US style='font-size:
12.0pt;mso-bidi-font-size:11.0pt;line-height:125%;mso-fareast-font-family:宋体'>flower</span><span
style='font-size:12.0pt;mso-bidi-font-size:11.0pt;line-height:125%;font-family:
宋体;mso-ascii-font-family:Calibri;mso-ascii-theme-font:minor-latin;mso-hansi-font-family:
Calibri;mso-hansi-theme-font:minor-latin'>的。注意，这时重新配置之后，</span><span
lang=EN-US style='font-size:12.0pt;mso-bidi-font-size:11.0pt;line-height:125%;
mso-fareast-font-family:宋体'>myid</span><span style='font-size:12.0pt;
mso-bidi-font-size:11.0pt;line-height:125%;font-family:宋体;mso-ascii-font-family:
Calibri;mso-ascii-theme-font:minor-latin;mso-hansi-font-family:Calibri;
mso-hansi-theme-font:minor-latin'>也要重新配置。</span><span lang=EN-US
style='font-size:12.0pt;mso-bidi-font-size:11.0pt;line-height:125%;mso-fareast-font-family:
宋体'><o:p></o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='mso-no-proof:yes'><!--[if gte vml 1]><v:shape
 id="图片_x0020_20" o:spid="_x0000_i1103" type="#_x0000_t75" style='width:345pt;
 height:53.25pt;visibility:visible;mso-wrap-style:square'>
 <v:imagedata src="04_ZookeeperAppend.files/image029.png" o:title=""/>
</v:shape><![endif]--><![if !vml]><img width=460 height=71
src="04_ZookeeperAppend.files/image029.png" v:shapes="图片_x0020_20"><![endif]></span><span
lang=EN-US style='font-size:12.0pt;mso-bidi-font-size:11.0pt;line-height:125%;
mso-fareast-font-family:宋体'><o:p></o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='font-size:12.0pt;mso-bidi-font-size:
11.0pt;line-height:125%;mso-fareast-font-family:宋体'><o:p>&nbsp;</o:p></span></p>

<h3><span lang=EN-US>myid</span></h3>

<p class=MsoNormal><span style='font-size:12.0pt;mso-bidi-font-size:11.0pt;
line-height:125%;font-family:宋体;mso-ascii-font-family:Calibri;mso-ascii-theme-font:
minor-latin;mso-hansi-font-family:Calibri;mso-hansi-theme-font:minor-latin'>进入</span><span
lang=EN-US style='font-size:12.0pt;mso-bidi-font-size:11.0pt;line-height:125%;
mso-fareast-font-family:宋体'>/tmp/</span><span style='font-size:12.0pt;
mso-bidi-font-size:11.0pt;line-height:125%;font-family:宋体;mso-ascii-font-family:
Calibri;mso-ascii-theme-font:minor-latin;mso-hansi-font-family:Calibri;
mso-hansi-theme-font:minor-latin'>目录，创建</span><span lang=EN-US
style='font-size:12.0pt;mso-bidi-font-size:11.0pt;line-height:125%;mso-fareast-font-family:
宋体'>zookeeper</span><span style='font-size:12.0pt;mso-bidi-font-size:11.0pt;
line-height:125%;font-family:宋体;mso-ascii-font-family:Calibri;mso-ascii-theme-font:
minor-latin;mso-hansi-font-family:Calibri;mso-hansi-theme-font:minor-latin'>目录，新建</span><span
lang=EN-US style='font-size:12.0pt;mso-bidi-font-size:11.0pt;line-height:125%;
mso-fareast-font-family:宋体'>myid</span><span style='font-size:12.0pt;
mso-bidi-font-size:11.0pt;line-height:125%;font-family:宋体;mso-ascii-font-family:
Calibri;mso-ascii-theme-font:minor-latin;mso-hansi-font-family:Calibri;
mso-hansi-theme-font:minor-latin'>文件</span><span lang=EN-US style='font-size:
12.0pt;mso-bidi-font-size:11.0pt;line-height:125%;mso-fareast-font-family:宋体'><o:p></o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='mso-no-proof:yes'><!--[if gte vml 1]><v:shape
 id="图片_x0020_14" o:spid="_x0000_i1102" type="#_x0000_t75" style='width:489.75pt;
 height:320.25pt;visibility:visible;mso-wrap-style:square'>
 <v:imagedata src="04_ZookeeperAppend.files/image030.png" o:title=""/>
</v:shape><![endif]--><![if !vml]><img width=653 height=427
src="04_ZookeeperAppend.files/image030.png" v:shapes="图片_x0020_14"><![endif]></span><span
lang=EN-US style='font-size:12.0pt;mso-bidi-font-size:11.0pt;line-height:125%;
mso-fareast-font-family:宋体'><o:p></o:p></span></p>

<p class=MsoNormal><span style='font-size:12.0pt;mso-bidi-font-size:11.0pt;
line-height:125%;font-family:宋体;mso-ascii-font-family:Calibri;mso-ascii-theme-font:
minor-latin;mso-hansi-font-family:Calibri;mso-hansi-theme-font:minor-latin'>（注意，</span><span
lang=EN-US style='font-size:12.0pt;mso-bidi-font-size:11.0pt;line-height:125%;
mso-fareast-font-family:宋体'>dataDir</span><span style='font-size:12.0pt;
mso-bidi-font-size:11.0pt;line-height:125%;font-family:宋体;mso-ascii-font-family:
Calibri;mso-ascii-theme-font:minor-latin;mso-hansi-font-family:Calibri;
mso-hansi-theme-font:minor-latin'>目录要修改，不要放</span><span lang=EN-US
style='font-size:12.0pt;mso-bidi-font-size:11.0pt;line-height:125%;mso-fareast-font-family:
宋体'>/tmp</span><span style='font-size:12.0pt;mso-bidi-font-size:11.0pt;
line-height:125%;font-family:宋体;mso-ascii-font-family:Calibri;mso-ascii-theme-font:
minor-latin;mso-hansi-font-family:Calibri;mso-hansi-theme-font:minor-latin'>，所以</span><span
lang=EN-US style='font-size:12.0pt;mso-bidi-font-size:11.0pt;line-height:125%;
mso-fareast-font-family:宋体'>myid</span><span style='font-size:12.0pt;
mso-bidi-font-size:11.0pt;line-height:125%;font-family:宋体;mso-ascii-font-family:
Calibri;mso-ascii-theme-font:minor-latin;mso-hansi-font-family:Calibri;
mso-hansi-theme-font:minor-latin'>文件就不能放</span><span lang=EN-US
style='font-size:12.0pt;mso-bidi-font-size:11.0pt;line-height:125%;mso-fareast-font-family:
宋体'>/tmp</span><span style='font-size:12.0pt;mso-bidi-font-size:11.0pt;
line-height:125%;font-family:宋体;mso-ascii-font-family:Calibri;mso-ascii-theme-font:
minor-latin;mso-hansi-font-family:Calibri;mso-hansi-theme-font:minor-latin'>目录）</span><span
lang=EN-US style='font-size:12.0pt;mso-bidi-font-size:11.0pt;line-height:125%;
mso-fareast-font-family:宋体'><o:p></o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='font-size:12.0pt;mso-bidi-font-size:
11.0pt;line-height:125%;mso-fareast-font-family:宋体'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='font-size:12.0pt;mso-bidi-font-size:
11.0pt;line-height:125%;mso-fareast-font-family:宋体'>zoo.cfg</span><span
style='font-size:12.0pt;mso-bidi-font-size:11.0pt;line-height:125%;font-family:
宋体;mso-ascii-font-family:Calibri;mso-ascii-theme-font:minor-latin;mso-hansi-font-family:
Calibri;mso-hansi-theme-font:minor-latin'>配置文件写着</span><span lang=EN-US
style='font-size:12.0pt;mso-bidi-font-size:11.0pt;line-height:125%;mso-fareast-font-family:
宋体'>server.1+ip</span><span style='font-size:12.0pt;mso-bidi-font-size:11.0pt;
line-height:125%;font-family:宋体;mso-ascii-font-family:Calibri;mso-ascii-theme-font:
minor-latin;mso-hansi-font-family:Calibri;mso-hansi-theme-font:minor-latin'>代表着该</span><span
lang=EN-US style='font-size:12.0pt;mso-bidi-font-size:11.0pt;line-height:125%;
mso-fareast-font-family:宋体'>ip</span><span style='font-size:12.0pt;mso-bidi-font-size:
11.0pt;line-height:125%;font-family:宋体;mso-ascii-font-family:Calibri;
mso-ascii-theme-font:minor-latin;mso-hansi-font-family:Calibri;mso-hansi-theme-font:
minor-latin'>的机器的</span><span lang=EN-US style='font-size:12.0pt;mso-bidi-font-size:
11.0pt;line-height:125%;mso-fareast-font-family:宋体'>myid</span><span
style='font-size:12.0pt;mso-bidi-font-size:11.0pt;line-height:125%;font-family:
宋体;mso-ascii-font-family:Calibri;mso-ascii-theme-font:minor-latin;mso-hansi-font-family:
Calibri;mso-hansi-theme-font:minor-latin'>就是</span><span lang=EN-US
style='font-size:12.0pt;mso-bidi-font-size:11.0pt;line-height:125%;mso-fareast-font-family:
宋体'>1</span><span style='font-size:12.0pt;mso-bidi-font-size:11.0pt;line-height:
125%;font-family:宋体;mso-ascii-font-family:Calibri;mso-ascii-theme-font:minor-latin;
mso-hansi-font-family:Calibri;mso-hansi-theme-font:minor-latin'>，所以其他两个的</span><span
lang=EN-US style='font-size:12.0pt;mso-bidi-font-size:11.0pt;line-height:125%;
mso-fareast-font-family:宋体'>myid</span><span style='font-size:12.0pt;
mso-bidi-font-size:11.0pt;line-height:125%;font-family:宋体;mso-ascii-font-family:
Calibri;mso-ascii-theme-font:minor-latin;mso-hansi-font-family:Calibri;
mso-hansi-theme-font:minor-latin'>分别是</span><span lang=EN-US style='font-size:
12.0pt;mso-bidi-font-size:11.0pt;line-height:125%;mso-fareast-font-family:宋体'>2</span><span
style='font-size:12.0pt;mso-bidi-font-size:11.0pt;line-height:125%;font-family:
宋体;mso-ascii-font-family:Calibri;mso-ascii-theme-font:minor-latin;mso-hansi-font-family:
Calibri;mso-hansi-theme-font:minor-latin'>、</span><span lang=EN-US
style='font-size:12.0pt;mso-bidi-font-size:11.0pt;line-height:125%;mso-fareast-font-family:
宋体'>3</span><span style='font-size:12.0pt;mso-bidi-font-size:11.0pt;line-height:
125%;font-family:宋体;mso-ascii-font-family:Calibri;mso-ascii-theme-font:minor-latin;
mso-hansi-font-family:Calibri;mso-hansi-theme-font:minor-latin'>。</span><span
lang=EN-US style='font-size:12.0pt;mso-bidi-font-size:11.0pt;line-height:125%;
mso-fareast-font-family:宋体'>myid</span><span style='font-size:12.0pt;
mso-bidi-font-size:11.0pt;line-height:125%;font-family:宋体;mso-ascii-font-family:
Calibri;mso-ascii-theme-font:minor-latin;mso-hansi-font-family:Calibri;
mso-hansi-theme-font:minor-latin'>的意思是告诉</span><span lang=EN-US
style='font-size:12.0pt;mso-bidi-font-size:11.0pt;line-height:125%;mso-fareast-font-family:
宋体'>zk</span><span style='font-size:12.0pt;mso-bidi-font-size:11.0pt;
line-height:125%;font-family:宋体;mso-ascii-font-family:Calibri;mso-ascii-theme-font:
minor-latin;mso-hansi-font-family:Calibri;mso-hansi-theme-font:minor-latin'>，我自己在</span><span
lang=EN-US style='font-size:12.0pt;mso-bidi-font-size:11.0pt;line-height:125%;
mso-fareast-font-family:宋体'>zk</span><span style='font-size:12.0pt;mso-bidi-font-size:
11.0pt;line-height:125%;font-family:宋体;mso-ascii-font-family:Calibri;
mso-ascii-theme-font:minor-latin;mso-hansi-font-family:Calibri;mso-hansi-theme-font:
minor-latin'>集群中的</span><span lang=EN-US style='font-size:12.0pt;mso-bidi-font-size:
11.0pt;line-height:125%;mso-fareast-font-family:宋体'>id</span><span
style='font-size:12.0pt;mso-bidi-font-size:11.0pt;line-height:125%;font-family:
宋体;mso-ascii-font-family:Calibri;mso-ascii-theme-font:minor-latin;mso-hansi-font-family:
Calibri;mso-hansi-theme-font:minor-latin'>是多少。</span><span lang=EN-US
style='font-size:12.0pt;mso-bidi-font-size:11.0pt;line-height:125%;mso-fareast-font-family:
宋体'><o:p></o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='mso-no-proof:yes'><!--[if gte vml 1]><v:shape
 id="图片_x0020_15" o:spid="_x0000_i1101" type="#_x0000_t75" style='width:567pt;
 height:372.75pt;visibility:visible;mso-wrap-style:square'>
 <v:imagedata src="04_ZookeeperAppend.files/image032.png" o:title=""/>
</v:shape><![endif]--><![if !vml]><img width=756 height=497
src="04_ZookeeperAppend.files/image032.png" v:shapes="图片_x0020_15"><![endif]></span><span
lang=EN-US style='font-size:12.0pt;mso-bidi-font-size:11.0pt;line-height:125%;
mso-fareast-font-family:宋体'><o:p></o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='font-size:12.0pt;mso-bidi-font-size:
11.0pt;line-height:125%;mso-fareast-font-family:宋体'><o:p>&nbsp;</o:p></span></p>

<h2><span style='font-family:宋体;mso-ascii-font-family:"Calibri Light";
mso-ascii-theme-font:major-latin;mso-fareast-theme-font:major-fareast;
mso-hansi-font-family:"Calibri Light";mso-hansi-theme-font:major-latin'>启动</span></h2>

<p class=MsoNormal><span style='font-size:12.0pt;mso-bidi-font-size:11.0pt;
line-height:125%;font-family:宋体;mso-ascii-font-family:Calibri;mso-ascii-theme-font:
minor-latin;mso-hansi-font-family:Calibri;mso-hansi-theme-font:minor-latin'>进入</span><span
lang=EN-US style='font-size:12.0pt;mso-bidi-font-size:11.0pt;line-height:125%;
mso-fareast-font-family:宋体'>zk</span><span style='font-size:12.0pt;mso-bidi-font-size:
11.0pt;line-height:125%;font-family:宋体;mso-ascii-font-family:Calibri;
mso-ascii-theme-font:minor-latin;mso-hansi-font-family:Calibri;mso-hansi-theme-font:
minor-latin'>的</span><span lang=EN-US style='font-size:12.0pt;mso-bidi-font-size:
11.0pt;line-height:125%;mso-fareast-font-family:宋体'>bin</span><span
style='font-size:12.0pt;mso-bidi-font-size:11.0pt;line-height:125%;font-family:
宋体;mso-ascii-font-family:Calibri;mso-ascii-theme-font:minor-latin;mso-hansi-font-family:
Calibri;mso-hansi-theme-font:minor-latin'>目录，启动</span><span lang=EN-US
style='font-size:12.0pt;mso-bidi-font-size:11.0pt;line-height:125%;mso-fareast-font-family:
宋体'>zk<o:p></o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='mso-no-proof:yes'><!--[if gte vml 1]><v:shape
 id="图片_x0020_16" o:spid="_x0000_i1100" type="#_x0000_t75" style='width:567pt;
 height:393.75pt;visibility:visible;mso-wrap-style:square'>
 <v:imagedata src="04_ZookeeperAppend.files/image033.png" o:title=""/>
</v:shape><![endif]--><![if !vml]><img width=756 height=525
src="04_ZookeeperAppend.files/image033.png" v:shapes="图片_x0020_16"><![endif]></span><span
lang=EN-US style='font-size:12.0pt;mso-bidi-font-size:11.0pt;line-height:125%;
mso-fareast-font-family:宋体'><o:p></o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='font-size:12.0pt;mso-bidi-font-size:
11.0pt;line-height:125%;mso-fareast-font-family:宋体'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span style='font-size:12.0pt;mso-bidi-font-size:11.0pt;
line-height:125%;font-family:宋体;mso-ascii-font-family:Calibri;mso-ascii-theme-font:
minor-latin;mso-hansi-font-family:Calibri;mso-hansi-theme-font:minor-latin'>停止</span><span
lang=EN-US style='font-size:12.0pt;mso-bidi-font-size:11.0pt;line-height:125%;
mso-fareast-font-family:宋体'>zk</span><span style='font-size:12.0pt;mso-bidi-font-size:
11.0pt;line-height:125%;font-family:宋体;mso-ascii-font-family:Calibri;
mso-ascii-theme-font:minor-latin;mso-hansi-font-family:Calibri;mso-hansi-theme-font:
minor-latin'>服务的命令是</span><span lang=EN-US style='font-size:12.0pt;mso-bidi-font-size:
11.0pt;line-height:125%;mso-fareast-font-family:宋体'> ./zkServer.sh stop<o:p></o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='font-size:12.0pt;mso-bidi-font-size:
11.0pt;line-height:125%;mso-fareast-font-family:宋体'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span style='font-size:12.0pt;mso-bidi-font-size:11.0pt;
line-height:125%;font-family:宋体;mso-ascii-font-family:Calibri;mso-ascii-theme-font:
minor-latin;mso-hansi-font-family:Calibri;mso-hansi-theme-font:minor-latin'>等待一会，然后都</span><span
lang=EN-US style='font-size:12.0pt;mso-bidi-font-size:11.0pt;line-height:125%;
mso-fareast-font-family:宋体'>jps</span><span style='font-size:12.0pt;mso-bidi-font-size:
11.0pt;line-height:125%;font-family:宋体;mso-ascii-font-family:Calibri;
mso-ascii-theme-font:minor-latin;mso-hansi-font-family:Calibri;mso-hansi-theme-font:
minor-latin'>，看到</span><span lang=EN-US style='font-size:12.0pt;mso-bidi-font-size:
11.0pt;line-height:125%;mso-fareast-font-family:宋体'>QuorumPeerMain</span><span
style='font-size:12.0pt;mso-bidi-font-size:11.0pt;line-height:125%;font-family:
宋体;mso-ascii-font-family:Calibri;mso-ascii-theme-font:minor-latin;mso-hansi-font-family:
Calibri;mso-hansi-theme-font:minor-latin'>表示启动了</span><span lang=EN-US
style='font-size:12.0pt;mso-bidi-font-size:11.0pt;line-height:125%;mso-fareast-font-family:
宋体'><o:p></o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='mso-no-proof:yes'><!--[if gte vml 1]><v:shape
 id="图片_x0020_17" o:spid="_x0000_i1099" type="#_x0000_t75" style='width:195pt;
 height:39.75pt;visibility:visible;mso-wrap-style:square'>
 <v:imagedata src="04_ZookeeperAppend.files/image035.png" o:title=""/>
</v:shape><![endif]--><![if !vml]><img width=260 height=53
src="04_ZookeeperAppend.files/image035.png" v:shapes="图片_x0020_17"><![endif]></span><span
lang=EN-US style='font-size:12.0pt;mso-bidi-font-size:11.0pt;line-height:125%;
mso-fareast-font-family:宋体'><o:p></o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='font-size:12.0pt;mso-bidi-font-size:
11.0pt;line-height:125%;mso-fareast-font-family:宋体'><o:p>&nbsp;</o:p></span></p>

<h2><span style='font-family:宋体;mso-ascii-font-family:"Calibri Light";
mso-ascii-theme-font:major-latin;mso-fareast-theme-font:major-fareast;
mso-hansi-font-family:"Calibri Light";mso-hansi-theme-font:major-latin'>监控</span></h2>

<p class=MsoNormal><span style='font-size:12.0pt;mso-bidi-font-size:11.0pt;
line-height:125%;font-family:宋体;mso-ascii-font-family:Calibri;mso-ascii-theme-font:
minor-latin;mso-hansi-font-family:Calibri;mso-hansi-theme-font:minor-latin'>启动之后，在</span><span
lang=EN-US style='font-size:12.0pt;mso-bidi-font-size:11.0pt;line-height:125%;
mso-fareast-font-family:宋体'>bin</span><span style='font-size:12.0pt;mso-bidi-font-size:
11.0pt;line-height:125%;font-family:宋体;mso-ascii-font-family:Calibri;
mso-ascii-theme-font:minor-latin;mso-hansi-font-family:Calibri;mso-hansi-theme-font:
minor-latin'>目录下，有个</span><span lang=EN-US style='font-size:12.0pt;mso-bidi-font-size:
11.0pt;line-height:125%;mso-fareast-font-family:宋体'>out</span><span
style='font-size:12.0pt;mso-bidi-font-size:11.0pt;line-height:125%;font-family:
宋体;mso-ascii-font-family:Calibri;mso-ascii-theme-font:minor-latin;mso-hansi-font-family:
Calibri;mso-hansi-theme-font:minor-latin'>文件就是日志文件</span><span lang=EN-US
style='font-size:12.0pt;mso-bidi-font-size:11.0pt;line-height:125%;mso-fareast-font-family:
宋体'><o:p></o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='mso-no-proof:yes'><!--[if gte vml 1]><v:shape
 id="图片_x0020_19" o:spid="_x0000_i1098" type="#_x0000_t75" style='width:349.5pt;
 height:154.5pt;visibility:visible;mso-wrap-style:square'>
 <v:imagedata src="04_ZookeeperAppend.files/image036.png" o:title=""/>
</v:shape><![endif]--><![if !vml]><img width=466 height=206
src="04_ZookeeperAppend.files/image036.png" v:shapes="图片_x0020_19"><![endif]></span><span
lang=EN-US style='font-size:12.0pt;mso-bidi-font-size:11.0pt;line-height:125%;
mso-fareast-font-family:宋体'><o:p></o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='font-size:12.0pt;mso-bidi-font-size:
11.0pt;line-height:125%;mso-fareast-font-family:宋体'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span style='font-size:12.0pt;mso-bidi-font-size:11.0pt;
line-height:125%;font-family:宋体;mso-ascii-font-family:Calibri;mso-ascii-theme-font:
minor-latin;mso-hansi-font-family:Calibri;mso-hansi-theme-font:minor-latin'>查看状态，可以发现其中有一个是</span><span
lang=EN-US style='font-size:12.0pt;mso-bidi-font-size:11.0pt;line-height:125%;
mso-fareast-font-family:宋体'>leader<o:p></o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='mso-no-proof:yes'><!--[if gte vml 1]><v:shape
 id="图片_x0020_23" o:spid="_x0000_i1097" type="#_x0000_t75" style='width:567pt;
 height:309.75pt;visibility:visible;mso-wrap-style:square'>
 <v:imagedata src="04_ZookeeperAppend.files/image037.png" o:title=""/>
</v:shape><![endif]--><![if !vml]><img width=756 height=413
src="04_ZookeeperAppend.files/image037.png" v:shapes="图片_x0020_23"><![endif]></span><span
lang=EN-US style='font-size:12.0pt;mso-bidi-font-size:11.0pt;line-height:125%;
mso-fareast-font-family:宋体'><o:p></o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='font-size:12.0pt;mso-bidi-font-size:
11.0pt;line-height:125%;mso-fareast-font-family:宋体'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='font-size:12.0pt;mso-bidi-font-size:
11.0pt;line-height:125%;mso-fareast-font-family:宋体'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span style='font-size:12.0pt;mso-bidi-font-size:11.0pt;
line-height:125%;font-family:宋体;mso-ascii-font-family:Calibri;mso-ascii-theme-font:
minor-latin;mso-hansi-font-family:Calibri;mso-hansi-theme-font:minor-latin'>建议用奇数的集群，</span><span
lang=EN-US style='font-size:12.0pt;mso-bidi-font-size:11.0pt;line-height:125%;
mso-fareast-font-family:宋体'>zk</span><span style='font-size:12.0pt;mso-bidi-font-size:
11.0pt;line-height:125%;font-family:宋体;mso-ascii-font-family:Calibri;
mso-ascii-theme-font:minor-latin;mso-hansi-font-family:Calibri;mso-hansi-theme-font:
minor-latin'>的存储的数据量不大，主要数据都在内存里，硬盘只是辅助，据阿里说给</span><span lang=EN-US
style='font-size:12.0pt;mso-bidi-font-size:11.0pt;line-height:125%;mso-fareast-font-family:
宋体'>dubbo</span><span style='font-size:12.0pt;mso-bidi-font-size:11.0pt;
line-height:125%;font-family:宋体;mso-ascii-font-family:Calibri;mso-ascii-theme-font:
minor-latin;mso-hansi-font-family:Calibri;mso-hansi-theme-font:minor-latin'>做的</span><span
lang=EN-US style='font-size:12.0pt;mso-bidi-font-size:11.0pt;line-height:125%;
mso-fareast-font-family:宋体'>zk</span><span style='font-size:12.0pt;mso-bidi-font-size:
11.0pt;line-height:125%;font-family:宋体;mso-ascii-font-family:Calibri;
mso-ascii-theme-font:minor-latin;mso-hansi-font-family:Calibri;mso-hansi-theme-font:
minor-latin'>是</span><span lang=EN-US style='font-size:12.0pt;mso-bidi-font-size:
11.0pt;line-height:125%;mso-fareast-font-family:宋体'>100</span><span
style='font-size:12.0pt;mso-bidi-font-size:11.0pt;line-height:125%;font-family:
宋体;mso-ascii-font-family:Calibri;mso-ascii-theme-font:minor-latin;mso-hansi-font-family:
Calibri;mso-hansi-theme-font:minor-latin'>多台。</span><span lang=EN-US
style='font-size:12.0pt;mso-bidi-font-size:11.0pt;line-height:125%;mso-fareast-font-family:
宋体'>zk</span><span style='font-size:12.0pt;mso-bidi-font-size:11.0pt;
line-height:125%;font-family:宋体;mso-ascii-font-family:Calibri;mso-ascii-theme-font:
minor-latin;mso-hansi-font-family:Calibri;mso-hansi-theme-font:minor-latin'>是很多台机器对外提供服务，但有一个哥们是老大，其他都是跟随者。</span><span
lang=EN-US style='font-size:12.0pt;mso-bidi-font-size:11.0pt;line-height:125%;
mso-fareast-font-family:宋体'><o:p></o:p></span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<h2><span style='font-family:宋体;mso-ascii-font-family:"Calibri Light";
mso-ascii-theme-font:major-latin;mso-fareast-theme-font:major-fareast;
mso-hansi-font-family:"Calibri Light";mso-hansi-theme-font:major-latin'>模拟宕机</span></h2>

<p class=MsoNormal><span style='font-size:12.0pt;mso-bidi-font-size:11.0pt;
line-height:125%;font-family:宋体;mso-ascii-font-family:Calibri;mso-ascii-theme-font:
minor-latin;mso-hansi-font-family:Calibri;mso-hansi-theme-font:minor-latin'>模拟</span><span
lang=EN-US style='font-size:12.0pt;mso-bidi-font-size:11.0pt;line-height:125%;
mso-fareast-font-family:宋体'>leader</span><span style='font-size:12.0pt;
mso-bidi-font-size:11.0pt;line-height:125%;font-family:宋体;mso-ascii-font-family:
Calibri;mso-ascii-theme-font:minor-latin;mso-hansi-font-family:Calibri;
mso-hansi-theme-font:minor-latin'>宕机，杀死</span><span lang=EN-US
style='font-size:12.0pt;mso-bidi-font-size:11.0pt;line-height:125%;mso-fareast-font-family:
宋体'>leader</span><span style='font-size:12.0pt;mso-bidi-font-size:11.0pt;
line-height:125%;font-family:宋体;mso-ascii-font-family:Calibri;mso-ascii-theme-font:
minor-latin;mso-hansi-font-family:Calibri;mso-hansi-theme-font:minor-latin'>之后，可以看到又自动选举了一个</span><span
lang=EN-US style='font-size:12.0pt;mso-bidi-font-size:11.0pt;line-height:125%;
mso-fareast-font-family:宋体'>leader</span><span style='font-size:12.0pt;
mso-bidi-font-size:11.0pt;line-height:125%;font-family:宋体;mso-ascii-font-family:
Calibri;mso-ascii-theme-font:minor-latin;mso-hansi-font-family:Calibri;
mso-hansi-theme-font:minor-latin'>。</span><span lang=EN-US style='font-size:
12.0pt;mso-bidi-font-size:11.0pt;line-height:125%;mso-fareast-font-family:宋体'><o:p></o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='mso-no-proof:yes'><!--[if gte vml 1]><v:shape
 id="图片_x0020_24" o:spid="_x0000_i1096" type="#_x0000_t75" style='width:567pt;
 height:330.75pt;visibility:visible;mso-wrap-style:square'>
 <v:imagedata src="04_ZookeeperAppend.files/image039.png" o:title=""/>
</v:shape><![endif]--><![if !vml]><img width=756 height=441
src="04_ZookeeperAppend.files/image039.png" v:shapes="图片_x0020_24"><![endif]></span><span
lang=EN-US style='font-size:12.0pt;mso-bidi-font-size:11.0pt;line-height:125%;
mso-fareast-font-family:宋体'><o:p></o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='font-size:12.0pt;mso-bidi-font-size:
11.0pt;line-height:125%;mso-fareast-font-family:宋体'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='font-size:12.0pt;mso-bidi-font-size:
11.0pt;line-height:125%;mso-fareast-font-family:宋体'>Zookeeper</span><span
style='font-size:12.0pt;mso-bidi-font-size:11.0pt;line-height:125%;font-family:
宋体;mso-ascii-font-family:Calibri;mso-ascii-theme-font:minor-latin;mso-hansi-font-family:
Calibri;mso-hansi-theme-font:minor-latin'>配置集群的要求最少要</span><span lang=EN-US
style='font-size:12.0pt;mso-bidi-font-size:11.0pt;line-height:125%;mso-fareast-font-family:
宋体'>3</span><span style='font-size:12.0pt;mso-bidi-font-size:11.0pt;line-height:
125%;font-family:宋体;mso-ascii-font-family:Calibri;mso-ascii-theme-font:minor-latin;
mso-hansi-font-family:Calibri;mso-hansi-theme-font:minor-latin'>台，而且最好是奇数台集群，</span><span
lang=EN-US style='font-size:12.0pt;mso-bidi-font-size:11.0pt;line-height:125%;
mso-fareast-font-family:宋体'>3</span><span style='font-size:12.0pt;mso-bidi-font-size:
11.0pt;line-height:125%;font-family:宋体;mso-ascii-font-family:Calibri;
mso-ascii-theme-font:minor-latin;mso-hansi-font-family:Calibri;mso-hansi-theme-font:
minor-latin'>台机器挂了一台还能运行，并且重新选举</span><span lang=EN-US style='font-size:12.0pt;
mso-bidi-font-size:11.0pt;line-height:125%;mso-fareast-font-family:宋体'>leader</span><span
style='font-size:12.0pt;mso-bidi-font-size:11.0pt;line-height:125%;font-family:
宋体;mso-ascii-font-family:Calibri;mso-ascii-theme-font:minor-latin;mso-hansi-font-family:
Calibri;mso-hansi-theme-font:minor-latin'>，但是如果</span><span lang=EN-US
style='font-size:12.0pt;mso-bidi-font-size:11.0pt;line-height:125%;mso-fareast-font-family:
宋体'>3</span><span style='font-size:12.0pt;mso-bidi-font-size:11.0pt;line-height:
125%;font-family:宋体;mso-ascii-font-family:Calibri;mso-ascii-theme-font:minor-latin;
mso-hansi-font-family:Calibri;mso-hansi-theme-font:minor-latin'>台挂了两台，这就挂的集群超过了总集群的一半，那整个</span><span
lang=EN-US style='font-size:12.0pt;mso-bidi-font-size:11.0pt;line-height:125%;
mso-fareast-font-family:宋体'>Zookeeper</span><span style='font-size:12.0pt;
mso-bidi-font-size:11.0pt;line-height:125%;font-family:宋体;mso-ascii-font-family:
Calibri;mso-ascii-theme-font:minor-latin;mso-hansi-font-family:Calibri;
mso-hansi-theme-font:minor-latin'>就挂了，这是</span><span lang=EN-US
style='font-size:12.0pt;mso-bidi-font-size:11.0pt;line-height:125%;mso-fareast-font-family:
宋体'>zk</span><span style='font-size:12.0pt;mso-bidi-font-size:11.0pt;
line-height:125%;font-family:宋体;mso-ascii-font-family:Calibri;mso-ascii-theme-font:
minor-latin;mso-hansi-font-family:Calibri;mso-hansi-theme-font:minor-latin'>的算法决定的。</span><span
lang=EN-US style='font-size:12.0pt;mso-bidi-font-size:11.0pt;line-height:125%;
mso-fareast-font-family:宋体'><o:p></o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='font-size:12.0pt;mso-bidi-font-size:
11.0pt;line-height:125%;mso-fareast-font-family:宋体'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='font-size:12.0pt;mso-bidi-font-size:
11.0pt;line-height:125%;mso-fareast-font-family:宋体'><o:p>&nbsp;</o:p></span></p>

<h2><span lang=EN-US>Zookeeper</span><span style='font-family:宋体;mso-ascii-font-family:
"Calibri Light";mso-ascii-theme-font:major-latin;mso-fareast-theme-font:major-fareast;
mso-hansi-font-family:"Calibri Light";mso-hansi-theme-font:major-latin'>是棵数据树</span></h2>

<p class=MsoNormal><span style='font-family:宋体;mso-ascii-font-family:Calibri;
mso-ascii-theme-font:minor-latin;mso-fareast-theme-font:minor-fareast;
mso-hansi-font-family:Calibri;mso-hansi-theme-font:minor-latin'>如下图，</span><span
style='font-size:12.0pt;mso-bidi-font-size:11.0pt;line-height:125%;font-family:
宋体;mso-ascii-font-family:Calibri;mso-ascii-theme-font:minor-latin;mso-hansi-font-family:
Calibri;mso-hansi-theme-font:minor-latin'>数据树就是有很多节点，像一棵树，每个节点都有数据。</span></p>

<p class=MsoNormal><span lang=EN-US style='mso-no-proof:yes'><!--[if gte vml 1]><v:shape
 id="图片_x0020_26" o:spid="_x0000_i1095" type="#_x0000_t75" style='width:567pt;
 height:270.75pt;visibility:visible;mso-wrap-style:square'>
 <v:imagedata src="04_ZookeeperAppend.files/image041.png" o:title=""/>
</v:shape><![endif]--><![if !vml]><img width=756 height=361
src="04_ZookeeperAppend.files/image041.png" v:shapes="图片_x0020_26"><![endif]></span><span
lang=EN-US style='font-size:12.0pt;mso-bidi-font-size:11.0pt;line-height:125%;
mso-fareast-font-family:宋体'><o:p></o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='font-size:12.0pt;mso-bidi-font-size:
11.0pt;line-height:125%;mso-fareast-font-family:宋体'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span style='font-size:12.0pt;mso-bidi-font-size:11.0pt;
line-height:125%;font-family:宋体;mso-ascii-font-family:Calibri;mso-ascii-theme-font:
minor-latin;mso-hansi-font-family:Calibri;mso-hansi-theme-font:minor-latin'>所有的请求都先来到</span><span
lang=EN-US style='font-size:12.0pt;mso-bidi-font-size:11.0pt;line-height:125%;
mso-fareast-font-family:宋体'>leader</span><span style='font-size:12.0pt;
mso-bidi-font-size:11.0pt;line-height:125%;font-family:宋体;mso-ascii-font-family:
Calibri;mso-ascii-theme-font:minor-latin;mso-hansi-font-family:Calibri;
mso-hansi-theme-font:minor-latin'>这里，</span><span lang=EN-US style='font-size:
12.0pt;mso-bidi-font-size:11.0pt;line-height:125%;mso-fareast-font-family:宋体'>leader</span><span
style='font-size:12.0pt;mso-bidi-font-size:11.0pt;line-height:125%;font-family:
宋体;mso-ascii-font-family:Calibri;mso-ascii-theme-font:minor-latin;mso-hansi-font-family:
Calibri;mso-hansi-theme-font:minor-latin'>在转发给其他人。</span><span lang=EN-US
style='font-size:12.0pt;mso-bidi-font-size:11.0pt;line-height:125%;mso-fareast-font-family:
宋体'><o:p></o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='font-size:12.0pt;mso-bidi-font-size:
11.0pt;line-height:125%;mso-fareast-font-family:宋体'><o:p>&nbsp;</o:p></span></p>

<h2><span style='font-family:宋体;mso-ascii-font-family:"Calibri Light";
mso-ascii-theme-font:major-latin;mso-fareast-theme-font:major-fareast;
mso-hansi-font-family:"Calibri Light";mso-hansi-theme-font:major-latin'>客户端连接</span><span
lang=EN-US>zk</span><span style='font-family:宋体;mso-ascii-font-family:"Calibri Light";
mso-ascii-theme-font:major-latin;mso-fareast-theme-font:major-fareast;
mso-hansi-font-family:"Calibri Light";mso-hansi-theme-font:major-latin'>集群</span></h2>

<p class=MsoNormal><span style='font-size:12.0pt;mso-bidi-font-size:11.0pt;
line-height:125%;font-family:宋体;mso-ascii-font-family:Calibri;mso-ascii-theme-font:
minor-latin;mso-hansi-font-family:Calibri;mso-hansi-theme-font:minor-latin'>用</span><span
lang=EN-US style='font-size:12.0pt;mso-bidi-font-size:11.0pt;line-height:125%;
mso-fareast-font-family:宋体'>master</span><span style='font-size:12.0pt;
mso-bidi-font-size:11.0pt;line-height:125%;font-family:宋体;mso-ascii-font-family:
Calibri;mso-ascii-theme-font:minor-latin;mso-hansi-font-family:Calibri;
mso-hansi-theme-font:minor-latin'>作为客户端，同样上传</span><span lang=EN-US
style='font-size:12.0pt;mso-bidi-font-size:11.0pt;line-height:125%;mso-fareast-font-family:
宋体'>tar.gz</span><span style='font-size:12.0pt;mso-bidi-font-size:11.0pt;
line-height:125%;font-family:宋体;mso-ascii-font-family:Calibri;mso-ascii-theme-font:
minor-latin;mso-hansi-font-family:Calibri;mso-hansi-theme-font:minor-latin'>包，解压缩</span><span
lang=EN-US style='font-size:12.0pt;mso-bidi-font-size:11.0pt;line-height:125%;
mso-fareast-font-family:宋体'><o:p></o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='mso-no-proof:yes'><!--[if gte vml 1]><v:shape
 id="图片_x0020_25" o:spid="_x0000_i1094" type="#_x0000_t75" style='width:567pt;
 height:85.5pt;visibility:visible;mso-wrap-style:square'>
 <v:imagedata src="04_ZookeeperAppend.files/image043.png" o:title=""/>
</v:shape><![endif]--><![if !vml]><img width=756 height=114
src="04_ZookeeperAppend.files/image043.png" v:shapes="图片_x0020_25"><![endif]></span><span
lang=EN-US style='font-size:12.0pt;mso-bidi-font-size:11.0pt;line-height:125%;
mso-fareast-font-family:宋体'><o:p></o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='mso-no-proof:yes'><!--[if gte vml 1]><v:shape
 id="图片_x0020_27" o:spid="_x0000_i1093" type="#_x0000_t75" style='width:293.25pt;
 height:24pt;visibility:visible;mso-wrap-style:square'>
 <v:imagedata src="04_ZookeeperAppend.files/image045.png" o:title=""/>
</v:shape><![endif]--><![if !vml]><img width=391 height=32
src="04_ZookeeperAppend.files/image045.png" v:shapes="图片_x0020_27"><![endif]></span><span
lang=EN-US style='font-size:12.0pt;mso-bidi-font-size:11.0pt;line-height:125%;
mso-fareast-font-family:宋体'><o:p></o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='font-size:12.0pt;mso-bidi-font-size:
11.0pt;line-height:125%;mso-fareast-font-family:宋体'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span style='font-size:12.0pt;mso-bidi-font-size:11.0pt;
line-height:125%;font-family:宋体;mso-ascii-font-family:Calibri;mso-ascii-theme-font:
minor-latin;mso-hansi-font-family:Calibri;mso-hansi-theme-font:minor-latin'>进入</span><span
lang=EN-US style='font-size:12.0pt;mso-bidi-font-size:11.0pt;line-height:125%;
mso-fareast-font-family:宋体'>bin</span><span style='font-size:12.0pt;mso-bidi-font-size:
11.0pt;line-height:125%;font-family:宋体;mso-ascii-font-family:Calibri;
mso-ascii-theme-font:minor-latin;mso-hansi-font-family:Calibri;mso-hansi-theme-font:
minor-latin'>目录</span><span lang=EN-US style='font-size:12.0pt;mso-bidi-font-size:
11.0pt;line-height:125%;mso-fareast-font-family:宋体'><o:p></o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='mso-no-proof:yes'><!--[if gte vml 1]><v:shape
 id="图片_x0020_28" o:spid="_x0000_i1092" type="#_x0000_t75" style='width:341.25pt;
 height:165.75pt;visibility:visible;mso-wrap-style:square'>
 <v:imagedata src="04_ZookeeperAppend.files/image046.png" o:title=""/>
</v:shape><![endif]--><![if !vml]><img width=455 height=221
src="04_ZookeeperAppend.files/image046.png" v:shapes="图片_x0020_28"><![endif]></span><span
lang=EN-US style='font-size:12.0pt;mso-bidi-font-size:11.0pt;line-height:125%;
mso-fareast-font-family:宋体'><o:p></o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='font-size:12.0pt;mso-bidi-font-size:
11.0pt;line-height:125%;mso-fareast-font-family:宋体'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span style='font-size:12.0pt;mso-bidi-font-size:11.0pt;
line-height:125%;font-family:宋体;mso-ascii-font-family:Calibri;mso-ascii-theme-font:
minor-latin;mso-hansi-font-family:Calibri;mso-hansi-theme-font:minor-latin'>连接集群。使用</span><span
lang=EN-US style='font-size:12.0pt;mso-bidi-font-size:11.0pt;line-height:125%;
mso-fareast-font-family:宋体'>zkCli.sh</span><span style='font-size:12.0pt;
mso-bidi-font-size:11.0pt;line-height:125%;font-family:宋体;mso-ascii-font-family:
Calibri;mso-ascii-theme-font:minor-latin;mso-hansi-font-family:Calibri;
mso-hansi-theme-font:minor-latin'>连接，不管连接哪台服务数据都是一样的，</span><span lang=EN-US
style='font-size:12.0pt;mso-bidi-font-size:11.0pt;line-height:125%;mso-fareast-font-family:
宋体'>slave1</span><span style='font-size:12.0pt;mso-bidi-font-size:11.0pt;
line-height:125%;font-family:宋体;mso-ascii-font-family:Calibri;mso-ascii-theme-font:
minor-latin;mso-hansi-font-family:Calibri;mso-hansi-theme-font:minor-latin'>是</span><span
lang=EN-US style='font-size:12.0pt;mso-bidi-font-size:11.0pt;line-height:125%;
mso-fareast-font-family:宋体'>ip</span><span style='font-size:12.0pt;mso-bidi-font-size:
11.0pt;line-height:125%;font-family:宋体;mso-ascii-font-family:Calibri;
mso-ascii-theme-font:minor-latin;mso-hansi-font-family:Calibri;mso-hansi-theme-font:
minor-latin'>为</span><span lang=EN-US style='font-size:12.0pt;mso-bidi-font-size:
11.0pt;line-height:125%;mso-fareast-font-family:宋体'>101</span><span
style='font-size:12.0pt;mso-bidi-font-size:11.0pt;line-height:125%;font-family:
宋体;mso-ascii-font-family:Calibri;mso-ascii-theme-font:minor-latin;mso-hansi-font-family:
Calibri;mso-hansi-theme-font:minor-latin'>的机子，</span><span lang=EN-US
style='font-size:12.0pt;mso-bidi-font-size:11.0pt;line-height:125%;mso-fareast-font-family:
宋体'>hosts</span><span style='font-size:12.0pt;mso-bidi-font-size:11.0pt;
line-height:125%;font-family:宋体;mso-ascii-font-family:Calibri;mso-ascii-theme-font:
minor-latin;mso-hansi-font-family:Calibri;mso-hansi-theme-font:minor-latin'>文件有配置，而</span><span
lang=EN-US style='font-size:12.0pt;mso-bidi-font-size:11.0pt;line-height:125%;
mso-fareast-font-family:宋体'>2181</span><span style='font-size:12.0pt;
mso-bidi-font-size:11.0pt;line-height:125%;font-family:宋体;mso-ascii-font-family:
Calibri;mso-ascii-theme-font:minor-latin;mso-hansi-font-family:Calibri;
mso-hansi-theme-font:minor-latin'>端口就是前面配置文件看到的那个</span><span lang=EN-US
style='font-size:12.0pt;mso-bidi-font-size:11.0pt;line-height:125%;mso-fareast-font-family:
宋体'>clientPost</span><span style='font-size:12.0pt;mso-bidi-font-size:11.0pt;
line-height:125%;font-family:宋体;mso-ascii-font-family:Calibri;mso-ascii-theme-font:
minor-latin;mso-hansi-font-family:Calibri;mso-hansi-theme-font:minor-latin'>，即客户端连接集群的端口。（启动之前模拟宕机的机子，启动之后会自动拉取数据，保持数据一致）</span><span
lang=EN-US style='font-size:12.0pt;mso-bidi-font-size:11.0pt;line-height:125%;
mso-fareast-font-family:宋体'><o:p></o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='mso-no-proof:yes'><!--[if gte vml 1]><v:shape
 id="图片_x0020_30" o:spid="_x0000_i1091" type="#_x0000_t75" style='width:559.5pt;
 height:315pt;visibility:visible;mso-wrap-style:square'>
 <v:imagedata src="04_ZookeeperAppend.files/image047.png" o:title=""/>
</v:shape><![endif]--><![if !vml]><img width=746 height=420
src="04_ZookeeperAppend.files/image047.png" v:shapes="图片_x0020_30"><![endif]></span><span
lang=EN-US style='font-size:12.0pt;mso-bidi-font-size:11.0pt;line-height:125%;
mso-fareast-font-family:宋体'><o:p></o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='font-size:12.0pt;mso-bidi-font-size:
11.0pt;line-height:125%;mso-fareast-font-family:宋体'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span style='font-size:12.0pt;mso-bidi-font-size:11.0pt;
line-height:125%;font-family:宋体;mso-ascii-font-family:Calibri;mso-ascii-theme-font:
minor-latin;mso-hansi-font-family:Calibri;mso-hansi-theme-font:minor-latin'>敲</span><span
lang=EN-US style='font-size:12.0pt;mso-bidi-font-size:11.0pt;line-height:125%;
mso-fareast-font-family:宋体'>help</span><span style='font-size:12.0pt;
mso-bidi-font-size:11.0pt;line-height:125%;font-family:宋体;mso-ascii-font-family:
Calibri;mso-ascii-theme-font:minor-latin;mso-hansi-font-family:Calibri;
mso-hansi-theme-font:minor-latin'>，可以看到很多命令</span><span lang=EN-US
style='font-size:12.0pt;mso-bidi-font-size:11.0pt;line-height:125%;mso-fareast-font-family:
宋体'><o:p></o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='mso-no-proof:yes'><!--[if gte vml 1]><v:shape
 id="图片_x0020_31" o:spid="_x0000_i1090" type="#_x0000_t75" style='width:268.5pt;
 height:231.75pt;visibility:visible;mso-wrap-style:square'>
 <v:imagedata src="04_ZookeeperAppend.files/image049.png" o:title=""/>
</v:shape><![endif]--><![if !vml]><img width=358 height=309
src="04_ZookeeperAppend.files/image049.png" v:shapes="图片_x0020_31"><![endif]></span><span
lang=EN-US style='font-size:12.0pt;mso-bidi-font-size:11.0pt;line-height:125%;
mso-fareast-font-family:宋体'><o:p></o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='mso-no-proof:yes'><!--[if gte vml 1]><v:shape
 id="图片_x0020_68" o:spid="_x0000_i1089" type="#_x0000_t75" style='width:451.5pt;
 height:218.25pt;visibility:visible;mso-wrap-style:square'>
 <v:imagedata src="04_ZookeeperAppend.files/image051.png" o:title=""/>
</v:shape><![endif]--><![if !vml]><img width=602 height=291
src="04_ZookeeperAppend.files/image051.png" v:shapes="图片_x0020_68"><![endif]></span><span
lang=EN-US style='font-size:12.0pt;mso-bidi-font-size:11.0pt;line-height:125%;
mso-fareast-font-family:宋体'><o:p></o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='font-size:12.0pt;mso-bidi-font-size:
11.0pt;line-height:125%;mso-fareast-font-family:宋体'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span style='font-size:12.0pt;mso-bidi-font-size:11.0pt;
line-height:125%;font-family:宋体;mso-ascii-font-family:Calibri;mso-ascii-theme-font:
minor-latin;mso-hansi-font-family:Calibri;mso-hansi-theme-font:minor-latin'>列举根目录，</span><span
lang=EN-US style='font-size:12.0pt;mso-bidi-font-size:11.0pt;line-height:125%;
mso-fareast-font-family:宋体'>zookeeper</span><span style='font-size:12.0pt;
mso-bidi-font-size:11.0pt;line-height:125%;font-family:宋体;mso-ascii-font-family:
Calibri;mso-ascii-theme-font:minor-latin;mso-hansi-font-family:Calibri;
mso-hansi-theme-font:minor-latin'>是默认的节点，存</span><span lang=EN-US
style='font-size:12.0pt;mso-bidi-font-size:11.0pt;line-height:125%;mso-fareast-font-family:
宋体'>zk</span><span style='font-size:12.0pt;mso-bidi-font-size:11.0pt;
line-height:125%;font-family:宋体;mso-ascii-font-family:Calibri;mso-ascii-theme-font:
minor-latin;mso-hansi-font-family:Calibri;mso-hansi-theme-font:minor-latin'>自己的数据</span><span
lang=EN-US style='font-size:12.0pt;mso-bidi-font-size:11.0pt;line-height:125%;
mso-fareast-font-family:宋体'><o:p></o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='mso-no-proof:yes'><!--[if gte vml 1]><v:shape
 id="图片_x0020_32" o:spid="_x0000_i1088" type="#_x0000_t75" style='width:207pt;
 height:29.25pt;visibility:visible;mso-wrap-style:square'>
 <v:imagedata src="04_ZookeeperAppend.files/image053.png" o:title=""/>
</v:shape><![endif]--><![if !vml]><img width=276 height=39
src="04_ZookeeperAppend.files/image053.png" v:shapes="图片_x0020_32"><![endif]></span><span
lang=EN-US style='font-size:12.0pt;mso-bidi-font-size:11.0pt;line-height:125%;
mso-fareast-font-family:宋体'><o:p></o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='font-size:12.0pt;mso-bidi-font-size:
11.0pt;line-height:125%;mso-fareast-font-family:宋体'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='font-size:12.0pt;mso-bidi-font-size:
11.0pt;line-height:125%;mso-fareast-font-family:宋体'>ls2 /<o:p></o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='mso-no-proof:yes'><!--[if gte vml 1]><v:shape
 id="图片_x0020_69" o:spid="_x0000_i1087" type="#_x0000_t75" style='width:315.75pt;
 height:195.75pt;visibility:visible;mso-wrap-style:square'>
 <v:imagedata src="04_ZookeeperAppend.files/image054.png" o:title=""/>
</v:shape><![endif]--><![if !vml]><img width=421 height=261
src="04_ZookeeperAppend.files/image054.png" v:shapes="图片_x0020_69"><![endif]></span><span
lang=EN-US style='font-size:12.0pt;mso-bidi-font-size:11.0pt;line-height:125%;
mso-fareast-font-family:宋体'><o:p></o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='font-size:12.0pt;mso-bidi-font-size:
11.0pt;line-height:125%;mso-fareast-font-family:宋体'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span style='font-size:12.0pt;mso-bidi-font-size:11.0pt;
line-height:125%;font-family:宋体;mso-ascii-font-family:Calibri;mso-ascii-theme-font:
minor-latin;mso-hansi-font-family:Calibri;mso-hansi-theme-font:minor-latin'>创建</span><span
lang=EN-US style='font-size:12.0pt;mso-bidi-font-size:11.0pt;line-height:125%;
mso-fareast-font-family:宋体'>/app</span><span style='font-size:12.0pt;
mso-bidi-font-size:11.0pt;line-height:125%;font-family:宋体;mso-ascii-font-family:
Calibri;mso-ascii-theme-font:minor-latin;mso-hansi-font-family:Calibri;
mso-hansi-theme-font:minor-latin'>这个节点，后面跟着的是这个节点挂着的数据，什么类型都可以，存储是用</span><span
lang=EN-US style='font-size:12.0pt;mso-bidi-font-size:11.0pt;line-height:125%;
mso-fareast-font-family:宋体'>byte</span><span style='font-size:12.0pt;
mso-bidi-font-size:11.0pt;line-height:125%;font-family:宋体;mso-ascii-font-family:
Calibri;mso-ascii-theme-font:minor-latin;mso-hansi-font-family:Calibri;
mso-hansi-theme-font:minor-latin'>自己数据来存的</span><span lang=EN-US
style='font-size:12.0pt;mso-bidi-font-size:11.0pt;line-height:125%;mso-fareast-font-family:
宋体'><o:p></o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='mso-no-proof:yes'><!--[if gte vml 1]><v:shape
 id="图片_x0020_33" o:spid="_x0000_i1086" type="#_x0000_t75" style='width:299.25pt;
 height:53.25pt;visibility:visible;mso-wrap-style:square'>
 <v:imagedata src="04_ZookeeperAppend.files/image056.png" o:title=""/>
</v:shape><![endif]--><![if !vml]><img width=399 height=71
src="04_ZookeeperAppend.files/image056.png" v:shapes="图片_x0020_33"><![endif]></span><span
lang=EN-US style='font-size:12.0pt;mso-bidi-font-size:11.0pt;line-height:125%;
mso-fareast-font-family:宋体'><o:p></o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='font-size:12.0pt;mso-bidi-font-size:
11.0pt;line-height:125%;mso-fareast-font-family:宋体'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span style='font-size:12.0pt;mso-bidi-font-size:11.0pt;
line-height:125%;font-family:宋体;mso-ascii-font-family:Calibri;mso-ascii-theme-font:
minor-latin;mso-hansi-font-family:Calibri;mso-hansi-theme-font:minor-latin'>获取节点绑定的数据</span><span
lang=EN-US style='font-size:12.0pt;mso-bidi-font-size:11.0pt;line-height:125%;
mso-fareast-font-family:宋体'><o:p></o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='mso-no-proof:yes'><!--[if gte vml 1]><v:shape
 id="图片_x0020_34" o:spid="_x0000_i1085" type="#_x0000_t75" style='width:241.5pt;
 height:155.25pt;visibility:visible;mso-wrap-style:square'>
 <v:imagedata src="04_ZookeeperAppend.files/image057.png" o:title=""/>
</v:shape><![endif]--><![if !vml]><img width=322 height=207
src="04_ZookeeperAppend.files/image057.png" v:shapes="图片_x0020_34"><![endif]></span><span
lang=EN-US style='font-size:12.0pt;mso-bidi-font-size:11.0pt;line-height:125%;
mso-fareast-font-family:宋体'><o:p></o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='font-size:12.0pt;mso-bidi-font-size:
11.0pt;line-height:125%;mso-fareast-font-family:宋体'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span style='font-size:12.0pt;mso-bidi-font-size:11.0pt;
line-height:125%;font-family:宋体;mso-ascii-font-family:Calibri;mso-ascii-theme-font:
minor-latin;mso-hansi-font-family:Calibri;mso-hansi-theme-font:minor-latin'>在节点上创建节点</span><span
lang=EN-US style='font-size:12.0pt;mso-bidi-font-size:11.0pt;line-height:125%;
mso-fareast-font-family:宋体'><o:p></o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='mso-no-proof:yes'><!--[if gte vml 1]><v:shape
 id="图片_x0020_35" o:spid="_x0000_i1084" type="#_x0000_t75" style='width:349.5pt;
 height:63pt;visibility:visible;mso-wrap-style:square'>
 <v:imagedata src="04_ZookeeperAppend.files/image058.png" o:title=""/>
</v:shape><![endif]--><![if !vml]><img width=466 height=84
src="04_ZookeeperAppend.files/image058.png" v:shapes="图片_x0020_35"><![endif]></span><span
lang=EN-US style='font-size:12.0pt;mso-bidi-font-size:11.0pt;line-height:125%;
mso-fareast-font-family:宋体'><o:p></o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='font-size:12.0pt;mso-bidi-font-size:
11.0pt;line-height:125%;mso-fareast-font-family:宋体'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span style='font-size:12.0pt;mso-bidi-font-size:11.0pt;
line-height:125%;font-family:宋体;mso-ascii-font-family:Calibri;mso-ascii-theme-font:
minor-latin;mso-hansi-font-family:Calibri;mso-hansi-theme-font:minor-latin'>重新绑定节点的数据</span><span
lang=EN-US style='font-size:12.0pt;mso-bidi-font-size:11.0pt;line-height:125%;
mso-fareast-font-family:宋体'><o:p></o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='mso-no-proof:yes'><!--[if gte vml 1]><v:shape
 id="图片_x0020_36" o:spid="_x0000_i1083" type="#_x0000_t75" style='width:355.5pt;
 height:300pt;visibility:visible;mso-wrap-style:square'>
 <v:imagedata src="04_ZookeeperAppend.files/image059.png" o:title=""/>
</v:shape><![endif]--><![if !vml]><img width=474 height=400
src="04_ZookeeperAppend.files/image059.png" v:shapes="图片_x0020_36"><![endif]></span><span
lang=EN-US style='font-size:12.0pt;mso-bidi-font-size:11.0pt;line-height:125%;
mso-fareast-font-family:宋体'><o:p></o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='font-size:12.0pt;mso-bidi-font-size:
11.0pt;line-height:125%;mso-fareast-font-family:宋体'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span style='font-size:12.0pt;mso-bidi-font-size:11.0pt;
line-height:125%;font-family:宋体;mso-ascii-font-family:Calibri;mso-ascii-theme-font:
minor-latin;mso-hansi-font-family:Calibri;mso-hansi-theme-font:minor-latin'>创建临时节点，然后退出该客户端（不再连接</span><span
lang=EN-US style='font-size:12.0pt;mso-bidi-font-size:11.0pt;line-height:125%;
mso-fareast-font-family:宋体'>zk</span><span style='font-size:12.0pt;mso-bidi-font-size:
11.0pt;line-height:125%;font-family:宋体;mso-ascii-font-family:Calibri;
mso-ascii-theme-font:minor-latin;mso-hansi-font-family:Calibri;mso-hansi-theme-font:
minor-latin'>）</span><span lang=EN-US style='font-size:12.0pt;mso-bidi-font-size:
11.0pt;line-height:125%;mso-fareast-font-family:宋体'><o:p></o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='mso-no-proof:yes'><!--[if gte vml 1]><v:shape
 id="图片_x0020_70" o:spid="_x0000_i1082" type="#_x0000_t75" style='width:567pt;
 height:78pt;visibility:visible;mso-wrap-style:square'>
 <v:imagedata src="04_ZookeeperAppend.files/image060.png" o:title=""/>
</v:shape><![endif]--><![if !vml]><img width=756 height=104
src="04_ZookeeperAppend.files/image060.png" v:shapes="图片_x0020_70"><![endif]></span><span
lang=EN-US style='font-size:12.0pt;mso-bidi-font-size:11.0pt;line-height:125%;
mso-fareast-font-family:宋体'><o:p></o:p></span></p>

<p class=MsoNormal><span style='font-size:12.0pt;mso-bidi-font-size:11.0pt;
line-height:125%;font-family:宋体;mso-ascii-font-family:Calibri;mso-ascii-theme-font:
minor-latin;mso-hansi-font-family:Calibri;mso-hansi-theme-font:minor-latin'>然后再重新连接</span><span
lang=EN-US style='font-size:12.0pt;mso-bidi-font-size:11.0pt;line-height:125%;
mso-fareast-font-family:宋体'>zk</span><span style='font-size:12.0pt;mso-bidi-font-size:
11.0pt;line-height:125%;font-family:宋体;mso-ascii-font-family:Calibri;
mso-ascii-theme-font:minor-latin;mso-hansi-font-family:Calibri;mso-hansi-theme-font:
minor-latin'>，进来发现临时节点被删除了</span><span lang=EN-US style='font-size:12.0pt;
mso-bidi-font-size:11.0pt;line-height:125%;mso-fareast-font-family:宋体'><o:p></o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='mso-no-proof:yes'><!--[if gte vml 1]><v:shape
 id="图片_x0020_71" o:spid="_x0000_i1081" type="#_x0000_t75" style='width:474.75pt;
 height:47.25pt;visibility:visible;mso-wrap-style:square'>
 <v:imagedata src="04_ZookeeperAppend.files/image062.png" o:title=""/>
</v:shape><![endif]--><![if !vml]><img width=633 height=63
src="04_ZookeeperAppend.files/image062.png" v:shapes="图片_x0020_71"><![endif]></span><span
lang=EN-US style='font-size:12.0pt;mso-bidi-font-size:11.0pt;line-height:125%;
mso-fareast-font-family:宋体'><o:p></o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='font-size:12.0pt;mso-bidi-font-size:
11.0pt;line-height:125%;mso-fareast-font-family:宋体'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span style='font-size:12.0pt;mso-bidi-font-size:11.0pt;
line-height:125%;font-family:宋体;mso-ascii-font-family:Calibri;mso-ascii-theme-font:
minor-latin;mso-hansi-font-family:Calibri;mso-hansi-theme-font:minor-latin'>创建有序号的临时节点</span><span
lang=EN-US style='font-size:12.0pt;mso-bidi-font-size:11.0pt;line-height:125%;
mso-fareast-font-family:宋体'><o:p></o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='mso-no-proof:yes'><!--[if gte vml 1]><v:shape
 id="图片_x0020_72" o:spid="_x0000_i1080" type="#_x0000_t75" style='width:567pt;
 height:135.75pt;visibility:visible;mso-wrap-style:square'>
 <v:imagedata src="04_ZookeeperAppend.files/image063.png" o:title=""/>
</v:shape><![endif]--><![if !vml]><img width=756 height=181
src="04_ZookeeperAppend.files/image063.png" v:shapes="图片_x0020_72"><![endif]></span><span
lang=EN-US style='font-size:12.0pt;mso-bidi-font-size:11.0pt;line-height:125%;
mso-fareast-font-family:宋体'><o:p></o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='font-size:12.0pt;mso-bidi-font-size:
11.0pt;line-height:125%;mso-fareast-font-family:宋体'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span style='font-size:12.0pt;mso-bidi-font-size:11.0pt;
line-height:125%;font-family:宋体;mso-ascii-font-family:Calibri;mso-ascii-theme-font:
minor-latin;mso-hansi-font-family:Calibri;mso-hansi-theme-font:minor-latin'>监听</span><span
lang=EN-US style='font-size:12.0pt;mso-bidi-font-size:11.0pt;line-height:125%;
mso-fareast-font-family:宋体'><o:p></o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='mso-no-proof:yes'><!--[if gte vml 1]><v:shape
 id="图片_x0020_73" o:spid="_x0000_i1079" type="#_x0000_t75" style='width:391.5pt;
 height:196.5pt;visibility:visible;mso-wrap-style:square'>
 <v:imagedata src="04_ZookeeperAppend.files/image065.png" o:title=""/>
</v:shape><![endif]--><![if !vml]><img width=522 height=262
src="04_ZookeeperAppend.files/image065.png" v:shapes="图片_x0020_73"><![endif]></span><span
lang=EN-US style='font-size:12.0pt;mso-bidi-font-size:11.0pt;line-height:125%;
mso-fareast-font-family:宋体'><o:p></o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='mso-no-proof:yes'><!--[if gte vml 1]><v:shape
 id="图片_x0020_74" o:spid="_x0000_i1078" type="#_x0000_t75" style='width:390pt;
 height:118.5pt;visibility:visible;mso-wrap-style:square'>
 <v:imagedata src="04_ZookeeperAppend.files/image067.png" o:title=""/>
</v:shape><![endif]--><![if !vml]><img width=520 height=158
src="04_ZookeeperAppend.files/image067.png" v:shapes="图片_x0020_74"><![endif]></span><span
lang=EN-US style='font-size:12.0pt;mso-bidi-font-size:11.0pt;line-height:125%;
mso-fareast-font-family:宋体'><o:p></o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='font-size:12.0pt;mso-bidi-font-size:
11.0pt;line-height:125%;mso-fareast-font-family:宋体'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span style='font-size:12.0pt;mso-bidi-font-size:11.0pt;
line-height:125%;font-family:宋体;mso-ascii-font-family:Calibri;mso-ascii-theme-font:
minor-latin;mso-hansi-font-family:Calibri;mso-hansi-theme-font:minor-latin'>在其中一台</span><span
lang=EN-US style='font-size:12.0pt;mso-bidi-font-size:11.0pt;line-height:125%;
mso-fareast-font-family:宋体'>zk</span><span style='font-size:12.0pt;mso-bidi-font-size:
11.0pt;line-height:125%;font-family:宋体;mso-ascii-font-family:Calibri;
mso-ascii-theme-font:minor-latin;mso-hansi-font-family:Calibri;mso-hansi-theme-font:
minor-latin'>机器上监听（叫</span><span lang=EN-US style='font-size:12.0pt;mso-bidi-font-size:
11.0pt;line-height:125%;mso-fareast-font-family:宋体'>104</span><span
style='font-size:12.0pt;mso-bidi-font-size:11.0pt;line-height:125%;font-family:
宋体;mso-ascii-font-family:Calibri;mso-ascii-theme-font:minor-latin;mso-hansi-font-family:
Calibri;mso-hansi-theme-font:minor-latin'>），监听</span><span lang=EN-US
style='font-size:12.0pt;mso-bidi-font-size:11.0pt;line-height:125%;mso-fareast-font-family:
宋体'> /sanguo</span><span style='font-size:12.0pt;mso-bidi-font-size:11.0pt;
line-height:125%;font-family:宋体;mso-ascii-font-family:Calibri;mso-ascii-theme-font:
minor-latin;mso-hansi-font-family:Calibri;mso-hansi-theme-font:minor-latin'>节点的值的变化</span><span
lang=EN-US style='font-size:12.0pt;mso-bidi-font-size:11.0pt;line-height:125%;
mso-fareast-font-family:宋体'><o:p></o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='mso-no-proof:yes'><!--[if gte vml 1]><v:shape
 id="图片_x0020_79" o:spid="_x0000_i1077" type="#_x0000_t75" style='width:567pt;
 height:253.5pt;visibility:visible;mso-wrap-style:square'>
 <v:imagedata src="04_ZookeeperAppend.files/image069.png" o:title=""/>
</v:shape><![endif]--><![if !vml]><img width=756 height=338
src="04_ZookeeperAppend.files/image069.png" v:shapes="图片_x0020_79"><![endif]></span><span
lang=EN-US style='font-size:12.0pt;mso-bidi-font-size:11.0pt;line-height:125%;
mso-fareast-font-family:宋体'><o:p></o:p></span></p>

<p class=MsoNormal><span style='font-size:12.0pt;mso-bidi-font-size:11.0pt;
line-height:125%;font-family:宋体;mso-ascii-font-family:Calibri;mso-ascii-theme-font:
minor-latin;mso-hansi-font-family:Calibri;mso-hansi-theme-font:minor-latin'>在另一台</span><span
lang=EN-US style='font-size:12.0pt;mso-bidi-font-size:11.0pt;line-height:125%;
mso-fareast-font-family:宋体'>zk</span><span style='font-size:12.0pt;mso-bidi-font-size:
11.0pt;line-height:125%;font-family:宋体;mso-ascii-font-family:Calibri;
mso-ascii-theme-font:minor-latin;mso-hansi-font-family:Calibri;mso-hansi-theme-font:
minor-latin'>机器上（叫</span><span lang=EN-US style='font-size:12.0pt;mso-bidi-font-size:
11.0pt;line-height:125%;mso-fareast-font-family:宋体'>103</span><span
style='font-size:12.0pt;mso-bidi-font-size:11.0pt;line-height:125%;font-family:
宋体;mso-ascii-font-family:Calibri;mso-ascii-theme-font:minor-latin;mso-hansi-font-family:
Calibri;mso-hansi-theme-font:minor-latin'>）设置一下</span><span style='font-size:
12.0pt;mso-bidi-font-size:11.0pt;line-height:125%;mso-fareast-font-family:宋体'> <span
lang=EN-US>/sanguo</span></span><span style='font-size:12.0pt;mso-bidi-font-size:
11.0pt;line-height:125%;font-family:宋体;mso-ascii-font-family:Calibri;
mso-ascii-theme-font:minor-latin;mso-hansi-font-family:Calibri;mso-hansi-theme-font:
minor-latin'>节点的值</span><span lang=EN-US style='font-size:12.0pt;mso-bidi-font-size:
11.0pt;line-height:125%;mso-fareast-font-family:宋体'><o:p></o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='mso-no-proof:yes'><!--[if gte vml 1]><v:shape
 id="图片_x0020_78" o:spid="_x0000_i1076" type="#_x0000_t75" style='width:566.25pt;
 height:273pt;visibility:visible;mso-wrap-style:square'>
 <v:imagedata src="04_ZookeeperAppend.files/image071.png" o:title=""/>
</v:shape><![endif]--><![if !vml]><img width=755 height=364
src="04_ZookeeperAppend.files/image071.png" v:shapes="图片_x0020_78"><![endif]></span><span
lang=EN-US style='font-size:12.0pt;mso-bidi-font-size:11.0pt;line-height:125%;
mso-fareast-font-family:宋体'><o:p></o:p></span></p>

<p class=MsoNormal><span style='font-size:12.0pt;mso-bidi-font-size:11.0pt;
line-height:125%;font-family:宋体;mso-ascii-font-family:Calibri;mso-ascii-theme-font:
minor-latin;mso-hansi-font-family:Calibri;mso-hansi-theme-font:minor-latin'>然后就会看到</span><span
lang=EN-US style='font-size:12.0pt;mso-bidi-font-size:11.0pt;line-height:125%;
mso-fareast-font-family:宋体'>104</span><span style='font-size:12.0pt;mso-bidi-font-size:
11.0pt;line-height:125%;font-family:宋体;mso-ascii-font-family:Calibri;
mso-ascii-theme-font:minor-latin;mso-hansi-font-family:Calibri;mso-hansi-theme-font:
minor-latin'>监听到了节点的数据有变化，需要注意的是，监听一下，只有一次有效，下次需要重新监听</span><span lang=EN-US
style='font-size:12.0pt;mso-bidi-font-size:11.0pt;line-height:125%;mso-fareast-font-family:
宋体'><o:p></o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='mso-no-proof:yes'><!--[if gte vml 1]><v:shape
 id="图片_x0020_77" o:spid="_x0000_i1075" type="#_x0000_t75" style='width:566.25pt;
 height:270.75pt;visibility:visible;mso-wrap-style:square'>
 <v:imagedata src="04_ZookeeperAppend.files/image073.png" o:title=""/>
</v:shape><![endif]--><![if !vml]><img width=755 height=361
src="04_ZookeeperAppend.files/image073.png" v:shapes="图片_x0020_77"><![endif]></span><span
lang=EN-US style='font-size:12.0pt;mso-bidi-font-size:11.0pt;line-height:125%;
mso-fareast-font-family:宋体'><o:p></o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='font-size:12.0pt;mso-bidi-font-size:
11.0pt;line-height:125%;mso-fareast-font-family:宋体'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span style='font-size:12.0pt;mso-bidi-font-size:11.0pt;
line-height:125%;font-family:宋体;mso-ascii-font-family:Calibri;mso-ascii-theme-font:
minor-latin;mso-hansi-font-family:Calibri;mso-hansi-theme-font:minor-latin'>监听节点的子节点的变化（路径变化），先监听</span><span
lang=EN-US style='font-size:12.0pt;mso-bidi-font-size:11.0pt;line-height:125%;
mso-fareast-font-family:宋体'><o:p></o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='mso-no-proof:yes'><!--[if gte vml 1]><v:shape
 id="图片_x0020_80" o:spid="_x0000_i1074" type="#_x0000_t75" style='width:567pt;
 height:76.5pt;visibility:visible;mso-wrap-style:square'>
 <v:imagedata src="04_ZookeeperAppend.files/image075.png" o:title=""/>
</v:shape><![endif]--><![if !vml]><img width=756 height=102
src="04_ZookeeperAppend.files/image075.png" v:shapes="图片_x0020_80"><![endif]></span><span
lang=EN-US style='font-size:12.0pt;mso-bidi-font-size:11.0pt;line-height:125%;
mso-fareast-font-family:宋体'><o:p></o:p></span></p>

<p class=MsoNormal><span style='font-size:12.0pt;mso-bidi-font-size:11.0pt;
line-height:125%;font-family:宋体;mso-ascii-font-family:Calibri;mso-ascii-theme-font:
minor-latin;mso-hansi-font-family:Calibri;mso-hansi-theme-font:minor-latin'>另一个机子创建子节点</span><span
lang=EN-US style='font-size:12.0pt;mso-bidi-font-size:11.0pt;line-height:125%;
mso-fareast-font-family:宋体'><o:p></o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='mso-no-proof:yes'><!--[if gte vml 1]><v:shape
 id="图片_x0020_81" o:spid="_x0000_i1073" type="#_x0000_t75" style='width:567pt;
 height:69.75pt;visibility:visible;mso-wrap-style:square'>
 <v:imagedata src="04_ZookeeperAppend.files/image077.png" o:title=""/>
</v:shape><![endif]--><![if !vml]><img width=756 height=93
src="04_ZookeeperAppend.files/image077.png" v:shapes="图片_x0020_81"><![endif]></span><span
lang=EN-US style='font-size:12.0pt;mso-bidi-font-size:11.0pt;line-height:125%;
mso-fareast-font-family:宋体'><o:p></o:p></span></p>

<p class=MsoNormal><span style='font-size:12.0pt;mso-bidi-font-size:11.0pt;
line-height:125%;font-family:宋体;mso-ascii-font-family:Calibri;mso-ascii-theme-font:
minor-latin;mso-hansi-font-family:Calibri;mso-hansi-theme-font:minor-latin'>可以看到</span><span
lang=EN-US style='font-size:12.0pt;mso-bidi-font-size:11.0pt;line-height:125%;
mso-fareast-font-family:宋体'>103</span><span style='font-size:12.0pt;mso-bidi-font-size:
11.0pt;line-height:125%;font-family:宋体;mso-ascii-font-family:Calibri;
mso-ascii-theme-font:minor-latin;mso-hansi-font-family:Calibri;mso-hansi-theme-font:
minor-latin'>监听到了子节点的变化</span><span lang=EN-US style='font-size:12.0pt;
mso-bidi-font-size:11.0pt;line-height:125%;mso-fareast-font-family:宋体'><o:p></o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='mso-no-proof:yes'><!--[if gte vml 1]><v:shape
 id="图片_x0020_82" o:spid="_x0000_i1072" type="#_x0000_t75" style='width:567pt;
 height:146.25pt;visibility:visible;mso-wrap-style:square'>
 <v:imagedata src="04_ZookeeperAppend.files/image079.png" o:title=""/>
</v:shape><![endif]--><![if !vml]><img width=756 height=195
src="04_ZookeeperAppend.files/image079.png" v:shapes="图片_x0020_82"><![endif]></span><span
lang=EN-US style='font-size:12.0pt;mso-bidi-font-size:11.0pt;line-height:125%;
mso-fareast-font-family:宋体'><o:p></o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='font-size:12.0pt;mso-bidi-font-size:
11.0pt;line-height:125%;mso-fareast-font-family:宋体'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='font-size:12.0pt;mso-bidi-font-size:
11.0pt;line-height:125%;mso-fareast-font-family:宋体'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='font-size:12.0pt;mso-bidi-font-size:
11.0pt;line-height:125%;mso-fareast-font-family:宋体'>zookeeper</span><span
style='font-size:12.0pt;mso-bidi-font-size:11.0pt;line-height:125%;font-family:
宋体;mso-ascii-font-family:Calibri;mso-ascii-theme-font:minor-latin;mso-hansi-font-family:
Calibri;mso-hansi-theme-font:minor-latin'>就是一个数据库，只是数据存在内存中。</span><span
lang=EN-US style='font-size:12.0pt;mso-bidi-font-size:11.0pt;line-height:125%;
mso-fareast-font-family:宋体'><o:p></o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='font-size:12.0pt;mso-bidi-font-size:
11.0pt;line-height:125%;mso-fareast-font-family:宋体'><o:p>&nbsp;</o:p></span></p>

<h1><span lang=EN-US>3</span><span style='font-family:宋体;mso-ascii-font-family:
Calibri;mso-ascii-theme-font:minor-latin;mso-fareast-theme-font:minor-fareast;
mso-hansi-font-family:Calibri;mso-hansi-theme-font:minor-latin'>、应用场景</span></h1>

<h2><span lang=EN-US>1</span><span style='font-family:宋体;mso-ascii-font-family:
"Calibri Light";mso-ascii-theme-font:major-latin;mso-fareast-theme-font:major-fareast;
mso-hansi-font-family:"Calibri Light";mso-hansi-theme-font:major-latin'>）统一命名服务</span></h2>

<p class=MsoNormal><span lang=EN-US style='mso-no-proof:yes'><!--[if gte vml 1]><v:shape
 id="图片_x0020_39" o:spid="_x0000_i1071" type="#_x0000_t75" style='width:267pt;
 height:68.25pt;visibility:visible;mso-wrap-style:square'>
 <v:imagedata src="04_ZookeeperAppend.files/image081.png" o:title=""/>
</v:shape><![endif]--><![if !vml]><img width=356 height=91
src="04_ZookeeperAppend.files/image081.png" v:shapes="图片_x0020_39"><![endif]></span><span
lang=EN-US style='font-size:12.0pt;mso-bidi-font-size:11.0pt;line-height:125%;
mso-fareast-font-family:宋体'><o:p></o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='mso-no-proof:yes'><!--[if gte vml 1]><v:shape
 id="图片_x0020_38" o:spid="_x0000_i1070" type="#_x0000_t75" style='width:378pt;
 height:276.75pt;visibility:visible;mso-wrap-style:square'>
 <v:imagedata src="04_ZookeeperAppend.files/image083.png" o:title=""/>
</v:shape><![endif]--><![if !vml]><img width=504 height=369
src="04_ZookeeperAppend.files/image083.png" v:shapes="图片_x0020_38"><![endif]></span><span
lang=EN-US style='font-size:12.0pt;mso-bidi-font-size:11.0pt;line-height:125%;
mso-fareast-font-family:宋体'><o:p></o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='font-size:12.0pt;mso-bidi-font-size:
11.0pt;line-height:125%;mso-fareast-font-family:宋体'><o:p>&nbsp;</o:p></span></p>

<h2><span lang=EN-US>2</span><span style='font-family:宋体;mso-ascii-font-family:
"Calibri Light";mso-ascii-theme-font:major-latin;mso-fareast-theme-font:major-fareast;
mso-hansi-font-family:"Calibri Light";mso-hansi-theme-font:major-latin'>）统一配置管理</span></h2>

<p class=MsoNormal><span lang=EN-US style='font-size:12.0pt;mso-bidi-font-size:
11.0pt;line-height:125%;mso-fareast-font-family:宋体'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='mso-no-proof:yes'><!--[if gte vml 1]><v:shape
 id="图片_x0020_37" o:spid="_x0000_i1069" type="#_x0000_t75" style='width:409.5pt;
 height:224.25pt;visibility:visible;mso-wrap-style:square'>
 <v:imagedata src="04_ZookeeperAppend.files/image085.png" o:title=""/>
</v:shape><![endif]--><![if !vml]><img width=546 height=299
src="04_ZookeeperAppend.files/image085.png" v:shapes="图片_x0020_37"><![endif]></span><span
lang=EN-US style='font-size:12.0pt;mso-bidi-font-size:11.0pt;line-height:125%;
mso-fareast-font-family:宋体'><o:p></o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='font-size:12.0pt;mso-bidi-font-size:
11.0pt;line-height:125%;mso-fareast-font-family:宋体'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span style='font-size:12.0pt;mso-bidi-font-size:11.0pt;
line-height:125%;font-family:宋体;mso-ascii-font-family:Calibri;mso-ascii-theme-font:
minor-latin;mso-hansi-font-family:Calibri;mso-hansi-theme-font:minor-latin'>详细版：</span><span
lang=EN-US style='font-size:12.0pt;mso-bidi-font-size:11.0pt;line-height:125%;
mso-fareast-font-family:宋体'><o:p></o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='mso-no-proof:yes'><!--[if gte vml 1]><v:shape
 id="图片_x0020_49" o:spid="_x0000_i1068" type="#_x0000_t75" style='width:219pt;
 height:196.5pt;visibility:visible;mso-wrap-style:square'>
 <v:imagedata src="04_ZookeeperAppend.files/image087.png" o:title=""/>
</v:shape><![endif]--><![if !vml]><img width=292 height=262
src="04_ZookeeperAppend.files/image087.png" v:shapes="图片_x0020_49"><![endif]></span><span
lang=EN-US style='font-size:12.0pt;mso-bidi-font-size:11.0pt;line-height:125%;
mso-fareast-font-family:宋体'><o:p></o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='mso-no-proof:yes'><!--[if gte vml 1]><v:shape
 id="图片_x0020_41" o:spid="_x0000_i1067" type="#_x0000_t75" style='width:337.5pt;
 height:313.5pt;visibility:visible;mso-wrap-style:square'>
 <v:imagedata src="04_ZookeeperAppend.files/image089.png" o:title=""/>
</v:shape><![endif]--><![if !vml]><img width=450 height=418
src="04_ZookeeperAppend.files/image089.png" v:shapes="图片_x0020_41"><![endif]></span><span
lang=EN-US style='font-size:12.0pt;mso-bidi-font-size:11.0pt;line-height:125%;
mso-fareast-font-family:宋体'><o:p></o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='font-size:12.0pt;mso-bidi-font-size:
11.0pt;line-height:125%;mso-fareast-font-family:宋体'><o:p>&nbsp;</o:p></span></p>

<h2><span lang=EN-US>3</span><span style='font-family:宋体;mso-ascii-font-family:
"Calibri Light";mso-ascii-theme-font:major-latin;mso-fareast-theme-font:major-fareast;
mso-hansi-font-family:"Calibri Light";mso-hansi-theme-font:major-latin'>）统一集群管理</span></h2>

<p class=MsoNormal><span lang=EN-US style='mso-no-proof:yes'><!--[if gte vml 1]><v:shape
 id="图片_x0020_58" o:spid="_x0000_i1066" type="#_x0000_t75" style='width:312pt;
 height:125.25pt;visibility:visible;mso-wrap-style:square'>
 <v:imagedata src="04_ZookeeperAppend.files/image091.png" o:title=""/>
</v:shape><![endif]--><![if !vml]><img width=416 height=167
src="04_ZookeeperAppend.files/image091.png" v:shapes="图片_x0020_58"><![endif]></span></p>

<p class=MsoNormal><span lang=EN-US style='mso-no-proof:yes'><!--[if gte vml 1]><v:shape
 id="图片_x0020_53" o:spid="_x0000_i1065" type="#_x0000_t75" style='width:457.5pt;
 height:276pt;visibility:visible;mso-wrap-style:square'>
 <v:imagedata src="04_ZookeeperAppend.files/image093.png" o:title=""/>
</v:shape><![endif]--><![if !vml]><img width=610 height=368
src="04_ZookeeperAppend.files/image093.png" v:shapes="图片_x0020_53"><![endif]></span></p>

<p class=MsoNormal><span lang=EN-US style='font-size:12.0pt;mso-bidi-font-size:
11.0pt;line-height:125%;mso-fareast-font-family:宋体'><o:p>&nbsp;</o:p></span></p>

<h2><span lang=EN-US>4</span><span style='font-family:宋体;mso-ascii-font-family:
"Calibri Light";mso-ascii-theme-font:major-latin;mso-fareast-theme-font:major-fareast;
mso-hansi-font-family:"Calibri Light";mso-hansi-theme-font:major-latin'>）服务器动态上下线</span></h2>

<p class=MsoNormal><span lang=EN-US style='mso-no-proof:yes'><!--[if gte vml 1]><v:shape
 id="图片_x0020_59" o:spid="_x0000_i1064" type="#_x0000_t75" style='width:567pt;
 height:283.5pt;visibility:visible;mso-wrap-style:square'>
 <v:imagedata src="04_ZookeeperAppend.files/image095.png" o:title=""/>
</v:shape><![endif]--><![if !vml]><img width=756 height=378
src="04_ZookeeperAppend.files/image095.png" v:shapes="图片_x0020_59"><![endif]></span><span
lang=EN-US style='font-size:12.0pt;mso-bidi-font-size:11.0pt;line-height:125%;
mso-fareast-font-family:宋体'><o:p></o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='font-size:12.0pt;mso-bidi-font-size:
11.0pt;line-height:125%;mso-fareast-font-family:宋体'><o:p>&nbsp;</o:p></span></p>

<h2><span lang=EN-US>5</span><span style='font-family:宋体;mso-ascii-font-family:
"Calibri Light";mso-ascii-theme-font:major-latin;mso-fareast-theme-font:major-fareast;
mso-hansi-font-family:"Calibri Light";mso-hansi-theme-font:major-latin'>）</span><span
lang=EN-US>HA</span></h2>

<p class=MsoNormal><span lang=EN-US style='mso-bidi-font-size:10.5pt;
line-height:125%;font-family:"Arial",sans-serif;color:#333333;background:white'>HA</span><span
style='mso-bidi-font-size:10.5pt;line-height:125%;font-family:宋体;mso-ascii-font-family:
Arial;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:Arial;
mso-bidi-font-family:Arial;color:#333333;background:white'>是</span><span
lang=EN-US style='mso-bidi-font-size:10.5pt;line-height:125%;font-family:"Arial",sans-serif;
color:#333333;background:white'>High Available</span><span style='mso-bidi-font-size:
10.5pt;line-height:125%;font-family:宋体;mso-ascii-font-family:Arial;mso-fareast-theme-font:
minor-fareast;mso-hansi-font-family:Arial;mso-bidi-font-family:Arial;
color:#333333;background:white'>缩写，是双机集群系统简称，指高可用性集群，是保证业务连续性的有效解决方案，一般有两个或两个以上的节点，且分为活动节点及备用节点。</span><span
lang=EN-US style='mso-bidi-font-size:10.5pt;line-height:125%;font-family:"Arial",sans-serif;
color:#333333;background:white'><o:p></o:p></span></p>

<p class=MsoNormal><span style='mso-bidi-font-size:10.5pt;line-height:125%;
font-family:宋体;mso-ascii-font-family:Arial;mso-fareast-theme-font:minor-fareast;
mso-hansi-font-family:Arial;mso-bidi-font-family:Arial;color:#333333;
background:white'>后面就是用</span><span lang=EN-US style='mso-bidi-font-size:10.5pt;
line-height:125%;font-family:"Arial",sans-serif;color:#333333;background:white'>Java</span><span
style='mso-bidi-font-size:10.5pt;line-height:125%;font-family:宋体;mso-ascii-font-family:
Arial;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:Arial;
mso-bidi-font-family:Arial;color:#333333;background:white'>写这个例子，下图这些流程都是要自己动手写代码实现的。</span><span
lang=EN-US style='font-size:12.0pt;mso-bidi-font-size:11.0pt;line-height:125%;
mso-fareast-font-family:宋体'><o:p></o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='mso-no-proof:yes'><!--[if gte vml 1]><v:shape
 id="图片_x0020_44" o:spid="_x0000_i1063" type="#_x0000_t75" style='width:566.25pt;
 height:309.75pt;visibility:visible;mso-wrap-style:square'>
 <v:imagedata src="04_ZookeeperAppend.files/image097.png" o:title=""/>
</v:shape><![endif]--><![if !vml]><img width=755 height=413
src="04_ZookeeperAppend.files/image097.png" v:shapes="图片_x0020_44"><![endif]></span><span
lang=EN-US style='font-size:12.0pt;mso-bidi-font-size:11.0pt;line-height:125%;
mso-fareast-font-family:宋体'><o:p></o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='font-size:12.0pt;mso-bidi-font-size:
11.0pt;line-height:125%;mso-fareast-font-family:宋体'><o:p>&nbsp;</o:p></span></p>

<h2><span lang=EN-US>6</span><span style='font-family:宋体;mso-ascii-font-family:
"Calibri Light";mso-ascii-theme-font:major-latin;mso-fareast-theme-font:major-fareast;
mso-hansi-font-family:"Calibri Light";mso-hansi-theme-font:major-latin'>）软负载均衡</span></h2>

<p class=MsoNormal><span lang=EN-US style='mso-no-proof:yes'><!--[if gte vml 1]><v:shape
 id="图片_x0020_60" o:spid="_x0000_i1062" type="#_x0000_t75" style='width:567pt;
 height:303.75pt;visibility:visible;mso-wrap-style:square'>
 <v:imagedata src="04_ZookeeperAppend.files/image099.png" o:title=""/>
</v:shape><![endif]--><![if !vml]><img width=756 height=405
src="04_ZookeeperAppend.files/image099.png" v:shapes="图片_x0020_60"><![endif]></span></p>

<p class=MsoNormal><span lang=EN-US style='font-size:12.0pt;mso-bidi-font-size:
11.0pt;line-height:125%;mso-fareast-font-family:宋体'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='font-size:12.0pt;mso-bidi-font-size:
11.0pt;line-height:125%;mso-fareast-font-family:宋体'>…<o:p></o:p></span></p>

<h1><span lang=EN-US>4</span><span style='font-family:宋体;mso-ascii-font-family:
Calibri;mso-ascii-theme-font:minor-latin;mso-fareast-theme-font:minor-fareast;
mso-hansi-font-family:Calibri;mso-hansi-theme-font:minor-latin'>、</span><span
lang=EN-US>Java API</span></h1>

<p class=MsoNormal><span lang=EN-US style='font-size:12.0pt;mso-bidi-font-size:
11.0pt;line-height:125%;mso-fareast-font-family:宋体'>zk</span><span
style='font-size:12.0pt;mso-bidi-font-size:11.0pt;line-height:125%;font-family:
宋体;mso-ascii-font-family:Calibri;mso-ascii-theme-font:minor-latin;mso-hansi-font-family:
Calibri;mso-hansi-theme-font:minor-latin'>还提供了</span><span lang=EN-US
style='font-size:12.0pt;mso-bidi-font-size:11.0pt;line-height:125%;mso-fareast-font-family:
宋体'>API</span><span style='font-size:12.0pt;mso-bidi-font-size:11.0pt;
line-height:125%;font-family:宋体;mso-ascii-font-family:Calibri;mso-ascii-theme-font:
minor-latin;mso-hansi-font-family:Calibri;mso-hansi-theme-font:minor-latin'>，使用这些</span><span
lang=EN-US style='font-size:12.0pt;mso-bidi-font-size:11.0pt;line-height:125%;
mso-fareast-font-family:宋体'>API</span><span style='font-size:12.0pt;mso-bidi-font-size:
11.0pt;line-height:125%;font-family:宋体;mso-ascii-font-family:Calibri;
mso-ascii-theme-font:minor-latin;mso-hansi-font-family:Calibri;mso-hansi-theme-font:
minor-latin'>可以往</span><span lang=EN-US style='font-size:12.0pt;mso-bidi-font-size:
11.0pt;line-height:125%;mso-fareast-font-family:宋体'>zk</span><span
style='font-size:12.0pt;mso-bidi-font-size:11.0pt;line-height:125%;font-family:
宋体;mso-ascii-font-family:Calibri;mso-ascii-theme-font:minor-latin;mso-hansi-font-family:
Calibri;mso-hansi-theme-font:minor-latin'>存数据，读的速度很快，写的时候因为要保持数据一致，所以会锁定其他机器，会慢一点。每次写数据都会先往日志里面写，然后才写入数据，这样可以在日志里面恢复数据。</span><span
lang=EN-US style='font-size:12.0pt;mso-bidi-font-size:11.0pt;line-height:125%;
mso-fareast-font-family:宋体'><o:p></o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='font-size:12.0pt;mso-bidi-font-size:
11.0pt;line-height:125%;mso-fareast-font-family:宋体'><o:p>&nbsp;</o:p></span></p>

<h2><span lang=EN-US>1</span><span style='font-family:宋体;mso-ascii-font-family:
"Calibri Light";mso-ascii-theme-font:major-latin;mso-fareast-theme-font:major-fareast;
mso-hansi-font-family:"Calibri Light";mso-hansi-theme-font:major-latin'>）临时节点</span></h2>

<p class=MsoNormal><span lang=EN-US>EPHEMERAL</span><span style='font-family:
宋体;mso-ascii-font-family:Calibri;mso-ascii-theme-font:minor-latin;mso-fareast-theme-font:
minor-fareast;mso-hansi-font-family:Calibri;mso-hansi-theme-font:minor-latin'>就是临时节点，创建该节点的机子宕机，该节点也会消失。</span></p>

<h3><span style='font-family:宋体;mso-ascii-font-family:Calibri;mso-ascii-theme-font:
minor-latin;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:Calibri;
mso-hansi-theme-font:minor-latin'>代码</span></h3>

<p class=MsoNormal><span style='font-size:12.0pt;mso-bidi-font-size:11.0pt;
line-height:125%;font-family:宋体;mso-ascii-font-family:Calibri;mso-ascii-theme-font:
minor-latin;mso-hansi-font-family:Calibri;mso-hansi-theme-font:minor-latin'>创建</span><span
lang=EN-US style='font-size:12.0pt;mso-bidi-font-size:11.0pt;line-height:125%;
mso-fareast-font-family:宋体'>Maven</span><span style='font-size:12.0pt;
mso-bidi-font-size:11.0pt;line-height:125%;font-family:宋体;mso-ascii-font-family:
Calibri;mso-ascii-theme-font:minor-latin;mso-hansi-font-family:Calibri;
mso-hansi-theme-font:minor-latin'>项目</span><span lang=EN-US style='font-size:
12.0pt;mso-bidi-font-size:11.0pt;line-height:125%;mso-fareast-font-family:宋体'><o:p></o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='mso-no-proof:yes'><!--[if gte vml 1]><v:shape
 id="图片_x0020_40" o:spid="_x0000_i1061" type="#_x0000_t75" style='width:275.25pt;
 height:252pt;visibility:visible;mso-wrap-style:square'>
 <v:imagedata src="04_ZookeeperAppend.files/image101.png" o:title=""/>
</v:shape><![endif]--><![if !vml]><img width=367 height=336
src="04_ZookeeperAppend.files/image101.png" v:shapes="图片_x0020_40"><![endif]></span><span
lang=EN-US style='font-size:12.0pt;mso-bidi-font-size:11.0pt;line-height:125%;
mso-fareast-font-family:宋体'><o:p></o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='mso-no-proof:yes'><!--[if gte vml 1]><v:shape
 id="图片_x0020_42" o:spid="_x0000_i1060" type="#_x0000_t75" style='width:276.75pt;
 height:252pt;visibility:visible;mso-wrap-style:square'>
 <v:imagedata src="04_ZookeeperAppend.files/image103.png" o:title=""/>
</v:shape><![endif]--><![if !vml]><img width=369 height=336
src="04_ZookeeperAppend.files/image103.png" v:shapes="图片_x0020_42"><![endif]></span><span
lang=EN-US style='font-size:12.0pt;mso-bidi-font-size:11.0pt;line-height:125%;
mso-fareast-font-family:宋体'><o:p></o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='font-size:12.0pt;mso-bidi-font-size:
11.0pt;line-height:125%;mso-fareast-font-family:宋体'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span style='font-size:12.0pt;mso-bidi-font-size:11.0pt;
line-height:125%;font-family:宋体;mso-ascii-font-family:Calibri;mso-ascii-theme-font:
minor-latin;mso-hansi-font-family:Calibri;mso-hansi-theme-font:minor-latin'>添加依赖</span><span
lang=EN-US style='font-size:12.0pt;mso-bidi-font-size:11.0pt;line-height:125%;
mso-fareast-font-family:宋体'><o:p></o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='mso-no-proof:yes'><!--[if gte vml 1]><v:shape
 id="图片_x0020_43" o:spid="_x0000_i1059" type="#_x0000_t75" style='width:567pt;
 height:183.75pt;visibility:visible;mso-wrap-style:square'>
 <v:imagedata src="04_ZookeeperAppend.files/image105.png" o:title=""/>
</v:shape><![endif]--><![if !vml]><img width=756 height=245
src="04_ZookeeperAppend.files/image105.png" v:shapes="图片_x0020_43"><![endif]></span><span
lang=EN-US style='font-size:12.0pt;mso-bidi-font-size:11.0pt;line-height:125%;
mso-fareast-font-family:宋体'><o:p></o:p></span></p>

<table class=MsoTableGrid border=1 cellspacing=0 cellpadding=0
 style='border-collapse:collapse;border:none;mso-border-alt:solid windowtext .5pt;
 mso-yfti-tbllook:1184;mso-padding-alt:0cm 5.4pt 0cm 5.4pt'>
 <tr style='mso-yfti-irow:0;mso-yfti-firstrow:yes;mso-yfti-lastrow:yes'>
  <td width=755 valign=top style='width:566.4pt;border:solid windowtext 1.0pt;
  mso-border-alt:solid windowtext .5pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal style='line-height:normal;mso-pagination:none;mso-layout-grid-align:
  none;text-autospace:none'><span lang=EN-US style='mso-bidi-font-size:14.0pt;
  font-family:Consolas;mso-bidi-font-family:Consolas;color:black;mso-font-kerning:
  0pt'><span style='mso-tab-count:1'>    </span></span><span lang=EN-US
  style='mso-bidi-font-size:14.0pt;font-family:Consolas;mso-bidi-font-family:
  Consolas;color:teal;mso-font-kerning:0pt'>&lt;</span><span lang=EN-US
  style='mso-bidi-font-size:14.0pt;font-family:Consolas;mso-bidi-font-family:
  Consolas;color:#3F7F7F;mso-font-kerning:0pt'>dependencies</span><span
  lang=EN-US style='mso-bidi-font-size:14.0pt;font-family:Consolas;mso-bidi-font-family:
  Consolas;color:teal;mso-font-kerning:0pt'>&gt;</span><span lang=EN-US
  style='mso-bidi-font-size:14.0pt;font-family:Consolas;mso-bidi-font-family:
  Consolas;mso-font-kerning:0pt'><o:p></o:p></span></p>
  <p class=MsoNormal style='line-height:normal;mso-pagination:none;mso-layout-grid-align:
  none;text-autospace:none'><span lang=EN-US style='mso-bidi-font-size:14.0pt;
  font-family:Consolas;mso-bidi-font-family:Consolas;color:black;mso-font-kerning:
  0pt'><span style='mso-tab-count:2'>       </span></span><span lang=EN-US
  style='mso-bidi-font-size:14.0pt;font-family:Consolas;mso-bidi-font-family:
  Consolas;color:teal;mso-font-kerning:0pt'>&lt;</span><span lang=EN-US
  style='mso-bidi-font-size:14.0pt;font-family:Consolas;mso-bidi-font-family:
  Consolas;color:#3F7F7F;mso-font-kerning:0pt'>dependency</span><span
  lang=EN-US style='mso-bidi-font-size:14.0pt;font-family:Consolas;mso-bidi-font-family:
  Consolas;color:teal;mso-font-kerning:0pt'>&gt;</span><span lang=EN-US
  style='mso-bidi-font-size:14.0pt;font-family:Consolas;mso-bidi-font-family:
  Consolas;mso-font-kerning:0pt'><o:p></o:p></span></p>
  <p class=MsoNormal style='line-height:normal;mso-pagination:none;mso-layout-grid-align:
  none;text-autospace:none'><span lang=EN-US style='mso-bidi-font-size:14.0pt;
  font-family:Consolas;mso-bidi-font-family:Consolas;color:black;mso-font-kerning:
  0pt'><span style='mso-tab-count:3'>           </span></span><span lang=EN-US
  style='mso-bidi-font-size:14.0pt;font-family:Consolas;mso-bidi-font-family:
  Consolas;color:teal;mso-font-kerning:0pt'>&lt;</span><span lang=EN-US
  style='mso-bidi-font-size:14.0pt;font-family:Consolas;mso-bidi-font-family:
  Consolas;color:#3F7F7F;mso-font-kerning:0pt'>groupId</span><span lang=EN-US
  style='mso-bidi-font-size:14.0pt;font-family:Consolas;mso-bidi-font-family:
  Consolas;color:teal;mso-font-kerning:0pt'>&gt;</span><span lang=EN-US
  style='mso-bidi-font-size:14.0pt;font-family:Consolas;mso-bidi-font-family:
  Consolas;color:black;mso-font-kerning:0pt'>org.apache.zookeeper</span><span
  lang=EN-US style='mso-bidi-font-size:14.0pt;font-family:Consolas;mso-bidi-font-family:
  Consolas;color:teal;mso-font-kerning:0pt'>&lt;/</span><span lang=EN-US
  style='mso-bidi-font-size:14.0pt;font-family:Consolas;mso-bidi-font-family:
  Consolas;color:#3F7F7F;mso-font-kerning:0pt'>groupId</span><span lang=EN-US
  style='mso-bidi-font-size:14.0pt;font-family:Consolas;mso-bidi-font-family:
  Consolas;color:teal;mso-font-kerning:0pt'>&gt;</span><span lang=EN-US
  style='mso-bidi-font-size:14.0pt;font-family:Consolas;mso-bidi-font-family:
  Consolas;mso-font-kerning:0pt'><o:p></o:p></span></p>
  <p class=MsoNormal style='line-height:normal;mso-pagination:none;mso-layout-grid-align:
  none;text-autospace:none'><span lang=EN-US style='mso-bidi-font-size:14.0pt;
  font-family:Consolas;mso-bidi-font-family:Consolas;color:black;mso-font-kerning:
  0pt'><span style='mso-tab-count:3'>           </span></span><span lang=EN-US
  style='mso-bidi-font-size:14.0pt;font-family:Consolas;mso-bidi-font-family:
  Consolas;color:teal;mso-font-kerning:0pt'>&lt;</span><span lang=EN-US
  style='mso-bidi-font-size:14.0pt;font-family:Consolas;mso-bidi-font-family:
  Consolas;color:#3F7F7F;mso-font-kerning:0pt'>artifactId</span><span
  lang=EN-US style='mso-bidi-font-size:14.0pt;font-family:Consolas;mso-bidi-font-family:
  Consolas;color:teal;mso-font-kerning:0pt'>&gt;</span><u><span lang=EN-US
  style='mso-bidi-font-size:14.0pt;font-family:Consolas;mso-bidi-font-family:
  Consolas;color:black;mso-font-kerning:0pt'>zookeeper</span></u><span
  lang=EN-US style='mso-bidi-font-size:14.0pt;font-family:Consolas;mso-bidi-font-family:
  Consolas;color:teal;mso-font-kerning:0pt'>&lt;/</span><span lang=EN-US
  style='mso-bidi-font-size:14.0pt;font-family:Consolas;mso-bidi-font-family:
  Consolas;color:#3F7F7F;mso-font-kerning:0pt'>artifactId</span><span
  lang=EN-US style='mso-bidi-font-size:14.0pt;font-family:Consolas;mso-bidi-font-family:
  Consolas;color:teal;mso-font-kerning:0pt'>&gt;</span><span lang=EN-US
  style='mso-bidi-font-size:14.0pt;font-family:Consolas;mso-bidi-font-family:
  Consolas;mso-font-kerning:0pt'><o:p></o:p></span></p>
  <p class=MsoNormal style='line-height:normal;mso-pagination:none;mso-layout-grid-align:
  none;text-autospace:none'><span lang=EN-US style='mso-bidi-font-size:14.0pt;
  font-family:Consolas;mso-bidi-font-family:Consolas;color:black;mso-font-kerning:
  0pt'><span style='mso-tab-count:3'>           </span></span><span lang=EN-US
  style='mso-bidi-font-size:14.0pt;font-family:Consolas;mso-bidi-font-family:
  Consolas;color:teal;mso-font-kerning:0pt'>&lt;</span><span lang=EN-US
  style='mso-bidi-font-size:14.0pt;font-family:Consolas;mso-bidi-font-family:
  Consolas;color:#3F7F7F;mso-font-kerning:0pt'>version</span><span lang=EN-US
  style='mso-bidi-font-size:14.0pt;font-family:Consolas;mso-bidi-font-family:
  Consolas;color:teal;mso-font-kerning:0pt'>&gt;</span><span lang=EN-US
  style='mso-bidi-font-size:14.0pt;font-family:Consolas;mso-bidi-font-family:
  Consolas;color:black;mso-font-kerning:0pt'>3.4.13</span><span lang=EN-US
  style='mso-bidi-font-size:14.0pt;font-family:Consolas;mso-bidi-font-family:
  Consolas;color:teal;mso-font-kerning:0pt'>&lt;/</span><span lang=EN-US
  style='mso-bidi-font-size:14.0pt;font-family:Consolas;mso-bidi-font-family:
  Consolas;color:#3F7F7F;mso-font-kerning:0pt'>version</span><span lang=EN-US
  style='mso-bidi-font-size:14.0pt;font-family:Consolas;mso-bidi-font-family:
  Consolas;color:teal;mso-font-kerning:0pt'>&gt;</span><span lang=EN-US
  style='mso-bidi-font-size:14.0pt;font-family:Consolas;mso-bidi-font-family:
  Consolas;mso-font-kerning:0pt'><o:p></o:p></span></p>
  <p class=MsoNormal style='line-height:normal;mso-pagination:none;mso-layout-grid-align:
  none;text-autospace:none'><span lang=EN-US style='mso-bidi-font-size:14.0pt;
  font-family:Consolas;mso-bidi-font-family:Consolas;color:black;mso-font-kerning:
  0pt'><span style='mso-tab-count:2'>       </span></span><span lang=EN-US
  style='mso-bidi-font-size:14.0pt;font-family:Consolas;mso-bidi-font-family:
  Consolas;color:teal;mso-font-kerning:0pt'>&lt;/</span><span lang=EN-US
  style='mso-bidi-font-size:14.0pt;font-family:Consolas;mso-bidi-font-family:
  Consolas;color:#3F7F7F;mso-font-kerning:0pt'>dependency</span><span
  lang=EN-US style='mso-bidi-font-size:14.0pt;font-family:Consolas;mso-bidi-font-family:
  Consolas;color:teal;mso-font-kerning:0pt'>&gt;</span><span lang=EN-US
  style='mso-bidi-font-size:14.0pt;font-family:Consolas;mso-bidi-font-family:
  Consolas;color:black;mso-font-kerning:0pt'> </span><span lang=EN-US
  style='mso-bidi-font-size:14.0pt;font-family:Consolas;mso-bidi-font-family:
  Consolas;mso-font-kerning:0pt'><o:p></o:p></span></p>
  <p class=MsoNormal style='line-height:normal'><span lang=EN-US
  style='mso-bidi-font-size:14.0pt;font-family:Consolas;mso-bidi-font-family:
  Consolas;color:black;mso-font-kerning:0pt'><span style='mso-tab-count:1'>    </span></span><span
  lang=EN-US style='mso-bidi-font-size:14.0pt;font-family:Consolas;mso-bidi-font-family:
  Consolas;color:teal;mso-font-kerning:0pt'>&lt;/</span><span lang=EN-US
  style='mso-bidi-font-size:14.0pt;font-family:Consolas;mso-bidi-font-family:
  Consolas;color:#3F7F7F;mso-font-kerning:0pt'>dependencies</span><span
  lang=EN-US style='mso-bidi-font-size:14.0pt;font-family:Consolas;mso-bidi-font-family:
  Consolas;color:teal;mso-font-kerning:0pt'>&gt;</span><span lang=EN-US
  style='font-size:12.0pt;mso-bidi-font-size:11.0pt;mso-fareast-font-family:
  宋体'><o:p></o:p></span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal><span lang=EN-US style='font-size:12.0pt;mso-bidi-font-size:
11.0pt;line-height:125%;mso-fareast-font-family:宋体'><o:p>&nbsp;</o:p></span></p>

<table class=MsoTableGrid border=1 cellspacing=0 cellpadding=0
 style='border-collapse:collapse;border:none;mso-border-alt:solid windowtext .5pt;
 mso-yfti-tbllook:1184;mso-padding-alt:0cm 5.4pt 0cm 5.4pt'>
 <tr style='mso-yfti-irow:0;mso-yfti-firstrow:yes;mso-yfti-lastrow:yes'>
  <td width=755 valign=top style='width:566.4pt;border:solid windowtext 1.0pt;
  mso-border-alt:solid windowtext .5pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal style='line-height:normal;mso-pagination:none;mso-layout-grid-align:
  none;text-autospace:none'><b><span lang=EN-US style='font-size:5.0pt;
  mso-bidi-font-size:14.0pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  color:#7F0055;mso-font-kerning:0pt'>import</span></b><span lang=EN-US
  style='font-size:5.0pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;color:black;mso-font-kerning:0pt'>
  java.io.IOException;</span><span lang=EN-US style='font-size:5.0pt;
  mso-bidi-font-size:14.0pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  mso-font-kerning:0pt'><o:p></o:p></span></p>
  <p class=MsoNormal style='line-height:normal;mso-pagination:none;mso-layout-grid-align:
  none;text-autospace:none'><b><span lang=EN-US style='font-size:5.0pt;
  mso-bidi-font-size:14.0pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  color:#7F0055;mso-font-kerning:0pt'>import</span></b><span lang=EN-US
  style='font-size:5.0pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;color:black;mso-font-kerning:0pt'>
  java.util.concurrent.CountDownLatch;</span><span lang=EN-US style='font-size:
  5.0pt;mso-bidi-font-size:14.0pt;font-family:Consolas;mso-bidi-font-family:
  Consolas;mso-font-kerning:0pt'><o:p></o:p></span></p>
  <p class=MsoNormal style='line-height:normal;mso-pagination:none;mso-layout-grid-align:
  none;text-autospace:none'><span lang=EN-US style='font-size:5.0pt;mso-bidi-font-size:
  14.0pt;font-family:Consolas;mso-bidi-font-family:Consolas;mso-font-kerning:
  0pt'><o:p>&nbsp;</o:p></span></p>
  <p class=MsoNormal style='line-height:normal;mso-pagination:none;mso-layout-grid-align:
  none;text-autospace:none'><b><span lang=EN-US style='font-size:5.0pt;
  mso-bidi-font-size:14.0pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  color:#7F0055;mso-font-kerning:0pt'>import</span></b><span lang=EN-US
  style='font-size:5.0pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;color:black;mso-font-kerning:0pt'>
  org.apache.zookeeper.CreateMode;</span><span lang=EN-US style='font-size:
  5.0pt;mso-bidi-font-size:14.0pt;font-family:Consolas;mso-bidi-font-family:
  Consolas;mso-font-kerning:0pt'><o:p></o:p></span></p>
  <p class=MsoNormal style='line-height:normal;mso-pagination:none;mso-layout-grid-align:
  none;text-autospace:none'><b><span lang=EN-US style='font-size:5.0pt;
  mso-bidi-font-size:14.0pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  color:#7F0055;mso-font-kerning:0pt'>import</span></b><span lang=EN-US
  style='font-size:5.0pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;color:black;mso-font-kerning:0pt'>
  org.apache.zookeeper.KeeperException;</span><span lang=EN-US
  style='font-size:5.0pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;mso-font-kerning:0pt'><o:p></o:p></span></p>
  <p class=MsoNormal style='line-height:normal;mso-pagination:none;mso-layout-grid-align:
  none;text-autospace:none'><b><span lang=EN-US style='font-size:5.0pt;
  mso-bidi-font-size:14.0pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  color:#7F0055;mso-font-kerning:0pt'>import</span></b><span lang=EN-US
  style='font-size:5.0pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;color:black;mso-font-kerning:0pt'>
  org.apache.zookeeper.WatchedEvent;</span><span lang=EN-US style='font-size:
  5.0pt;mso-bidi-font-size:14.0pt;font-family:Consolas;mso-bidi-font-family:
  Consolas;mso-font-kerning:0pt'><o:p></o:p></span></p>
  <p class=MsoNormal style='line-height:normal;mso-pagination:none;mso-layout-grid-align:
  none;text-autospace:none'><b><span lang=EN-US style='font-size:5.0pt;
  mso-bidi-font-size:14.0pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  color:#7F0055;mso-font-kerning:0pt'>import</span></b><span lang=EN-US
  style='font-size:5.0pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;color:black;mso-font-kerning:0pt'>
  org.apache.zookeeper.Watcher;</span><span lang=EN-US style='font-size:5.0pt;
  mso-bidi-font-size:14.0pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  mso-font-kerning:0pt'><o:p></o:p></span></p>
  <p class=MsoNormal style='line-height:normal;mso-pagination:none;mso-layout-grid-align:
  none;text-autospace:none'><b><span lang=EN-US style='font-size:5.0pt;
  mso-bidi-font-size:14.0pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  color:#7F0055;mso-font-kerning:0pt'>import</span></b><span lang=EN-US
  style='font-size:5.0pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;color:black;mso-font-kerning:0pt'>
  org.apache.zookeeper.ZooKeeper;</span><span lang=EN-US style='font-size:5.0pt;
  mso-bidi-font-size:14.0pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  mso-font-kerning:0pt'><o:p></o:p></span></p>
  <p class=MsoNormal style='line-height:normal;mso-pagination:none;mso-layout-grid-align:
  none;text-autospace:none'><b><span lang=EN-US style='font-size:5.0pt;
  mso-bidi-font-size:14.0pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  color:#7F0055;mso-font-kerning:0pt'>import</span></b><span lang=EN-US
  style='font-size:5.0pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;color:black;mso-font-kerning:0pt'>
  org.apache.zookeeper.Watcher.Event.KeeperState;</span><span lang=EN-US
  style='font-size:5.0pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;mso-font-kerning:0pt'><o:p></o:p></span></p>
  <p class=MsoNormal style='line-height:normal;mso-pagination:none;mso-layout-grid-align:
  none;text-autospace:none'><b><span lang=EN-US style='font-size:5.0pt;
  mso-bidi-font-size:14.0pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  color:#7F0055;mso-font-kerning:0pt'>import</span></b><span lang=EN-US
  style='font-size:5.0pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;color:black;mso-font-kerning:0pt'>
  org.apache.zookeeper.ZooDefs.Ids;</span><span lang=EN-US style='font-size:
  5.0pt;mso-bidi-font-size:14.0pt;font-family:Consolas;mso-bidi-font-family:
  Consolas;mso-font-kerning:0pt'><o:p></o:p></span></p>
  <p class=MsoNormal style='line-height:normal;mso-pagination:none;mso-layout-grid-align:
  none;text-autospace:none'><span lang=EN-US style='font-size:5.0pt;mso-bidi-font-size:
  14.0pt;font-family:Consolas;mso-bidi-font-family:Consolas;mso-font-kerning:
  0pt'><o:p>&nbsp;</o:p></span></p>
  <p class=MsoNormal style='line-height:normal;mso-pagination:none;mso-layout-grid-align:
  none;text-autospace:none'><span lang=EN-US style='font-size:5.0pt;mso-bidi-font-size:
  14.0pt;font-family:Consolas;mso-bidi-font-family:Consolas;color:#3F7F5F;
  mso-font-kerning:0pt'>// Watcher</span><span style='font-size:5.0pt;
  mso-bidi-font-size:14.0pt;font-family:宋体;mso-ascii-font-family:Consolas;
  mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:Consolas;
  mso-bidi-font-family:Consolas;color:#3F7F5F;mso-font-kerning:0pt'>是</span><u><span
  lang=EN-US style='font-size:5.0pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;color:#3F7F5F;mso-font-kerning:0pt'>zk</span></u><span
  style='font-size:5.0pt;mso-bidi-font-size:14.0pt;font-family:宋体;mso-ascii-font-family:
  Consolas;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:Consolas;
  mso-bidi-font-family:Consolas;color:#3F7F5F;mso-font-kerning:0pt'>的监听器，实现</span><span
  lang=EN-US style='font-size:5.0pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;color:#3F7F5F;mso-font-kerning:0pt'>process</span><span
  style='font-size:5.0pt;mso-bidi-font-size:14.0pt;font-family:宋体;mso-ascii-font-family:
  Consolas;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:Consolas;
  mso-bidi-font-family:Consolas;color:#3F7F5F;mso-font-kerning:0pt'>方法，</span><span
  lang=EN-US style='font-size:5.0pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;mso-font-kerning:0pt'><o:p></o:p></span></p>
  <p class=MsoNormal style='line-height:normal;mso-pagination:none;mso-layout-grid-align:
  none;text-autospace:none'><b><span lang=EN-US style='font-size:5.0pt;
  mso-bidi-font-size:14.0pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  color:#7F0055;mso-font-kerning:0pt'>public</span></b><span lang=EN-US
  style='font-size:5.0pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;color:black;mso-font-kerning:0pt'> </span><b><span
  lang=EN-US style='font-size:5.0pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;color:#7F0055;mso-font-kerning:0pt'>class</span></b><span
  lang=EN-US style='font-size:5.0pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;color:black;mso-font-kerning:0pt'> ZkClient </span><b><span
  lang=EN-US style='font-size:5.0pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;color:#7F0055;mso-font-kerning:0pt'>implements</span></b><span
  lang=EN-US style='font-size:5.0pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;color:black;mso-font-kerning:0pt'> Watcher {</span><span
  lang=EN-US style='font-size:5.0pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;mso-font-kerning:0pt'><o:p></o:p></span></p>
  <p class=MsoNormal style='line-height:normal;mso-pagination:none;mso-layout-grid-align:
  none;text-autospace:none'><span lang=EN-US style='font-size:5.0pt;mso-bidi-font-size:
  14.0pt;font-family:Consolas;mso-bidi-font-family:Consolas;color:black;
  mso-font-kerning:0pt'><span style='mso-tab-count:1'>       </span></span><span
  lang=EN-US style='font-size:5.0pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;color:#3F7F5F;mso-font-kerning:0pt'>// </span><span
  style='font-size:5.0pt;mso-bidi-font-size:14.0pt;font-family:宋体;mso-ascii-font-family:
  Consolas;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:Consolas;
  mso-bidi-font-family:Consolas;color:#3F7F5F;mso-font-kerning:0pt'>高并发编程的门闩</span><span
  lang=EN-US style='font-size:5.0pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;mso-font-kerning:0pt'><o:p></o:p></span></p>
  <p class=MsoNormal style='line-height:normal;mso-pagination:none;mso-layout-grid-align:
  none;text-autospace:none'><span lang=EN-US style='font-size:5.0pt;mso-bidi-font-size:
  14.0pt;font-family:Consolas;mso-bidi-font-family:Consolas;color:black;
  mso-font-kerning:0pt'><span style='mso-tab-count:1'>       </span></span><b><span
  lang=EN-US style='font-size:5.0pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;color:#7F0055;mso-font-kerning:0pt'>static</span></b><span
  lang=EN-US style='font-size:5.0pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;color:black;mso-font-kerning:0pt'>
  CountDownLatch </span><i><span lang=EN-US style='font-size:5.0pt;mso-bidi-font-size:
  14.0pt;font-family:Consolas;mso-bidi-font-family:Consolas;color:#0000C0;
  mso-font-kerning:0pt'>connected</span></i><span lang=EN-US style='font-size:
  5.0pt;mso-bidi-font-size:14.0pt;font-family:Consolas;mso-bidi-font-family:
  Consolas;color:black;mso-font-kerning:0pt'> = </span><b><span lang=EN-US
  style='font-size:5.0pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;color:#7F0055;mso-font-kerning:0pt'>new</span></b><span
  lang=EN-US style='font-size:5.0pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;color:black;mso-font-kerning:0pt'>
  CountDownLatch(1);<span style='mso-spacerun:yes'>  </span></span><span
  lang=EN-US style='font-size:5.0pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;mso-font-kerning:0pt'><o:p></o:p></span></p>
  <p class=MsoNormal style='line-height:normal;mso-pagination:none;mso-layout-grid-align:
  none;text-autospace:none'><span lang=EN-US style='font-size:5.0pt;mso-bidi-font-size:
  14.0pt;font-family:Consolas;mso-bidi-font-family:Consolas;color:black;
  mso-font-kerning:0pt'><span style='mso-tab-count:1'>       </span></span><b><span
  lang=EN-US style='font-size:5.0pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;color:#7F0055;mso-font-kerning:0pt'>static</span></b><span
  lang=EN-US style='font-size:5.0pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;color:black;mso-font-kerning:0pt'> </span><b><span
  lang=EN-US style='font-size:5.0pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;color:#7F0055;mso-font-kerning:0pt'>final</span></b><span
  lang=EN-US style='font-size:5.0pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;color:black;mso-font-kerning:0pt'> String </span><b><i><span
  lang=EN-US style='font-size:5.0pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;color:#0000C0;mso-font-kerning:0pt'>CONNECTION</span></i></b><span
  lang=EN-US style='font-size:5.0pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;color:black;mso-font-kerning:0pt'> = </span><span
  lang=EN-US style='font-size:5.0pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;color:#2A00FF;mso-font-kerning:0pt'>&quot;192.168.56.101:2181,
  192.168.56.102:2181, 192.168.56.103:2181&quot;</span><span lang=EN-US
  style='font-size:5.0pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;color:black;mso-font-kerning:0pt'>;</span><span
  lang=EN-US style='font-size:5.0pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;mso-font-kerning:0pt'><o:p></o:p></span></p>
  <p class=MsoNormal style='line-height:normal;mso-pagination:none;mso-layout-grid-align:
  none;text-autospace:none'><span lang=EN-US style='font-size:5.0pt;mso-bidi-font-size:
  14.0pt;font-family:Consolas;mso-bidi-font-family:Consolas;mso-font-kerning:
  0pt'><o:p>&nbsp;</o:p></span></p>
  <p class=MsoNormal style='line-height:normal;mso-pagination:none;mso-layout-grid-align:
  none;text-autospace:none'><span lang=EN-US style='font-size:5.0pt;mso-bidi-font-size:
  14.0pt;font-family:Consolas;mso-bidi-font-family:Consolas;color:black;
  mso-font-kerning:0pt'><span style='mso-tab-count:1'>       </span></span><b><span
  lang=EN-US style='font-size:5.0pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;color:#7F0055;mso-font-kerning:0pt'>public</span></b><span
  lang=EN-US style='font-size:5.0pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;color:black;mso-font-kerning:0pt'> </span><b><span
  lang=EN-US style='font-size:5.0pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;color:#7F0055;mso-font-kerning:0pt'>static</span></b><span
  lang=EN-US style='font-size:5.0pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;color:black;mso-font-kerning:0pt'> </span><b><span
  lang=EN-US style='font-size:5.0pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;color:#7F0055;mso-font-kerning:0pt'>void</span></b><span
  lang=EN-US style='font-size:5.0pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;color:black;mso-font-kerning:0pt'>
  main(String[] </span><span lang=EN-US style='font-size:5.0pt;mso-bidi-font-size:
  14.0pt;font-family:Consolas;mso-bidi-font-family:Consolas;color:#6A3E3E;
  mso-font-kerning:0pt'>args</span><span lang=EN-US style='font-size:5.0pt;
  mso-bidi-font-size:14.0pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  color:black;mso-font-kerning:0pt'>) </span><b><span lang=EN-US
  style='font-size:5.0pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;color:#7F0055;mso-font-kerning:0pt'>throws</span></b><span
  lang=EN-US style='font-size:5.0pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;color:black;mso-font-kerning:0pt'> IOException,
  InterruptedException, KeeperException {</span><span lang=EN-US
  style='font-size:5.0pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;mso-font-kerning:0pt'><o:p></o:p></span></p>
  <p class=MsoNormal style='line-height:normal;mso-pagination:none;mso-layout-grid-align:
  none;text-autospace:none'><span lang=EN-US style='font-size:5.0pt;mso-bidi-font-size:
  14.0pt;font-family:Consolas;mso-bidi-font-family:Consolas;color:black;
  mso-font-kerning:0pt'><span style='mso-tab-count:2'>              </span></span><b><span
  lang=EN-US style='font-size:5.0pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;color:#7F0055;mso-font-kerning:0pt'>new</span></b><span
  lang=EN-US style='font-size:5.0pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;color:black;mso-font-kerning:0pt'>
  ZkClient().test();</span><span lang=EN-US style='font-size:5.0pt;mso-bidi-font-size:
  14.0pt;font-family:Consolas;mso-bidi-font-family:Consolas;mso-font-kerning:
  0pt'><o:p></o:p></span></p>
  <p class=MsoNormal style='line-height:normal;mso-pagination:none;mso-layout-grid-align:
  none;text-autospace:none'><span lang=EN-US style='font-size:5.0pt;mso-bidi-font-size:
  14.0pt;font-family:Consolas;mso-bidi-font-family:Consolas;color:black;
  mso-font-kerning:0pt'><span style='mso-tab-count:2'>              </span></span><span
  lang=EN-US style='font-size:5.0pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;mso-font-kerning:0pt'><o:p></o:p></span></p>
  <p class=MsoNormal style='line-height:normal;mso-pagination:none;mso-layout-grid-align:
  none;text-autospace:none'><span lang=EN-US style='font-size:5.0pt;mso-bidi-font-size:
  14.0pt;font-family:Consolas;mso-bidi-font-family:Consolas;color:black;
  mso-font-kerning:0pt'><span style='mso-tab-count:1'>       </span>}</span><span
  lang=EN-US style='font-size:5.0pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;mso-font-kerning:0pt'><o:p></o:p></span></p>
  <p class=MsoNormal style='line-height:normal;mso-pagination:none;mso-layout-grid-align:
  none;text-autospace:none'><span lang=EN-US style='font-size:5.0pt;mso-bidi-font-size:
  14.0pt;font-family:Consolas;mso-bidi-font-family:Consolas;color:black;
  mso-font-kerning:0pt'><span style='mso-tab-count:1'>       </span></span><span
  lang=EN-US style='font-size:5.0pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;mso-font-kerning:0pt'><o:p></o:p></span></p>
  <p class=MsoNormal style='line-height:normal;mso-pagination:none;mso-layout-grid-align:
  none;text-autospace:none'><span lang=EN-US style='font-size:5.0pt;mso-bidi-font-size:
  14.0pt;font-family:Consolas;mso-bidi-font-family:Consolas;color:black;
  mso-font-kerning:0pt'><span style='mso-tab-count:1'>       </span></span><b><span
  lang=EN-US style='font-size:5.0pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;color:#7F0055;mso-font-kerning:0pt'>public</span></b><span
  lang=EN-US style='font-size:5.0pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;color:black;mso-font-kerning:0pt'> </span><b><span
  lang=EN-US style='font-size:5.0pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;color:#7F0055;mso-font-kerning:0pt'>void</span></b><span
  lang=EN-US style='font-size:5.0pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;color:black;mso-font-kerning:0pt'> test() </span><b><span
  lang=EN-US style='font-size:5.0pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;color:#7F0055;mso-font-kerning:0pt'>throws</span></b><span
  lang=EN-US style='font-size:5.0pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;color:black;mso-font-kerning:0pt'> IOException,
  InterruptedException, KeeperException {</span><span lang=EN-US
  style='font-size:5.0pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;mso-font-kerning:0pt'><o:p></o:p></span></p>
  <p class=MsoNormal style='line-height:normal;mso-pagination:none;mso-layout-grid-align:
  none;text-autospace:none'><span lang=EN-US style='font-size:5.0pt;mso-bidi-font-size:
  14.0pt;font-family:Consolas;mso-bidi-font-family:Consolas;color:black;
  mso-font-kerning:0pt'><span style='mso-tab-count:2'>              </span></span><span
  lang=EN-US style='font-size:5.0pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;color:#3F7F5F;mso-font-kerning:0pt'>// </span><span
  style='font-size:5.0pt;mso-bidi-font-size:14.0pt;font-family:宋体;mso-ascii-font-family:
  Consolas;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:Consolas;
  mso-bidi-font-family:Consolas;color:#3F7F5F;mso-font-kerning:0pt'>这是异步连接。</span><span
  lang=EN-US style='font-size:5.0pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;color:#3F7F5F;mso-font-kerning:0pt'>5000</span><span
  style='font-size:5.0pt;mso-bidi-font-size:14.0pt;font-family:宋体;mso-ascii-font-family:
  Consolas;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:Consolas;
  mso-bidi-font-family:Consolas;color:#3F7F5F;mso-font-kerning:0pt'>是超时时间；</span><span
  lang=EN-US style='font-size:5.0pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;color:#3F7F5F;mso-font-kerning:0pt'>this</span><span
  style='font-size:5.0pt;mso-bidi-font-size:14.0pt;font-family:宋体;mso-ascii-font-family:
  Consolas;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:Consolas;
  mso-bidi-font-family:Consolas;color:#3F7F5F;mso-font-kerning:0pt'>是传递一个监听器，监听器要实现</span><span
  lang=EN-US style='font-size:5.0pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;color:#3F7F5F;mso-font-kerning:0pt'>Watcher</span><span
  style='font-size:5.0pt;mso-bidi-font-size:14.0pt;font-family:宋体;mso-ascii-font-family:
  Consolas;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:Consolas;
  mso-bidi-font-family:Consolas;color:#3F7F5F;mso-font-kerning:0pt'>接口，这是观察者，由于是异步连接，什么时候连上要通过观察者来看，</span><span
  lang=EN-US style='font-size:5.0pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;mso-font-kerning:0pt'><o:p></o:p></span></p>
  <p class=MsoNormal style='line-height:normal;mso-pagination:none;mso-layout-grid-align:
  none;text-autospace:none'><span lang=EN-US style='font-size:5.0pt;mso-bidi-font-size:
  14.0pt;font-family:Consolas;mso-bidi-font-family:Consolas;color:black;
  mso-font-kerning:0pt'><span style='mso-tab-count:2'>              </span>ZooKeeper
  </span><span lang=EN-US style='font-size:5.0pt;mso-bidi-font-size:14.0pt;
  font-family:Consolas;mso-bidi-font-family:Consolas;color:#6A3E3E;mso-font-kerning:
  0pt'>zk</span><span lang=EN-US style='font-size:5.0pt;mso-bidi-font-size:
  14.0pt;font-family:Consolas;mso-bidi-font-family:Consolas;color:black;
  mso-font-kerning:0pt'> = </span><b><span lang=EN-US style='font-size:5.0pt;
  mso-bidi-font-size:14.0pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  color:#7F0055;mso-font-kerning:0pt'>new</span></b><span lang=EN-US
  style='font-size:5.0pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;color:black;mso-font-kerning:0pt'> ZooKeeper(</span><b><i><span
  lang=EN-US style='font-size:5.0pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;color:#0000C0;mso-font-kerning:0pt'>CONNECTION</span></i></b><span
  lang=EN-US style='font-size:5.0pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;color:black;mso-font-kerning:0pt'>, 5000, </span><b><span
  lang=EN-US style='font-size:5.0pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;color:#7F0055;mso-font-kerning:0pt'>this</span></b><span
  lang=EN-US style='font-size:5.0pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;color:black;mso-font-kerning:0pt'>);</span><span
  lang=EN-US style='font-size:5.0pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;mso-font-kerning:0pt'><o:p></o:p></span></p>
  <p class=MsoNormal style='line-height:normal;mso-pagination:none;mso-layout-grid-align:
  none;text-autospace:none'><span lang=EN-US style='font-size:5.0pt;mso-bidi-font-size:
  14.0pt;font-family:Consolas;mso-bidi-font-family:Consolas;color:black;
  mso-font-kerning:0pt'><span style='mso-tab-count:2'>              </span>System.</span><b><i><span
  lang=EN-US style='font-size:5.0pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;color:#0000C0;mso-font-kerning:0pt'>out</span></i></b><span
  lang=EN-US style='font-size:5.0pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;color:black;mso-font-kerning:0pt'>.println(</span><span
  lang=EN-US style='font-size:5.0pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;color:#2A00FF;mso-font-kerning:0pt'>&quot;</span><span
  style='font-size:5.0pt;mso-bidi-font-size:14.0pt;font-family:宋体;mso-ascii-font-family:
  Consolas;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:Consolas;
  mso-bidi-font-family:Consolas;color:#2A00FF;mso-font-kerning:0pt'>连接状态</span><span
  lang=EN-US style='font-size:5.0pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;color:#2A00FF;mso-font-kerning:0pt'>=&quot;</span><span
  lang=EN-US style='font-size:5.0pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;color:black;mso-font-kerning:0pt'> + </span><span
  lang=EN-US style='font-size:5.0pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;color:#6A3E3E;mso-font-kerning:0pt'>zk</span><span
  lang=EN-US style='font-size:5.0pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;color:black;mso-font-kerning:0pt'>.getState());</span><span
  lang=EN-US style='font-size:5.0pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;mso-font-kerning:0pt'><o:p></o:p></span></p>
  <p class=MsoNormal style='line-height:normal;mso-pagination:none;mso-layout-grid-align:
  none;text-autospace:none'><span lang=EN-US style='font-size:5.0pt;mso-bidi-font-size:
  14.0pt;font-family:Consolas;mso-bidi-font-family:Consolas;color:black;
  mso-font-kerning:0pt'><span style='mso-tab-count:2'>              </span></span><span
  lang=EN-US style='font-size:5.0pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;mso-font-kerning:0pt'><o:p></o:p></span></p>
  <p class=MsoNormal style='line-height:normal;mso-pagination:none;mso-layout-grid-align:
  none;text-autospace:none'><span lang=EN-US style='font-size:5.0pt;mso-bidi-font-size:
  14.0pt;font-family:Consolas;mso-bidi-font-family:Consolas;color:black;
  mso-font-kerning:0pt'><span style='mso-tab-count:2'>              </span></span><span
  lang=EN-US style='font-size:5.0pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;color:#3F7F5F;mso-font-kerning:0pt'>// </span><span
  style='font-size:5.0pt;mso-bidi-font-size:14.0pt;font-family:宋体;mso-ascii-font-family:
  Consolas;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:Consolas;
  mso-bidi-font-family:Consolas;color:#3F7F5F;mso-font-kerning:0pt'>在这里等待门闩开，门闩开，代码才会往下执行。</span><span
  lang=EN-US style='font-size:5.0pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;mso-font-kerning:0pt'><o:p></o:p></span></p>
  <p class=MsoNormal style='line-height:normal;mso-pagination:none;mso-layout-grid-align:
  none;text-autospace:none'><span lang=EN-US style='font-size:5.0pt;mso-bidi-font-size:
  14.0pt;font-family:Consolas;mso-bidi-font-family:Consolas;color:black;
  mso-font-kerning:0pt'><span style='mso-tab-count:2'>              </span></span><i><span
  lang=EN-US style='font-size:5.0pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;color:#0000C0;mso-font-kerning:0pt'>connected</span></i><span
  lang=EN-US style='font-size:5.0pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;color:black;mso-font-kerning:0pt'>.await();</span><span
  lang=EN-US style='font-size:5.0pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;mso-font-kerning:0pt'><o:p></o:p></span></p>
  <p class=MsoNormal style='line-height:normal;mso-pagination:none;mso-layout-grid-align:
  none;text-autospace:none'><span lang=EN-US style='font-size:5.0pt;mso-bidi-font-size:
  14.0pt;font-family:Consolas;mso-bidi-font-family:Consolas;color:black;
  mso-font-kerning:0pt'><span style='mso-tab-count:2'>              </span></span><span
  lang=EN-US style='font-size:5.0pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;mso-font-kerning:0pt'><o:p></o:p></span></p>
  <p class=MsoNormal style='line-height:normal;mso-pagination:none;mso-layout-grid-align:
  none;text-autospace:none'><span lang=EN-US style='font-size:5.0pt;mso-bidi-font-size:
  14.0pt;font-family:Consolas;mso-bidi-font-family:Consolas;color:black;
  mso-font-kerning:0pt'><span style='mso-tab-count:2'>              </span></span><span
  lang=EN-US style='font-size:5.0pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;color:#3F7F5F;mso-font-kerning:0pt'>// </span><span
  style='font-size:5.0pt;mso-bidi-font-size:14.0pt;font-family:宋体;mso-ascii-font-family:
  Consolas;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:Consolas;
  mso-bidi-font-family:Consolas;color:#3F7F5F;mso-font-kerning:0pt'>如果存在这个节点就删除</span><span
  lang=EN-US style='font-size:5.0pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;mso-font-kerning:0pt'><o:p></o:p></span></p>
  <p class=MsoNormal style='line-height:normal;mso-pagination:none;mso-layout-grid-align:
  none;text-autospace:none'><span lang=EN-US style='font-size:5.0pt;mso-bidi-font-size:
  14.0pt;font-family:Consolas;mso-bidi-font-family:Consolas;color:black;
  mso-font-kerning:0pt'><span style='mso-tab-count:2'>              </span></span><b><span
  lang=EN-US style='font-size:5.0pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;color:#7F0055;mso-font-kerning:0pt'>if</span></b><span
  lang=EN-US style='font-size:5.0pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;color:black;mso-font-kerning:0pt'>(</span><span
  lang=EN-US style='font-size:5.0pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;color:#6A3E3E;mso-font-kerning:0pt'>zk</span><span
  lang=EN-US style='font-size:5.0pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;color:black;mso-font-kerning:0pt'>.exists(</span><span
  lang=EN-US style='font-size:5.0pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;color:#2A00FF;mso-font-kerning:0pt'>&quot;/tank/master&quot;</span><span
  lang=EN-US style='font-size:5.0pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;color:black;mso-font-kerning:0pt'>, </span><b><span
  lang=EN-US style='font-size:5.0pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;color:#7F0055;mso-font-kerning:0pt'>false</span></b><span
  lang=EN-US style='font-size:5.0pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;color:black;mso-font-kerning:0pt'>) != </span><b><span
  lang=EN-US style='font-size:5.0pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;color:#7F0055;mso-font-kerning:0pt'>null</span></b><span
  lang=EN-US style='font-size:5.0pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;color:black;mso-font-kerning:0pt'>) {</span><span
  lang=EN-US style='font-size:5.0pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;mso-font-kerning:0pt'><o:p></o:p></span></p>
  <p class=MsoNormal style='line-height:normal;mso-pagination:none;mso-layout-grid-align:
  none;text-autospace:none'><span lang=EN-US style='font-size:5.0pt;mso-bidi-font-size:
  14.0pt;font-family:Consolas;mso-bidi-font-family:Consolas;color:black;
  mso-font-kerning:0pt'><span style='mso-tab-count:3'>                     </span></span><span
  lang=EN-US style='font-size:5.0pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;color:#6A3E3E;mso-font-kerning:0pt'>zk</span><span
  lang=EN-US style='font-size:5.0pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;color:black;mso-font-kerning:0pt'>.delete(</span><span
  lang=EN-US style='font-size:5.0pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;color:#2A00FF;mso-font-kerning:0pt'>&quot;/tank/master&quot;</span><span
  lang=EN-US style='font-size:5.0pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;color:black;mso-font-kerning:0pt'>, -1);</span><span
  lang=EN-US style='font-size:5.0pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;mso-font-kerning:0pt'><o:p></o:p></span></p>
  <p class=MsoNormal style='line-height:normal;mso-pagination:none;mso-layout-grid-align:
  none;text-autospace:none'><span lang=EN-US style='font-size:5.0pt;mso-bidi-font-size:
  14.0pt;font-family:Consolas;mso-bidi-font-family:Consolas;color:black;
  mso-font-kerning:0pt'><span style='mso-tab-count:2'>              </span>}</span><span
  lang=EN-US style='font-size:5.0pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;mso-font-kerning:0pt'><o:p></o:p></span></p>
  <p class=MsoNormal style='line-height:normal;mso-pagination:none;mso-layout-grid-align:
  none;text-autospace:none'><span lang=EN-US style='font-size:5.0pt;mso-bidi-font-size:
  14.0pt;font-family:Consolas;mso-bidi-font-family:Consolas;color:black;
  mso-font-kerning:0pt'><span style='mso-tab-count:2'>              </span></span><span
  lang=EN-US style='font-size:5.0pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;mso-font-kerning:0pt'><o:p></o:p></span></p>
  <p class=MsoNormal style='line-height:normal;mso-pagination:none;mso-layout-grid-align:
  none;text-autospace:none'><span lang=EN-US style='font-size:5.0pt;mso-bidi-font-size:
  14.0pt;font-family:Consolas;mso-bidi-font-family:Consolas;color:black;
  mso-font-kerning:0pt'><span style='mso-tab-count:2'>              </span></span><span
  lang=EN-US style='font-size:5.0pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;color:#3F7F5F;mso-font-kerning:0pt'>// </span><span
  style='font-size:5.0pt;mso-bidi-font-size:14.0pt;font-family:宋体;mso-ascii-font-family:
  Consolas;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:Consolas;
  mso-bidi-font-family:Consolas;color:#3F7F5F;mso-font-kerning:0pt'>创建节点。</span><span
  lang=EN-US style='font-size:5.0pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;color:#3F7F5F;mso-font-kerning:0pt'>&quot;This
  is data&quot;.getBytes()</span><span style='font-size:5.0pt;mso-bidi-font-size:
  14.0pt;font-family:宋体;mso-ascii-font-family:Consolas;mso-fareast-theme-font:
  minor-fareast;mso-hansi-font-family:Consolas;mso-bidi-font-family:Consolas;
  color:#3F7F5F;mso-font-kerning:0pt'>是节点的数据；</span><span lang=EN-US
  style='font-size:5.0pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;color:#3F7F5F;mso-font-kerning:0pt'>Ids.OPEN_ACL_UNSAFE</span><span
  style='font-size:5.0pt;mso-bidi-font-size:14.0pt;font-family:宋体;mso-ascii-font-family:
  Consolas;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:Consolas;
  mso-bidi-font-family:Consolas;color:#3F7F5F;mso-font-kerning:0pt'>表示不做权限检查；</span><span
  lang=EN-US style='font-size:5.0pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;color:#3F7F5F;mso-font-kerning:0pt'>
  CreateMode.EPHEMERAL</span><span style='font-size:5.0pt;mso-bidi-font-size:
  14.0pt;font-family:宋体;mso-ascii-font-family:Consolas;mso-fareast-theme-font:
  minor-fareast;mso-hansi-font-family:Consolas;mso-bidi-font-family:Consolas;
  color:#3F7F5F;mso-font-kerning:0pt'>是临时节点（主备切换用这个），还有一个</span><span
  lang=EN-US style='font-size:5.0pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;color:#3F7F5F;mso-font-kerning:0pt'>CreateMode.PERSISTENT</span><span
  style='font-size:5.0pt;mso-bidi-font-size:14.0pt;font-family:宋体;mso-ascii-font-family:
  Consolas;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:Consolas;
  mso-bidi-font-family:Consolas;color:#3F7F5F;mso-font-kerning:0pt'>是永久节点。</span><span
  lang=EN-US style='font-size:5.0pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;mso-font-kerning:0pt'><o:p></o:p></span></p>
  <p class=MsoNormal style='line-height:normal;mso-pagination:none;mso-layout-grid-align:
  none;text-autospace:none'><span lang=EN-US style='font-size:5.0pt;mso-bidi-font-size:
  14.0pt;font-family:Consolas;mso-bidi-font-family:Consolas;color:black;
  mso-font-kerning:0pt'><span style='mso-tab-count:2'>              </span></span><span
  lang=EN-US style='font-size:5.0pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;color:#3F7F5F;mso-font-kerning:0pt'>// </span><span
  style='font-size:5.0pt;mso-bidi-font-size:14.0pt;font-family:宋体;mso-ascii-font-family:
  Consolas;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:Consolas;
  mso-bidi-font-family:Consolas;color:#3F7F5F;mso-font-kerning:0pt'>注意，要先创建</span><span
  lang=EN-US style='font-size:5.0pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;color:#3F7F5F;mso-font-kerning:0pt'>/tank</span><span
  style='font-size:5.0pt;mso-bidi-font-size:14.0pt;font-family:宋体;mso-ascii-font-family:
  Consolas;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:Consolas;
  mso-bidi-font-family:Consolas;color:#3F7F5F;mso-font-kerning:0pt'>节点，否则报错</span><span
  lang=EN-US style='font-size:5.0pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;color:#3F7F5F;mso-font-kerning:0pt'>org.apache.zookeeper.KeeperException$NoNodeException:
  KeeperErrorCode = NoNode for /tank/master</span><span lang=EN-US
  style='font-size:5.0pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;mso-font-kerning:0pt'><o:p></o:p></span></p>
  <p class=MsoNormal style='line-height:normal;mso-pagination:none;mso-layout-grid-align:
  none;text-autospace:none'><span lang=EN-US style='font-size:5.0pt;mso-bidi-font-size:
  14.0pt;font-family:Consolas;mso-bidi-font-family:Consolas;color:black;
  mso-font-kerning:0pt'><span style='mso-tab-count:2'>              </span></span><span
  lang=EN-US style='font-size:5.0pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;color:#6A3E3E;mso-font-kerning:0pt'>zk</span><span
  lang=EN-US style='font-size:5.0pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;color:black;mso-font-kerning:0pt'>.create(</span><span
  lang=EN-US style='font-size:5.0pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;color:#2A00FF;mso-font-kerning:0pt'>&quot;/tank/master&quot;</span><span
  lang=EN-US style='font-size:5.0pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;color:black;mso-font-kerning:0pt'>, </span><span
  lang=EN-US style='font-size:5.0pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;color:#2A00FF;mso-font-kerning:0pt'>&quot;This
  is data&quot;</span><span lang=EN-US style='font-size:5.0pt;mso-bidi-font-size:
  14.0pt;font-family:Consolas;mso-bidi-font-family:Consolas;color:black;
  mso-font-kerning:0pt'>.getBytes(), Ids.</span><b><i><span lang=EN-US
  style='font-size:5.0pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;color:#0000C0;mso-font-kerning:0pt'>OPEN_ACL_UNSAFE</span></i></b><span
  lang=EN-US style='font-size:5.0pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;color:black;mso-font-kerning:0pt'>, CreateMode.</span><b><i><span
  lang=EN-US style='font-size:5.0pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;color:#0000C0;mso-font-kerning:0pt'>EPHEMERAL</span></i></b><span
  lang=EN-US style='font-size:5.0pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;color:black;mso-font-kerning:0pt'>);<span
  style='mso-spacerun:yes'>  </span></span><span lang=EN-US style='font-size:
  5.0pt;mso-bidi-font-size:14.0pt;font-family:Consolas;mso-bidi-font-family:
  Consolas;mso-font-kerning:0pt'><o:p></o:p></span></p>
  <p class=MsoNormal style='line-height:normal;mso-pagination:none;mso-layout-grid-align:
  none;text-autospace:none'><span lang=EN-US style='font-size:5.0pt;mso-bidi-font-size:
  14.0pt;font-family:Consolas;mso-bidi-font-family:Consolas;color:black;
  mso-font-kerning:0pt'><span style='mso-tab-count:2'>              </span>System.</span><b><i><span
  lang=EN-US style='font-size:5.0pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;color:#0000C0;mso-font-kerning:0pt'>out</span></i></b><span
  lang=EN-US style='font-size:5.0pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;color:black;mso-font-kerning:0pt'>.println(</span><span
  lang=EN-US style='font-size:5.0pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;color:#2A00FF;mso-font-kerning:0pt'>&quot;</span><span
  style='font-size:5.0pt;mso-bidi-font-size:14.0pt;font-family:宋体;mso-ascii-font-family:
  Consolas;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:Consolas;
  mso-bidi-font-family:Consolas;color:#2A00FF;mso-font-kerning:0pt'>创建节点成功</span><span
  lang=EN-US style='font-size:5.0pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;color:#2A00FF;mso-font-kerning:0pt'>&quot;</span><span
  lang=EN-US style='font-size:5.0pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;color:black;mso-font-kerning:0pt'>);</span><span
  lang=EN-US style='font-size:5.0pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;mso-font-kerning:0pt'><o:p></o:p></span></p>
  <p class=MsoNormal style='line-height:normal;mso-pagination:none;mso-layout-grid-align:
  none;text-autospace:none'><span lang=EN-US style='font-size:5.0pt;mso-bidi-font-size:
  14.0pt;font-family:Consolas;mso-bidi-font-family:Consolas;color:black;
  mso-font-kerning:0pt'><span style='mso-tab-count:2'>              </span></span><span
  lang=EN-US style='font-size:5.0pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;mso-font-kerning:0pt'><o:p></o:p></span></p>
  <p class=MsoNormal style='line-height:normal;mso-pagination:none;mso-layout-grid-align:
  none;text-autospace:none'><span lang=EN-US style='font-size:5.0pt;mso-bidi-font-size:
  14.0pt;font-family:Consolas;mso-bidi-font-family:Consolas;color:black;
  mso-font-kerning:0pt'><span style='mso-tab-count:2'>              </span></span><b><span
  lang=EN-US style='font-size:5.0pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;color:#7F0055;mso-font-kerning:0pt'>byte</span></b><span
  lang=EN-US style='font-size:5.0pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;color:black;mso-font-kerning:0pt'>[] </span><span
  lang=EN-US style='font-size:5.0pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;color:#6A3E3E;mso-font-kerning:0pt'>data</span><span
  lang=EN-US style='font-size:5.0pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;color:black;mso-font-kerning:0pt'> = </span><span
  lang=EN-US style='font-size:5.0pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;color:#6A3E3E;mso-font-kerning:0pt'>zk</span><span
  lang=EN-US style='font-size:5.0pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;color:black;mso-font-kerning:0pt'>.getData(</span><span
  lang=EN-US style='font-size:5.0pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;color:#2A00FF;mso-font-kerning:0pt'>&quot;/tank/master&quot;</span><span
  lang=EN-US style='font-size:5.0pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;color:black;mso-font-kerning:0pt'>, </span><b><span
  lang=EN-US style='font-size:5.0pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;color:#7F0055;mso-font-kerning:0pt'>false</span></b><span
  lang=EN-US style='font-size:5.0pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;color:black;mso-font-kerning:0pt'>, </span><b><span
  lang=EN-US style='font-size:5.0pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;color:#7F0055;mso-font-kerning:0pt'>null</span></b><span
  lang=EN-US style='font-size:5.0pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;color:black;mso-font-kerning:0pt'>);</span><span
  lang=EN-US style='font-size:5.0pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;mso-font-kerning:0pt'><o:p></o:p></span></p>
  <p class=MsoNormal style='line-height:normal;mso-pagination:none;mso-layout-grid-align:
  none;text-autospace:none'><span lang=EN-US style='font-size:5.0pt;mso-bidi-font-size:
  14.0pt;font-family:Consolas;mso-bidi-font-family:Consolas;color:black;
  mso-font-kerning:0pt'><span style='mso-tab-count:2'>              </span>System.</span><b><i><span
  lang=EN-US style='font-size:5.0pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;color:#0000C0;mso-font-kerning:0pt'>out</span></i></b><span
  lang=EN-US style='font-size:5.0pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;color:black;mso-font-kerning:0pt'>.println(</span><span
  lang=EN-US style='font-size:5.0pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;color:#2A00FF;mso-font-kerning:0pt'>&quot;</span><span
  style='font-size:5.0pt;mso-bidi-font-size:14.0pt;font-family:宋体;mso-ascii-font-family:
  Consolas;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:Consolas;
  mso-bidi-font-family:Consolas;color:#2A00FF;mso-font-kerning:0pt'>获取节点数据</span><span
  lang=EN-US style='font-size:5.0pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;color:#2A00FF;mso-font-kerning:0pt'>=&quot;</span><span
  lang=EN-US style='font-size:5.0pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;color:black;mso-font-kerning:0pt'> + </span><b><span
  lang=EN-US style='font-size:5.0pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;color:#7F0055;mso-font-kerning:0pt'>new</span></b><span
  lang=EN-US style='font-size:5.0pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;color:black;mso-font-kerning:0pt'> String(</span><span
  lang=EN-US style='font-size:5.0pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;color:#6A3E3E;mso-font-kerning:0pt'>data</span><span
  lang=EN-US style='font-size:5.0pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;color:black;mso-font-kerning:0pt'>));</span><span
  lang=EN-US style='font-size:5.0pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;mso-font-kerning:0pt'><o:p></o:p></span></p>
  <p class=MsoNormal style='line-height:normal;mso-pagination:none;mso-layout-grid-align:
  none;text-autospace:none'><span lang=EN-US style='font-size:5.0pt;mso-bidi-font-size:
  14.0pt;font-family:Consolas;mso-bidi-font-family:Consolas;color:black;
  mso-font-kerning:0pt'><span style='mso-tab-count:2'>              </span></span><span
  lang=EN-US style='font-size:5.0pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;mso-font-kerning:0pt'><o:p></o:p></span></p>
  <p class=MsoNormal style='line-height:normal;mso-pagination:none;mso-layout-grid-align:
  none;text-autospace:none'><span lang=EN-US style='font-size:5.0pt;mso-bidi-font-size:
  14.0pt;font-family:Consolas;mso-bidi-font-family:Consolas;color:black;
  mso-font-kerning:0pt'><span style='mso-tab-count:2'>              </span></span><span
  lang=EN-US style='font-size:5.0pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;color:#3F7F5F;mso-font-kerning:0pt'>// </span><span
  style='font-size:5.0pt;mso-bidi-font-size:14.0pt;font-family:宋体;mso-ascii-font-family:
  Consolas;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:Consolas;
  mso-bidi-font-family:Consolas;color:#3F7F5F;mso-font-kerning:0pt'>睡一下，为了查看结果</span><span
  lang=EN-US style='font-size:5.0pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;mso-font-kerning:0pt'><o:p></o:p></span></p>
  <p class=MsoNormal style='line-height:normal;mso-pagination:none;mso-layout-grid-align:
  none;text-autospace:none'><span lang=EN-US style='font-size:5.0pt;mso-bidi-font-size:
  14.0pt;font-family:Consolas;mso-bidi-font-family:Consolas;color:black;
  mso-font-kerning:0pt'><span style='mso-tab-count:2'>              </span>Thread.<i>sleep</i>(10000);</span><span
  lang=EN-US style='font-size:5.0pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;mso-font-kerning:0pt'><o:p></o:p></span></p>
  <p class=MsoNormal style='line-height:normal;mso-pagination:none;mso-layout-grid-align:
  none;text-autospace:none'><span lang=EN-US style='font-size:5.0pt;mso-bidi-font-size:
  14.0pt;font-family:Consolas;mso-bidi-font-family:Consolas;color:black;
  mso-font-kerning:0pt'><span style='mso-tab-count:2'>              </span></span><span
  lang=EN-US style='font-size:5.0pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;color:#6A3E3E;mso-font-kerning:0pt'>zk</span><span
  lang=EN-US style='font-size:5.0pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;color:black;mso-font-kerning:0pt'>.close();</span><span
  lang=EN-US style='font-size:5.0pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;mso-font-kerning:0pt'><o:p></o:p></span></p>
  <p class=MsoNormal style='line-height:normal;mso-pagination:none;mso-layout-grid-align:
  none;text-autospace:none'><span lang=EN-US style='font-size:5.0pt;mso-bidi-font-size:
  14.0pt;font-family:Consolas;mso-bidi-font-family:Consolas;color:black;
  mso-font-kerning:0pt'><span style='mso-tab-count:1'>       </span>}</span><span
  lang=EN-US style='font-size:5.0pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;mso-font-kerning:0pt'><o:p></o:p></span></p>
  <p class=MsoNormal style='line-height:normal;mso-pagination:none;mso-layout-grid-align:
  none;text-autospace:none'><span lang=EN-US style='font-size:5.0pt;mso-bidi-font-size:
  14.0pt;font-family:Consolas;mso-bidi-font-family:Consolas;mso-font-kerning:
  0pt'><o:p>&nbsp;</o:p></span></p>
  <p class=MsoNormal style='line-height:normal;mso-pagination:none;mso-layout-grid-align:
  none;text-autospace:none'><span lang=EN-US style='font-size:5.0pt;mso-bidi-font-size:
  14.0pt;font-family:Consolas;mso-bidi-font-family:Consolas;color:black;
  mso-font-kerning:0pt'><span style='mso-tab-count:1'>       </span></span><span
  lang=EN-US style='font-size:5.0pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;color:#3F7F5F;mso-font-kerning:0pt'>// </span><span
  style='font-size:5.0pt;mso-bidi-font-size:14.0pt;font-family:宋体;mso-ascii-font-family:
  Consolas;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:Consolas;
  mso-bidi-font-family:Consolas;color:#3F7F5F;mso-font-kerning:0pt'>监听器会传递监听事件</span><span
  lang=EN-US style='font-size:5.0pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;mso-font-kerning:0pt'><o:p></o:p></span></p>
  <p class=MsoNormal style='line-height:normal;mso-pagination:none;mso-layout-grid-align:
  none;text-autospace:none'><span lang=EN-US style='font-size:5.0pt;mso-bidi-font-size:
  14.0pt;font-family:Consolas;mso-bidi-font-family:Consolas;color:black;
  mso-font-kerning:0pt'><span style='mso-tab-count:1'>       </span></span><b><span
  lang=EN-US style='font-size:5.0pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;color:#7F0055;mso-font-kerning:0pt'>public</span></b><span
  lang=EN-US style='font-size:5.0pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;color:black;mso-font-kerning:0pt'> </span><b><span
  lang=EN-US style='font-size:5.0pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;color:#7F0055;mso-font-kerning:0pt'>void</span></b><span
  lang=EN-US style='font-size:5.0pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;color:black;mso-font-kerning:0pt'>
  process(WatchedEvent </span><span lang=EN-US style='font-size:5.0pt;
  mso-bidi-font-size:14.0pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  color:#6A3E3E;mso-font-kerning:0pt'>event</span><span lang=EN-US
  style='font-size:5.0pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;color:black;mso-font-kerning:0pt'>) {</span><span
  lang=EN-US style='font-size:5.0pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;mso-font-kerning:0pt'><o:p></o:p></span></p>
  <p class=MsoNormal style='line-height:normal;mso-pagination:none;mso-layout-grid-align:
  none;text-autospace:none'><span lang=EN-US style='font-size:5.0pt;mso-bidi-font-size:
  14.0pt;font-family:Consolas;mso-bidi-font-family:Consolas;color:black;
  mso-font-kerning:0pt'><span style='mso-tab-count:2'>              </span>System.</span><b><i><span
  lang=EN-US style='font-size:5.0pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;color:#0000C0;mso-font-kerning:0pt'>out</span></i></b><span
  lang=EN-US style='font-size:5.0pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;color:black;mso-font-kerning:0pt'>.println(</span><span
  lang=EN-US style='font-size:5.0pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;color:#2A00FF;mso-font-kerning:0pt'>&quot;</span><span
  style='font-size:5.0pt;mso-bidi-font-size:14.0pt;font-family:宋体;mso-ascii-font-family:
  Consolas;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:Consolas;
  mso-bidi-font-family:Consolas;color:#2A00FF;mso-font-kerning:0pt'>事件</span><span
  lang=EN-US style='font-size:5.0pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;color:#2A00FF;mso-font-kerning:0pt'>:&quot;</span><span
  lang=EN-US style='font-size:5.0pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;color:black;mso-font-kerning:0pt'> + </span><span
  lang=EN-US style='font-size:5.0pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;color:#6A3E3E;mso-font-kerning:0pt'>event</span><span
  lang=EN-US style='font-size:5.0pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;color:black;mso-font-kerning:0pt'>);</span><span
  lang=EN-US style='font-size:5.0pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;mso-font-kerning:0pt'><o:p></o:p></span></p>
  <p class=MsoNormal style='line-height:normal;mso-pagination:none;mso-layout-grid-align:
  none;text-autospace:none'><span lang=EN-US style='font-size:5.0pt;mso-bidi-font-size:
  14.0pt;font-family:Consolas;mso-bidi-font-family:Consolas;color:black;
  mso-font-kerning:0pt'><span style='mso-tab-count:2'>              </span></span><span
  lang=EN-US style='font-size:5.0pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;color:#3F7F5F;mso-font-kerning:0pt'>// </span><span
  style='font-size:5.0pt;mso-bidi-font-size:14.0pt;font-family:宋体;mso-ascii-font-family:
  Consolas;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:Consolas;
  mso-bidi-font-family:Consolas;color:#3F7F5F;mso-font-kerning:0pt'>如果是已经连接的状态，就开门闩</span><span
  lang=EN-US style='font-size:5.0pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;mso-font-kerning:0pt'><o:p></o:p></span></p>
  <p class=MsoNormal style='line-height:normal;mso-pagination:none;mso-layout-grid-align:
  none;text-autospace:none'><span lang=EN-US style='font-size:5.0pt;mso-bidi-font-size:
  14.0pt;font-family:Consolas;mso-bidi-font-family:Consolas;color:black;
  mso-font-kerning:0pt'><span style='mso-tab-count:2'>              </span></span><b><span
  lang=EN-US style='font-size:5.0pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;color:#7F0055;mso-font-kerning:0pt'>if</span></b><span
  lang=EN-US style='font-size:5.0pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;color:black;mso-font-kerning:0pt'>(</span><span
  lang=EN-US style='font-size:5.0pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;color:#6A3E3E;mso-font-kerning:0pt'>event</span><span
  lang=EN-US style='font-size:5.0pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;color:black;mso-font-kerning:0pt'>.getState()
  == KeeperState.</span><b><i><span lang=EN-US style='font-size:5.0pt;
  mso-bidi-font-size:14.0pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  color:#0000C0;mso-font-kerning:0pt'>SyncConnected</span></i></b><span
  lang=EN-US style='font-size:5.0pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;color:black;mso-font-kerning:0pt'>) {</span><span
  lang=EN-US style='font-size:5.0pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;mso-font-kerning:0pt'><o:p></o:p></span></p>
  <p class=MsoNormal style='line-height:normal;mso-pagination:none;mso-layout-grid-align:
  none;text-autospace:none'><span lang=EN-US style='font-size:5.0pt;mso-bidi-font-size:
  14.0pt;font-family:Consolas;mso-bidi-font-family:Consolas;color:black;
  mso-font-kerning:0pt'><span style='mso-tab-count:3'>                     </span></span><span
  lang=EN-US style='font-size:5.0pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;color:#3F7F5F;mso-font-kerning:0pt'>// </span><span
  style='font-size:5.0pt;mso-bidi-font-size:14.0pt;font-family:宋体;mso-ascii-font-family:
  Consolas;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:Consolas;
  mso-bidi-font-family:Consolas;color:#3F7F5F;mso-font-kerning:0pt'>门闩减少为</span><span
  lang=EN-US style='font-size:5.0pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;color:#3F7F5F;mso-font-kerning:0pt'>0</span><span
  style='font-size:5.0pt;mso-bidi-font-size:14.0pt;font-family:宋体;mso-ascii-font-family:
  Consolas;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:Consolas;
  mso-bidi-font-family:Consolas;color:#3F7F5F;mso-font-kerning:0pt'>，即开门闩</span><span
  lang=EN-US style='font-size:5.0pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;mso-font-kerning:0pt'><o:p></o:p></span></p>
  <p class=MsoNormal style='line-height:normal;mso-pagination:none;mso-layout-grid-align:
  none;text-autospace:none'><span lang=EN-US style='font-size:5.0pt;mso-bidi-font-size:
  14.0pt;font-family:Consolas;mso-bidi-font-family:Consolas;color:black;
  mso-font-kerning:0pt'><span style='mso-tab-count:3'>                     </span></span><i><span
  lang=EN-US style='font-size:5.0pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;color:#0000C0;mso-font-kerning:0pt'>connected</span></i><span
  lang=EN-US style='font-size:5.0pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;color:black;mso-font-kerning:0pt'>.countDown();</span><span
  lang=EN-US style='font-size:5.0pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;mso-font-kerning:0pt'><o:p></o:p></span></p>
  <p class=MsoNormal style='line-height:normal;mso-pagination:none;mso-layout-grid-align:
  none;text-autospace:none'><span lang=EN-US style='font-size:5.0pt;mso-bidi-font-size:
  14.0pt;font-family:Consolas;mso-bidi-font-family:Consolas;color:black;
  mso-font-kerning:0pt'><span style='mso-tab-count:3'>                     </span>System.</span><b><i><span
  lang=EN-US style='font-size:5.0pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;color:#0000C0;mso-font-kerning:0pt'>out</span></i></b><span
  lang=EN-US style='font-size:5.0pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;color:black;mso-font-kerning:0pt'>.println(</span><span
  lang=EN-US style='font-size:5.0pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;color:#2A00FF;mso-font-kerning:0pt'>&quot;</span><span
  style='font-size:5.0pt;mso-bidi-font-size:14.0pt;font-family:宋体;mso-ascii-font-family:
  Consolas;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:Consolas;
  mso-bidi-font-family:Consolas;color:#2A00FF;mso-font-kerning:0pt'>已经连接</span><span
  lang=EN-US style='font-size:5.0pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;color:#2A00FF;mso-font-kerning:0pt'>!&quot;</span><span
  lang=EN-US style='font-size:5.0pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;color:black;mso-font-kerning:0pt'>);</span><span
  lang=EN-US style='font-size:5.0pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;mso-font-kerning:0pt'><o:p></o:p></span></p>
  <p class=MsoNormal style='line-height:normal;mso-pagination:none;mso-layout-grid-align:
  none;text-autospace:none'><span lang=EN-US style='font-size:5.0pt;mso-bidi-font-size:
  14.0pt;font-family:Consolas;mso-bidi-font-family:Consolas;color:black;
  mso-font-kerning:0pt'><span style='mso-tab-count:2'>              </span>}</span><span
  lang=EN-US style='font-size:5.0pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;mso-font-kerning:0pt'><o:p></o:p></span></p>
  <p class=MsoNormal style='line-height:normal;mso-pagination:none;mso-layout-grid-align:
  none;text-autospace:none'><span lang=EN-US style='font-size:5.0pt;mso-bidi-font-size:
  14.0pt;font-family:Consolas;mso-bidi-font-family:Consolas;color:black;
  mso-font-kerning:0pt'><span style='mso-tab-count:1'>       </span>}</span><span
  lang=EN-US style='font-size:5.0pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;mso-font-kerning:0pt'><o:p></o:p></span></p>
  <p class=MsoNormal style='line-height:normal;mso-pagination:none;mso-layout-grid-align:
  none;text-autospace:none'><span lang=EN-US style='font-size:5.0pt;mso-bidi-font-size:
  14.0pt;font-family:Consolas;mso-bidi-font-family:Consolas;color:black;
  mso-font-kerning:0pt'>}</span><span lang=EN-US style='font-size:5.0pt;
  mso-bidi-font-size:14.0pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  mso-font-kerning:0pt'><o:p></o:p></span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal><span lang=EN-US style='font-size:12.0pt;mso-bidi-font-size:
11.0pt;line-height:125%;mso-fareast-font-family:宋体'><o:p>&nbsp;</o:p></span></p>

<h3><span style='font-family:宋体;mso-ascii-font-family:Calibri;mso-ascii-theme-font:
minor-latin;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:Calibri;
mso-hansi-theme-font:minor-latin'>测试</span></h3>

<p class=MsoNormal><span style='font-family:宋体;mso-ascii-font-family:Calibri;
mso-ascii-theme-font:minor-latin;mso-fareast-theme-font:minor-fareast;
mso-hansi-font-family:Calibri;mso-hansi-theme-font:minor-latin'>在</span><span
lang=EN-US>master</span><span style='font-family:宋体;mso-ascii-font-family:Calibri;
mso-ascii-theme-font:minor-latin;mso-fareast-theme-font:minor-fareast;
mso-hansi-font-family:Calibri;mso-hansi-theme-font:minor-latin'>虚拟机创建</span><span
lang=EN-US>/tank</span><span style='font-family:宋体;mso-ascii-font-family:Calibri;
mso-ascii-theme-font:minor-latin;mso-fareast-theme-font:minor-fareast;
mso-hansi-font-family:Calibri;mso-hansi-theme-font:minor-latin'>节点</span></p>

<p class=MsoNormal><span lang=EN-US style='mso-no-proof:yes'><!--[if gte vml 1]><v:shape
 id="图片_x0020_45" o:spid="_x0000_i1058" type="#_x0000_t75" style='width:293.25pt;
 height:27.75pt;visibility:visible;mso-wrap-style:square'>
 <v:imagedata src="04_ZookeeperAppend.files/image107.png" o:title=""/>
</v:shape><![endif]--><![if !vml]><img width=391 height=37
src="04_ZookeeperAppend.files/image107.png" v:shapes="图片_x0020_45"><![endif]></span><span
lang=EN-US style='font-size:12.0pt;mso-bidi-font-size:11.0pt;line-height:125%;
mso-fareast-font-family:宋体'><o:p></o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='font-size:12.0pt;mso-bidi-font-size:
11.0pt;line-height:125%;mso-fareast-font-family:宋体'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span style='font-size:12.0pt;mso-bidi-font-size:11.0pt;
line-height:125%;font-family:宋体;mso-ascii-font-family:Calibri;mso-ascii-theme-font:
minor-latin;mso-hansi-font-family:Calibri;mso-hansi-theme-font:minor-latin'>执行程序</span><span
lang=EN-US style='font-size:12.0pt;mso-bidi-font-size:11.0pt;line-height:125%;
mso-fareast-font-family:宋体'><o:p></o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='mso-no-proof:yes'><!--[if gte vml 1]><v:shape
 id="图片_x0020_47" o:spid="_x0000_i1057" type="#_x0000_t75" style='width:442.5pt;
 height:96pt;visibility:visible;mso-wrap-style:square'>
 <v:imagedata src="04_ZookeeperAppend.files/image108.png" o:title=""/>
</v:shape><![endif]--><![if !vml]><img width=590 height=128
src="04_ZookeeperAppend.files/image108.png" v:shapes="图片_x0020_47"><![endif]></span><span
lang=EN-US style='font-size:12.0pt;mso-bidi-font-size:11.0pt;line-height:125%;
mso-fareast-font-family:宋体'><o:p></o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='font-size:12.0pt;mso-bidi-font-size:
11.0pt;line-height:125%;mso-fareast-font-family:宋体'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span style='font-size:12.0pt;mso-bidi-font-size:11.0pt;
line-height:125%;font-family:宋体;mso-ascii-font-family:Calibri;mso-ascii-theme-font:
minor-latin;mso-hansi-font-family:Calibri;mso-hansi-theme-font:minor-latin'>执行之后，等待连接成功，然后立马执行</span><span
lang=EN-US style='font-size:12.0pt;mso-bidi-font-size:11.0pt;line-height:125%;
mso-fareast-font-family:宋体'> ls /tank </span><span style='font-size:12.0pt;
mso-bidi-font-size:11.0pt;line-height:125%;font-family:宋体;mso-ascii-font-family:
Calibri;mso-ascii-theme-font:minor-latin;mso-hansi-font-family:Calibri;
mso-hansi-theme-font:minor-latin'>，可以看到</span><span lang=EN-US
style='font-size:12.0pt;mso-bidi-font-size:11.0pt;line-height:125%;mso-fareast-font-family:
宋体'>master</span><span style='font-size:12.0pt;mso-bidi-font-size:11.0pt;
line-height:125%;font-family:宋体;mso-ascii-font-family:Calibri;mso-ascii-theme-font:
minor-latin;mso-hansi-font-family:Calibri;mso-hansi-theme-font:minor-latin'>节点，等待</span><span
lang=EN-US style='font-size:12.0pt;mso-bidi-font-size:11.0pt;line-height:125%;
mso-fareast-font-family:宋体'>10</span><span style='font-size:12.0pt;mso-bidi-font-size:
11.0pt;line-height:125%;font-family:宋体;mso-ascii-font-family:Calibri;
mso-ascii-theme-font:minor-latin;mso-hansi-font-family:Calibri;mso-hansi-theme-font:
minor-latin'>秒之后，再执行，节点就没有了。</span><span lang=EN-US style='font-size:12.0pt;
mso-bidi-font-size:11.0pt;line-height:125%;mso-fareast-font-family:宋体'><o:p></o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='mso-no-proof:yes'><!--[if gte vml 1]><v:shape
 id="图片_x0020_46" o:spid="_x0000_i1056" type="#_x0000_t75" style='width:242.25pt;
 height:53.25pt;visibility:visible;mso-wrap-style:square'>
 <v:imagedata src="04_ZookeeperAppend.files/image109.png" o:title=""/>
</v:shape><![endif]--><![if !vml]><img width=323 height=71
src="04_ZookeeperAppend.files/image109.png" v:shapes="图片_x0020_46"><![endif]></span><span
lang=EN-US style='font-size:12.0pt;mso-bidi-font-size:11.0pt;line-height:125%;
mso-fareast-font-family:宋体'><o:p></o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='font-size:12.0pt;mso-bidi-font-size:
11.0pt;line-height:125%;mso-fareast-font-family:宋体'><o:p>&nbsp;</o:p></span></p>

<h2><span lang=EN-US>2</span><span style='font-family:宋体;mso-ascii-font-family:
"Calibri Light";mso-ascii-theme-font:major-latin;mso-fareast-theme-font:major-fareast;
mso-hansi-font-family:"Calibri Light";mso-hansi-theme-font:major-latin'>）</span><span
lang=EN-US>HA</span><span style='font-family:宋体;mso-ascii-font-family:"Calibri Light";
mso-ascii-theme-font:major-latin;mso-fareast-theme-font:major-fareast;
mso-hansi-font-family:"Calibri Light";mso-hansi-theme-font:major-latin'>的开发</span></h2>

<p class=MsoNormal><span style='font-size:12.0pt;mso-bidi-font-size:11.0pt;
line-height:125%;font-family:宋体;mso-ascii-font-family:Calibri;mso-ascii-theme-font:
minor-latin;mso-hansi-font-family:Calibri;mso-hansi-theme-font:minor-latin'>前面说的</span><span
lang=EN-US style='font-size:12.0pt;mso-bidi-font-size:11.0pt;line-height:125%;
mso-fareast-font-family:宋体'>HA</span><span style='font-size:12.0pt;mso-bidi-font-size:
11.0pt;line-height:125%;font-family:宋体;mso-ascii-font-family:Calibri;
mso-ascii-theme-font:minor-latin;mso-hansi-font-family:Calibri;mso-hansi-theme-font:
minor-latin'>（主备自动切换），现在写代码实现部分功能</span><span lang=EN-US style='font-size:12.0pt;
mso-bidi-font-size:11.0pt;line-height:125%;mso-fareast-font-family:宋体'><o:p></o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='mso-no-proof:yes'><!--[if gte vml 1]><v:shape
 id="图片_x0020_48" o:spid="_x0000_i1055" type="#_x0000_t75" style='width:566.25pt;
 height:309.75pt;visibility:visible;mso-wrap-style:square'>
 <v:imagedata src="04_ZookeeperAppend.files/image097.png" o:title=""/>
</v:shape><![endif]--><![if !vml]><img width=755 height=413
src="04_ZookeeperAppend.files/image109.png" v:shapes="图片_x0020_48"><![endif]></span><span
lang=EN-US style='font-size:12.0pt;mso-bidi-font-size:11.0pt;line-height:125%;
mso-fareast-font-family:宋体'><o:p></o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='font-size:12.0pt;mso-bidi-font-size:
11.0pt;line-height:125%;mso-fareast-font-family:宋体'><o:p>&nbsp;</o:p></span></p>

<h3><span style='font-family:宋体;mso-ascii-font-family:Calibri;mso-ascii-theme-font:
minor-latin;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:Calibri;
mso-hansi-theme-font:minor-latin'>代码</span></h3>

<p class=MsoNormal><span lang=EN-US style='font-size:12.0pt;mso-bidi-font-size:
11.0pt;line-height:125%;mso-fareast-font-family:宋体'>pom.xml</span><span
style='font-size:12.0pt;mso-bidi-font-size:11.0pt;line-height:125%;font-family:
宋体;mso-ascii-font-family:Calibri;mso-ascii-theme-font:minor-latin;mso-hansi-font-family:
Calibri;mso-hansi-theme-font:minor-latin'>与之前的一样</span><span lang=EN-US
style='font-size:12.0pt;mso-bidi-font-size:11.0pt;line-height:125%;mso-fareast-font-family:
宋体'><o:p></o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='font-size:12.0pt;mso-bidi-font-size:
11.0pt;line-height:125%;mso-fareast-font-family:宋体'><o:p>&nbsp;</o:p></span></p>

<table class=MsoTableGrid border=1 cellspacing=0 cellpadding=0
 style='border-collapse:collapse;border:none;mso-border-alt:solid windowtext .5pt;
 mso-yfti-tbllook:1184;mso-padding-alt:0cm 5.4pt 0cm 5.4pt'>
 <tr style='mso-yfti-irow:0;mso-yfti-firstrow:yes;mso-yfti-lastrow:yes'>
  <td width=755 valign=top style='width:566.4pt;border:solid windowtext 1.0pt;
  mso-border-alt:solid windowtext .5pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal style='line-height:normal;mso-pagination:none;mso-layout-grid-align:
  none;text-autospace:none'><b><span lang=EN-US style='font-size:5.5pt;
  mso-bidi-font-size:14.0pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  color:#7F0055;mso-font-kerning:0pt'>import</span></b><span lang=EN-US
  style='font-size:5.5pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;color:black;mso-font-kerning:0pt'>
  java.io.IOException;</span><span lang=EN-US style='font-size:5.5pt;
  mso-bidi-font-size:14.0pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  mso-font-kerning:0pt'><o:p></o:p></span></p>
  <p class=MsoNormal style='line-height:normal;mso-pagination:none;mso-layout-grid-align:
  none;text-autospace:none'><b><span lang=EN-US style='font-size:5.5pt;
  mso-bidi-font-size:14.0pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  color:#7F0055;mso-font-kerning:0pt'>import</span></b><span lang=EN-US
  style='font-size:5.5pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;color:black;mso-font-kerning:0pt'>
  java.util.Arrays;</span><span lang=EN-US style='font-size:5.5pt;mso-bidi-font-size:
  14.0pt;font-family:Consolas;mso-bidi-font-family:Consolas;mso-font-kerning:
  0pt'><o:p></o:p></span></p>
  <p class=MsoNormal style='line-height:normal;mso-pagination:none;mso-layout-grid-align:
  none;text-autospace:none'><b><span lang=EN-US style='font-size:5.5pt;
  mso-bidi-font-size:14.0pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  color:#7F0055;mso-font-kerning:0pt'>import</span></b><span lang=EN-US
  style='font-size:5.5pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;color:black;mso-font-kerning:0pt'>
  java.util.List;</span><span lang=EN-US style='font-size:5.5pt;mso-bidi-font-size:
  14.0pt;font-family:Consolas;mso-bidi-font-family:Consolas;mso-font-kerning:
  0pt'><o:p></o:p></span></p>
  <p class=MsoNormal style='line-height:normal;mso-pagination:none;mso-layout-grid-align:
  none;text-autospace:none'><b><span lang=EN-US style='font-size:5.5pt;
  mso-bidi-font-size:14.0pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  color:#7F0055;mso-font-kerning:0pt'>import</span></b><span lang=EN-US
  style='font-size:5.5pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;color:black;mso-font-kerning:0pt'>
  java.util.concurrent.CountDownLatch;</span><span lang=EN-US style='font-size:
  5.5pt;mso-bidi-font-size:14.0pt;font-family:Consolas;mso-bidi-font-family:
  Consolas;mso-font-kerning:0pt'><o:p></o:p></span></p>
  <p class=MsoNormal style='line-height:normal;mso-pagination:none;mso-layout-grid-align:
  none;text-autospace:none'><span lang=EN-US style='font-size:5.5pt;mso-bidi-font-size:
  14.0pt;font-family:Consolas;mso-bidi-font-family:Consolas;mso-font-kerning:
  0pt'><o:p>&nbsp;</o:p></span></p>
  <p class=MsoNormal style='line-height:normal;mso-pagination:none;mso-layout-grid-align:
  none;text-autospace:none'><b><span lang=EN-US style='font-size:5.5pt;
  mso-bidi-font-size:14.0pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  color:#7F0055;mso-font-kerning:0pt'>import</span></b><span lang=EN-US
  style='font-size:5.5pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;color:black;mso-font-kerning:0pt'>
  org.apache.zookeeper.CreateMode;</span><span lang=EN-US style='font-size:
  5.5pt;mso-bidi-font-size:14.0pt;font-family:Consolas;mso-bidi-font-family:
  Consolas;mso-font-kerning:0pt'><o:p></o:p></span></p>
  <p class=MsoNormal style='line-height:normal;mso-pagination:none;mso-layout-grid-align:
  none;text-autospace:none'><b><span lang=EN-US style='font-size:5.5pt;
  mso-bidi-font-size:14.0pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  color:#7F0055;mso-font-kerning:0pt'>import</span></b><span lang=EN-US
  style='font-size:5.5pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;color:black;mso-font-kerning:0pt'>
  org.apache.zookeeper.KeeperException;</span><span lang=EN-US
  style='font-size:5.5pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;mso-font-kerning:0pt'><o:p></o:p></span></p>
  <p class=MsoNormal style='line-height:normal;mso-pagination:none;mso-layout-grid-align:
  none;text-autospace:none'><b><span lang=EN-US style='font-size:5.5pt;
  mso-bidi-font-size:14.0pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  color:#7F0055;mso-font-kerning:0pt'>import</span></b><span lang=EN-US
  style='font-size:5.5pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;color:black;mso-font-kerning:0pt'>
  org.apache.zookeeper.WatchedEvent;</span><span lang=EN-US style='font-size:
  5.5pt;mso-bidi-font-size:14.0pt;font-family:Consolas;mso-bidi-font-family:
  Consolas;mso-font-kerning:0pt'><o:p></o:p></span></p>
  <p class=MsoNormal style='line-height:normal;mso-pagination:none;mso-layout-grid-align:
  none;text-autospace:none'><b><span lang=EN-US style='font-size:5.5pt;
  mso-bidi-font-size:14.0pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  color:#7F0055;mso-font-kerning:0pt'>import</span></b><span lang=EN-US
  style='font-size:5.5pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;color:black;mso-font-kerning:0pt'>
  org.apache.zookeeper.Watcher;</span><span lang=EN-US style='font-size:5.5pt;
  mso-bidi-font-size:14.0pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  mso-font-kerning:0pt'><o:p></o:p></span></p>
  <p class=MsoNormal style='line-height:normal;mso-pagination:none;mso-layout-grid-align:
  none;text-autospace:none'><b><span lang=EN-US style='font-size:5.5pt;
  mso-bidi-font-size:14.0pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  color:#7F0055;mso-font-kerning:0pt'>import</span></b><span lang=EN-US
  style='font-size:5.5pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;color:black;mso-font-kerning:0pt'>
  org.apache.zookeeper.Watcher.Event.EventType;</span><span lang=EN-US
  style='font-size:5.5pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;mso-font-kerning:0pt'><o:p></o:p></span></p>
  <p class=MsoNormal style='line-height:normal;mso-pagination:none;mso-layout-grid-align:
  none;text-autospace:none'><b><span lang=EN-US style='font-size:5.5pt;
  mso-bidi-font-size:14.0pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  color:#7F0055;mso-font-kerning:0pt'>import</span></b><span lang=EN-US
  style='font-size:5.5pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;color:black;mso-font-kerning:0pt'>
  org.apache.zookeeper.Watcher.Event.KeeperState;</span><span lang=EN-US
  style='font-size:5.5pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;mso-font-kerning:0pt'><o:p></o:p></span></p>
  <p class=MsoNormal style='line-height:normal;mso-pagination:none;mso-layout-grid-align:
  none;text-autospace:none'><b><span lang=EN-US style='font-size:5.5pt;
  mso-bidi-font-size:14.0pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  color:#7F0055;mso-font-kerning:0pt'>import</span></b><span lang=EN-US
  style='font-size:5.5pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;color:black;mso-font-kerning:0pt'>
  org.apache.zookeeper.ZooDefs.Ids;</span><span lang=EN-US style='font-size:
  5.5pt;mso-bidi-font-size:14.0pt;font-family:Consolas;mso-bidi-font-family:
  Consolas;mso-font-kerning:0pt'><o:p></o:p></span></p>
  <p class=MsoNormal style='line-height:normal;mso-pagination:none;mso-layout-grid-align:
  none;text-autospace:none'><b><span lang=EN-US style='font-size:5.5pt;
  mso-bidi-font-size:14.0pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  color:#7F0055;mso-font-kerning:0pt'>import</span></b><span lang=EN-US
  style='font-size:5.5pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;color:black;mso-font-kerning:0pt'>
  org.apache.zookeeper.ZooKeeper;</span><span lang=EN-US style='font-size:5.5pt;
  mso-bidi-font-size:14.0pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  mso-font-kerning:0pt'><o:p></o:p></span></p>
  <p class=MsoNormal style='line-height:normal;mso-pagination:none;mso-layout-grid-align:
  none;text-autospace:none'><span lang=EN-US style='font-size:5.5pt;mso-bidi-font-size:
  14.0pt;font-family:Consolas;mso-bidi-font-family:Consolas;mso-font-kerning:
  0pt'><o:p>&nbsp;</o:p></span></p>
  <p class=MsoNormal style='line-height:normal;mso-pagination:none;mso-layout-grid-align:
  none;text-autospace:none'><b><span lang=EN-US style='font-size:5.5pt;
  mso-bidi-font-size:14.0pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  color:#7F0055;mso-font-kerning:0pt'>public</span></b><span lang=EN-US
  style='font-size:5.5pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;color:black;mso-font-kerning:0pt'> </span><b><span
  lang=EN-US style='font-size:5.5pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;color:#7F0055;mso-font-kerning:0pt'>class</span></b><span
  lang=EN-US style='font-size:5.5pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;color:black;mso-font-kerning:0pt'> ZkTankMaster
  {</span><span lang=EN-US style='font-size:5.5pt;mso-bidi-font-size:14.0pt;
  font-family:Consolas;mso-bidi-font-family:Consolas;mso-font-kerning:0pt'><o:p></o:p></span></p>
  <p class=MsoNormal style='line-height:normal;mso-pagination:none;mso-layout-grid-align:
  none;text-autospace:none'><span lang=EN-US style='font-size:5.5pt;mso-bidi-font-size:
  14.0pt;font-family:Consolas;mso-bidi-font-family:Consolas;color:black;
  mso-font-kerning:0pt'><span style='mso-tab-count:1'>       </span></span><span
  lang=EN-US style='font-size:5.5pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;color:#3F7F5F;mso-font-kerning:0pt'>// </span><span
  style='font-size:5.5pt;mso-bidi-font-size:14.0pt;font-family:宋体;mso-ascii-font-family:
  Consolas;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:Consolas;
  mso-bidi-font-family:Consolas;color:#3F7F5F;mso-font-kerning:0pt'>已连接的门闩</span><span
  lang=EN-US style='font-size:5.5pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;mso-font-kerning:0pt'><o:p></o:p></span></p>
  <p class=MsoNormal style='line-height:normal;mso-pagination:none;mso-layout-grid-align:
  none;text-autospace:none'><span lang=EN-US style='font-size:5.5pt;mso-bidi-font-size:
  14.0pt;font-family:Consolas;mso-bidi-font-family:Consolas;color:black;
  mso-font-kerning:0pt'><span style='mso-tab-count:1'>       </span></span><b><span
  lang=EN-US style='font-size:5.5pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;color:#7F0055;mso-font-kerning:0pt'>static</span></b><span
  lang=EN-US style='font-size:5.5pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;color:black;mso-font-kerning:0pt'>
  CountDownLatch </span><i><span lang=EN-US style='font-size:5.5pt;mso-bidi-font-size:
  14.0pt;font-family:Consolas;mso-bidi-font-family:Consolas;color:#0000C0;
  mso-font-kerning:0pt'>connected</span></i><span lang=EN-US style='font-size:
  5.5pt;mso-bidi-font-size:14.0pt;font-family:Consolas;mso-bidi-font-family:
  Consolas;color:black;mso-font-kerning:0pt'> = </span><b><span lang=EN-US
  style='font-size:5.5pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;color:#7F0055;mso-font-kerning:0pt'>new</span></b><span
  lang=EN-US style='font-size:5.5pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;color:black;mso-font-kerning:0pt'>
  CountDownLatch(1);<span style='mso-spacerun:yes'>  </span></span><span
  lang=EN-US style='font-size:5.5pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;mso-font-kerning:0pt'><o:p></o:p></span></p>
  <p class=MsoNormal style='line-height:normal;mso-pagination:none;mso-layout-grid-align:
  none;text-autospace:none'><span lang=EN-US style='font-size:5.5pt;mso-bidi-font-size:
  14.0pt;font-family:Consolas;mso-bidi-font-family:Consolas;color:black;
  mso-font-kerning:0pt'><span style='mso-tab-count:1'>       </span></span><span
  lang=EN-US style='font-size:5.5pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;color:#3F7F5F;mso-font-kerning:0pt'>// </span><span
  style='font-size:5.5pt;mso-bidi-font-size:14.0pt;font-family:宋体;mso-ascii-font-family:
  Consolas;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:Consolas;
  mso-bidi-font-family:Consolas;color:#3F7F5F;mso-font-kerning:0pt'>断开的门闩</span><span
  lang=EN-US style='font-size:5.5pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;mso-font-kerning:0pt'><o:p></o:p></span></p>
  <p class=MsoNormal style='line-height:normal;mso-pagination:none;mso-layout-grid-align:
  none;text-autospace:none'><span lang=EN-US style='font-size:5.5pt;mso-bidi-font-size:
  14.0pt;font-family:Consolas;mso-bidi-font-family:Consolas;color:black;
  mso-font-kerning:0pt'><span style='mso-tab-count:1'>       </span></span><b><span
  lang=EN-US style='font-size:5.5pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;color:#7F0055;mso-font-kerning:0pt'>static</span></b><span
  lang=EN-US style='font-size:5.5pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;color:black;mso-font-kerning:0pt'>
  CountDownLatch </span><i><span lang=EN-US style='font-size:5.5pt;mso-bidi-font-size:
  14.0pt;font-family:Consolas;mso-bidi-font-family:Consolas;color:#0000C0;
  mso-font-kerning:0pt'>disconnected</span></i><span lang=EN-US
  style='font-size:5.5pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;color:black;mso-font-kerning:0pt'> = </span><b><span
  lang=EN-US style='font-size:5.5pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;color:#7F0055;mso-font-kerning:0pt'>new</span></b><span
  lang=EN-US style='font-size:5.5pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;color:black;mso-font-kerning:0pt'>
  CountDownLatch(1);<span style='mso-spacerun:yes'>  </span></span><span
  lang=EN-US style='font-size:5.5pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;mso-font-kerning:0pt'><o:p></o:p></span></p>
  <p class=MsoNormal style='line-height:normal;mso-pagination:none;mso-layout-grid-align:
  none;text-autospace:none'><span lang=EN-US style='font-size:5.5pt;mso-bidi-font-size:
  14.0pt;font-family:Consolas;mso-bidi-font-family:Consolas;color:black;
  mso-font-kerning:0pt'><span style='mso-tab-count:1'>       </span></span><span
  lang=EN-US style='font-size:5.5pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;color:#3F7F5F;mso-font-kerning:0pt'>// <u>zk</u></span><span
  style='font-size:5.5pt;mso-bidi-font-size:14.0pt;font-family:宋体;mso-ascii-font-family:
  Consolas;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:Consolas;
  mso-bidi-font-family:Consolas;color:#3F7F5F;mso-font-kerning:0pt'>集群</span><u><span
  lang=EN-US style='font-size:5.5pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;color:#3F7F5F;mso-font-kerning:0pt'>ip</span></u><span
  lang=EN-US style='font-size:5.5pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;mso-font-kerning:0pt'><o:p></o:p></span></p>
  <p class=MsoNormal style='line-height:normal;mso-pagination:none;mso-layout-grid-align:
  none;text-autospace:none'><span lang=EN-US style='font-size:5.5pt;mso-bidi-font-size:
  14.0pt;font-family:Consolas;mso-bidi-font-family:Consolas;color:black;
  mso-font-kerning:0pt'><span style='mso-tab-count:1'>       </span></span><b><span
  lang=EN-US style='font-size:5.5pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;color:#7F0055;mso-font-kerning:0pt'>static</span></b><span
  lang=EN-US style='font-size:5.5pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;color:black;mso-font-kerning:0pt'> </span><b><span
  lang=EN-US style='font-size:5.5pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;color:#7F0055;mso-font-kerning:0pt'>final</span></b><span
  lang=EN-US style='font-size:5.5pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;color:black;mso-font-kerning:0pt'> String </span><b><i><span
  lang=EN-US style='font-size:5.5pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;color:#0000C0;mso-font-kerning:0pt'>CONNECTION</span></i></b><span
  lang=EN-US style='font-size:5.5pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;color:black;mso-font-kerning:0pt'> = </span><span
  lang=EN-US style='font-size:5.5pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;color:#2A00FF;mso-font-kerning:0pt'>&quot;192.168.56.101:2181,
  192.168.56.102:2181, 192.168.56.103:2181&quot;</span><span lang=EN-US
  style='font-size:5.5pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;color:black;mso-font-kerning:0pt'>;</span><span
  lang=EN-US style='font-size:5.5pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;mso-font-kerning:0pt'><o:p></o:p></span></p>
  <p class=MsoNormal style='line-height:normal;mso-pagination:none;mso-layout-grid-align:
  none;text-autospace:none'><span lang=EN-US style='font-size:5.5pt;mso-bidi-font-size:
  14.0pt;font-family:Consolas;mso-bidi-font-family:Consolas;color:black;
  mso-font-kerning:0pt'><span style='mso-tab-count:1'>       </span></span><span
  lang=EN-US style='font-size:5.5pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;color:#3F7F5F;mso-font-kerning:0pt'>// </span><span
  style='font-size:5.5pt;mso-bidi-font-size:14.0pt;font-family:宋体;mso-ascii-font-family:
  Consolas;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:Consolas;
  mso-bidi-font-family:Consolas;color:#3F7F5F;mso-font-kerning:0pt'>客户端的</span><u><span
  lang=EN-US style='font-size:5.5pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;color:#3F7F5F;mso-font-kerning:0pt'>ip</span></u><span
  lang=EN-US style='font-size:5.5pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;color:#3F7F5F;mso-font-kerning:0pt'>+</span><span
  style='font-size:5.5pt;mso-bidi-font-size:14.0pt;font-family:宋体;mso-ascii-font-family:
  Consolas;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:Consolas;
  mso-bidi-font-family:Consolas;color:#3F7F5F;mso-font-kerning:0pt'>端口</span><span
  lang=EN-US style='font-size:5.5pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;mso-font-kerning:0pt'><o:p></o:p></span></p>
  <p class=MsoNormal style='line-height:normal;mso-pagination:none;mso-layout-grid-align:
  none;text-autospace:none'><span lang=EN-US style='font-size:5.5pt;mso-bidi-font-size:
  14.0pt;font-family:Consolas;mso-bidi-font-family:Consolas;color:black;
  mso-font-kerning:0pt'><span style='mso-tab-count:1'>       </span></span><b><span
  lang=EN-US style='font-size:5.5pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;color:#7F0055;mso-font-kerning:0pt'>static</span></b><span
  lang=EN-US style='font-size:5.5pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;color:black;mso-font-kerning:0pt'> </span><b><span
  lang=EN-US style='font-size:5.5pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;color:#7F0055;mso-font-kerning:0pt'>final</span></b><span
  lang=EN-US style='font-size:5.5pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;color:black;mso-font-kerning:0pt'>
  List&lt;String&gt; </span><b><i><span lang=EN-US style='font-size:5.5pt;
  mso-bidi-font-size:14.0pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  color:#0000C0;mso-font-kerning:0pt'>IP_PORT</span></i></b><span lang=EN-US
  style='font-size:5.5pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;color:black;mso-font-kerning:0pt'> = Arrays.<i>asList</i>(</span><span
  lang=EN-US style='font-size:5.5pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;color:#2A00FF;mso-font-kerning:0pt'>&quot;192.168.56.100:4567&quot;</span><span
  lang=EN-US style='font-size:5.5pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;color:black;mso-font-kerning:0pt'>, </span><span
  lang=EN-US style='font-size:5.5pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;color:#2A00FF;mso-font-kerning:0pt'>&quot;192.168.56.101:4568&quot;</span><span
  lang=EN-US style='font-size:5.5pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;color:black;mso-font-kerning:0pt'>);</span><span
  lang=EN-US style='font-size:5.5pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;mso-font-kerning:0pt'><o:p></o:p></span></p>
  <p class=MsoNormal style='line-height:normal;mso-pagination:none;mso-layout-grid-align:
  none;text-autospace:none'><span lang=EN-US style='font-size:5.5pt;mso-bidi-font-size:
  14.0pt;font-family:Consolas;mso-bidi-font-family:Consolas;mso-font-kerning:
  0pt'><o:p>&nbsp;</o:p></span></p>
  <p class=MsoNormal style='line-height:normal;mso-pagination:none;mso-layout-grid-align:
  none;text-autospace:none'><span lang=EN-US style='font-size:5.5pt;mso-bidi-font-size:
  14.0pt;font-family:Consolas;mso-bidi-font-family:Consolas;color:black;
  mso-font-kerning:0pt'><span style='mso-tab-count:1'>       </span></span><b><span
  lang=EN-US style='font-size:5.5pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;color:#7F0055;mso-font-kerning:0pt'>public</span></b><span
  lang=EN-US style='font-size:5.5pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;color:black;mso-font-kerning:0pt'> </span><b><span
  lang=EN-US style='font-size:5.5pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;color:#7F0055;mso-font-kerning:0pt'>static</span></b><span
  lang=EN-US style='font-size:5.5pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;color:black;mso-font-kerning:0pt'> </span><b><span
  lang=EN-US style='font-size:5.5pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;color:#7F0055;mso-font-kerning:0pt'>void</span></b><span
  lang=EN-US style='font-size:5.5pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;color:black;mso-font-kerning:0pt'>
  main(String[] </span><span lang=EN-US style='font-size:5.5pt;mso-bidi-font-size:
  14.0pt;font-family:Consolas;mso-bidi-font-family:Consolas;color:#6A3E3E;
  mso-font-kerning:0pt'>args</span><span lang=EN-US style='font-size:5.5pt;
  mso-bidi-font-size:14.0pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  color:black;mso-font-kerning:0pt'>) </span><b><span lang=EN-US
  style='font-size:5.5pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;color:#7F0055;mso-font-kerning:0pt'>throws</span></b><span
  lang=EN-US style='font-size:5.5pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;color:black;mso-font-kerning:0pt'> IOException,
  InterruptedException, KeeperException {</span><span lang=EN-US
  style='font-size:5.5pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;mso-font-kerning:0pt'><o:p></o:p></span></p>
  <p class=MsoNormal style='line-height:normal;mso-pagination:none;mso-layout-grid-align:
  none;text-autospace:none'><span lang=EN-US style='font-size:5.5pt;mso-bidi-font-size:
  14.0pt;font-family:Consolas;mso-bidi-font-family:Consolas;color:black;
  mso-font-kerning:0pt'><span style='mso-tab-count:2'>              </span></span><b><span
  lang=EN-US style='font-size:5.5pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;color:#7F0055;mso-font-kerning:0pt'>new</span></b><span
  lang=EN-US style='font-size:5.5pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;color:black;mso-font-kerning:0pt'>
  ZkTankMaster().test();</span><span lang=EN-US style='font-size:5.5pt;
  mso-bidi-font-size:14.0pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  mso-font-kerning:0pt'><o:p></o:p></span></p>
  <p class=MsoNormal style='line-height:normal;mso-pagination:none;mso-layout-grid-align:
  none;text-autospace:none'><span lang=EN-US style='font-size:5.5pt;mso-bidi-font-size:
  14.0pt;font-family:Consolas;mso-bidi-font-family:Consolas;color:black;
  mso-font-kerning:0pt'><span style='mso-tab-count:2'>              </span></span><span
  lang=EN-US style='font-size:5.5pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;mso-font-kerning:0pt'><o:p></o:p></span></p>
  <p class=MsoNormal style='line-height:normal;mso-pagination:none;mso-layout-grid-align:
  none;text-autospace:none'><span lang=EN-US style='font-size:5.5pt;mso-bidi-font-size:
  14.0pt;font-family:Consolas;mso-bidi-font-family:Consolas;color:black;
  mso-font-kerning:0pt'><span style='mso-tab-count:1'>       </span>}</span><span
  lang=EN-US style='font-size:5.5pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;mso-font-kerning:0pt'><o:p></o:p></span></p>
  <p class=MsoNormal style='line-height:normal;mso-pagination:none;mso-layout-grid-align:
  none;text-autospace:none'><span lang=EN-US style='font-size:5.5pt;mso-bidi-font-size:
  14.0pt;font-family:Consolas;mso-bidi-font-family:Consolas;color:black;
  mso-font-kerning:0pt'><span style='mso-tab-count:1'>       </span></span><span
  lang=EN-US style='font-size:5.5pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;mso-font-kerning:0pt'><o:p></o:p></span></p>
  <p class=MsoNormal style='line-height:normal;mso-pagination:none;mso-layout-grid-align:
  none;text-autospace:none'><span lang=EN-US style='font-size:5.5pt;mso-bidi-font-size:
  14.0pt;font-family:Consolas;mso-bidi-font-family:Consolas;color:black;
  mso-font-kerning:0pt'><span style='mso-tab-count:1'>       </span></span><b><span
  lang=EN-US style='font-size:5.5pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;color:#7F0055;mso-font-kerning:0pt'>public</span></b><span
  lang=EN-US style='font-size:5.5pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;color:black;mso-font-kerning:0pt'> </span><b><span
  lang=EN-US style='font-size:5.5pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;color:#7F0055;mso-font-kerning:0pt'>void</span></b><span
  lang=EN-US style='font-size:5.5pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;color:black;mso-font-kerning:0pt'> test() </span><b><span
  lang=EN-US style='font-size:5.5pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;color:#7F0055;mso-font-kerning:0pt'>throws</span></b><span
  lang=EN-US style='font-size:5.5pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;color:black;mso-font-kerning:0pt'> IOException,
  InterruptedException, KeeperException {</span><span lang=EN-US
  style='font-size:5.5pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;mso-font-kerning:0pt'><o:p></o:p></span></p>
  <p class=MsoNormal style='line-height:normal;mso-pagination:none;mso-layout-grid-align:
  none;text-autospace:none'><span lang=EN-US style='font-size:5.5pt;mso-bidi-font-size:
  14.0pt;font-family:Consolas;mso-bidi-font-family:Consolas;color:black;
  mso-font-kerning:0pt'><span style='mso-tab-count:2'>              </span></span><span
  lang=EN-US style='font-size:5.5pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;color:#3F7F5F;mso-font-kerning:0pt'>// </span><span
  style='font-size:5.5pt;mso-bidi-font-size:14.0pt;font-family:宋体;mso-ascii-font-family:
  Consolas;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:Consolas;
  mso-bidi-font-family:Consolas;color:#3F7F5F;mso-font-kerning:0pt'>这是异步连接。</span><span
  lang=EN-US style='font-size:5.5pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;color:#3F7F5F;mso-font-kerning:0pt'>5000</span><span
  style='font-size:5.5pt;mso-bidi-font-size:14.0pt;font-family:宋体;mso-ascii-font-family:
  Consolas;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:Consolas;
  mso-bidi-font-family:Consolas;color:#3F7F5F;mso-font-kerning:0pt'>是超时时间；</span><span
  lang=EN-US style='font-size:5.5pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;color:#3F7F5F;mso-font-kerning:0pt'>this</span><span
  style='font-size:5.5pt;mso-bidi-font-size:14.0pt;font-family:宋体;mso-ascii-font-family:
  Consolas;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:Consolas;
  mso-bidi-font-family:Consolas;color:#3F7F5F;mso-font-kerning:0pt'>是传递一个监听器，监听器要实现</span><span
  lang=EN-US style='font-size:5.5pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;color:#3F7F5F;mso-font-kerning:0pt'>Watcher</span><span
  style='font-size:5.5pt;mso-bidi-font-size:14.0pt;font-family:宋体;mso-ascii-font-family:
  Consolas;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:Consolas;
  mso-bidi-font-family:Consolas;color:#3F7F5F;mso-font-kerning:0pt'>接口，这是观察者，由于是异步连接，什么时候连上要通过观察者来看，</span><span
  lang=EN-US style='font-size:5.5pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;mso-font-kerning:0pt'><o:p></o:p></span></p>
  <p class=MsoNormal style='line-height:normal;mso-pagination:none;mso-layout-grid-align:
  none;text-autospace:none'><span lang=EN-US style='font-size:5.5pt;mso-bidi-font-size:
  14.0pt;font-family:Consolas;mso-bidi-font-family:Consolas;color:black;
  mso-font-kerning:0pt'><span style='mso-tab-count:2'>              </span>ZooKeeper
  </span><span lang=EN-US style='font-size:5.5pt;mso-bidi-font-size:14.0pt;
  font-family:Consolas;mso-bidi-font-family:Consolas;color:#6A3E3E;mso-font-kerning:
  0pt'>zk</span><span lang=EN-US style='font-size:5.5pt;mso-bidi-font-size:
  14.0pt;font-family:Consolas;mso-bidi-font-family:Consolas;color:black;
  mso-font-kerning:0pt'> = </span><b><span lang=EN-US style='font-size:5.5pt;
  mso-bidi-font-size:14.0pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  color:#7F0055;mso-font-kerning:0pt'>new</span></b><span lang=EN-US
  style='font-size:5.5pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;color:black;mso-font-kerning:0pt'> ZooKeeper(</span><b><i><span
  lang=EN-US style='font-size:5.5pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;color:#0000C0;mso-font-kerning:0pt'>CONNECTION</span></i></b><span
  lang=EN-US style='font-size:5.5pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;color:black;mso-font-kerning:0pt'>, 5000, </span><b><span
  lang=EN-US style='font-size:5.5pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;color:#7F0055;mso-font-kerning:0pt'>new</span></b><span
  lang=EN-US style='font-size:5.5pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;color:black;mso-font-kerning:0pt'>
  MasterWatch());</span><span lang=EN-US style='font-size:5.5pt;mso-bidi-font-size:
  14.0pt;font-family:Consolas;mso-bidi-font-family:Consolas;mso-font-kerning:
  0pt'><o:p></o:p></span></p>
  <p class=MsoNormal style='line-height:normal;mso-pagination:none;mso-layout-grid-align:
  none;text-autospace:none'><span lang=EN-US style='font-size:5.5pt;mso-bidi-font-size:
  14.0pt;font-family:Consolas;mso-bidi-font-family:Consolas;color:black;
  mso-font-kerning:0pt'><span style='mso-tab-count:2'>              </span>System.</span><b><i><span
  lang=EN-US style='font-size:5.5pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;color:#0000C0;mso-font-kerning:0pt'>out</span></i></b><span
  lang=EN-US style='font-size:5.5pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;color:black;mso-font-kerning:0pt'>.println(</span><span
  lang=EN-US style='font-size:5.5pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;color:#2A00FF;mso-font-kerning:0pt'>&quot;</span><span
  style='font-size:5.5pt;mso-bidi-font-size:14.0pt;font-family:宋体;mso-ascii-font-family:
  Consolas;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:Consolas;
  mso-bidi-font-family:Consolas;color:#2A00FF;mso-font-kerning:0pt'>连接状态</span><span
  lang=EN-US style='font-size:5.5pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;color:#2A00FF;mso-font-kerning:0pt'>=&quot;</span><span
  lang=EN-US style='font-size:5.5pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;color:black;mso-font-kerning:0pt'> + </span><span
  lang=EN-US style='font-size:5.5pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;color:#6A3E3E;mso-font-kerning:0pt'>zk</span><span
  lang=EN-US style='font-size:5.5pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;color:black;mso-font-kerning:0pt'>.getState());</span><span
  lang=EN-US style='font-size:5.5pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;mso-font-kerning:0pt'><o:p></o:p></span></p>
  <p class=MsoNormal style='line-height:normal;mso-pagination:none;mso-layout-grid-align:
  none;text-autospace:none'><span lang=EN-US style='font-size:5.5pt;mso-bidi-font-size:
  14.0pt;font-family:Consolas;mso-bidi-font-family:Consolas;color:black;
  mso-font-kerning:0pt'><span style='mso-tab-count:2'>              </span></span><span
  lang=EN-US style='font-size:5.5pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;mso-font-kerning:0pt'><o:p></o:p></span></p>
  <p class=MsoNormal style='line-height:normal;mso-pagination:none;mso-layout-grid-align:
  none;text-autospace:none'><span lang=EN-US style='font-size:5.5pt;mso-bidi-font-size:
  14.0pt;font-family:Consolas;mso-bidi-font-family:Consolas;color:black;
  mso-font-kerning:0pt'><span style='mso-tab-count:2'>              </span></span><span
  lang=EN-US style='font-size:5.5pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;color:#3F7F5F;mso-font-kerning:0pt'>// </span><span
  style='font-size:5.5pt;mso-bidi-font-size:14.0pt;font-family:宋体;mso-ascii-font-family:
  Consolas;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:Consolas;
  mso-bidi-font-family:Consolas;color:#3F7F5F;mso-font-kerning:0pt'>在这里等待</span><span
  lang=EN-US style='font-size:5.5pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;color:#3F7F5F;mso-font-kerning:0pt'>connected</span><span
  style='font-size:5.5pt;mso-bidi-font-size:14.0pt;font-family:宋体;mso-ascii-font-family:
  Consolas;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:Consolas;
  mso-bidi-font-family:Consolas;color:#3F7F5F;mso-font-kerning:0pt'>门闩开，门闩开，代码才会往下执行。</span><span
  lang=EN-US style='font-size:5.5pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;mso-font-kerning:0pt'><o:p></o:p></span></p>
  <p class=MsoNormal style='line-height:normal;mso-pagination:none;mso-layout-grid-align:
  none;text-autospace:none'><span lang=EN-US style='font-size:5.5pt;mso-bidi-font-size:
  14.0pt;font-family:Consolas;mso-bidi-font-family:Consolas;color:black;
  mso-font-kerning:0pt'><span style='mso-tab-count:2'>              </span></span><i><span
  lang=EN-US style='font-size:5.5pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;color:#0000C0;mso-font-kerning:0pt'>connected</span></i><span
  lang=EN-US style='font-size:5.5pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;color:black;mso-font-kerning:0pt'>.await();</span><span
  lang=EN-US style='font-size:5.5pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;mso-font-kerning:0pt'><o:p></o:p></span></p>
  <p class=MsoNormal style='line-height:normal;mso-pagination:none;mso-layout-grid-align:
  none;text-autospace:none'><span lang=EN-US style='font-size:5.5pt;mso-bidi-font-size:
  14.0pt;font-family:Consolas;mso-bidi-font-family:Consolas;color:black;
  mso-font-kerning:0pt'><span style='mso-tab-count:2'>              </span></span><span
  lang=EN-US style='font-size:5.5pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;mso-font-kerning:0pt'><o:p></o:p></span></p>
  <p class=MsoNormal style='line-height:normal;mso-pagination:none;mso-layout-grid-align:
  none;text-autospace:none'><span lang=EN-US style='font-size:5.5pt;mso-bidi-font-size:
  14.0pt;font-family:Consolas;mso-bidi-font-family:Consolas;color:black;
  mso-font-kerning:0pt'><span style='mso-tab-count:2'>              </span></span><span
  lang=EN-US style='font-size:5.5pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;color:#3F7F5F;mso-font-kerning:0pt'>// </span><span
  style='font-size:5.5pt;mso-bidi-font-size:14.0pt;font-family:宋体;mso-ascii-font-family:
  Consolas;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:Consolas;
  mso-bidi-font-family:Consolas;color:#3F7F5F;mso-font-kerning:0pt'>如果存在这个节点。</span><span
  lang=EN-US style='font-size:5.5pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;color:#3F7F5F;mso-font-kerning:0pt'>new
  MasterWatch()</span><span style='font-size:5.5pt;mso-bidi-font-size:14.0pt;
  font-family:宋体;mso-ascii-font-family:Consolas;mso-fareast-theme-font:minor-fareast;
  mso-hansi-font-family:Consolas;mso-bidi-font-family:Consolas;color:#3F7F5F;
  mso-font-kerning:0pt'>是在监听这个节点的监听器</span><span lang=EN-US style='font-size:
  5.5pt;mso-bidi-font-size:14.0pt;font-family:Consolas;mso-bidi-font-family:
  Consolas;mso-font-kerning:0pt'><o:p></o:p></span></p>
  <p class=MsoNormal style='line-height:normal;mso-pagination:none;mso-layout-grid-align:
  none;text-autospace:none'><span lang=EN-US style='font-size:5.5pt;mso-bidi-font-size:
  14.0pt;font-family:Consolas;mso-bidi-font-family:Consolas;color:black;
  mso-font-kerning:0pt'><span style='mso-tab-count:2'>              </span></span><b><span
  lang=EN-US style='font-size:5.5pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;color:#7F0055;mso-font-kerning:0pt'>if</span></b><span
  lang=EN-US style='font-size:5.5pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;color:black;mso-font-kerning:0pt'>(</span><span
  lang=EN-US style='font-size:5.5pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;color:#6A3E3E;mso-font-kerning:0pt'>zk</span><span
  lang=EN-US style='font-size:5.5pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;color:black;mso-font-kerning:0pt'>.exists(</span><span
  lang=EN-US style='font-size:5.5pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;color:#2A00FF;mso-font-kerning:0pt'>&quot;/tank/master&quot;</span><span
  lang=EN-US style='font-size:5.5pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;color:black;mso-font-kerning:0pt'>, </span><b><span
  lang=EN-US style='font-size:5.5pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;color:#7F0055;mso-font-kerning:0pt'>new</span></b><span
  lang=EN-US style='font-size:5.5pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;color:black;mso-font-kerning:0pt'>
  MasterWatch()) != </span><b><span lang=EN-US style='font-size:5.5pt;
  mso-bidi-font-size:14.0pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  color:#7F0055;mso-font-kerning:0pt'>null</span></b><span lang=EN-US
  style='font-size:5.5pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;color:black;mso-font-kerning:0pt'>) {</span><span
  lang=EN-US style='font-size:5.5pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;mso-font-kerning:0pt'><o:p></o:p></span></p>
  <p class=MsoNormal style='line-height:normal;mso-pagination:none;mso-layout-grid-align:
  none;text-autospace:none'><span lang=EN-US style='font-size:5.5pt;mso-bidi-font-size:
  14.0pt;font-family:Consolas;mso-bidi-font-family:Consolas;color:black;
  mso-font-kerning:0pt'><span style='mso-tab-count:3'>                     </span></span><span
  lang=EN-US style='font-size:5.5pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;color:#3F7F5F;mso-font-kerning:0pt'>// &gt;&gt;
  </span><span style='font-size:5.5pt;mso-bidi-font-size:14.0pt;font-family:
  宋体;mso-ascii-font-family:Consolas;mso-fareast-theme-font:minor-fareast;
  mso-hansi-font-family:Consolas;mso-bidi-font-family:Consolas;color:#3F7F5F;
  mso-font-kerning:0pt'>来到这里就是备用机</span><span lang=EN-US style='font-size:5.5pt;
  mso-bidi-font-size:14.0pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  mso-font-kerning:0pt'><o:p></o:p></span></p>
  <p class=MsoNormal style='line-height:normal;mso-pagination:none;mso-layout-grid-align:
  none;text-autospace:none'><span lang=EN-US style='font-size:5.5pt;mso-bidi-font-size:
  14.0pt;font-family:Consolas;mso-bidi-font-family:Consolas;color:black;
  mso-font-kerning:0pt'><span style='mso-tab-count:3'>                     </span>System.</span><b><i><span
  lang=EN-US style='font-size:5.5pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;color:#0000C0;mso-font-kerning:0pt'>out</span></i></b><span
  lang=EN-US style='font-size:5.5pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;color:black;mso-font-kerning:0pt'>.println(</span><span
  lang=EN-US style='font-size:5.5pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;color:#2A00FF;mso-font-kerning:0pt'>&quot;</span><span
  style='font-size:5.5pt;mso-bidi-font-size:14.0pt;font-family:宋体;mso-ascii-font-family:
  Consolas;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:Consolas;
  mso-bidi-font-family:Consolas;color:#2A00FF;mso-font-kerning:0pt'>备用机监听主用机的节点</span><span
  lang=EN-US style='font-size:5.5pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;color:#2A00FF;mso-font-kerning:0pt'>&quot;</span><span
  lang=EN-US style='font-size:5.5pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;color:black;mso-font-kerning:0pt'>);</span><span
  lang=EN-US style='font-size:5.5pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;mso-font-kerning:0pt'><o:p></o:p></span></p>
  <p class=MsoNormal style='line-height:normal;mso-pagination:none;mso-layout-grid-align:
  none;text-autospace:none'><span lang=EN-US style='font-size:5.5pt;mso-bidi-font-size:
  14.0pt;font-family:Consolas;mso-bidi-font-family:Consolas;color:black;
  mso-font-kerning:0pt'><span style='mso-tab-count:3'>                     </span></span><span
  lang=EN-US style='font-size:5.5pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;color:#3F7F5F;mso-font-kerning:0pt'>// </span><span
  style='font-size:5.5pt;mso-bidi-font-size:14.0pt;font-family:宋体;mso-ascii-font-family:
  Consolas;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:Consolas;
  mso-bidi-font-family:Consolas;color:#3F7F5F;mso-font-kerning:0pt'>停在这里，等待</span><span
  lang=EN-US style='font-size:5.5pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;color:#3F7F5F;mso-font-kerning:0pt'>disconnected</span><span
  style='font-size:5.5pt;mso-bidi-font-size:14.0pt;font-family:宋体;mso-ascii-font-family:
  Consolas;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:Consolas;
  mso-bidi-font-family:Consolas;color:#3F7F5F;mso-font-kerning:0pt'>门闩。主用机宕机之后，备用机接收到断开的事件之后，触发</span><span
  lang=EN-US style='font-size:5.5pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;color:#3F7F5F;mso-font-kerning:0pt'>disconnected</span><span
  style='font-size:5.5pt;mso-bidi-font-size:14.0pt;font-family:宋体;mso-ascii-font-family:
  Consolas;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:Consolas;
  mso-bidi-font-family:Consolas;color:#3F7F5F;mso-font-kerning:0pt'>门闩打开</span><span
  lang=EN-US style='font-size:5.5pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;mso-font-kerning:0pt'><o:p></o:p></span></p>
  <p class=MsoNormal style='line-height:normal;mso-pagination:none;mso-layout-grid-align:
  none;text-autospace:none'><span lang=EN-US style='font-size:5.5pt;mso-bidi-font-size:
  14.0pt;font-family:Consolas;mso-bidi-font-family:Consolas;color:black;
  mso-font-kerning:0pt'><span style='mso-tab-count:3'>                     </span></span><i><span
  lang=EN-US style='font-size:5.5pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;color:#0000C0;mso-font-kerning:0pt'>disconnected</span></i><span
  lang=EN-US style='font-size:5.5pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;color:black;mso-font-kerning:0pt'>.await();</span><span
  lang=EN-US style='font-size:5.5pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;mso-font-kerning:0pt'><o:p></o:p></span></p>
  <p class=MsoNormal style='line-height:normal;mso-pagination:none;mso-layout-grid-align:
  none;text-autospace:none'><span lang=EN-US style='font-size:5.5pt;mso-bidi-font-size:
  14.0pt;font-family:Consolas;mso-bidi-font-family:Consolas;color:black;
  mso-font-kerning:0pt'><span style='mso-tab-count:3'>                     </span></span><span
  lang=EN-US style='font-size:5.5pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;mso-font-kerning:0pt'><o:p></o:p></span></p>
  <p class=MsoNormal style='line-height:normal;mso-pagination:none;mso-layout-grid-align:
  none;text-autospace:none'><span lang=EN-US style='font-size:5.5pt;mso-bidi-font-size:
  14.0pt;font-family:Consolas;mso-bidi-font-family:Consolas;color:black;
  mso-font-kerning:0pt'><span style='mso-tab-count:3'>                     </span></span><span
  lang=EN-US style='font-size:5.5pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;color:#6A3E3E;mso-font-kerning:0pt'>zk</span><span
  lang=EN-US style='font-size:5.5pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;color:black;mso-font-kerning:0pt'>.create(</span><span
  lang=EN-US style='font-size:5.5pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;color:#2A00FF;mso-font-kerning:0pt'>&quot;/tank/master&quot;</span><span
  lang=EN-US style='font-size:5.5pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;color:black;mso-font-kerning:0pt'>, </span><b><i><span
  lang=EN-US style='font-size:5.5pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;color:#0000C0;mso-font-kerning:0pt'>IP_PORT</span></i></b><span
  lang=EN-US style='font-size:5.5pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;color:black;mso-font-kerning:0pt'>.get(1).getBytes(),
  Ids.</span><b><i><span lang=EN-US style='font-size:5.5pt;mso-bidi-font-size:
  14.0pt;font-family:Consolas;mso-bidi-font-family:Consolas;color:#0000C0;
  mso-font-kerning:0pt'>OPEN_ACL_UNSAFE</span></i></b><span lang=EN-US
  style='font-size:5.5pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;color:black;mso-font-kerning:0pt'>, CreateMode.</span><b><i><span
  lang=EN-US style='font-size:5.5pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;color:#0000C0;mso-font-kerning:0pt'>EPHEMERAL</span></i></b><span
  lang=EN-US style='font-size:5.5pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;color:black;mso-font-kerning:0pt'>);</span><span
  lang=EN-US style='font-size:5.5pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;mso-font-kerning:0pt'><o:p></o:p></span></p>
  <p class=MsoNormal style='line-height:normal;mso-pagination:none;mso-layout-grid-align:
  none;text-autospace:none'><span lang=EN-US style='font-size:5.5pt;mso-bidi-font-size:
  14.0pt;font-family:Consolas;mso-bidi-font-family:Consolas;color:black;
  mso-font-kerning:0pt'><span style='mso-tab-count:3'>                     </span>System.</span><b><i><span
  lang=EN-US style='font-size:5.5pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;color:#0000C0;mso-font-kerning:0pt'>out</span></i></b><span
  lang=EN-US style='font-size:5.5pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;color:black;mso-font-kerning:0pt'>.println(</span><span
  lang=EN-US style='font-size:5.5pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;color:#2A00FF;mso-font-kerning:0pt'>&quot;</span><span
  style='font-size:5.5pt;mso-bidi-font-size:14.0pt;font-family:宋体;mso-ascii-font-family:
  Consolas;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:Consolas;
  mso-bidi-font-family:Consolas;color:#2A00FF;mso-font-kerning:0pt'>备用机替代主用机，并且创建节点</span><span
  lang=EN-US style='font-size:5.5pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;color:#2A00FF;mso-font-kerning:0pt'>&quot;</span><span
  lang=EN-US style='font-size:5.5pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;color:black;mso-font-kerning:0pt'>);</span><span
  lang=EN-US style='font-size:5.5pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;mso-font-kerning:0pt'><o:p></o:p></span></p>
  <p class=MsoNormal style='line-height:normal;mso-pagination:none;mso-layout-grid-align:
  none;text-autospace:none'><span lang=EN-US style='font-size:5.5pt;mso-bidi-font-size:
  14.0pt;font-family:Consolas;mso-bidi-font-family:Consolas;color:black;
  mso-font-kerning:0pt'><span style='mso-tab-count:2'>              </span>} </span><b><span
  lang=EN-US style='font-size:5.5pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;color:#7F0055;mso-font-kerning:0pt'>else</span></b><span
  lang=EN-US style='font-size:5.5pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;color:black;mso-font-kerning:0pt'> {</span><span
  lang=EN-US style='font-size:5.5pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;mso-font-kerning:0pt'><o:p></o:p></span></p>
  <p class=MsoNormal style='line-height:normal;mso-pagination:none;mso-layout-grid-align:
  none;text-autospace:none'><span lang=EN-US style='font-size:5.5pt;mso-bidi-font-size:
  14.0pt;font-family:Consolas;mso-bidi-font-family:Consolas;color:black;
  mso-font-kerning:0pt'><span style='mso-tab-count:3'>                     </span></span><span
  lang=EN-US style='font-size:5.5pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;color:#3F7F5F;mso-font-kerning:0pt'>// &gt;&gt;
  </span><span style='font-size:5.5pt;mso-bidi-font-size:14.0pt;font-family:
  宋体;mso-ascii-font-family:Consolas;mso-fareast-theme-font:minor-fareast;
  mso-hansi-font-family:Consolas;mso-bidi-font-family:Consolas;color:#3F7F5F;
  mso-font-kerning:0pt'>来到这里就是主用机。</span><span lang=EN-US style='font-size:
  5.5pt;mso-bidi-font-size:14.0pt;font-family:Consolas;mso-bidi-font-family:
  Consolas;mso-font-kerning:0pt'><o:p></o:p></span></p>
  <p class=MsoNormal style='line-height:normal;mso-pagination:none;mso-layout-grid-align:
  none;text-autospace:none'><span lang=EN-US style='font-size:5.5pt;mso-bidi-font-size:
  14.0pt;font-family:Consolas;mso-bidi-font-family:Consolas;color:black;
  mso-font-kerning:0pt'><span style='mso-tab-count:3'>                     </span>System.</span><b><i><span
  lang=EN-US style='font-size:5.5pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;color:#0000C0;mso-font-kerning:0pt'>out</span></i></b><span
  lang=EN-US style='font-size:5.5pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;color:black;mso-font-kerning:0pt'>.println(</span><span
  lang=EN-US style='font-size:5.5pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;color:#2A00FF;mso-font-kerning:0pt'>&quot;</span><span
  style='font-size:5.5pt;mso-bidi-font-size:14.0pt;font-family:宋体;mso-ascii-font-family:
  Consolas;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:Consolas;
  mso-bidi-font-family:Consolas;color:#2A00FF;mso-font-kerning:0pt'>主用机已经创建节点</span><span
  lang=EN-US style='font-size:5.5pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;color:#2A00FF;mso-font-kerning:0pt'>&quot;</span><span
  lang=EN-US style='font-size:5.5pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;color:black;mso-font-kerning:0pt'>);</span><span
  lang=EN-US style='font-size:5.5pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;mso-font-kerning:0pt'><o:p></o:p></span></p>
  <p class=MsoNormal style='line-height:normal;mso-pagination:none;mso-layout-grid-align:
  none;text-autospace:none'><span lang=EN-US style='font-size:5.5pt;mso-bidi-font-size:
  14.0pt;font-family:Consolas;mso-bidi-font-family:Consolas;color:black;
  mso-font-kerning:0pt'><span style='mso-tab-count:3'>                     </span></span><span
  lang=EN-US style='font-size:5.5pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;color:#3F7F5F;mso-font-kerning:0pt'>// </span><span
  style='font-size:5.5pt;mso-bidi-font-size:14.0pt;font-family:宋体;mso-ascii-font-family:
  Consolas;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:Consolas;
  mso-bidi-font-family:Consolas;color:#3F7F5F;mso-font-kerning:0pt'>创建节点。</span><span
  lang=EN-US style='font-size:5.5pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;color:#3F7F5F;mso-font-kerning:0pt'>xxx.getBytes()</span><span
  style='font-size:5.5pt;mso-bidi-font-size:14.0pt;font-family:宋体;mso-ascii-font-family:
  Consolas;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:Consolas;
  mso-bidi-font-family:Consolas;color:#3F7F5F;mso-font-kerning:0pt'>是节点的数据；</span><span
  lang=EN-US style='font-size:5.5pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;color:#3F7F5F;mso-font-kerning:0pt'>Ids.OPEN_ACL_UNSAFE</span><span
  style='font-size:5.5pt;mso-bidi-font-size:14.0pt;font-family:宋体;mso-ascii-font-family:
  Consolas;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:Consolas;
  mso-bidi-font-family:Consolas;color:#3F7F5F;mso-font-kerning:0pt'>表示不做权限检查；</span><span
  lang=EN-US style='font-size:5.5pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;color:#3F7F5F;mso-font-kerning:0pt'>
  CreateMode.EPHEMERAL</span><span style='font-size:5.5pt;mso-bidi-font-size:
  14.0pt;font-family:宋体;mso-ascii-font-family:Consolas;mso-fareast-theme-font:
  minor-fareast;mso-hansi-font-family:Consolas;mso-bidi-font-family:Consolas;
  color:#3F7F5F;mso-font-kerning:0pt'>是临时节点（主备切换用这个），</span><span lang=EN-US
  style='font-size:5.5pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;color:#3F7F5F;mso-font-kerning:0pt'>.PERSISTENT</span><span
  style='font-size:5.5pt;mso-bidi-font-size:14.0pt;font-family:宋体;mso-ascii-font-family:
  Consolas;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:Consolas;
  mso-bidi-font-family:Consolas;color:#3F7F5F;mso-font-kerning:0pt'>是永久节点。</span><span
  lang=EN-US style='font-size:5.5pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;mso-font-kerning:0pt'><o:p></o:p></span></p>
  <p class=MsoNormal style='line-height:normal;mso-pagination:none;mso-layout-grid-align:
  none;text-autospace:none'><span lang=EN-US style='font-size:5.5pt;mso-bidi-font-size:
  14.0pt;font-family:Consolas;mso-bidi-font-family:Consolas;color:black;
  mso-font-kerning:0pt'><span style='mso-tab-count:3'>                     </span></span><span
  lang=EN-US style='font-size:5.5pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;color:#6A3E3E;mso-font-kerning:0pt'>zk</span><span
  lang=EN-US style='font-size:5.5pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;color:black;mso-font-kerning:0pt'>.create(</span><span
  lang=EN-US style='font-size:5.5pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;color:#2A00FF;mso-font-kerning:0pt'>&quot;/tank/master&quot;</span><span
  lang=EN-US style='font-size:5.5pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;color:black;mso-font-kerning:0pt'>, </span><b><i><span
  lang=EN-US style='font-size:5.5pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;color:#0000C0;mso-font-kerning:0pt'>IP_PORT</span></i></b><span
  lang=EN-US style='font-size:5.5pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;color:black;mso-font-kerning:0pt'>.get(0).getBytes(),
  Ids.</span><b><i><span lang=EN-US style='font-size:5.5pt;mso-bidi-font-size:
  14.0pt;font-family:Consolas;mso-bidi-font-family:Consolas;color:#0000C0;
  mso-font-kerning:0pt'>OPEN_ACL_UNSAFE</span></i></b><span lang=EN-US
  style='font-size:5.5pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;color:black;mso-font-kerning:0pt'>, CreateMode.</span><b><i><span
  lang=EN-US style='font-size:5.5pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;color:#0000C0;mso-font-kerning:0pt'>EPHEMERAL</span></i></b><span
  lang=EN-US style='font-size:5.5pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;color:black;mso-font-kerning:0pt'>);<span
  style='mso-spacerun:yes'>  </span></span><span lang=EN-US style='font-size:
  5.5pt;mso-bidi-font-size:14.0pt;font-family:Consolas;mso-bidi-font-family:
  Consolas;mso-font-kerning:0pt'><o:p></o:p></span></p>
  <p class=MsoNormal style='line-height:normal;mso-pagination:none;mso-layout-grid-align:
  none;text-autospace:none'><span lang=EN-US style='font-size:5.5pt;mso-bidi-font-size:
  14.0pt;font-family:Consolas;mso-bidi-font-family:Consolas;color:black;
  mso-font-kerning:0pt'><span style='mso-tab-count:2'>              </span>}</span><span
  lang=EN-US style='font-size:5.5pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;mso-font-kerning:0pt'><o:p></o:p></span></p>
  <p class=MsoNormal style='line-height:normal;mso-pagination:none;mso-layout-grid-align:
  none;text-autospace:none'><span lang=EN-US style='font-size:5.5pt;mso-bidi-font-size:
  14.0pt;font-family:Consolas;mso-bidi-font-family:Consolas;color:black;
  mso-font-kerning:0pt'><span style='mso-tab-count:2'>              </span></span><span
  lang=EN-US style='font-size:5.5pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;mso-font-kerning:0pt'><o:p></o:p></span></p>
  <p class=MsoNormal style='line-height:normal;mso-pagination:none;mso-layout-grid-align:
  none;text-autospace:none'><span lang=EN-US style='font-size:5.5pt;mso-bidi-font-size:
  14.0pt;font-family:Consolas;mso-bidi-font-family:Consolas;color:black;
  mso-font-kerning:0pt'><span style='mso-tab-count:2'>              </span></span><span
  lang=EN-US style='font-size:5.5pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;color:#3F7F5F;mso-font-kerning:0pt'>// </span><span
  style='font-size:5.5pt;mso-bidi-font-size:14.0pt;font-family:宋体;mso-ascii-font-family:
  Consolas;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:Consolas;
  mso-bidi-font-family:Consolas;color:#3F7F5F;mso-font-kerning:0pt'>睡很久，模拟服务器一直在运行</span><span
  lang=EN-US style='font-size:5.5pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;mso-font-kerning:0pt'><o:p></o:p></span></p>
  <p class=MsoNormal style='line-height:normal;mso-pagination:none;mso-layout-grid-align:
  none;text-autospace:none'><span lang=EN-US style='font-size:5.5pt;mso-bidi-font-size:
  14.0pt;font-family:Consolas;mso-bidi-font-family:Consolas;color:black;
  mso-font-kerning:0pt'><span style='mso-tab-count:2'>              </span>Thread.<i>sleep</i>(Integer.</span><b><i><span
  lang=EN-US style='font-size:5.5pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;color:#0000C0;mso-font-kerning:0pt'>MAX_VALUE</span></i></b><span
  lang=EN-US style='font-size:5.5pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;color:black;mso-font-kerning:0pt'>);</span><span
  lang=EN-US style='font-size:5.5pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;mso-font-kerning:0pt'><o:p></o:p></span></p>
  <p class=MsoNormal style='line-height:normal;mso-pagination:none;mso-layout-grid-align:
  none;text-autospace:none'><span lang=EN-US style='font-size:5.5pt;mso-bidi-font-size:
  14.0pt;font-family:Consolas;mso-bidi-font-family:Consolas;color:black;
  mso-font-kerning:0pt'><span style='mso-tab-count:1'>       </span>}</span><span
  lang=EN-US style='font-size:5.5pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;mso-font-kerning:0pt'><o:p></o:p></span></p>
  <p class=MsoNormal style='line-height:normal;mso-pagination:none;mso-layout-grid-align:
  none;text-autospace:none'><span lang=EN-US style='font-size:5.5pt;mso-bidi-font-size:
  14.0pt;font-family:Consolas;mso-bidi-font-family:Consolas;color:black;
  mso-font-kerning:0pt'><span style='mso-tab-count:1'>       </span></span><span
  lang=EN-US style='font-size:5.5pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;mso-font-kerning:0pt'><o:p></o:p></span></p>
  <p class=MsoNormal style='line-height:normal;mso-pagination:none;mso-layout-grid-align:
  none;text-autospace:none'><span lang=EN-US style='font-size:5.5pt;mso-bidi-font-size:
  14.0pt;font-family:Consolas;mso-bidi-font-family:Consolas;color:black;
  mso-font-kerning:0pt'><span style='mso-tab-count:1'>       </span></span><span
  lang=EN-US style='font-size:5.5pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;color:#3F7F5F;mso-font-kerning:0pt'>// Watcher</span><span
  style='font-size:5.5pt;mso-bidi-font-size:14.0pt;font-family:宋体;mso-ascii-font-family:
  Consolas;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:Consolas;
  mso-bidi-font-family:Consolas;color:#3F7F5F;mso-font-kerning:0pt'>是</span><u><span
  lang=EN-US style='font-size:5.5pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;color:#3F7F5F;mso-font-kerning:0pt'>zk</span></u><span
  style='font-size:5.5pt;mso-bidi-font-size:14.0pt;font-family:宋体;mso-ascii-font-family:
  Consolas;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:Consolas;
  mso-bidi-font-family:Consolas;color:#3F7F5F;mso-font-kerning:0pt'>的监听器，实现</span><span
  lang=EN-US style='font-size:5.5pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;color:#3F7F5F;mso-font-kerning:0pt'>process</span><span
  style='font-size:5.5pt;mso-bidi-font-size:14.0pt;font-family:宋体;mso-ascii-font-family:
  Consolas;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:Consolas;
  mso-bidi-font-family:Consolas;color:#3F7F5F;mso-font-kerning:0pt'>方法</span><span
  lang=EN-US style='font-size:5.5pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;mso-font-kerning:0pt'><o:p></o:p></span></p>
  <p class=MsoNormal style='line-height:normal;mso-pagination:none;mso-layout-grid-align:
  none;text-autospace:none'><span lang=EN-US style='font-size:5.5pt;mso-bidi-font-size:
  14.0pt;font-family:Consolas;mso-bidi-font-family:Consolas;color:black;
  mso-font-kerning:0pt'><span style='mso-tab-count:1'>       </span></span><b><span
  lang=EN-US style='font-size:5.5pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;color:#7F0055;mso-font-kerning:0pt'>class</span></b><span
  lang=EN-US style='font-size:5.5pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;color:black;mso-font-kerning:0pt'> MasterWatch </span><b><span
  lang=EN-US style='font-size:5.5pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;color:#7F0055;mso-font-kerning:0pt'>implements</span></b><span
  lang=EN-US style='font-size:5.5pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;color:black;mso-font-kerning:0pt'> Watcher {</span><span
  lang=EN-US style='font-size:5.5pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;mso-font-kerning:0pt'><o:p></o:p></span></p>
  <p class=MsoNormal style='line-height:normal;mso-pagination:none;mso-layout-grid-align:
  none;text-autospace:none'><span lang=EN-US style='font-size:5.5pt;mso-bidi-font-size:
  14.0pt;font-family:Consolas;mso-bidi-font-family:Consolas;color:black;
  mso-font-kerning:0pt'><span style='mso-tab-count:2'>              </span></span><span
  lang=EN-US style='font-size:5.5pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;color:#3F7F5F;mso-font-kerning:0pt'>// </span><span
  style='font-size:5.5pt;mso-bidi-font-size:14.0pt;font-family:宋体;mso-ascii-font-family:
  Consolas;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:Consolas;
  mso-bidi-font-family:Consolas;color:#3F7F5F;mso-font-kerning:0pt'>监听器会传递监听事件</span><span
  lang=EN-US style='font-size:5.5pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;mso-font-kerning:0pt'><o:p></o:p></span></p>
  <p class=MsoNormal style='line-height:normal;mso-pagination:none;mso-layout-grid-align:
  none;text-autospace:none'><span lang=EN-US style='font-size:5.5pt;mso-bidi-font-size:
  14.0pt;font-family:Consolas;mso-bidi-font-family:Consolas;color:black;
  mso-font-kerning:0pt'><span style='mso-tab-count:2'>              </span></span><b><span
  lang=EN-US style='font-size:5.5pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;color:#7F0055;mso-font-kerning:0pt'>public</span></b><span
  lang=EN-US style='font-size:5.5pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;color:black;mso-font-kerning:0pt'> </span><b><span
  lang=EN-US style='font-size:5.5pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;color:#7F0055;mso-font-kerning:0pt'>void</span></b><span
  lang=EN-US style='font-size:5.5pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;color:black;mso-font-kerning:0pt'>
  process(WatchedEvent </span><span lang=EN-US style='font-size:5.5pt;
  mso-bidi-font-size:14.0pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  color:#6A3E3E;mso-font-kerning:0pt'>event</span><span lang=EN-US
  style='font-size:5.5pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;color:black;mso-font-kerning:0pt'>) {</span><span
  lang=EN-US style='font-size:5.5pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;mso-font-kerning:0pt'><o:p></o:p></span></p>
  <p class=MsoNormal style='line-height:normal;mso-pagination:none;mso-layout-grid-align:
  none;text-autospace:none'><span lang=EN-US style='font-size:5.5pt;mso-bidi-font-size:
  14.0pt;font-family:Consolas;mso-bidi-font-family:Consolas;color:black;
  mso-font-kerning:0pt'><span style='mso-tab-count:3'>                     </span>System.</span><b><i><span
  lang=EN-US style='font-size:5.5pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;color:#0000C0;mso-font-kerning:0pt'>out</span></i></b><span
  lang=EN-US style='font-size:5.5pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;color:black;mso-font-kerning:0pt'>.println(</span><span
  lang=EN-US style='font-size:5.5pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;color:#2A00FF;mso-font-kerning:0pt'>&quot;</span><span
  style='font-size:5.5pt;mso-bidi-font-size:14.0pt;font-family:宋体;mso-ascii-font-family:
  Consolas;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:Consolas;
  mso-bidi-font-family:Consolas;color:#2A00FF;mso-font-kerning:0pt'>事件</span><span
  lang=EN-US style='font-size:5.5pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;color:#2A00FF;mso-font-kerning:0pt'>:&quot;</span><span
  lang=EN-US style='font-size:5.5pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;color:black;mso-font-kerning:0pt'> + </span><span
  lang=EN-US style='font-size:5.5pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;color:#6A3E3E;mso-font-kerning:0pt'>event</span><span
  lang=EN-US style='font-size:5.5pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;color:black;mso-font-kerning:0pt'>);</span><span
  lang=EN-US style='font-size:5.5pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;mso-font-kerning:0pt'><o:p></o:p></span></p>
  <p class=MsoNormal style='line-height:normal;mso-pagination:none;mso-layout-grid-align:
  none;text-autospace:none'><span lang=EN-US style='font-size:5.5pt;mso-bidi-font-size:
  14.0pt;font-family:Consolas;mso-bidi-font-family:Consolas;color:black;
  mso-font-kerning:0pt'><span style='mso-tab-count:3'>                     </span></span><span
  lang=EN-US style='font-size:5.5pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;color:#3F7F5F;mso-font-kerning:0pt'>// </span><span
  style='font-size:5.5pt;mso-bidi-font-size:14.0pt;font-family:宋体;mso-ascii-font-family:
  Consolas;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:Consolas;
  mso-bidi-font-family:Consolas;color:#3F7F5F;mso-font-kerning:0pt'>如果是已经连接的状态，就开门闩</span><span
  lang=EN-US style='font-size:5.5pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;mso-font-kerning:0pt'><o:p></o:p></span></p>
  <p class=MsoNormal style='line-height:normal;mso-pagination:none;mso-layout-grid-align:
  none;text-autospace:none'><span lang=EN-US style='font-size:5.5pt;mso-bidi-font-size:
  14.0pt;font-family:Consolas;mso-bidi-font-family:Consolas;color:black;
  mso-font-kerning:0pt'><span style='mso-tab-count:3'>                     </span></span><b><span
  lang=EN-US style='font-size:5.5pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;color:#7F0055;mso-font-kerning:0pt'>if</span></b><span
  lang=EN-US style='font-size:5.5pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;color:black;mso-font-kerning:0pt'>(</span><span
  lang=EN-US style='font-size:5.5pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;color:#6A3E3E;mso-font-kerning:0pt'>event</span><span
  lang=EN-US style='font-size:5.5pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;color:black;mso-font-kerning:0pt'>.getState()
  == KeeperState.</span><b><i><span lang=EN-US style='font-size:5.5pt;
  mso-bidi-font-size:14.0pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  color:#0000C0;mso-font-kerning:0pt'>SyncConnected</span></i></b><span
  lang=EN-US style='font-size:5.5pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;color:black;mso-font-kerning:0pt'>) {</span><span
  lang=EN-US style='font-size:5.5pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;mso-font-kerning:0pt'><o:p></o:p></span></p>
  <p class=MsoNormal style='line-height:normal;mso-pagination:none;mso-layout-grid-align:
  none;text-autospace:none'><span lang=EN-US style='font-size:5.5pt;mso-bidi-font-size:
  14.0pt;font-family:Consolas;mso-bidi-font-family:Consolas;color:black;
  mso-font-kerning:0pt'><span style='mso-tab-count:4'>                            </span></span><span
  lang=EN-US style='font-size:5.5pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;color:#3F7F5F;mso-font-kerning:0pt'>// </span><span
  style='font-size:5.5pt;mso-bidi-font-size:14.0pt;font-family:宋体;mso-ascii-font-family:
  Consolas;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:Consolas;
  mso-bidi-font-family:Consolas;color:#3F7F5F;mso-font-kerning:0pt'>门闩减少为</span><span
  lang=EN-US style='font-size:5.5pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;color:#3F7F5F;mso-font-kerning:0pt'>0</span><span
  style='font-size:5.5pt;mso-bidi-font-size:14.0pt;font-family:宋体;mso-ascii-font-family:
  Consolas;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:Consolas;
  mso-bidi-font-family:Consolas;color:#3F7F5F;mso-font-kerning:0pt'>，即开门闩</span><span
  lang=EN-US style='font-size:5.5pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;mso-font-kerning:0pt'><o:p></o:p></span></p>
  <p class=MsoNormal style='line-height:normal;mso-pagination:none;mso-layout-grid-align:
  none;text-autospace:none'><span lang=EN-US style='font-size:5.5pt;mso-bidi-font-size:
  14.0pt;font-family:Consolas;mso-bidi-font-family:Consolas;color:black;
  mso-font-kerning:0pt'><span style='mso-tab-count:4'>                            </span></span><i><span
  lang=EN-US style='font-size:5.5pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;color:#0000C0;mso-font-kerning:0pt'>connected</span></i><span
  lang=EN-US style='font-size:5.5pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;color:black;mso-font-kerning:0pt'>.countDown();</span><span
  lang=EN-US style='font-size:5.5pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;mso-font-kerning:0pt'><o:p></o:p></span></p>
  <p class=MsoNormal style='line-height:normal;mso-pagination:none;mso-layout-grid-align:
  none;text-autospace:none'><span lang=EN-US style='font-size:5.5pt;mso-bidi-font-size:
  14.0pt;font-family:Consolas;mso-bidi-font-family:Consolas;color:black;
  mso-font-kerning:0pt'><span style='mso-tab-count:4'>                            </span>System.</span><b><i><span
  lang=EN-US style='font-size:5.5pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;color:#0000C0;mso-font-kerning:0pt'>out</span></i></b><span
  lang=EN-US style='font-size:5.5pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;color:black;mso-font-kerning:0pt'>.println(</span><span
  lang=EN-US style='font-size:5.5pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;color:#2A00FF;mso-font-kerning:0pt'>&quot;</span><span
  style='font-size:5.5pt;mso-bidi-font-size:14.0pt;font-family:宋体;mso-ascii-font-family:
  Consolas;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:Consolas;
  mso-bidi-font-family:Consolas;color:#2A00FF;mso-font-kerning:0pt'>已经连上</span><span
  lang=EN-US style='font-size:5.5pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;color:#2A00FF;mso-font-kerning:0pt'>zk!&quot;</span><span
  lang=EN-US style='font-size:5.5pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;color:black;mso-font-kerning:0pt'>);</span><span
  lang=EN-US style='font-size:5.5pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;mso-font-kerning:0pt'><o:p></o:p></span></p>
  <p class=MsoNormal style='line-height:normal;mso-pagination:none;mso-layout-grid-align:
  none;text-autospace:none'><span lang=EN-US style='font-size:5.5pt;mso-bidi-font-size:
  14.0pt;font-family:Consolas;mso-bidi-font-family:Consolas;color:black;
  mso-font-kerning:0pt'><span style='mso-tab-count:3'>                     </span>}</span><span
  lang=EN-US style='font-size:5.5pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;mso-font-kerning:0pt'><o:p></o:p></span></p>
  <p class=MsoNormal style='line-height:normal;mso-pagination:none;mso-layout-grid-align:
  none;text-autospace:none'><span lang=EN-US style='font-size:5.5pt;mso-bidi-font-size:
  14.0pt;font-family:Consolas;mso-bidi-font-family:Consolas;color:black;
  mso-font-kerning:0pt'><span style='mso-tab-count:3'>                     </span></span><span
  lang=EN-US style='font-size:5.5pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;mso-font-kerning:0pt'><o:p></o:p></span></p>
  <p class=MsoNormal style='line-height:normal;mso-pagination:none;mso-layout-grid-align:
  none;text-autospace:none'><span lang=EN-US style='font-size:5.5pt;mso-bidi-font-size:
  14.0pt;font-family:Consolas;mso-bidi-font-family:Consolas;color:black;
  mso-font-kerning:0pt'><span style='mso-tab-count:3'>                     </span></span><span
  lang=EN-US style='font-size:5.5pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;color:#3F5FBF;mso-font-kerning:0pt'>/** </span><span
  style='font-size:5.5pt;mso-bidi-font-size:14.0pt;font-family:宋体;mso-ascii-font-family:
  Consolas;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:Consolas;
  mso-bidi-font-family:Consolas;color:#3F5FBF;mso-font-kerning:0pt'>注意，这里的两个</span><span
  lang=EN-US style='font-size:5.5pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;color:#3F5FBF;mso-font-kerning:0pt'>if</span><span
  style='font-size:5.5pt;mso-bidi-font-size:14.0pt;font-family:宋体;mso-ascii-font-family:
  Consolas;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:Consolas;
  mso-bidi-font-family:Consolas;color:#3F5FBF;mso-font-kerning:0pt'>要分开写，不能用</span><span
  lang=EN-US style='font-size:5.5pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;color:#3F5FBF;mso-font-kerning:0pt'>else if</span><span
  style='font-size:5.5pt;mso-bidi-font-size:14.0pt;font-family:宋体;mso-ascii-font-family:
  Consolas;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:Consolas;
  mso-bidi-font-family:Consolas;color:#3F5FBF;mso-font-kerning:0pt'>来写，打印事件信息得到</span><span
  style='font-size:5.5pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;color:#3F5FBF;mso-font-kerning:0pt'> </span><span
  lang=EN-US style='font-size:5.5pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;color:#7F7F9F;mso-font-kerning:0pt'>--</span><span
  lang=EN-US style='font-size:5.5pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;color:#3F5FBF;mso-font-kerning:0pt'> </span><span
  style='font-size:5.5pt;mso-bidi-font-size:14.0pt;font-family:宋体;mso-ascii-font-family:
  Consolas;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:Consolas;
  mso-bidi-font-family:Consolas;color:#3F5FBF;mso-font-kerning:0pt'>事件</span><span
  lang=EN-US style='font-size:5.5pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;color:#3F5FBF;mso-font-kerning:0pt'>:WatchedEvent
  state:SyncConnected type:NodeDeleted path:/tank/master</span><span
  lang=EN-US style='font-size:5.5pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;mso-font-kerning:0pt'><o:p></o:p></span></p>
  <p class=MsoNormal style='line-height:normal;mso-pagination:none;mso-layout-grid-align:
  none;text-autospace:none'><span lang=EN-US style='font-size:5.5pt;mso-bidi-font-size:
  14.0pt;font-family:Consolas;mso-bidi-font-family:Consolas;color:#3F5FBF;
  mso-font-kerning:0pt'><span style='mso-tab-count:3'>                     </span><span
  style='mso-spacerun:yes'> </span>* </span><span style='font-size:5.5pt;
  mso-bidi-font-size:14.0pt;font-family:宋体;mso-ascii-font-family:Consolas;
  mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:Consolas;
  mso-bidi-font-family:Consolas;color:#3F5FBF;mso-font-kerning:0pt'>从事件信息可以看到</span><span
  lang=EN-US style='font-size:5.5pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;color:#3F5FBF;mso-font-kerning:0pt'>state:SyncConnected</span><span
  style='font-size:5.5pt;mso-bidi-font-size:14.0pt;font-family:宋体;mso-ascii-font-family:
  Consolas;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:Consolas;
  mso-bidi-font-family:Consolas;color:#3F5FBF;mso-font-kerning:0pt'>和</span><span
  lang=EN-US style='font-size:5.5pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;color:#3F5FBF;mso-font-kerning:0pt'>type:NodeDeleted</span><span
  style='font-size:5.5pt;mso-bidi-font-size:14.0pt;font-family:宋体;mso-ascii-font-family:
  Consolas;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:Consolas;
  mso-bidi-font-family:Consolas;color:#3F5FBF;mso-font-kerning:0pt'>是同时存在的，所以上下两个</span><span
  lang=EN-US style='font-size:5.5pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;color:#3F5FBF;mso-font-kerning:0pt'>if</span><span
  style='font-size:5.5pt;mso-bidi-font-size:14.0pt;font-family:宋体;mso-ascii-font-family:
  Consolas;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:Consolas;
  mso-bidi-font-family:Consolas;color:#3F5FBF;mso-font-kerning:0pt'>语句不能合并。</span><span
  lang=EN-US style='font-size:5.5pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;mso-font-kerning:0pt'><o:p></o:p></span></p>
  <p class=MsoNormal style='line-height:normal;mso-pagination:none;mso-layout-grid-align:
  none;text-autospace:none'><span lang=EN-US style='font-size:5.5pt;mso-bidi-font-size:
  14.0pt;font-family:Consolas;mso-bidi-font-family:Consolas;color:#3F5FBF;
  mso-font-kerning:0pt'><span style='mso-tab-count:3'>                     </span><span
  style='mso-spacerun:yes'> </span>*/</span><span lang=EN-US style='font-size:
  5.5pt;mso-bidi-font-size:14.0pt;font-family:Consolas;mso-bidi-font-family:
  Consolas;mso-font-kerning:0pt'><o:p></o:p></span></p>
  <p class=MsoNormal style='line-height:normal;mso-pagination:none;mso-layout-grid-align:
  none;text-autospace:none'><span lang=EN-US style='font-size:5.5pt;mso-bidi-font-size:
  14.0pt;font-family:Consolas;mso-bidi-font-family:Consolas;color:black;
  mso-font-kerning:0pt'><span style='mso-tab-count:3'>                     </span></span><span
  lang=EN-US style='font-size:5.5pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;mso-font-kerning:0pt'><o:p></o:p></span></p>
  <p class=MsoNormal style='line-height:normal;mso-pagination:none;mso-layout-grid-align:
  none;text-autospace:none'><span lang=EN-US style='font-size:5.5pt;mso-bidi-font-size:
  14.0pt;font-family:Consolas;mso-bidi-font-family:Consolas;color:black;
  mso-font-kerning:0pt'><span style='mso-tab-count:3'>                     </span></span><span
  lang=EN-US style='font-size:5.5pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;mso-font-kerning:0pt'><o:p></o:p></span></p>
  <p class=MsoNormal style='line-height:normal;mso-pagination:none;mso-layout-grid-align:
  none;text-autospace:none'><span lang=EN-US style='font-size:5.5pt;mso-bidi-font-size:
  14.0pt;font-family:Consolas;mso-bidi-font-family:Consolas;color:black;
  mso-font-kerning:0pt'><span style='mso-tab-count:3'>                     </span></span><span
  lang=EN-US style='font-size:5.5pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;color:#3F7F5F;mso-font-kerning:0pt'>// </span><span
  style='font-size:5.5pt;mso-bidi-font-size:14.0pt;font-family:宋体;mso-ascii-font-family:
  Consolas;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:Consolas;
  mso-bidi-font-family:Consolas;color:#3F7F5F;mso-font-kerning:0pt'>如果是节点删除事件（连接事件与节点事件公用监听器），则触发</span><span
  lang=EN-US style='font-size:5.5pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;color:#3F7F5F;mso-font-kerning:0pt'>disconnected</span><span
  style='font-size:5.5pt;mso-bidi-font-size:14.0pt;font-family:宋体;mso-ascii-font-family:
  Consolas;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:Consolas;
  mso-bidi-font-family:Consolas;color:#3F7F5F;mso-font-kerning:0pt'>门闩打开。注意不是用</span><span
  lang=EN-US style='font-size:5.5pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;color:#3F7F5F;mso-font-kerning:0pt'>event.getState()
  == KeeperState.Disconnected</span><span lang=EN-US style='font-size:5.5pt;
  mso-bidi-font-size:14.0pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  mso-font-kerning:0pt'><o:p></o:p></span></p>
  <p class=MsoNormal style='line-height:normal;mso-pagination:none;mso-layout-grid-align:
  none;text-autospace:none'><span lang=EN-US style='font-size:5.5pt;mso-bidi-font-size:
  14.0pt;font-family:Consolas;mso-bidi-font-family:Consolas;color:black;
  mso-font-kerning:0pt'><span style='mso-tab-count:3'>                     </span></span><b><span
  lang=EN-US style='font-size:5.5pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;color:#7F0055;mso-font-kerning:0pt'>if</span></b><span
  lang=EN-US style='font-size:5.5pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;color:black;mso-font-kerning:0pt'>(</span><span
  lang=EN-US style='font-size:5.5pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;color:#6A3E3E;mso-font-kerning:0pt'>event</span><span
  lang=EN-US style='font-size:5.5pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;color:black;mso-font-kerning:0pt'>.getType() ==
  EventType.</span><b><i><span lang=EN-US style='font-size:5.5pt;mso-bidi-font-size:
  14.0pt;font-family:Consolas;mso-bidi-font-family:Consolas;color:#0000C0;
  mso-font-kerning:0pt'>NodeDeleted</span></i></b><span lang=EN-US
  style='font-size:5.5pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;color:black;mso-font-kerning:0pt'>) {</span><span
  lang=EN-US style='font-size:5.5pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;mso-font-kerning:0pt'><o:p></o:p></span></p>
  <p class=MsoNormal style='line-height:normal;mso-pagination:none;mso-layout-grid-align:
  none;text-autospace:none'><span lang=EN-US style='font-size:5.5pt;mso-bidi-font-size:
  14.0pt;font-family:Consolas;mso-bidi-font-family:Consolas;color:black;
  mso-font-kerning:0pt'><span style='mso-tab-count:4'>                            </span>System.</span><b><i><span
  lang=EN-US style='font-size:5.5pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;color:#0000C0;mso-font-kerning:0pt'>out</span></i></b><span
  lang=EN-US style='font-size:5.5pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;color:black;mso-font-kerning:0pt'>.println(</span><span
  lang=EN-US style='font-size:5.5pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;color:#2A00FF;mso-font-kerning:0pt'>&quot;</span><span
  style='font-size:5.5pt;mso-bidi-font-size:14.0pt;font-family:宋体;mso-ascii-font-family:
  Consolas;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:Consolas;
  mso-bidi-font-family:Consolas;color:#2A00FF;mso-font-kerning:0pt'>已删除的节点路径</span><span
  lang=EN-US style='font-size:5.5pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;color:#2A00FF;mso-font-kerning:0pt'>=&quot;</span><span
  lang=EN-US style='font-size:5.5pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;color:black;mso-font-kerning:0pt'> + </span><span
  lang=EN-US style='font-size:5.5pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;color:#6A3E3E;mso-font-kerning:0pt'>event</span><span
  lang=EN-US style='font-size:5.5pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;color:black;mso-font-kerning:0pt'>.getPath());</span><span
  lang=EN-US style='font-size:5.5pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;mso-font-kerning:0pt'><o:p></o:p></span></p>
  <p class=MsoNormal style='line-height:normal;mso-pagination:none;mso-layout-grid-align:
  none;text-autospace:none'><span lang=EN-US style='font-size:5.5pt;mso-bidi-font-size:
  14.0pt;font-family:Consolas;mso-bidi-font-family:Consolas;color:black;
  mso-font-kerning:0pt'><span style='mso-tab-count:4'>                            </span></span><span
  lang=EN-US style='font-size:5.5pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;color:#3F7F5F;mso-font-kerning:0pt'>// </span><span
  style='font-size:5.5pt;mso-bidi-font-size:14.0pt;font-family:宋体;mso-ascii-font-family:
  Consolas;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:Consolas;
  mso-bidi-font-family:Consolas;color:#3F7F5F;mso-font-kerning:0pt'>如果删除的节点是主机挂的节点</span><span
  lang=EN-US style='font-size:5.5pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;mso-font-kerning:0pt'><o:p></o:p></span></p>
  <p class=MsoNormal style='line-height:normal;mso-pagination:none;mso-layout-grid-align:
  none;text-autospace:none'><span lang=EN-US style='font-size:5.5pt;mso-bidi-font-size:
  14.0pt;font-family:Consolas;mso-bidi-font-family:Consolas;color:black;
  mso-font-kerning:0pt'><span style='mso-tab-count:4'>                            </span></span><b><span
  lang=EN-US style='font-size:5.5pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;color:#7F0055;mso-font-kerning:0pt'>if</span></b><span
  lang=EN-US style='font-size:5.5pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;color:black;mso-font-kerning:0pt'>(</span><span
  lang=EN-US style='font-size:5.5pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;color:#2A00FF;mso-font-kerning:0pt'>&quot;/tank/master&quot;</span><span
  lang=EN-US style='font-size:5.5pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;color:black;mso-font-kerning:0pt'>.equals(</span><span
  lang=EN-US style='font-size:5.5pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;color:#6A3E3E;mso-font-kerning:0pt'>event</span><span
  lang=EN-US style='font-size:5.5pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;color:black;mso-font-kerning:0pt'>.getPath()))
  {</span><span lang=EN-US style='font-size:5.5pt;mso-bidi-font-size:14.0pt;
  font-family:Consolas;mso-bidi-font-family:Consolas;mso-font-kerning:0pt'><o:p></o:p></span></p>
  <p class=MsoNormal style='line-height:normal;mso-pagination:none;mso-layout-grid-align:
  none;text-autospace:none'><span lang=EN-US style='font-size:5.5pt;mso-bidi-font-size:
  14.0pt;font-family:Consolas;mso-bidi-font-family:Consolas;color:black;
  mso-font-kerning:0pt'><span style='mso-tab-count:5'>                                   </span></span><i><span
  lang=EN-US style='font-size:5.5pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;color:#0000C0;mso-font-kerning:0pt'>disconnected</span></i><span
  lang=EN-US style='font-size:5.5pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;color:black;mso-font-kerning:0pt'>.countDown();</span><span
  lang=EN-US style='font-size:5.5pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;mso-font-kerning:0pt'><o:p></o:p></span></p>
  <p class=MsoNormal style='line-height:normal;mso-pagination:none;mso-layout-grid-align:
  none;text-autospace:none'><span lang=EN-US style='font-size:5.5pt;mso-bidi-font-size:
  14.0pt;font-family:Consolas;mso-bidi-font-family:Consolas;color:black;
  mso-font-kerning:0pt'><span style='mso-tab-count:5'>                                   </span>System.</span><b><i><span
  lang=EN-US style='font-size:5.5pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;color:#0000C0;mso-font-kerning:0pt'>out</span></i></b><span
  lang=EN-US style='font-size:5.5pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;color:black;mso-font-kerning:0pt'>.println(</span><span
  lang=EN-US style='font-size:5.5pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;color:#2A00FF;mso-font-kerning:0pt'>&quot;</span><span
  style='font-size:5.5pt;mso-bidi-font-size:14.0pt;font-family:宋体;mso-ascii-font-family:
  Consolas;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:Consolas;
  mso-bidi-font-family:Consolas;color:#2A00FF;mso-font-kerning:0pt'>主用机已挂</span><span
  lang=EN-US style='font-size:5.5pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;color:#2A00FF;mso-font-kerning:0pt'>&quot;</span><span
  lang=EN-US style='font-size:5.5pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;color:black;mso-font-kerning:0pt'>);</span><span
  lang=EN-US style='font-size:5.5pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;mso-font-kerning:0pt'><o:p></o:p></span></p>
  <p class=MsoNormal style='line-height:normal;mso-pagination:none;mso-layout-grid-align:
  none;text-autospace:none'><span lang=EN-US style='font-size:5.5pt;mso-bidi-font-size:
  14.0pt;font-family:Consolas;mso-bidi-font-family:Consolas;color:black;
  mso-font-kerning:0pt'><span style='mso-tab-count:4'>                            </span>}</span><span
  lang=EN-US style='font-size:5.5pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;mso-font-kerning:0pt'><o:p></o:p></span></p>
  <p class=MsoNormal style='line-height:normal;mso-pagination:none;mso-layout-grid-align:
  none;text-autospace:none'><span lang=EN-US style='font-size:5.5pt;mso-bidi-font-size:
  14.0pt;font-family:Consolas;mso-bidi-font-family:Consolas;color:black;
  mso-font-kerning:0pt'><span style='mso-tab-count:3'>                     </span>}</span><span
  lang=EN-US style='font-size:5.5pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;mso-font-kerning:0pt'><o:p></o:p></span></p>
  <p class=MsoNormal style='line-height:normal;mso-pagination:none;mso-layout-grid-align:
  none;text-autospace:none'><span lang=EN-US style='font-size:5.5pt;mso-bidi-font-size:
  14.0pt;font-family:Consolas;mso-bidi-font-family:Consolas;color:black;
  mso-font-kerning:0pt'><span style='mso-tab-count:2'>              </span>}</span><span
  lang=EN-US style='font-size:5.5pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;mso-font-kerning:0pt'><o:p></o:p></span></p>
  <p class=MsoNormal style='line-height:normal;mso-pagination:none;mso-layout-grid-align:
  none;text-autospace:none'><span lang=EN-US style='font-size:5.5pt;mso-bidi-font-size:
  14.0pt;font-family:Consolas;mso-bidi-font-family:Consolas;color:black;
  mso-font-kerning:0pt'><span style='mso-tab-count:1'>       </span>}</span><span
  lang=EN-US style='font-size:5.5pt;mso-bidi-font-size:14.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;mso-font-kerning:0pt'><o:p></o:p></span></p>
  <p class=MsoNormal style='line-height:normal;mso-pagination:none;mso-layout-grid-align:
  none;text-autospace:none'><span lang=EN-US style='font-size:5.5pt;mso-bidi-font-size:
  14.0pt;font-family:Consolas;mso-bidi-font-family:Consolas;color:black;
  mso-font-kerning:0pt'>}</span><span lang=EN-US style='font-size:5.5pt;
  mso-bidi-font-size:14.0pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  mso-font-kerning:0pt'><o:p></o:p></span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal><span lang=EN-US style='font-size:12.0pt;mso-bidi-font-size:
11.0pt;line-height:125%;mso-fareast-font-family:宋体'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='font-size:12.0pt;mso-bidi-font-size:
11.0pt;line-height:125%;mso-fareast-font-family:宋体'><o:p>&nbsp;</o:p></span></p>

<h3><span style='font-family:宋体;mso-ascii-font-family:Calibri;mso-ascii-theme-font:
minor-latin;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:Calibri;
mso-hansi-theme-font:minor-latin'>测试</span></h3>

<p class=MsoNormal><span style='font-size:12.0pt;mso-bidi-font-size:11.0pt;
line-height:125%;font-family:宋体;mso-ascii-font-family:Calibri;mso-ascii-theme-font:
minor-latin;mso-hansi-font-family:Calibri;mso-hansi-theme-font:minor-latin'>开两个日志窗口，先启动一个程序，作为主用机，等待创建节点完成，再启动第二个程序（同一份代码），作为备用机</span><span
lang=EN-US style='font-size:12.0pt;mso-bidi-font-size:11.0pt;line-height:125%;
mso-fareast-font-family:宋体'><o:p></o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='mso-no-proof:yes'><!--[if gte vml 1]><v:shape
 id="图片_x0020_51" o:spid="_x0000_i1054" type="#_x0000_t75" style='width:566.25pt;
 height:86.25pt;visibility:visible;mso-wrap-style:square'>
 <v:imagedata src="04_ZookeeperAppend.files/image111.png" o:title=""/>
</v:shape><![endif]--><![if !vml]><img width=755 height=115
src="04_ZookeeperAppend.files/image111.png" v:shapes="图片_x0020_51"><![endif]></span><span
lang=EN-US style='font-size:12.0pt;mso-bidi-font-size:11.0pt;line-height:125%;
mso-fareast-font-family:宋体'><o:p></o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='font-size:12.0pt;mso-bidi-font-size:
11.0pt;line-height:125%;mso-fareast-font-family:宋体'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span style='font-size:12.0pt;mso-bidi-font-size:11.0pt;
line-height:125%;font-family:宋体;mso-ascii-font-family:Calibri;mso-ascii-theme-font:
minor-latin;mso-hansi-font-family:Calibri;mso-hansi-theme-font:minor-latin'>然后去</span><span
lang=EN-US style='font-size:12.0pt;mso-bidi-font-size:11.0pt;line-height:125%;
mso-fareast-font-family:宋体'>master</span><span style='font-size:12.0pt;
mso-bidi-font-size:11.0pt;line-height:125%;font-family:宋体;mso-ascii-font-family:
Calibri;mso-ascii-theme-font:minor-latin;mso-hansi-font-family:Calibri;
mso-hansi-theme-font:minor-latin'>虚拟机执行命名查看节点的数据，可以看到是</span><span lang=EN-US
style='font-size:12.0pt;mso-bidi-font-size:11.0pt;line-height:125%;mso-fareast-font-family:
宋体'>100ip</span><span style='font-size:12.0pt;mso-bidi-font-size:11.0pt;
line-height:125%;font-family:宋体;mso-ascii-font-family:Calibri;mso-ascii-theme-font:
minor-latin;mso-hansi-font-family:Calibri;mso-hansi-theme-font:minor-latin'>、</span><span
lang=EN-US style='font-size:12.0pt;mso-bidi-font-size:11.0pt;line-height:125%;
mso-fareast-font-family:宋体'>4567</span><span style='font-size:12.0pt;
mso-bidi-font-size:11.0pt;line-height:125%;font-family:宋体;mso-ascii-font-family:
Calibri;mso-ascii-theme-font:minor-latin;mso-hansi-font-family:Calibri;
mso-hansi-theme-font:minor-latin'>端口</span><span lang=EN-US style='font-size:
12.0pt;mso-bidi-font-size:11.0pt;line-height:125%;mso-fareast-font-family:宋体'><o:p></o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='mso-no-proof:yes'><!--[if gte vml 1]><v:shape
 id="图片_x0020_50" o:spid="_x0000_i1053" type="#_x0000_t75" style='width:289.5pt;
 height:165.75pt;visibility:visible;mso-wrap-style:square'>
 <v:imagedata src="04_ZookeeperAppend.files/image113.png" o:title=""/>
</v:shape><![endif]--><![if !vml]><img width=386 height=221
src="04_ZookeeperAppend.files/image113.png" v:shapes="图片_x0020_50"><![endif]></span><span
lang=EN-US style='font-size:12.0pt;mso-bidi-font-size:11.0pt;line-height:125%;
mso-fareast-font-family:宋体'><o:p></o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='font-size:12.0pt;mso-bidi-font-size:
11.0pt;line-height:125%;mso-fareast-font-family:宋体'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span style='font-size:12.0pt;mso-bidi-font-size:11.0pt;
line-height:125%;font-family:宋体;mso-ascii-font-family:Calibri;mso-ascii-theme-font:
minor-latin;mso-hansi-font-family:Calibri;mso-hansi-theme-font:minor-latin'>然后停掉主用机，等待一会，可以看到备用机顶上来了</span><span
lang=EN-US style='font-size:12.0pt;mso-bidi-font-size:11.0pt;line-height:125%;
mso-fareast-font-family:宋体'><o:p></o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='mso-no-proof:yes'><!--[if gte vml 1]><v:shape
 id="图片_x0020_52" o:spid="_x0000_i1052" type="#_x0000_t75" style='width:567pt;
 height:108.75pt;visibility:visible;mso-wrap-style:square'>
 <v:imagedata src="04_ZookeeperAppend.files/image114.png" o:title=""/>
</v:shape><![endif]--><![if !vml]><img width=756 height=145
src="04_ZookeeperAppend.files/image114.png" v:shapes="图片_x0020_52"><![endif]></span><span
lang=EN-US style='font-size:12.0pt;mso-bidi-font-size:11.0pt;line-height:125%;
mso-fareast-font-family:宋体'><o:p></o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='font-size:12.0pt;mso-bidi-font-size:
11.0pt;line-height:125%;mso-fareast-font-family:宋体'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span style='font-size:12.0pt;mso-bidi-font-size:11.0pt;
line-height:125%;font-family:宋体;mso-ascii-font-family:Calibri;mso-ascii-theme-font:
minor-latin;mso-hansi-font-family:Calibri;mso-hansi-theme-font:minor-latin'>再获取一下节点数据，变成了备用机的</span><span
lang=EN-US style='font-size:12.0pt;mso-bidi-font-size:11.0pt;line-height:125%;
mso-fareast-font-family:宋体'>ip</span><span style='font-size:12.0pt;mso-bidi-font-size:
11.0pt;line-height:125%;font-family:宋体;mso-ascii-font-family:Calibri;
mso-ascii-theme-font:minor-latin;mso-hansi-font-family:Calibri;mso-hansi-theme-font:
minor-latin'>端口了</span><span lang=EN-US style='font-size:12.0pt;mso-bidi-font-size:
11.0pt;line-height:125%;mso-fareast-font-family:宋体'><o:p></o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='mso-no-proof:yes'><!--[if gte vml 1]><v:shape
 id="图片_x0020_54" o:spid="_x0000_i1051" type="#_x0000_t75" style='width:315.75pt;
 height:151.5pt;visibility:visible;mso-wrap-style:square'>
 <v:imagedata src="04_ZookeeperAppend.files/image116.png" o:title=""/>
</v:shape><![endif]--><![if !vml]><img width=421 height=202
src="04_ZookeeperAppend.files/image116.png" v:shapes="图片_x0020_54"><![endif]></span><span
lang=EN-US style='font-size:12.0pt;mso-bidi-font-size:11.0pt;line-height:125%;
mso-fareast-font-family:宋体'><o:p></o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='font-size:12.0pt;mso-bidi-font-size:
11.0pt;line-height:125%;mso-fareast-font-family:宋体'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span style='font-size:12.0pt;mso-bidi-font-size:11.0pt;
line-height:125%;font-family:宋体;mso-ascii-font-family:Calibri;mso-ascii-theme-font:
minor-latin;mso-hansi-font-family:Calibri;mso-hansi-theme-font:minor-latin'>然后再启动一个程序（相当于重启宕机的主用机），此时就是备用机了（左边的），右边的是备用机变成了主用机</span><span
lang=EN-US style='font-size:12.0pt;mso-bidi-font-size:11.0pt;line-height:125%;
mso-fareast-font-family:宋体'><o:p></o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='mso-no-proof:yes'><!--[if gte vml 1]><v:shape
 id="图片_x0020_55" o:spid="_x0000_i1050" type="#_x0000_t75" style='width:567.75pt;
 height:108.75pt;visibility:visible;mso-wrap-style:square'>
 <v:imagedata src="04_ZookeeperAppend.files/image117.png" o:title=""/>
</v:shape><![endif]--><![if !vml]><img width=757 height=145
src="04_ZookeeperAppend.files/image117.png" v:shapes="图片_x0020_55"><![endif]></span><span
lang=EN-US style='font-size:12.0pt;mso-bidi-font-size:11.0pt;line-height:125%;
mso-fareast-font-family:宋体'><o:p></o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='font-size:12.0pt;mso-bidi-font-size:
11.0pt;line-height:125%;mso-fareast-font-family:宋体'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span style='font-size:12.0pt;mso-bidi-font-size:11.0pt;
line-height:125%;font-family:宋体;mso-ascii-font-family:Calibri;mso-ascii-theme-font:
minor-latin;mso-hansi-font-family:Calibri;mso-hansi-theme-font:minor-latin'>然后停掉右边的主用机，原来宕机的主用机的备用机又变成了主用机。</span><span
lang=EN-US style='font-size:12.0pt;mso-bidi-font-size:11.0pt;line-height:125%;
mso-fareast-font-family:宋体'><o:p></o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='mso-no-proof:yes'><!--[if gte vml 1]><v:shape
 id="图片_x0020_56" o:spid="_x0000_i1049" type="#_x0000_t75" style='width:567pt;
 height:111pt;visibility:visible;mso-wrap-style:square'>
 <v:imagedata src="04_ZookeeperAppend.files/image119.png" o:title=""/>
</v:shape><![endif]--><![if !vml]><img width=756 height=148
src="04_ZookeeperAppend.files/image119.png" v:shapes="图片_x0020_56"><![endif]></span><span
lang=EN-US style='font-size:12.0pt;mso-bidi-font-size:11.0pt;line-height:125%;
mso-fareast-font-family:宋体'><o:p></o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='font-size:12.0pt;mso-bidi-font-size:
11.0pt;line-height:125%;mso-fareast-font-family:宋体'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span style='font-size:12.0pt;mso-bidi-font-size:11.0pt;
line-height:125%;font-family:宋体;mso-ascii-font-family:Calibri;mso-ascii-theme-font:
minor-latin;mso-hansi-font-family:Calibri;mso-hansi-theme-font:minor-latin'>就是这样实现了主备自动切换，而客户端只需要根据节点的数据的</span><span
lang=EN-US style='font-size:12.0pt;mso-bidi-font-size:11.0pt;line-height:125%;
mso-fareast-font-family:宋体'>ip</span><span style='font-size:12.0pt;mso-bidi-font-size:
11.0pt;line-height:125%;font-family:宋体;mso-ascii-font-family:Calibri;
mso-ascii-theme-font:minor-latin;mso-hansi-font-family:Calibri;mso-hansi-theme-font:
minor-latin'>、端口，连接对应的服务器即可。</span><span lang=EN-US style='font-size:12.0pt;
mso-bidi-font-size:11.0pt;line-height:125%;mso-fareast-font-family:宋体'><o:p></o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='font-size:12.0pt;mso-bidi-font-size:
11.0pt;line-height:125%;mso-fareast-font-family:宋体'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='font-size:12.0pt;mso-bidi-font-size:
11.0pt;line-height:125%;mso-fareast-font-family:宋体'><o:p>&nbsp;</o:p></span></p>

<h2><span lang=EN-US>3</span><span style='font-family:宋体;mso-ascii-font-family:
"Calibri Light";mso-ascii-theme-font:major-latin;mso-fareast-theme-font:major-fareast;
mso-hansi-font-family:"Calibri Light";mso-hansi-theme-font:major-latin'>）服务器动态上下线案例</span></h2>

<p class=MsoNormal><span lang=EN-US style='mso-no-proof:yes'><!--[if gte vml 1]><v:shape
 id="图片_x0020_76" o:spid="_x0000_i1048" type="#_x0000_t75" style='width:566.25pt;
 height:279pt;visibility:visible;mso-wrap-style:square'>
 <v:imagedata src="04_ZookeeperAppend.files/image121.png" o:title=""/>
</v:shape><![endif]--><![if !vml]><img width=755 height=372
src="04_ZookeeperAppend.files/image121.png" v:shapes="图片_x0020_76"><![endif]></span><span
lang=EN-US style='font-size:12.0pt;mso-bidi-font-size:11.0pt;line-height:125%;
mso-fareast-font-family:宋体'><o:p></o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='font-size:12.0pt;mso-bidi-font-size:
11.0pt;line-height:125%;mso-fareast-font-family:宋体'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span style='font-size:12.0pt;mso-bidi-font-size:11.0pt;
line-height:125%;font-family:宋体;mso-ascii-font-family:Calibri;mso-ascii-theme-font:
minor-latin;mso-hansi-font-family:Calibri;mso-hansi-theme-font:minor-latin'>记得启动</span><span
lang=EN-US style='font-size:12.0pt;mso-bidi-font-size:11.0pt;line-height:125%;
mso-fareast-font-family:宋体'>zk</span><span style='font-size:12.0pt;mso-bidi-font-size:
11.0pt;line-height:125%;font-family:宋体;mso-ascii-font-family:Calibri;
mso-ascii-theme-font:minor-latin;mso-hansi-font-family:Calibri;mso-hansi-theme-font:
minor-latin'>集群</span><span lang=EN-US style='font-size:12.0pt;mso-bidi-font-size:
11.0pt;line-height:125%;mso-fareast-font-family:宋体'><o:p></o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='font-size:12.0pt;mso-bidi-font-size:
11.0pt;line-height:125%;mso-fareast-font-family:宋体'><o:p>&nbsp;</o:p></span></p>

<h3><span style='font-family:宋体;mso-ascii-font-family:Calibri;mso-ascii-theme-font:
minor-latin;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:Calibri;
mso-hansi-theme-font:minor-latin'>代码</span></h3>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US>pom.xml</span><span style='font-family:
宋体;mso-ascii-font-family:Calibri;mso-ascii-theme-font:minor-latin;mso-fareast-theme-font:
minor-fareast;mso-hansi-font-family:Calibri;mso-hansi-theme-font:minor-latin'>不变</span></p>

<p class=MsoNormal><span lang=EN-US style='mso-no-proof:yes'><!--[if gte vml 1]><v:shape
 id="图片_x0020_88" o:spid="_x0000_i1047" type="#_x0000_t75" style='width:234.75pt;
 height:169.5pt;visibility:visible;mso-wrap-style:square'>
 <v:imagedata src="04_ZookeeperAppend.files/image123.png" o:title=""/>
</v:shape><![endif]--><![if !vml]><img width=313 height=226
src="04_ZookeeperAppend.files/image123.png" v:shapes="图片_x0020_88"><![endif]></span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US>DistributeServer</span></p>

<table class=MsoTableGrid border=1 cellspacing=0 cellpadding=0
 style='border-collapse:collapse;border:none;mso-border-alt:solid windowtext .5pt;
 mso-yfti-tbllook:1184;mso-padding-alt:0cm 5.4pt 0cm 5.4pt'>
 <tr style='mso-yfti-irow:0;mso-yfti-firstrow:yes;mso-yfti-lastrow:yes'>
  <td width=755 valign=top style='width:566.4pt;border:solid windowtext 1.0pt;
  mso-border-alt:solid windowtext .5pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal style='line-height:normal;mso-pagination:none;mso-layout-grid-align:
  none;text-autospace:none'><b><span lang=EN-US style='font-size:8.0pt;
  font-family:Consolas;mso-bidi-font-family:Consolas;color:#7F0055;mso-font-kerning:
  0pt'>package</span></b><span lang=EN-US style='font-size:8.0pt;font-family:
  Consolas;mso-bidi-font-family:Consolas;color:black;mso-font-kerning:0pt'>
  _02;</span><span lang=EN-US style='font-size:8.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;mso-font-kerning:0pt'><o:p></o:p></span></p>
  <p class=MsoNormal style='line-height:normal;mso-pagination:none;mso-layout-grid-align:
  none;text-autospace:none'><span lang=EN-US style='font-size:8.0pt;font-family:
  Consolas;mso-bidi-font-family:Consolas;mso-font-kerning:0pt'><o:p>&nbsp;</o:p></span></p>
  <p class=MsoNormal style='line-height:normal;mso-pagination:none;mso-layout-grid-align:
  none;text-autospace:none'><b><span lang=EN-US style='font-size:8.0pt;
  font-family:Consolas;mso-bidi-font-family:Consolas;color:#7F0055;mso-font-kerning:
  0pt'>import</span></b><span lang=EN-US style='font-size:8.0pt;font-family:
  Consolas;mso-bidi-font-family:Consolas;color:black;mso-font-kerning:0pt'>
  java.io.IOException;</span><span lang=EN-US style='font-size:8.0pt;
  font-family:Consolas;mso-bidi-font-family:Consolas;mso-font-kerning:0pt'><o:p></o:p></span></p>
  <p class=MsoNormal style='line-height:normal;mso-pagination:none;mso-layout-grid-align:
  none;text-autospace:none'><span lang=EN-US style='font-size:8.0pt;font-family:
  Consolas;mso-bidi-font-family:Consolas;mso-font-kerning:0pt'><o:p>&nbsp;</o:p></span></p>
  <p class=MsoNormal style='line-height:normal;mso-pagination:none;mso-layout-grid-align:
  none;text-autospace:none'><b><span lang=EN-US style='font-size:8.0pt;
  font-family:Consolas;mso-bidi-font-family:Consolas;color:#7F0055;mso-font-kerning:
  0pt'>import</span></b><span lang=EN-US style='font-size:8.0pt;font-family:
  Consolas;mso-bidi-font-family:Consolas;color:black;mso-font-kerning:0pt'>
  org.apache.zookeeper.CreateMode;</span><span lang=EN-US style='font-size:
  8.0pt;font-family:Consolas;mso-bidi-font-family:Consolas;mso-font-kerning:
  0pt'><o:p></o:p></span></p>
  <p class=MsoNormal style='line-height:normal;mso-pagination:none;mso-layout-grid-align:
  none;text-autospace:none'><b><span lang=EN-US style='font-size:8.0pt;
  font-family:Consolas;mso-bidi-font-family:Consolas;color:#7F0055;mso-font-kerning:
  0pt'>import</span></b><span lang=EN-US style='font-size:8.0pt;font-family:
  Consolas;mso-bidi-font-family:Consolas;color:black;mso-font-kerning:0pt'>
  org.apache.zookeeper.KeeperException;</span><span lang=EN-US
  style='font-size:8.0pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  mso-font-kerning:0pt'><o:p></o:p></span></p>
  <p class=MsoNormal style='line-height:normal;mso-pagination:none;mso-layout-grid-align:
  none;text-autospace:none'><b><span lang=EN-US style='font-size:8.0pt;
  font-family:Consolas;mso-bidi-font-family:Consolas;color:#7F0055;mso-font-kerning:
  0pt'>import</span></b><span lang=EN-US style='font-size:8.0pt;font-family:
  Consolas;mso-bidi-font-family:Consolas;color:black;mso-font-kerning:0pt'> <u>org.apache.zookeeper.WatchedEvent</u>;</span><span
  lang=EN-US style='font-size:8.0pt;font-family:Consolas;mso-bidi-font-family:
  Consolas;mso-font-kerning:0pt'><o:p></o:p></span></p>
  <p class=MsoNormal style='line-height:normal;mso-pagination:none;mso-layout-grid-align:
  none;text-autospace:none'><b><span lang=EN-US style='font-size:8.0pt;
  font-family:Consolas;mso-bidi-font-family:Consolas;color:#7F0055;mso-font-kerning:
  0pt'>import</span></b><span lang=EN-US style='font-size:8.0pt;font-family:
  Consolas;mso-bidi-font-family:Consolas;color:black;mso-font-kerning:0pt'> <u>org.apache.zookeeper.Watcher</u>;</span><span
  lang=EN-US style='font-size:8.0pt;font-family:Consolas;mso-bidi-font-family:
  Consolas;mso-font-kerning:0pt'><o:p></o:p></span></p>
  <p class=MsoNormal style='line-height:normal;mso-pagination:none;mso-layout-grid-align:
  none;text-autospace:none'><b><span lang=EN-US style='font-size:8.0pt;
  font-family:Consolas;mso-bidi-font-family:Consolas;color:#7F0055;mso-font-kerning:
  0pt'>import</span></b><span lang=EN-US style='font-size:8.0pt;font-family:
  Consolas;mso-bidi-font-family:Consolas;color:black;mso-font-kerning:0pt'>
  org.apache.zookeeper.ZooDefs.Ids;</span><span lang=EN-US style='font-size:
  8.0pt;font-family:Consolas;mso-bidi-font-family:Consolas;mso-font-kerning:
  0pt'><o:p></o:p></span></p>
  <p class=MsoNormal style='line-height:normal;mso-pagination:none;mso-layout-grid-align:
  none;text-autospace:none'><b><span lang=EN-US style='font-size:8.0pt;
  font-family:Consolas;mso-bidi-font-family:Consolas;color:#7F0055;mso-font-kerning:
  0pt'>import</span></b><span lang=EN-US style='font-size:8.0pt;font-family:
  Consolas;mso-bidi-font-family:Consolas;color:black;mso-font-kerning:0pt'>
  org.apache.zookeeper.ZooKeeper;</span><span lang=EN-US style='font-size:8.0pt;
  font-family:Consolas;mso-bidi-font-family:Consolas;mso-font-kerning:0pt'><o:p></o:p></span></p>
  <p class=MsoNormal style='line-height:normal;mso-pagination:none;mso-layout-grid-align:
  none;text-autospace:none'><span lang=EN-US style='font-size:8.0pt;font-family:
  Consolas;mso-bidi-font-family:Consolas;mso-font-kerning:0pt'><o:p>&nbsp;</o:p></span></p>
  <p class=MsoNormal style='line-height:normal;mso-pagination:none;mso-layout-grid-align:
  none;text-autospace:none'><b><span lang=EN-US style='font-size:8.0pt;
  font-family:Consolas;mso-bidi-font-family:Consolas;color:#7F0055;mso-font-kerning:
  0pt'>public</span></b><span lang=EN-US style='font-size:8.0pt;font-family:
  Consolas;mso-bidi-font-family:Consolas;color:black;mso-font-kerning:0pt'> </span><b><span
  lang=EN-US style='font-size:8.0pt;font-family:Consolas;mso-bidi-font-family:
  Consolas;color:#7F0055;mso-font-kerning:0pt'>class</span></b><span
  lang=EN-US style='font-size:8.0pt;font-family:Consolas;mso-bidi-font-family:
  Consolas;color:black;mso-font-kerning:0pt'> <span style='background:lightgrey;
  mso-highlight:lightgrey'>DistributeServer</span> {</span><span lang=EN-US
  style='font-size:8.0pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  mso-font-kerning:0pt'><o:p></o:p></span></p>
  <p class=MsoNormal style='line-height:normal;mso-pagination:none;mso-layout-grid-align:
  none;text-autospace:none'><span lang=EN-US style='font-size:8.0pt;font-family:
  Consolas;mso-bidi-font-family:Consolas;mso-font-kerning:0pt'><o:p>&nbsp;</o:p></span></p>
  <p class=MsoNormal style='line-height:normal;mso-pagination:none;mso-layout-grid-align:
  none;text-autospace:none'><span lang=EN-US style='font-size:8.0pt;font-family:
  Consolas;mso-bidi-font-family:Consolas;color:black;mso-font-kerning:0pt'><span
  style='mso-tab-count:1'>     </span></span><b><span lang=EN-US
  style='font-size:8.0pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  color:#7F0055;mso-font-kerning:0pt'>public</span></b><span lang=EN-US
  style='font-size:8.0pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  color:black;mso-font-kerning:0pt'> </span><b><span lang=EN-US
  style='font-size:8.0pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  color:#7F0055;mso-font-kerning:0pt'>static</span></b><span lang=EN-US
  style='font-size:8.0pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  color:black;mso-font-kerning:0pt'> </span><b><span lang=EN-US
  style='font-size:8.0pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  color:#7F0055;mso-font-kerning:0pt'>void</span></b><span lang=EN-US
  style='font-size:8.0pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  color:black;mso-font-kerning:0pt'> main(String[] </span><span lang=EN-US
  style='font-size:8.0pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  color:#6A3E3E;mso-font-kerning:0pt'>args</span><span lang=EN-US
  style='font-size:8.0pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  color:black;mso-font-kerning:0pt'>) </span><b><span lang=EN-US
  style='font-size:8.0pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  color:#7F0055;mso-font-kerning:0pt'>throws</span></b><span lang=EN-US
  style='font-size:8.0pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  color:black;mso-font-kerning:0pt'> Exception {</span><span lang=EN-US
  style='font-size:8.0pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  mso-font-kerning:0pt'><o:p></o:p></span></p>
  <p class=MsoNormal style='line-height:normal;mso-pagination:none;mso-layout-grid-align:
  none;text-autospace:none'><span lang=EN-US style='font-size:8.0pt;font-family:
  Consolas;mso-bidi-font-family:Consolas;color:black;mso-font-kerning:0pt'><span
  style='mso-tab-count:2'>         </span><span style='background:lightgrey;
  mso-highlight:lightgrey'>DistributeServer</span> </span><span lang=EN-US
  style='font-size:8.0pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  color:#6A3E3E;mso-font-kerning:0pt'>server</span><span lang=EN-US
  style='font-size:8.0pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  color:black;mso-font-kerning:0pt'> = </span><b><span lang=EN-US
  style='font-size:8.0pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  color:#7F0055;mso-font-kerning:0pt'>new</span></b><span lang=EN-US
  style='font-size:8.0pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  color:black;mso-font-kerning:0pt'> <span style='background:lightgrey;
  mso-highlight:lightgrey'>DistributeServer</span>();</span><span lang=EN-US
  style='font-size:8.0pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  mso-font-kerning:0pt'><o:p></o:p></span></p>
  <p class=MsoNormal style='line-height:normal;mso-pagination:none;mso-layout-grid-align:
  none;text-autospace:none'><span lang=EN-US style='font-size:8.0pt;font-family:
  Consolas;mso-bidi-font-family:Consolas;color:black;mso-font-kerning:0pt'><span
  style='mso-tab-count:2'>         </span></span><span lang=EN-US
  style='font-size:8.0pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  color:#3F7F5F;mso-font-kerning:0pt'>// 1</span><span style='font-size:8.0pt;
  font-family:宋体;mso-ascii-font-family:Consolas;mso-fareast-theme-font:minor-fareast;
  mso-hansi-font-family:Consolas;mso-bidi-font-family:Consolas;color:#3F7F5F;
  mso-font-kerning:0pt'>、连接</span><u><span lang=EN-US style='font-size:8.0pt;
  font-family:Consolas;mso-bidi-font-family:Consolas;color:#3F7F5F;mso-font-kerning:
  0pt'>Zookeeper</span></u><span style='font-size:8.0pt;font-family:宋体;
  mso-ascii-font-family:Consolas;mso-fareast-theme-font:minor-fareast;
  mso-hansi-font-family:Consolas;mso-bidi-font-family:Consolas;color:#3F7F5F;
  mso-font-kerning:0pt'>集群</span><span lang=EN-US style='font-size:8.0pt;
  font-family:Consolas;mso-bidi-font-family:Consolas;mso-font-kerning:0pt'><o:p></o:p></span></p>
  <p class=MsoNormal style='line-height:normal;mso-pagination:none;mso-layout-grid-align:
  none;text-autospace:none'><span lang=EN-US style='font-size:8.0pt;font-family:
  Consolas;mso-bidi-font-family:Consolas;color:black;mso-font-kerning:0pt'><span
  style='mso-tab-count:2'>         </span></span><span lang=EN-US
  style='font-size:8.0pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  color:#6A3E3E;mso-font-kerning:0pt'>server</span><span lang=EN-US
  style='font-size:8.0pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  color:black;mso-font-kerning:0pt'>.getConnect();</span><span lang=EN-US
  style='font-size:8.0pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  mso-font-kerning:0pt'><o:p></o:p></span></p>
  <p class=MsoNormal style='line-height:normal;mso-pagination:none;mso-layout-grid-align:
  none;text-autospace:none'><span lang=EN-US style='font-size:8.0pt;font-family:
  Consolas;mso-bidi-font-family:Consolas;color:black;mso-font-kerning:0pt'><span
  style='mso-tab-count:2'>         </span></span><span lang=EN-US
  style='font-size:8.0pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  mso-font-kerning:0pt'><o:p></o:p></span></p>
  <p class=MsoNormal style='line-height:normal;mso-pagination:none;mso-layout-grid-align:
  none;text-autospace:none'><span lang=EN-US style='font-size:8.0pt;font-family:
  Consolas;mso-bidi-font-family:Consolas;color:black;mso-font-kerning:0pt'><span
  style='mso-tab-count:2'>         </span></span><span lang=EN-US
  style='font-size:8.0pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  color:#3F7F5F;mso-font-kerning:0pt'>// </span><span style='font-size:8.0pt;
  font-family:宋体;mso-ascii-font-family:Consolas;mso-fareast-theme-font:minor-fareast;
  mso-hansi-font-family:Consolas;mso-bidi-font-family:Consolas;color:#3F7F5F;
  mso-font-kerning:0pt'>睡一下，等待连接（不然，还没有获取到连接，就操作了会报错）</span><span lang=EN-US
  style='font-size:8.0pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  mso-font-kerning:0pt'><o:p></o:p></span></p>
  <p class=MsoNormal style='line-height:normal;mso-pagination:none;mso-layout-grid-align:
  none;text-autospace:none'><span lang=EN-US style='font-size:8.0pt;font-family:
  Consolas;mso-bidi-font-family:Consolas;color:black;mso-font-kerning:0pt'><span
  style='mso-tab-count:2'>         </span>Thread.<i>sleep</i>(5000);</span><span
  lang=EN-US style='font-size:8.0pt;font-family:Consolas;mso-bidi-font-family:
  Consolas;mso-font-kerning:0pt'><o:p></o:p></span></p>
  <p class=MsoNormal style='line-height:normal;mso-pagination:none;mso-layout-grid-align:
  none;text-autospace:none'><span lang=EN-US style='font-size:8.0pt;font-family:
  Consolas;mso-bidi-font-family:Consolas;color:black;mso-font-kerning:0pt'><span
  style='mso-tab-count:2'>         </span></span><span lang=EN-US
  style='font-size:8.0pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  mso-font-kerning:0pt'><o:p></o:p></span></p>
  <p class=MsoNormal style='line-height:normal;mso-pagination:none;mso-layout-grid-align:
  none;text-autospace:none'><span lang=EN-US style='font-size:8.0pt;font-family:
  Consolas;mso-bidi-font-family:Consolas;color:black;mso-font-kerning:0pt'><span
  style='mso-tab-count:2'>         </span></span><span lang=EN-US
  style='font-size:8.0pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  color:#3F7F5F;mso-font-kerning:0pt'>// 2</span><span style='font-size:8.0pt;
  font-family:宋体;mso-ascii-font-family:Consolas;mso-fareast-theme-font:minor-fareast;
  mso-hansi-font-family:Consolas;mso-bidi-font-family:Consolas;color:#3F7F5F;
  mso-font-kerning:0pt'>、注册节点（创建临时节点）</span><span lang=EN-US style='font-size:
  8.0pt;font-family:Consolas;mso-bidi-font-family:Consolas;mso-font-kerning:
  0pt'><o:p></o:p></span></p>
  <p class=MsoNormal style='line-height:normal;mso-pagination:none;mso-layout-grid-align:
  none;text-autospace:none'><span lang=EN-US style='font-size:8.0pt;font-family:
  Consolas;mso-bidi-font-family:Consolas;color:black;mso-font-kerning:0pt'><span
  style='mso-tab-count:2'>         </span></span><span lang=EN-US
  style='font-size:8.0pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  color:#6A3E3E;mso-font-kerning:0pt'>server</span><span lang=EN-US
  style='font-size:8.0pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  color:black;mso-font-kerning:0pt'>.register(</span><span lang=EN-US
  style='font-size:8.0pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  color:#6A3E3E;mso-font-kerning:0pt'>args</span><span lang=EN-US
  style='font-size:8.0pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  color:black;mso-font-kerning:0pt'>[0]);</span><span lang=EN-US
  style='font-size:8.0pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  mso-font-kerning:0pt'><o:p></o:p></span></p>
  <p class=MsoNormal style='line-height:normal;mso-pagination:none;mso-layout-grid-align:
  none;text-autospace:none'><span lang=EN-US style='font-size:8.0pt;font-family:
  Consolas;mso-bidi-font-family:Consolas;color:black;mso-font-kerning:0pt'><span
  style='mso-tab-count:2'>         </span></span><span lang=EN-US
  style='font-size:8.0pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  mso-font-kerning:0pt'><o:p></o:p></span></p>
  <p class=MsoNormal style='line-height:normal;mso-pagination:none;mso-layout-grid-align:
  none;text-autospace:none'><span lang=EN-US style='font-size:8.0pt;font-family:
  Consolas;mso-bidi-font-family:Consolas;color:black;mso-font-kerning:0pt'><span
  style='mso-tab-count:2'>         </span></span><span lang=EN-US
  style='font-size:8.0pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  color:#3F7F5F;mso-font-kerning:0pt'>// 3</span><span style='font-size:8.0pt;
  font-family:宋体;mso-ascii-font-family:Consolas;mso-fareast-theme-font:minor-fareast;
  mso-hansi-font-family:Consolas;mso-bidi-font-family:Consolas;color:#3F7F5F;
  mso-font-kerning:0pt'>、业务逻辑</span><span style='font-size:8.0pt;font-family:
  Consolas;mso-bidi-font-family:Consolas;color:#3F7F5F;mso-font-kerning:0pt'> </span><span
  style='font-size:8.0pt;font-family:宋体;mso-ascii-font-family:Consolas;
  mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:Consolas;
  mso-bidi-font-family:Consolas;color:#3F7F5F;mso-font-kerning:0pt'>处理</span><span
  lang=EN-US style='font-size:8.0pt;font-family:Consolas;mso-bidi-font-family:
  Consolas;mso-font-kerning:0pt'><o:p></o:p></span></p>
  <p class=MsoNormal style='line-height:normal;mso-pagination:none;mso-layout-grid-align:
  none;text-autospace:none'><span lang=EN-US style='font-size:8.0pt;font-family:
  Consolas;mso-bidi-font-family:Consolas;color:black;mso-font-kerning:0pt'><span
  style='mso-tab-count:2'>         </span>Thread.<i>sleep</i>(Integer.</span><b><i><span
  lang=EN-US style='font-size:8.0pt;font-family:Consolas;mso-bidi-font-family:
  Consolas;color:#0000C0;mso-font-kerning:0pt'>MAX_VALUE</span></i></b><span
  lang=EN-US style='font-size:8.0pt;font-family:Consolas;mso-bidi-font-family:
  Consolas;color:black;mso-font-kerning:0pt'>);<span style='mso-spacerun:yes'> 
  </span></span><span lang=EN-US style='font-size:8.0pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;color:#3F7F5F;mso-font-kerning:0pt'>// </span><span
  style='font-size:8.0pt;font-family:宋体;mso-ascii-font-family:Consolas;
  mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:Consolas;
  mso-bidi-font-family:Consolas;color:#3F7F5F;mso-font-kerning:0pt'>模拟处理业务逻辑，防止程序退出</span><span
  lang=EN-US style='font-size:8.0pt;font-family:Consolas;mso-bidi-font-family:
  Consolas;mso-font-kerning:0pt'><o:p></o:p></span></p>
  <p class=MsoNormal style='line-height:normal;mso-pagination:none;mso-layout-grid-align:
  none;text-autospace:none'><span lang=EN-US style='font-size:8.0pt;font-family:
  Consolas;mso-bidi-font-family:Consolas;color:black;mso-font-kerning:0pt'><span
  style='mso-tab-count:1'>     </span>}</span><span lang=EN-US
  style='font-size:8.0pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  mso-font-kerning:0pt'><o:p></o:p></span></p>
  <p class=MsoNormal style='line-height:normal;mso-pagination:none;mso-layout-grid-align:
  none;text-autospace:none'><span lang=EN-US style='font-size:8.0pt;font-family:
  Consolas;mso-bidi-font-family:Consolas;mso-font-kerning:0pt'><o:p>&nbsp;</o:p></span></p>
  <p class=MsoNormal style='line-height:normal;mso-pagination:none;mso-layout-grid-align:
  none;text-autospace:none'><span lang=EN-US style='font-size:8.0pt;font-family:
  Consolas;mso-bidi-font-family:Consolas;color:black;mso-font-kerning:0pt'><span
  style='mso-tab-count:1'>     </span></span><span lang=EN-US style='font-size:
  8.0pt;font-family:Consolas;mso-bidi-font-family:Consolas;color:#3F7F5F;
  mso-font-kerning:0pt'>// <u>zk</u></span><span style='font-size:8.0pt;
  font-family:宋体;mso-ascii-font-family:Consolas;mso-fareast-theme-font:minor-fareast;
  mso-hansi-font-family:Consolas;mso-bidi-font-family:Consolas;color:#3F7F5F;
  mso-font-kerning:0pt'>集群</span><span lang=EN-US style='font-size:8.0pt;
  font-family:Consolas;mso-bidi-font-family:Consolas;mso-font-kerning:0pt'><o:p></o:p></span></p>
  <p class=MsoNormal style='line-height:normal;mso-pagination:none;mso-layout-grid-align:
  none;text-autospace:none'><span lang=EN-US style='font-size:8.0pt;font-family:
  Consolas;mso-bidi-font-family:Consolas;color:black;mso-font-kerning:0pt'><span
  style='mso-tab-count:1'>     </span></span><b><span lang=EN-US
  style='font-size:8.0pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  color:#7F0055;mso-font-kerning:0pt'>private</span></b><span lang=EN-US
  style='font-size:8.0pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  color:black;mso-font-kerning:0pt'> String </span><span lang=EN-US
  style='font-size:8.0pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  color:#0000C0;mso-font-kerning:0pt'>connectString</span><span lang=EN-US
  style='font-size:8.0pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  color:black;mso-font-kerning:0pt'> = </span><span lang=EN-US
  style='font-size:8.0pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  color:#2A00FF;mso-font-kerning:0pt'>&quot;192.168.56.101:2181,
  192.168.56.102:2181, 192.168.56.103:2181&quot;</span><span lang=EN-US
  style='font-size:8.0pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  color:black;mso-font-kerning:0pt'>;</span><span lang=EN-US style='font-size:
  8.0pt;font-family:Consolas;mso-bidi-font-family:Consolas;mso-font-kerning:
  0pt'><o:p></o:p></span></p>
  <p class=MsoNormal style='line-height:normal;mso-pagination:none;mso-layout-grid-align:
  none;text-autospace:none'><span lang=EN-US style='font-size:8.0pt;font-family:
  Consolas;mso-bidi-font-family:Consolas;color:black;mso-font-kerning:0pt'><span
  style='mso-tab-count:1'>     </span></span><span lang=EN-US style='font-size:
  8.0pt;font-family:Consolas;mso-bidi-font-family:Consolas;color:#3F7F5F;
  mso-font-kerning:0pt'>// </span><span style='font-size:8.0pt;font-family:
  宋体;mso-ascii-font-family:Consolas;mso-fareast-theme-font:minor-fareast;
  mso-hansi-font-family:Consolas;mso-bidi-font-family:Consolas;color:#3F7F5F;
  mso-font-kerning:0pt'>超时时间</span><span lang=EN-US style='font-size:8.0pt;
  font-family:Consolas;mso-bidi-font-family:Consolas;mso-font-kerning:0pt'><o:p></o:p></span></p>
  <p class=MsoNormal style='line-height:normal;mso-pagination:none;mso-layout-grid-align:
  none;text-autospace:none'><span lang=EN-US style='font-size:8.0pt;font-family:
  Consolas;mso-bidi-font-family:Consolas;color:black;mso-font-kerning:0pt'><span
  style='mso-tab-count:1'>     </span></span><b><span lang=EN-US
  style='font-size:8.0pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  color:#7F0055;mso-font-kerning:0pt'>private</span></b><span lang=EN-US
  style='font-size:8.0pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  color:black;mso-font-kerning:0pt'> </span><b><span lang=EN-US
  style='font-size:8.0pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  color:#7F0055;mso-font-kerning:0pt'>int</span></b><span lang=EN-US
  style='font-size:8.0pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  color:black;mso-font-kerning:0pt'> </span><span lang=EN-US style='font-size:
  8.0pt;font-family:Consolas;mso-bidi-font-family:Consolas;color:#0000C0;
  mso-font-kerning:0pt'>sessionTimeout</span><span lang=EN-US style='font-size:
  8.0pt;font-family:Consolas;mso-bidi-font-family:Consolas;color:black;
  mso-font-kerning:0pt'> = 5000;</span><span lang=EN-US style='font-size:8.0pt;
  font-family:Consolas;mso-bidi-font-family:Consolas;mso-font-kerning:0pt'><o:p></o:p></span></p>
  <p class=MsoNormal style='line-height:normal;mso-pagination:none;mso-layout-grid-align:
  none;text-autospace:none'><span lang=EN-US style='font-size:8.0pt;font-family:
  Consolas;mso-bidi-font-family:Consolas;color:black;mso-font-kerning:0pt'><span
  style='mso-tab-count:1'>     </span></span><span lang=EN-US style='font-size:
  8.0pt;font-family:Consolas;mso-bidi-font-family:Consolas;color:#3F7F5F;
  mso-font-kerning:0pt'>// </span><span style='font-size:8.0pt;font-family:
  宋体;mso-ascii-font-family:Consolas;mso-fareast-theme-font:minor-fareast;
  mso-hansi-font-family:Consolas;mso-bidi-font-family:Consolas;color:#3F7F5F;
  mso-font-kerning:0pt'>服务器对于</span><u><span lang=EN-US style='font-size:8.0pt;
  font-family:Consolas;mso-bidi-font-family:Consolas;color:#3F7F5F;mso-font-kerning:
  0pt'>zk</span></u><span style='font-size:8.0pt;font-family:宋体;mso-ascii-font-family:
  Consolas;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:Consolas;
  mso-bidi-font-family:Consolas;color:#3F7F5F;mso-font-kerning:0pt'>来说，也是</span><span
  lang=EN-US style='font-size:8.0pt;font-family:Consolas;mso-bidi-font-family:
  Consolas;color:#3F7F5F;mso-font-kerning:0pt'>Client</span><span lang=EN-US
  style='font-size:8.0pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  mso-font-kerning:0pt'><o:p></o:p></span></p>
  <p class=MsoNormal style='line-height:normal;mso-pagination:none;mso-layout-grid-align:
  none;text-autospace:none'><span lang=EN-US style='font-size:8.0pt;font-family:
  Consolas;mso-bidi-font-family:Consolas;color:black;mso-font-kerning:0pt'><span
  style='mso-tab-count:1'>     </span></span><b><span lang=EN-US
  style='font-size:8.0pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  color:#7F0055;mso-font-kerning:0pt'>private</span></b><span lang=EN-US
  style='font-size:8.0pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  color:black;mso-font-kerning:0pt'> ZooKeeper </span><span lang=EN-US
  style='font-size:8.0pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  color:#0000C0;mso-font-kerning:0pt'>zkClient</span><span lang=EN-US
  style='font-size:8.0pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  color:black;mso-font-kerning:0pt'>;</span><span lang=EN-US style='font-size:
  8.0pt;font-family:Consolas;mso-bidi-font-family:Consolas;mso-font-kerning:
  0pt'><o:p></o:p></span></p>
  <p class=MsoNormal style='line-height:normal;mso-pagination:none;mso-layout-grid-align:
  none;text-autospace:none'><span lang=EN-US style='font-size:8.0pt;font-family:
  Consolas;mso-bidi-font-family:Consolas;mso-font-kerning:0pt'><o:p>&nbsp;</o:p></span></p>
  <p class=MsoNormal style='line-height:normal;mso-pagination:none;mso-layout-grid-align:
  none;text-autospace:none'><span lang=EN-US style='font-size:8.0pt;font-family:
  Consolas;mso-bidi-font-family:Consolas;color:black;mso-font-kerning:0pt'><span
  style='mso-tab-count:1'>     </span></span><b><span lang=EN-US
  style='font-size:8.0pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  color:#7F0055;mso-font-kerning:0pt'>private</span></b><span lang=EN-US
  style='font-size:8.0pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  color:black;mso-font-kerning:0pt'> </span><b><span lang=EN-US
  style='font-size:8.0pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  color:#7F0055;mso-font-kerning:0pt'>void</span></b><span lang=EN-US
  style='font-size:8.0pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  color:black;mso-font-kerning:0pt'> getConnect() </span><b><span lang=EN-US
  style='font-size:8.0pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  color:#7F0055;mso-font-kerning:0pt'>throws</span></b><span lang=EN-US
  style='font-size:8.0pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  color:black;mso-font-kerning:0pt'> IOException {</span><span lang=EN-US
  style='font-size:8.0pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  mso-font-kerning:0pt'><o:p></o:p></span></p>
  <p class=MsoNormal style='line-height:normal;mso-pagination:none;mso-layout-grid-align:
  none;text-autospace:none'><span lang=EN-US style='font-size:8.0pt;font-family:
  Consolas;mso-bidi-font-family:Consolas;color:black;mso-font-kerning:0pt'><span
  style='mso-tab-count:2'>         </span></span><span lang=EN-US
  style='font-size:8.0pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  color:#3F7F5F;mso-font-kerning:0pt'>// </span><span style='font-size:8.0pt;
  font-family:宋体;mso-ascii-font-family:Consolas;mso-fareast-theme-font:minor-fareast;
  mso-hansi-font-family:Consolas;mso-bidi-font-family:Consolas;color:#3F7F5F;
  mso-font-kerning:0pt'>最后一个参数为</span><span lang=EN-US style='font-size:8.0pt;
  font-family:Consolas;mso-bidi-font-family:Consolas;color:#3F7F5F;mso-font-kerning:
  0pt'>null</span><span style='font-size:8.0pt;font-family:宋体;mso-ascii-font-family:
  Consolas;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:Consolas;
  mso-bidi-font-family:Consolas;color:#3F7F5F;mso-font-kerning:0pt'>，表示不监听，而服务器也不需要监听，对比一下客户端的</span><span
  lang=EN-US style='font-size:8.0pt;font-family:Consolas;mso-bidi-font-family:
  Consolas;mso-font-kerning:0pt'><o:p></o:p></span></p>
  <p class=MsoNormal style='line-height:normal;mso-pagination:none;mso-layout-grid-align:
  none;text-autospace:none'><span lang=EN-US style='font-size:8.0pt;font-family:
  Consolas;mso-bidi-font-family:Consolas;color:black;mso-font-kerning:0pt'><span
  style='mso-tab-count:2'>         </span></span><span lang=EN-US
  style='font-size:8.0pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  color:#0000C0;mso-font-kerning:0pt'>zkClient</span><span lang=EN-US
  style='font-size:8.0pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  color:black;mso-font-kerning:0pt'> = </span><b><span lang=EN-US
  style='font-size:8.0pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  color:#7F0055;mso-font-kerning:0pt'>new</span></b><span lang=EN-US
  style='font-size:8.0pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  color:black;mso-font-kerning:0pt'> ZooKeeper(</span><span lang=EN-US
  style='font-size:8.0pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  color:#0000C0;mso-font-kerning:0pt'>connectString</span><span lang=EN-US
  style='font-size:8.0pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  color:black;mso-font-kerning:0pt'> , </span><span lang=EN-US
  style='font-size:8.0pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  color:#0000C0;mso-font-kerning:0pt'>sessionTimeout</span><span lang=EN-US
  style='font-size:8.0pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  color:black;mso-font-kerning:0pt'>, </span><b><span lang=EN-US
  style='font-size:8.0pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  color:#7F0055;mso-font-kerning:0pt'>null</span></b><span lang=EN-US
  style='font-size:8.0pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  color:black;mso-font-kerning:0pt'>);</span><span lang=EN-US style='font-size:
  8.0pt;font-family:Consolas;mso-bidi-font-family:Consolas;mso-font-kerning:
  0pt'><o:p></o:p></span></p>
  <p class=MsoNormal style='line-height:normal;mso-pagination:none;mso-layout-grid-align:
  none;text-autospace:none'><span lang=EN-US style='font-size:8.0pt;font-family:
  Consolas;mso-bidi-font-family:Consolas;color:black;mso-font-kerning:0pt'><span
  style='mso-tab-count:1'>     </span>}</span><span lang=EN-US
  style='font-size:8.0pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  mso-font-kerning:0pt'><o:p></o:p></span></p>
  <p class=MsoNormal style='line-height:normal;mso-pagination:none;mso-layout-grid-align:
  none;text-autospace:none'><span lang=EN-US style='font-size:8.0pt;font-family:
  Consolas;mso-bidi-font-family:Consolas;mso-font-kerning:0pt'><o:p>&nbsp;</o:p></span></p>
  <p class=MsoNormal style='line-height:normal;mso-pagination:none;mso-layout-grid-align:
  none;text-autospace:none'><span lang=EN-US style='font-size:8.0pt;font-family:
  Consolas;mso-bidi-font-family:Consolas;color:black;mso-font-kerning:0pt'><span
  style='mso-tab-count:1'>     </span></span><b><span lang=EN-US
  style='font-size:8.0pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  color:#7F0055;mso-font-kerning:0pt'>private</span></b><span lang=EN-US
  style='font-size:8.0pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  color:black;mso-font-kerning:0pt'> </span><b><span lang=EN-US
  style='font-size:8.0pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  color:#7F0055;mso-font-kerning:0pt'>void</span></b><span lang=EN-US
  style='font-size:8.0pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  color:black;mso-font-kerning:0pt'> register(String </span><span lang=EN-US
  style='font-size:8.0pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  color:#6A3E3E;mso-font-kerning:0pt'>hostname</span><span lang=EN-US
  style='font-size:8.0pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  color:black;mso-font-kerning:0pt'>) </span><b><span lang=EN-US
  style='font-size:8.0pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  color:#7F0055;mso-font-kerning:0pt'>throws</span></b><span lang=EN-US
  style='font-size:8.0pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  color:black;mso-font-kerning:0pt'> KeeperException, InterruptedException {</span><span
  lang=EN-US style='font-size:8.0pt;font-family:Consolas;mso-bidi-font-family:
  Consolas;mso-font-kerning:0pt'><o:p></o:p></span></p>
  <p class=MsoNormal style='line-height:normal;mso-pagination:none;mso-layout-grid-align:
  none;text-autospace:none'><span lang=EN-US style='font-size:8.0pt;font-family:
  Consolas;mso-bidi-font-family:Consolas;color:black;mso-font-kerning:0pt'><span
  style='mso-tab-count:2'>         </span></span><span lang=EN-US
  style='font-size:8.0pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  color:#3F7F5F;mso-font-kerning:0pt'>// hostname.getBytes()=</span><span
  style='font-size:8.0pt;font-family:宋体;mso-ascii-font-family:Consolas;
  mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:Consolas;
  mso-bidi-font-family:Consolas;color:#3F7F5F;mso-font-kerning:0pt'>节点的内容是主机名；</span><span
  lang=EN-US style='font-size:8.0pt;font-family:Consolas;mso-bidi-font-family:
  Consolas;color:#3F7F5F;mso-font-kerning:0pt'> EPHEMERAL_SEQUENTIAL=</span><span
  style='font-size:8.0pt;font-family:宋体;mso-ascii-font-family:Consolas;
  mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:Consolas;
  mso-bidi-font-family:Consolas;color:#3F7F5F;mso-font-kerning:0pt'>临时的带序号的节点，可以多次创建（最终的结果是</span><span
  lang=EN-US style='font-size:8.0pt;font-family:Consolas;mso-bidi-font-family:
  Consolas;color:#3F7F5F;mso-font-kerning:0pt'>/serverList/server1+</span><span
  style='font-size:8.0pt;font-family:宋体;mso-ascii-font-family:Consolas;
  mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:Consolas;
  mso-bidi-font-family:Consolas;color:#3F7F5F;mso-font-kerning:0pt'>一串序号）</span><span
  lang=EN-US style='font-size:8.0pt;font-family:Consolas;mso-bidi-font-family:
  Consolas;mso-font-kerning:0pt'><o:p></o:p></span></p>
  <p class=MsoNormal style='line-height:normal;mso-pagination:none;mso-layout-grid-align:
  none;text-autospace:none'><span lang=EN-US style='font-size:8.0pt;font-family:
  Consolas;mso-bidi-font-family:Consolas;color:black;mso-font-kerning:0pt'><span
  style='mso-tab-count:2'>         </span></span><span lang=EN-US
  style='font-size:8.0pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  color:#0000C0;mso-font-kerning:0pt'>zkClient</span><span lang=EN-US
  style='font-size:8.0pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  color:black;mso-font-kerning:0pt'>.create(</span><span lang=EN-US
  style='font-size:8.0pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  color:#2A00FF;mso-font-kerning:0pt'>&quot;/serverList/server1&quot;</span><span
  lang=EN-US style='font-size:8.0pt;font-family:Consolas;mso-bidi-font-family:
  Consolas;color:black;mso-font-kerning:0pt'>, </span><span lang=EN-US
  style='font-size:8.0pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  color:#6A3E3E;mso-font-kerning:0pt'>hostname</span><span lang=EN-US
  style='font-size:8.0pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  color:black;mso-font-kerning:0pt'>.getBytes(), Ids.</span><b><i><span
  lang=EN-US style='font-size:8.0pt;font-family:Consolas;mso-bidi-font-family:
  Consolas;color:#0000C0;mso-font-kerning:0pt'>OPEN_ACL_UNSAFE</span></i></b><span
  lang=EN-US style='font-size:8.0pt;font-family:Consolas;mso-bidi-font-family:
  Consolas;color:black;mso-font-kerning:0pt'>, CreateMode.</span><b><i><span
  lang=EN-US style='font-size:8.0pt;font-family:Consolas;mso-bidi-font-family:
  Consolas;color:#0000C0;mso-font-kerning:0pt'>EPHEMERAL_SEQUENTIAL</span></i></b><span
  lang=EN-US style='font-size:8.0pt;font-family:Consolas;mso-bidi-font-family:
  Consolas;color:black;mso-font-kerning:0pt'>);</span><span lang=EN-US
  style='font-size:8.0pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  mso-font-kerning:0pt'><o:p></o:p></span></p>
  <p class=MsoNormal style='line-height:normal;mso-pagination:none;mso-layout-grid-align:
  none;text-autospace:none'><span lang=EN-US style='font-size:8.0pt;font-family:
  Consolas;mso-bidi-font-family:Consolas;color:black;mso-font-kerning:0pt'><span
  style='mso-tab-count:2'>         </span></span><span lang=EN-US
  style='font-size:8.0pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  mso-font-kerning:0pt'><o:p></o:p></span></p>
  <p class=MsoNormal style='line-height:normal;mso-pagination:none;mso-layout-grid-align:
  none;text-autospace:none'><span lang=EN-US style='font-size:8.0pt;font-family:
  Consolas;mso-bidi-font-family:Consolas;color:black;mso-font-kerning:0pt'><span
  style='mso-tab-count:2'>         </span>System.</span><b><i><span lang=EN-US
  style='font-size:8.0pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  color:#0000C0;mso-font-kerning:0pt'>out</span></i></b><span lang=EN-US
  style='font-size:8.0pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  color:black;mso-font-kerning:0pt'>.println(</span><span lang=EN-US
  style='font-size:8.0pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  color:#2A00FF;mso-font-kerning:0pt'>&quot;created!&quot;</span><span
  lang=EN-US style='font-size:8.0pt;font-family:Consolas;mso-bidi-font-family:
  Consolas;color:black;mso-font-kerning:0pt'>);</span><span lang=EN-US
  style='font-size:8.0pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  mso-font-kerning:0pt'><o:p></o:p></span></p>
  <p class=MsoNormal style='line-height:normal;mso-pagination:none;mso-layout-grid-align:
  none;text-autospace:none'><span lang=EN-US style='font-size:8.0pt;font-family:
  Consolas;mso-bidi-font-family:Consolas;color:black;mso-font-kerning:0pt'><span
  style='mso-tab-count:1'>     </span>}</span><span lang=EN-US
  style='font-size:8.0pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  mso-font-kerning:0pt'><o:p></o:p></span></p>
  <p class=MsoNormal style='line-height:normal;mso-pagination:none;mso-layout-grid-align:
  none;text-autospace:none'><span lang=EN-US style='font-size:8.0pt;font-family:
  Consolas;mso-bidi-font-family:Consolas;color:black;mso-font-kerning:0pt'>}</span><span
  lang=EN-US style='font-size:8.0pt;font-family:Consolas;mso-bidi-font-family:
  Consolas;mso-font-kerning:0pt'><o:p></o:p></span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US>DistributeClient</span></p>

<table class=MsoTableGrid border=1 cellspacing=0 cellpadding=0
 style='border-collapse:collapse;border:none;mso-border-alt:solid windowtext .5pt;
 mso-yfti-tbllook:1184;mso-padding-alt:0cm 5.4pt 0cm 5.4pt'>
 <tr style='mso-yfti-irow:0;mso-yfti-firstrow:yes;mso-yfti-lastrow:yes'>
  <td width=755 valign=top style='width:566.4pt;border:solid windowtext 1.0pt;
  mso-border-alt:solid windowtext .5pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal style='line-height:normal;mso-pagination:none;mso-layout-grid-align:
  none;text-autospace:none'><b><span lang=EN-US style='font-size:7.5pt;
  font-family:Consolas;mso-bidi-font-family:Consolas;color:#7F0055;mso-font-kerning:
  0pt'>package</span></b><span lang=EN-US style='font-size:7.5pt;font-family:
  Consolas;mso-bidi-font-family:Consolas;color:black;mso-font-kerning:0pt'>
  _02;</span><span lang=EN-US style='font-size:7.5pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;mso-font-kerning:0pt'><o:p></o:p></span></p>
  <p class=MsoNormal style='line-height:normal;mso-pagination:none;mso-layout-grid-align:
  none;text-autospace:none'><span lang=EN-US style='font-size:7.5pt;font-family:
  Consolas;mso-bidi-font-family:Consolas;mso-font-kerning:0pt'><o:p>&nbsp;</o:p></span></p>
  <p class=MsoNormal style='line-height:normal;mso-pagination:none;mso-layout-grid-align:
  none;text-autospace:none'><b><span lang=EN-US style='font-size:7.5pt;
  font-family:Consolas;mso-bidi-font-family:Consolas;color:#7F0055;mso-font-kerning:
  0pt'>import</span></b><span lang=EN-US style='font-size:7.5pt;font-family:
  Consolas;mso-bidi-font-family:Consolas;color:black;mso-font-kerning:0pt'>
  java.io.IOException;</span><span lang=EN-US style='font-size:7.5pt;
  font-family:Consolas;mso-bidi-font-family:Consolas;mso-font-kerning:0pt'><o:p></o:p></span></p>
  <p class=MsoNormal style='line-height:normal;mso-pagination:none;mso-layout-grid-align:
  none;text-autospace:none'><b><span lang=EN-US style='font-size:7.5pt;
  font-family:Consolas;mso-bidi-font-family:Consolas;color:#7F0055;mso-font-kerning:
  0pt'>import</span></b><span lang=EN-US style='font-size:7.5pt;font-family:
  Consolas;mso-bidi-font-family:Consolas;color:black;mso-font-kerning:0pt'>
  java.util.ArrayList;</span><span lang=EN-US style='font-size:7.5pt;
  font-family:Consolas;mso-bidi-font-family:Consolas;mso-font-kerning:0pt'><o:p></o:p></span></p>
  <p class=MsoNormal style='line-height:normal;mso-pagination:none;mso-layout-grid-align:
  none;text-autospace:none'><b><span lang=EN-US style='font-size:7.5pt;
  font-family:Consolas;mso-bidi-font-family:Consolas;color:#7F0055;mso-font-kerning:
  0pt'>import</span></b><span lang=EN-US style='font-size:7.5pt;font-family:
  Consolas;mso-bidi-font-family:Consolas;color:black;mso-font-kerning:0pt'>
  java.util.List;</span><span lang=EN-US style='font-size:7.5pt;font-family:
  Consolas;mso-bidi-font-family:Consolas;mso-font-kerning:0pt'><o:p></o:p></span></p>
  <p class=MsoNormal style='line-height:normal;mso-pagination:none;mso-layout-grid-align:
  none;text-autospace:none'><span lang=EN-US style='font-size:7.5pt;font-family:
  Consolas;mso-bidi-font-family:Consolas;mso-font-kerning:0pt'><o:p>&nbsp;</o:p></span></p>
  <p class=MsoNormal style='line-height:normal;mso-pagination:none;mso-layout-grid-align:
  none;text-autospace:none'><b><span lang=EN-US style='font-size:7.5pt;
  font-family:Consolas;mso-bidi-font-family:Consolas;color:#7F0055;mso-font-kerning:
  0pt'>import</span></b><span lang=EN-US style='font-size:7.5pt;font-family:
  Consolas;mso-bidi-font-family:Consolas;color:black;mso-font-kerning:0pt'>
  org.apache.zookeeper.KeeperException;</span><span lang=EN-US
  style='font-size:7.5pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  mso-font-kerning:0pt'><o:p></o:p></span></p>
  <p class=MsoNormal style='line-height:normal;mso-pagination:none;mso-layout-grid-align:
  none;text-autospace:none'><b><span lang=EN-US style='font-size:7.5pt;
  font-family:Consolas;mso-bidi-font-family:Consolas;color:#7F0055;mso-font-kerning:
  0pt'>import</span></b><span lang=EN-US style='font-size:7.5pt;font-family:
  Consolas;mso-bidi-font-family:Consolas;color:black;mso-font-kerning:0pt'>
  org.apache.zookeeper.WatchedEvent;</span><span lang=EN-US style='font-size:
  7.5pt;font-family:Consolas;mso-bidi-font-family:Consolas;mso-font-kerning:
  0pt'><o:p></o:p></span></p>
  <p class=MsoNormal style='line-height:normal;mso-pagination:none;mso-layout-grid-align:
  none;text-autospace:none'><b><span lang=EN-US style='font-size:7.5pt;
  font-family:Consolas;mso-bidi-font-family:Consolas;color:#7F0055;mso-font-kerning:
  0pt'>import</span></b><span lang=EN-US style='font-size:7.5pt;font-family:
  Consolas;mso-bidi-font-family:Consolas;color:black;mso-font-kerning:0pt'>
  org.apache.zookeeper.Watcher;</span><span lang=EN-US style='font-size:7.5pt;
  font-family:Consolas;mso-bidi-font-family:Consolas;mso-font-kerning:0pt'><o:p></o:p></span></p>
  <p class=MsoNormal style='line-height:normal;mso-pagination:none;mso-layout-grid-align:
  none;text-autospace:none'><b><span lang=EN-US style='font-size:7.5pt;
  font-family:Consolas;mso-bidi-font-family:Consolas;color:#7F0055;mso-font-kerning:
  0pt'>import</span></b><span lang=EN-US style='font-size:7.5pt;font-family:
  Consolas;mso-bidi-font-family:Consolas;color:black;mso-font-kerning:0pt'>
  org.apache.zookeeper.ZooKeeper;</span><span lang=EN-US style='font-size:7.5pt;
  font-family:Consolas;mso-bidi-font-family:Consolas;mso-font-kerning:0pt'><o:p></o:p></span></p>
  <p class=MsoNormal style='line-height:normal;mso-pagination:none;mso-layout-grid-align:
  none;text-autospace:none'><span lang=EN-US style='font-size:7.5pt;font-family:
  Consolas;mso-bidi-font-family:Consolas;mso-font-kerning:0pt'><o:p>&nbsp;</o:p></span></p>
  <p class=MsoNormal style='line-height:normal;mso-pagination:none;mso-layout-grid-align:
  none;text-autospace:none'><b><span lang=EN-US style='font-size:7.5pt;
  font-family:Consolas;mso-bidi-font-family:Consolas;color:#7F0055;mso-font-kerning:
  0pt'>public</span></b><span lang=EN-US style='font-size:7.5pt;font-family:
  Consolas;mso-bidi-font-family:Consolas;color:black;mso-font-kerning:0pt'> </span><b><span
  lang=EN-US style='font-size:7.5pt;font-family:Consolas;mso-bidi-font-family:
  Consolas;color:#7F0055;mso-font-kerning:0pt'>class</span></b><span
  lang=EN-US style='font-size:7.5pt;font-family:Consolas;mso-bidi-font-family:
  Consolas;color:black;mso-font-kerning:0pt'> <span style='background:lightgrey;
  mso-highlight:lightgrey'>DistributeClient</span> {</span><span lang=EN-US
  style='font-size:7.5pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  mso-font-kerning:0pt'><o:p></o:p></span></p>
  <p class=MsoNormal style='line-height:normal;mso-pagination:none;mso-layout-grid-align:
  none;text-autospace:none'><span lang=EN-US style='font-size:7.5pt;font-family:
  Consolas;mso-bidi-font-family:Consolas;mso-font-kerning:0pt'><o:p>&nbsp;</o:p></span></p>
  <p class=MsoNormal style='line-height:normal;mso-pagination:none;mso-layout-grid-align:
  none;text-autospace:none'><span lang=EN-US style='font-size:7.5pt;font-family:
  Consolas;mso-bidi-font-family:Consolas;color:black;mso-font-kerning:0pt'><span
  style='mso-tab-count:1'>     </span></span><b><span lang=EN-US
  style='font-size:7.5pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  color:#7F0055;mso-font-kerning:0pt'>public</span></b><span lang=EN-US
  style='font-size:7.5pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  color:black;mso-font-kerning:0pt'> </span><b><span lang=EN-US
  style='font-size:7.5pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  color:#7F0055;mso-font-kerning:0pt'>static</span></b><span lang=EN-US
  style='font-size:7.5pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  color:black;mso-font-kerning:0pt'> </span><b><span lang=EN-US
  style='font-size:7.5pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  color:#7F0055;mso-font-kerning:0pt'>void</span></b><span lang=EN-US
  style='font-size:7.5pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  color:black;mso-font-kerning:0pt'> main(String[] </span><span lang=EN-US
  style='font-size:7.5pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  color:#6A3E3E;mso-font-kerning:0pt'>args</span><span lang=EN-US
  style='font-size:7.5pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  color:black;mso-font-kerning:0pt'>) </span><b><span lang=EN-US
  style='font-size:7.5pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  color:#7F0055;mso-font-kerning:0pt'>throws</span></b><span lang=EN-US
  style='font-size:7.5pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  color:black;mso-font-kerning:0pt'> Exception {</span><span lang=EN-US
  style='font-size:7.5pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  mso-font-kerning:0pt'><o:p></o:p></span></p>
  <p class=MsoNormal style='line-height:normal;mso-pagination:none;mso-layout-grid-align:
  none;text-autospace:none'><span lang=EN-US style='font-size:7.5pt;font-family:
  Consolas;mso-bidi-font-family:Consolas;color:black;mso-font-kerning:0pt'><span
  style='mso-tab-count:2'>         </span><span style='background:lightgrey;
  mso-highlight:lightgrey'>DistributeClient</span> </span><span lang=EN-US
  style='font-size:7.5pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  color:#6A3E3E;mso-font-kerning:0pt'>client</span><span lang=EN-US
  style='font-size:7.5pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  color:black;mso-font-kerning:0pt'> = </span><b><span lang=EN-US
  style='font-size:7.5pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  color:#7F0055;mso-font-kerning:0pt'>new</span></b><span lang=EN-US
  style='font-size:7.5pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  color:black;mso-font-kerning:0pt'> <span style='background:lightgrey;
  mso-highlight:lightgrey'>DistributeClient</span>();</span><span lang=EN-US
  style='font-size:7.5pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  mso-font-kerning:0pt'><o:p></o:p></span></p>
  <p class=MsoNormal style='line-height:normal;mso-pagination:none;mso-layout-grid-align:
  none;text-autospace:none'><span lang=EN-US style='font-size:7.5pt;font-family:
  Consolas;mso-bidi-font-family:Consolas;mso-font-kerning:0pt'><o:p>&nbsp;</o:p></span></p>
  <p class=MsoNormal style='line-height:normal;mso-pagination:none;mso-layout-grid-align:
  none;text-autospace:none'><span lang=EN-US style='font-size:7.5pt;font-family:
  Consolas;mso-bidi-font-family:Consolas;color:black;mso-font-kerning:0pt'><span
  style='mso-tab-count:2'>         </span></span><span lang=EN-US
  style='font-size:7.5pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  color:#3F7F5F;mso-font-kerning:0pt'>// 1</span><span style='font-size:7.5pt;
  font-family:宋体;mso-ascii-font-family:Consolas;mso-fareast-theme-font:minor-fareast;
  mso-hansi-font-family:Consolas;mso-bidi-font-family:Consolas;color:#3F7F5F;
  mso-font-kerning:0pt'>、连接</span><u><span lang=EN-US style='font-size:7.5pt;
  font-family:Consolas;mso-bidi-font-family:Consolas;color:#3F7F5F;mso-font-kerning:
  0pt'>Zookeeper</span></u><span style='font-size:7.5pt;font-family:宋体;
  mso-ascii-font-family:Consolas;mso-fareast-theme-font:minor-fareast;
  mso-hansi-font-family:Consolas;mso-bidi-font-family:Consolas;color:#3F7F5F;
  mso-font-kerning:0pt'>集群</span><span lang=EN-US style='font-size:7.5pt;
  font-family:Consolas;mso-bidi-font-family:Consolas;mso-font-kerning:0pt'><o:p></o:p></span></p>
  <p class=MsoNormal style='line-height:normal;mso-pagination:none;mso-layout-grid-align:
  none;text-autospace:none'><span lang=EN-US style='font-size:7.5pt;font-family:
  Consolas;mso-bidi-font-family:Consolas;color:black;mso-font-kerning:0pt'><span
  style='mso-tab-count:2'>         </span></span><span lang=EN-US
  style='font-size:7.5pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  color:#6A3E3E;mso-font-kerning:0pt'>client</span><span lang=EN-US
  style='font-size:7.5pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  color:black;mso-font-kerning:0pt'>.getConnect();</span><span lang=EN-US
  style='font-size:7.5pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  mso-font-kerning:0pt'><o:p></o:p></span></p>
  <p class=MsoNormal style='line-height:normal;mso-pagination:none;mso-layout-grid-align:
  none;text-autospace:none'><span lang=EN-US style='font-size:7.5pt;font-family:
  Consolas;mso-bidi-font-family:Consolas;mso-font-kerning:0pt'><o:p>&nbsp;</o:p></span></p>
  <p class=MsoNormal style='line-height:normal;mso-pagination:none;mso-layout-grid-align:
  none;text-autospace:none'><span lang=EN-US style='font-size:7.5pt;font-family:
  Consolas;mso-bidi-font-family:Consolas;color:black;mso-font-kerning:0pt'><span
  style='mso-tab-count:2'>         </span></span><span lang=EN-US
  style='font-size:7.5pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  color:#3F7F5F;mso-font-kerning:0pt'>// </span><span style='font-size:7.5pt;
  font-family:宋体;mso-ascii-font-family:Consolas;mso-fareast-theme-font:minor-fareast;
  mso-hansi-font-family:Consolas;mso-bidi-font-family:Consolas;color:#3F7F5F;
  mso-font-kerning:0pt'>睡一下，等待连接（不然，还没有获取到连接，就操作了会报错）</span><span lang=EN-US
  style='font-size:7.5pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  mso-font-kerning:0pt'><o:p></o:p></span></p>
  <p class=MsoNormal style='line-height:normal;mso-pagination:none;mso-layout-grid-align:
  none;text-autospace:none'><span lang=EN-US style='font-size:7.5pt;font-family:
  Consolas;mso-bidi-font-family:Consolas;color:black;mso-font-kerning:0pt'><span
  style='mso-tab-count:2'>         </span>Thread.<i>sleep</i>(5000);</span><span
  lang=EN-US style='font-size:7.5pt;font-family:Consolas;mso-bidi-font-family:
  Consolas;mso-font-kerning:0pt'><o:p></o:p></span></p>
  <p class=MsoNormal style='line-height:normal;mso-pagination:none;mso-layout-grid-align:
  none;text-autospace:none'><span lang=EN-US style='font-size:7.5pt;font-family:
  Consolas;mso-bidi-font-family:Consolas;mso-font-kerning:0pt'><o:p>&nbsp;</o:p></span></p>
  <p class=MsoNormal style='line-height:normal;mso-pagination:none;mso-layout-grid-align:
  none;text-autospace:none'><span lang=EN-US style='font-size:7.5pt;font-family:
  Consolas;mso-bidi-font-family:Consolas;color:black;mso-font-kerning:0pt'><span
  style='mso-tab-count:2'>         </span></span><span lang=EN-US
  style='font-size:7.5pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  color:#3F7F5F;mso-font-kerning:0pt'>// 2</span><span style='font-size:7.5pt;
  font-family:宋体;mso-ascii-font-family:Consolas;mso-fareast-theme-font:minor-fareast;
  mso-hansi-font-family:Consolas;mso-bidi-font-family:Consolas;color:#3F7F5F;
  mso-font-kerning:0pt'>、获取子节点并监听其数据变化</span><span lang=EN-US style='font-size:
  7.5pt;font-family:Consolas;mso-bidi-font-family:Consolas;mso-font-kerning:
  0pt'><o:p></o:p></span></p>
  <p class=MsoNormal style='line-height:normal;mso-pagination:none;mso-layout-grid-align:
  none;text-autospace:none'><span lang=EN-US style='font-size:7.5pt;font-family:
  Consolas;mso-bidi-font-family:Consolas;color:black;mso-font-kerning:0pt'><span
  style='mso-tab-count:2'>         </span></span><span lang=EN-US
  style='font-size:7.5pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  color:#6A3E3E;mso-font-kerning:0pt'>client</span><span lang=EN-US
  style='font-size:7.5pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  color:black;mso-font-kerning:0pt'>.getChildrenAndWatch();</span><span
  lang=EN-US style='font-size:7.5pt;font-family:Consolas;mso-bidi-font-family:
  Consolas;mso-font-kerning:0pt'><o:p></o:p></span></p>
  <p class=MsoNormal style='line-height:normal;mso-pagination:none;mso-layout-grid-align:
  none;text-autospace:none'><span lang=EN-US style='font-size:7.5pt;font-family:
  Consolas;mso-bidi-font-family:Consolas;mso-font-kerning:0pt'><o:p>&nbsp;</o:p></span></p>
  <p class=MsoNormal style='line-height:normal;mso-pagination:none;mso-layout-grid-align:
  none;text-autospace:none'><span lang=EN-US style='font-size:7.5pt;font-family:
  Consolas;mso-bidi-font-family:Consolas;color:black;mso-font-kerning:0pt'><span
  style='mso-tab-count:2'>         </span>Thread.<i>sleep</i>(Integer.</span><b><i><span
  lang=EN-US style='font-size:7.5pt;font-family:Consolas;mso-bidi-font-family:
  Consolas;color:#0000C0;mso-font-kerning:0pt'>MAX_VALUE</span></i></b><span
  lang=EN-US style='font-size:7.5pt;font-family:Consolas;mso-bidi-font-family:
  Consolas;color:black;mso-font-kerning:0pt'>);</span><span lang=EN-US
  style='font-size:7.5pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  mso-font-kerning:0pt'><o:p></o:p></span></p>
  <p class=MsoNormal style='line-height:normal;mso-pagination:none;mso-layout-grid-align:
  none;text-autospace:none'><span lang=EN-US style='font-size:7.5pt;font-family:
  Consolas;mso-bidi-font-family:Consolas;color:black;mso-font-kerning:0pt'><span
  style='mso-tab-count:1'>     </span>}</span><span lang=EN-US
  style='font-size:7.5pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  mso-font-kerning:0pt'><o:p></o:p></span></p>
  <p class=MsoNormal style='line-height:normal;mso-pagination:none;mso-layout-grid-align:
  none;text-autospace:none'><span lang=EN-US style='font-size:7.5pt;font-family:
  Consolas;mso-bidi-font-family:Consolas;mso-font-kerning:0pt'><o:p>&nbsp;</o:p></span></p>
  <p class=MsoNormal style='line-height:normal;mso-pagination:none;mso-layout-grid-align:
  none;text-autospace:none'><span lang=EN-US style='font-size:7.5pt;font-family:
  Consolas;mso-bidi-font-family:Consolas;color:black;mso-font-kerning:0pt'><span
  style='mso-tab-count:1'>     </span></span><span lang=EN-US style='font-size:
  7.5pt;font-family:Consolas;mso-bidi-font-family:Consolas;color:#3F7F5F;
  mso-font-kerning:0pt'>// <u>zk</u></span><span style='font-size:7.5pt;
  font-family:宋体;mso-ascii-font-family:Consolas;mso-fareast-theme-font:minor-fareast;
  mso-hansi-font-family:Consolas;mso-bidi-font-family:Consolas;color:#3F7F5F;
  mso-font-kerning:0pt'>集群</span><span lang=EN-US style='font-size:7.5pt;
  font-family:Consolas;mso-bidi-font-family:Consolas;mso-font-kerning:0pt'><o:p></o:p></span></p>
  <p class=MsoNormal style='line-height:normal;mso-pagination:none;mso-layout-grid-align:
  none;text-autospace:none'><span lang=EN-US style='font-size:7.5pt;font-family:
  Consolas;mso-bidi-font-family:Consolas;color:black;mso-font-kerning:0pt'><span
  style='mso-tab-count:1'>     </span></span><b><span lang=EN-US
  style='font-size:7.5pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  color:#7F0055;mso-font-kerning:0pt'>private</span></b><span lang=EN-US
  style='font-size:7.5pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  color:black;mso-font-kerning:0pt'> String </span><span lang=EN-US
  style='font-size:7.5pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  color:#0000C0;mso-font-kerning:0pt'>connectString</span><span lang=EN-US
  style='font-size:7.5pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  color:black;mso-font-kerning:0pt'> = </span><span lang=EN-US
  style='font-size:7.5pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  color:#2A00FF;mso-font-kerning:0pt'>&quot;192.168.56.101:2181,
  192.168.56.102:2181, 192.168.56.103:2181&quot;</span><span lang=EN-US
  style='font-size:7.5pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  color:black;mso-font-kerning:0pt'>;</span><span lang=EN-US style='font-size:
  7.5pt;font-family:Consolas;mso-bidi-font-family:Consolas;mso-font-kerning:
  0pt'><o:p></o:p></span></p>
  <p class=MsoNormal style='line-height:normal;mso-pagination:none;mso-layout-grid-align:
  none;text-autospace:none'><span lang=EN-US style='font-size:7.5pt;font-family:
  Consolas;mso-bidi-font-family:Consolas;color:black;mso-font-kerning:0pt'><span
  style='mso-tab-count:1'>     </span></span><span lang=EN-US style='font-size:
  7.5pt;font-family:Consolas;mso-bidi-font-family:Consolas;color:#3F7F5F;
  mso-font-kerning:0pt'>// </span><span style='font-size:7.5pt;font-family:
  宋体;mso-ascii-font-family:Consolas;mso-fareast-theme-font:minor-fareast;
  mso-hansi-font-family:Consolas;mso-bidi-font-family:Consolas;color:#3F7F5F;
  mso-font-kerning:0pt'>超时时间</span><span lang=EN-US style='font-size:7.5pt;
  font-family:Consolas;mso-bidi-font-family:Consolas;mso-font-kerning:0pt'><o:p></o:p></span></p>
  <p class=MsoNormal style='line-height:normal;mso-pagination:none;mso-layout-grid-align:
  none;text-autospace:none'><span lang=EN-US style='font-size:7.5pt;font-family:
  Consolas;mso-bidi-font-family:Consolas;color:black;mso-font-kerning:0pt'><span
  style='mso-tab-count:1'>     </span></span><b><span lang=EN-US
  style='font-size:7.5pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  color:#7F0055;mso-font-kerning:0pt'>private</span></b><span lang=EN-US
  style='font-size:7.5pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  color:black;mso-font-kerning:0pt'> </span><b><span lang=EN-US
  style='font-size:7.5pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  color:#7F0055;mso-font-kerning:0pt'>int</span></b><span lang=EN-US
  style='font-size:7.5pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  color:black;mso-font-kerning:0pt'> </span><span lang=EN-US style='font-size:
  7.5pt;font-family:Consolas;mso-bidi-font-family:Consolas;color:#0000C0;
  mso-font-kerning:0pt'>sessionTimeout</span><span lang=EN-US style='font-size:
  7.5pt;font-family:Consolas;mso-bidi-font-family:Consolas;color:black;
  mso-font-kerning:0pt'> = 5000;</span><span lang=EN-US style='font-size:7.5pt;
  font-family:Consolas;mso-bidi-font-family:Consolas;mso-font-kerning:0pt'><o:p></o:p></span></p>
  <p class=MsoNormal style='line-height:normal;mso-pagination:none;mso-layout-grid-align:
  none;text-autospace:none'><span lang=EN-US style='font-size:7.5pt;font-family:
  Consolas;mso-bidi-font-family:Consolas;color:black;mso-font-kerning:0pt'><span
  style='mso-tab-count:1'>     </span></span><span lang=EN-US style='font-size:
  7.5pt;font-family:Consolas;mso-bidi-font-family:Consolas;color:#3F7F5F;
  mso-font-kerning:0pt'>// </span><span style='font-size:7.5pt;font-family:
  宋体;mso-ascii-font-family:Consolas;mso-fareast-theme-font:minor-fareast;
  mso-hansi-font-family:Consolas;mso-bidi-font-family:Consolas;color:#3F7F5F;
  mso-font-kerning:0pt'>对于</span><u><span lang=EN-US style='font-size:7.5pt;
  font-family:Consolas;mso-bidi-font-family:Consolas;color:#3F7F5F;mso-font-kerning:
  0pt'>zk</span></u><span style='font-size:7.5pt;font-family:宋体;mso-ascii-font-family:
  Consolas;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:Consolas;
  mso-bidi-font-family:Consolas;color:#3F7F5F;mso-font-kerning:0pt'>来说，是</span><span
  lang=EN-US style='font-size:7.5pt;font-family:Consolas;mso-bidi-font-family:
  Consolas;color:#3F7F5F;mso-font-kerning:0pt'>Client</span><span lang=EN-US
  style='font-size:7.5pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  mso-font-kerning:0pt'><o:p></o:p></span></p>
  <p class=MsoNormal style='line-height:normal;mso-pagination:none;mso-layout-grid-align:
  none;text-autospace:none'><span lang=EN-US style='font-size:7.5pt;font-family:
  Consolas;mso-bidi-font-family:Consolas;color:black;mso-font-kerning:0pt'><span
  style='mso-tab-count:1'>     </span></span><b><span lang=EN-US
  style='font-size:7.5pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  color:#7F0055;mso-font-kerning:0pt'>private</span></b><span lang=EN-US
  style='font-size:7.5pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  color:black;mso-font-kerning:0pt'> ZooKeeper </span><span lang=EN-US
  style='font-size:7.5pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  color:#0000C0;mso-font-kerning:0pt'>zkClient</span><span lang=EN-US
  style='font-size:7.5pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  color:black;mso-font-kerning:0pt'>;</span><span lang=EN-US style='font-size:
  7.5pt;font-family:Consolas;mso-bidi-font-family:Consolas;mso-font-kerning:
  0pt'><o:p></o:p></span></p>
  <p class=MsoNormal style='line-height:normal;mso-pagination:none;mso-layout-grid-align:
  none;text-autospace:none'><span lang=EN-US style='font-size:7.5pt;font-family:
  Consolas;mso-bidi-font-family:Consolas;mso-font-kerning:0pt'><o:p>&nbsp;</o:p></span></p>
  <p class=MsoNormal style='line-height:normal;mso-pagination:none;mso-layout-grid-align:
  none;text-autospace:none'><span lang=EN-US style='font-size:7.5pt;font-family:
  Consolas;mso-bidi-font-family:Consolas;color:black;mso-font-kerning:0pt'><span
  style='mso-tab-count:1'>     </span></span><b><span lang=EN-US
  style='font-size:7.5pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  color:#7F0055;mso-font-kerning:0pt'>private</span></b><span lang=EN-US
  style='font-size:7.5pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  color:black;mso-font-kerning:0pt'> </span><b><span lang=EN-US
  style='font-size:7.5pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  color:#7F0055;mso-font-kerning:0pt'>void</span></b><span lang=EN-US
  style='font-size:7.5pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  color:black;mso-font-kerning:0pt'> getConnect() </span><b><span lang=EN-US
  style='font-size:7.5pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  color:#7F0055;mso-font-kerning:0pt'>throws</span></b><span lang=EN-US
  style='font-size:7.5pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  color:black;mso-font-kerning:0pt'> IOException {</span><span lang=EN-US
  style='font-size:7.5pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  mso-font-kerning:0pt'><o:p></o:p></span></p>
  <p class=MsoNormal style='line-height:normal;mso-pagination:none;mso-layout-grid-align:
  none;text-autospace:none'><span lang=EN-US style='font-size:7.5pt;font-family:
  Consolas;mso-bidi-font-family:Consolas;color:black;mso-font-kerning:0pt'><span
  style='mso-tab-count:2'>         </span></span><span lang=EN-US
  style='font-size:7.5pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  color:#3F7F5F;mso-font-kerning:0pt'>// </span><span style='font-size:7.5pt;
  font-family:宋体;mso-ascii-font-family:Consolas;mso-fareast-theme-font:minor-fareast;
  mso-hansi-font-family:Consolas;mso-bidi-font-family:Consolas;color:#3F7F5F;
  mso-font-kerning:0pt'>获取连接的时候，就开始监听，当然这里有很多监听事件，但不细分处理</span><span
  lang=EN-US style='font-size:7.5pt;font-family:Consolas;mso-bidi-font-family:
  Consolas;mso-font-kerning:0pt'><o:p></o:p></span></p>
  <p class=MsoNormal style='line-height:normal;mso-pagination:none;mso-layout-grid-align:
  none;text-autospace:none'><span lang=EN-US style='font-size:7.5pt;font-family:
  Consolas;mso-bidi-font-family:Consolas;color:black;mso-font-kerning:0pt'><span
  style='mso-tab-count:2'>         </span></span><span lang=EN-US
  style='font-size:7.5pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  color:#0000C0;mso-font-kerning:0pt'>zkClient</span><span lang=EN-US
  style='font-size:7.5pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  color:black;mso-font-kerning:0pt'> = </span><b><span lang=EN-US
  style='font-size:7.5pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  color:#7F0055;mso-font-kerning:0pt'>new</span></b><span lang=EN-US
  style='font-size:7.5pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  color:black;mso-font-kerning:0pt'> ZooKeeper(</span><span lang=EN-US
  style='font-size:7.5pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  color:#0000C0;mso-font-kerning:0pt'>connectString</span><span lang=EN-US
  style='font-size:7.5pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  color:black;mso-font-kerning:0pt'>, </span><span lang=EN-US style='font-size:
  7.5pt;font-family:Consolas;mso-bidi-font-family:Consolas;color:#0000C0;
  mso-font-kerning:0pt'>sessionTimeout</span><span lang=EN-US style='font-size:
  7.5pt;font-family:Consolas;mso-bidi-font-family:Consolas;color:black;
  mso-font-kerning:0pt'>, </span><b><span lang=EN-US style='font-size:7.5pt;
  font-family:Consolas;mso-bidi-font-family:Consolas;color:#7F0055;mso-font-kerning:
  0pt'>new</span></b><span lang=EN-US style='font-size:7.5pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;color:black;mso-font-kerning:0pt'> Watcher() {</span><span
  lang=EN-US style='font-size:7.5pt;font-family:Consolas;mso-bidi-font-family:
  Consolas;mso-font-kerning:0pt'><o:p></o:p></span></p>
  <p class=MsoNormal style='line-height:normal;mso-pagination:none;mso-layout-grid-align:
  none;text-autospace:none'><span lang=EN-US style='font-size:7.5pt;font-family:
  Consolas;mso-bidi-font-family:Consolas;mso-font-kerning:0pt'><o:p>&nbsp;</o:p></span></p>
  <p class=MsoNormal style='line-height:normal;mso-pagination:none;mso-layout-grid-align:
  none;text-autospace:none'><span lang=EN-US style='font-size:7.5pt;font-family:
  Consolas;mso-bidi-font-family:Consolas;color:black;mso-font-kerning:0pt'><span
  style='mso-tab-count:3'>              </span></span><span lang=EN-US
  style='font-size:7.5pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  color:#3F7F5F;mso-font-kerning:0pt'>// </span><span style='font-size:7.5pt;
  font-family:宋体;mso-ascii-font-family:Consolas;mso-fareast-theme-font:minor-fareast;
  mso-hansi-font-family:Consolas;mso-bidi-font-family:Consolas;color:#3F7F5F;
  mso-font-kerning:0pt'>这里是全局监听，不管是连接的变化、节点的变化（但前提要开启监听）</span><span
  lang=EN-US style='font-size:7.5pt;font-family:Consolas;mso-bidi-font-family:
  Consolas;color:#3F7F5F;mso-font-kerning:0pt'>(</span><span style='font-size:
  7.5pt;font-family:宋体;mso-ascii-font-family:Consolas;mso-fareast-theme-font:
  minor-fareast;mso-hansi-font-family:Consolas;mso-bidi-font-family:Consolas;
  color:#3F7F5F;mso-font-kerning:0pt'>我推测的</span><span lang=EN-US
  style='font-size:7.5pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  color:#3F7F5F;mso-font-kerning:0pt'>)</span><span lang=EN-US
  style='font-size:7.5pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  mso-font-kerning:0pt'><o:p></o:p></span></p>
  <p class=MsoNormal style='line-height:normal;mso-pagination:none;mso-layout-grid-align:
  none;text-autospace:none'><span lang=EN-US style='font-size:7.5pt;font-family:
  Consolas;mso-bidi-font-family:Consolas;color:black;mso-font-kerning:0pt'><span
  style='mso-tab-count:3'>              </span></span><b><span lang=EN-US
  style='font-size:7.5pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  color:#7F0055;mso-font-kerning:0pt'>public</span></b><span lang=EN-US
  style='font-size:7.5pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  color:black;mso-font-kerning:0pt'> </span><b><span lang=EN-US
  style='font-size:7.5pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  color:#7F0055;mso-font-kerning:0pt'>void</span></b><span lang=EN-US
  style='font-size:7.5pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  color:black;mso-font-kerning:0pt'> process(WatchedEvent </span><span
  lang=EN-US style='font-size:7.5pt;font-family:Consolas;mso-bidi-font-family:
  Consolas;color:#6A3E3E;mso-font-kerning:0pt'>event</span><span lang=EN-US
  style='font-size:7.5pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  color:black;mso-font-kerning:0pt'>) {</span><span lang=EN-US
  style='font-size:7.5pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  mso-font-kerning:0pt'><o:p></o:p></span></p>
  <p class=MsoNormal style='line-height:normal;mso-pagination:none;mso-layout-grid-align:
  none;text-autospace:none'><span lang=EN-US style='font-size:7.5pt;font-family:
  Consolas;mso-bidi-font-family:Consolas;color:black;mso-font-kerning:0pt'><span
  style='mso-tab-count:4'>                   </span></span><b><span lang=EN-US
  style='font-size:7.5pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  color:#7F0055;mso-font-kerning:0pt'>try</span></b><span lang=EN-US
  style='font-size:7.5pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  color:black;mso-font-kerning:0pt'> {</span><span lang=EN-US style='font-size:
  7.5pt;font-family:Consolas;mso-bidi-font-family:Consolas;mso-font-kerning:
  0pt'><o:p></o:p></span></p>
  <p class=MsoNormal style='line-height:normal;mso-pagination:none;mso-layout-grid-align:
  none;text-autospace:none'><span lang=EN-US style='font-size:7.5pt;font-family:
  Consolas;mso-bidi-font-family:Consolas;color:black;mso-font-kerning:0pt'><span
  style='mso-tab-count:5'>                       </span>getChildrenAndWatch();</span><span
  lang=EN-US style='font-size:7.5pt;font-family:Consolas;mso-bidi-font-family:
  Consolas;mso-font-kerning:0pt'><o:p></o:p></span></p>
  <p class=MsoNormal style='line-height:normal;mso-pagination:none;mso-layout-grid-align:
  none;text-autospace:none'><span lang=EN-US style='font-size:7.5pt;font-family:
  Consolas;mso-bidi-font-family:Consolas;color:black;mso-font-kerning:0pt'><span
  style='mso-tab-count:4'>                   </span>} </span><b><span
  lang=EN-US style='font-size:7.5pt;font-family:Consolas;mso-bidi-font-family:
  Consolas;color:#7F0055;mso-font-kerning:0pt'>catch</span></b><span
  lang=EN-US style='font-size:7.5pt;font-family:Consolas;mso-bidi-font-family:
  Consolas;color:black;mso-font-kerning:0pt'> (KeeperException </span><span
  lang=EN-US style='font-size:7.5pt;font-family:Consolas;mso-bidi-font-family:
  Consolas;color:#6A3E3E;mso-font-kerning:0pt'>e</span><span lang=EN-US
  style='font-size:7.5pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  color:black;mso-font-kerning:0pt'>) {</span><span lang=EN-US
  style='font-size:7.5pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  mso-font-kerning:0pt'><o:p></o:p></span></p>
  <p class=MsoNormal style='line-height:normal;mso-pagination:none;mso-layout-grid-align:
  none;text-autospace:none'><span lang=EN-US style='font-size:7.5pt;font-family:
  Consolas;mso-bidi-font-family:Consolas;color:black;mso-font-kerning:0pt'><span
  style='mso-tab-count:5'>                       </span></span><span
  lang=EN-US style='font-size:7.5pt;font-family:Consolas;mso-bidi-font-family:
  Consolas;color:#6A3E3E;mso-font-kerning:0pt'>e</span><span lang=EN-US
  style='font-size:7.5pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  color:black;mso-font-kerning:0pt'>.printStackTrace();</span><span lang=EN-US
  style='font-size:7.5pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  mso-font-kerning:0pt'><o:p></o:p></span></p>
  <p class=MsoNormal style='line-height:normal;mso-pagination:none;mso-layout-grid-align:
  none;text-autospace:none'><span lang=EN-US style='font-size:7.5pt;font-family:
  Consolas;mso-bidi-font-family:Consolas;color:black;mso-font-kerning:0pt'><span
  style='mso-tab-count:4'>                   </span>} </span><b><span
  lang=EN-US style='font-size:7.5pt;font-family:Consolas;mso-bidi-font-family:
  Consolas;color:#7F0055;mso-font-kerning:0pt'>catch</span></b><span
  lang=EN-US style='font-size:7.5pt;font-family:Consolas;mso-bidi-font-family:
  Consolas;color:black;mso-font-kerning:0pt'> (InterruptedException </span><span
  lang=EN-US style='font-size:7.5pt;font-family:Consolas;mso-bidi-font-family:
  Consolas;color:#6A3E3E;mso-font-kerning:0pt'>e</span><span lang=EN-US
  style='font-size:7.5pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  color:black;mso-font-kerning:0pt'>) {</span><span lang=EN-US
  style='font-size:7.5pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  mso-font-kerning:0pt'><o:p></o:p></span></p>
  <p class=MsoNormal style='line-height:normal;mso-pagination:none;mso-layout-grid-align:
  none;text-autospace:none'><span lang=EN-US style='font-size:7.5pt;font-family:
  Consolas;mso-bidi-font-family:Consolas;color:black;mso-font-kerning:0pt'><span
  style='mso-tab-count:5'>                       </span></span><span
  lang=EN-US style='font-size:7.5pt;font-family:Consolas;mso-bidi-font-family:
  Consolas;color:#6A3E3E;mso-font-kerning:0pt'>e</span><span lang=EN-US
  style='font-size:7.5pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  color:black;mso-font-kerning:0pt'>.printStackTrace();</span><span lang=EN-US
  style='font-size:7.5pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  mso-font-kerning:0pt'><o:p></o:p></span></p>
  <p class=MsoNormal style='line-height:normal;mso-pagination:none;mso-layout-grid-align:
  none;text-autospace:none'><span lang=EN-US style='font-size:7.5pt;font-family:
  Consolas;mso-bidi-font-family:Consolas;color:black;mso-font-kerning:0pt'><span
  style='mso-tab-count:4'>                   </span>}</span><span lang=EN-US
  style='font-size:7.5pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  mso-font-kerning:0pt'><o:p></o:p></span></p>
  <p class=MsoNormal style='line-height:normal;mso-pagination:none;mso-layout-grid-align:
  none;text-autospace:none'><span lang=EN-US style='font-size:7.5pt;font-family:
  Consolas;mso-bidi-font-family:Consolas;color:black;mso-font-kerning:0pt'><span
  style='mso-tab-count:3'>              </span>}</span><span lang=EN-US
  style='font-size:7.5pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  mso-font-kerning:0pt'><o:p></o:p></span></p>
  <p class=MsoNormal style='line-height:normal;mso-pagination:none;mso-layout-grid-align:
  none;text-autospace:none'><span lang=EN-US style='font-size:7.5pt;font-family:
  Consolas;mso-bidi-font-family:Consolas;color:black;mso-font-kerning:0pt'><span
  style='mso-tab-count:2'>         </span>});</span><span lang=EN-US
  style='font-size:7.5pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  mso-font-kerning:0pt'><o:p></o:p></span></p>
  <p class=MsoNormal style='line-height:normal;mso-pagination:none;mso-layout-grid-align:
  none;text-autospace:none'><span lang=EN-US style='font-size:7.5pt;font-family:
  Consolas;mso-bidi-font-family:Consolas;color:black;mso-font-kerning:0pt'><span
  style='mso-tab-count:1'>     </span>}</span><span lang=EN-US
  style='font-size:7.5pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  mso-font-kerning:0pt'><o:p></o:p></span></p>
  <p class=MsoNormal style='line-height:normal;mso-pagination:none;mso-layout-grid-align:
  none;text-autospace:none'><span lang=EN-US style='font-size:7.5pt;font-family:
  Consolas;mso-bidi-font-family:Consolas;mso-font-kerning:0pt'><o:p>&nbsp;</o:p></span></p>
  <p class=MsoNormal style='line-height:normal;mso-pagination:none;mso-layout-grid-align:
  none;text-autospace:none'><span lang=EN-US style='font-size:7.5pt;font-family:
  Consolas;mso-bidi-font-family:Consolas;color:black;mso-font-kerning:0pt'><span
  style='mso-tab-count:1'>     </span></span><b><span lang=EN-US
  style='font-size:7.5pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  color:#7F0055;mso-font-kerning:0pt'>private</span></b><span lang=EN-US
  style='font-size:7.5pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  color:black;mso-font-kerning:0pt'> </span><b><span lang=EN-US
  style='font-size:7.5pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  color:#7F0055;mso-font-kerning:0pt'>void</span></b><span lang=EN-US
  style='font-size:7.5pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  color:black;mso-font-kerning:0pt'> getChildrenAndWatch() </span><b><span
  lang=EN-US style='font-size:7.5pt;font-family:Consolas;mso-bidi-font-family:
  Consolas;color:#7F0055;mso-font-kerning:0pt'>throws</span></b><span
  lang=EN-US style='font-size:7.5pt;font-family:Consolas;mso-bidi-font-family:
  Consolas;color:black;mso-font-kerning:0pt'> KeeperException,
  InterruptedException {</span><span lang=EN-US style='font-size:7.5pt;
  font-family:Consolas;mso-bidi-font-family:Consolas;mso-font-kerning:0pt'><o:p></o:p></span></p>
  <p class=MsoNormal style='line-height:normal;mso-pagination:none;mso-layout-grid-align:
  none;text-autospace:none'><span lang=EN-US style='font-size:7.5pt;font-family:
  Consolas;mso-bidi-font-family:Consolas;color:black;mso-font-kerning:0pt'><span
  style='mso-tab-count:2'>         </span></span><span lang=EN-US
  style='font-size:7.5pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  color:#3F7F5F;mso-font-kerning:0pt'>// </span><span style='font-size:7.5pt;
  font-family:宋体;mso-ascii-font-family:Consolas;mso-fareast-theme-font:minor-fareast;
  mso-hansi-font-family:Consolas;mso-bidi-font-family:Consolas;color:#3F7F5F;
  mso-font-kerning:0pt'>开启监听子节点的数据变化，监听器使用全局的监听器</span><span lang=EN-US
  style='font-size:7.5pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  mso-font-kerning:0pt'><o:p></o:p></span></p>
  <p class=MsoNormal style='line-height:normal;mso-pagination:none;mso-layout-grid-align:
  none;text-autospace:none'><span lang=EN-US style='font-size:7.5pt;font-family:
  Consolas;mso-bidi-font-family:Consolas;color:black;mso-font-kerning:0pt'><span
  style='mso-tab-count:2'>         </span>List&lt;String&gt; </span><span
  lang=EN-US style='font-size:7.5pt;font-family:Consolas;mso-bidi-font-family:
  Consolas;color:#6A3E3E;mso-font-kerning:0pt'>children</span><span lang=EN-US
  style='font-size:7.5pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  color:black;mso-font-kerning:0pt'> = </span><span lang=EN-US
  style='font-size:7.5pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  color:#0000C0;mso-font-kerning:0pt'>zkClient</span><span lang=EN-US
  style='font-size:7.5pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  color:black;mso-font-kerning:0pt'>.getChildren(</span><span lang=EN-US
  style='font-size:7.5pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  color:#2A00FF;mso-font-kerning:0pt'>&quot;/serverList&quot;</span><span
  lang=EN-US style='font-size:7.5pt;font-family:Consolas;mso-bidi-font-family:
  Consolas;color:black;mso-font-kerning:0pt'>, </span><b><span lang=EN-US
  style='font-size:7.5pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  color:#7F0055;mso-font-kerning:0pt'>true</span></b><span lang=EN-US
  style='font-size:7.5pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  color:black;mso-font-kerning:0pt'>);</span><span lang=EN-US style='font-size:
  7.5pt;font-family:Consolas;mso-bidi-font-family:Consolas;mso-font-kerning:
  0pt'><o:p></o:p></span></p>
  <p class=MsoNormal style='line-height:normal;mso-pagination:none;mso-layout-grid-align:
  none;text-autospace:none'><span lang=EN-US style='font-size:7.5pt;font-family:
  Consolas;mso-bidi-font-family:Consolas;color:black;mso-font-kerning:0pt'><span
  style='mso-tab-count:2'>         </span></span><span lang=EN-US
  style='font-size:7.5pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  color:#3F7F5F;mso-font-kerning:0pt'>// </span><span style='font-size:7.5pt;
  font-family:宋体;mso-ascii-font-family:Consolas;mso-fareast-theme-font:minor-fareast;
  mso-hansi-font-family:Consolas;mso-bidi-font-family:Consolas;color:#3F7F5F;
  mso-font-kerning:0pt'>存储服务器节点主机名集合</span><span lang=EN-US style='font-size:
  7.5pt;font-family:Consolas;mso-bidi-font-family:Consolas;mso-font-kerning:
  0pt'><o:p></o:p></span></p>
  <p class=MsoNormal style='line-height:normal;mso-pagination:none;mso-layout-grid-align:
  none;text-autospace:none'><span lang=EN-US style='font-size:7.5pt;font-family:
  Consolas;mso-bidi-font-family:Consolas;color:black;mso-font-kerning:0pt'><span
  style='mso-tab-count:2'>         </span>List&lt;String&gt; </span><span
  lang=EN-US style='font-size:7.5pt;font-family:Consolas;mso-bidi-font-family:
  Consolas;color:#6A3E3E;mso-font-kerning:0pt'>hostList</span><span lang=EN-US
  style='font-size:7.5pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  color:black;mso-font-kerning:0pt'> = </span><b><span lang=EN-US
  style='font-size:7.5pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  color:#7F0055;mso-font-kerning:0pt'>new</span></b><span lang=EN-US
  style='font-size:7.5pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  color:black;mso-font-kerning:0pt'> ArrayList&lt;String&gt;();</span><span
  lang=EN-US style='font-size:7.5pt;font-family:Consolas;mso-bidi-font-family:
  Consolas;mso-font-kerning:0pt'><o:p></o:p></span></p>
  <p class=MsoNormal style='line-height:normal;mso-pagination:none;mso-layout-grid-align:
  none;text-autospace:none'><span lang=EN-US style='font-size:7.5pt;font-family:
  Consolas;mso-bidi-font-family:Consolas;color:black;mso-font-kerning:0pt'><span
  style='mso-tab-count:2'>         </span></span><b><span lang=EN-US
  style='font-size:7.5pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  color:#7F0055;mso-font-kerning:0pt'>for</span></b><span lang=EN-US
  style='font-size:7.5pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  color:black;mso-font-kerning:0pt'> (String </span><span lang=EN-US
  style='font-size:7.5pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  color:#6A3E3E;mso-font-kerning:0pt'>child</span><span lang=EN-US
  style='font-size:7.5pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  color:black;mso-font-kerning:0pt'> : </span><span lang=EN-US
  style='font-size:7.5pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  color:#6A3E3E;mso-font-kerning:0pt'>children</span><span lang=EN-US
  style='font-size:7.5pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  color:black;mso-font-kerning:0pt'>) {</span><span lang=EN-US
  style='font-size:7.5pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  mso-font-kerning:0pt'><o:p></o:p></span></p>
  <p class=MsoNormal style='line-height:normal;mso-pagination:none;mso-layout-grid-align:
  none;text-autospace:none'><span lang=EN-US style='font-size:7.5pt;font-family:
  Consolas;mso-bidi-font-family:Consolas;color:black;mso-font-kerning:0pt'><span
  style='mso-tab-count:3'>              </span></span><span lang=EN-US
  style='font-size:7.5pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  color:#3F7F5F;mso-font-kerning:0pt'>// </span><span style='font-size:7.5pt;
  font-family:宋体;mso-ascii-font-family:Consolas;mso-fareast-theme-font:minor-fareast;
  mso-hansi-font-family:Consolas;mso-bidi-font-family:Consolas;color:#3F7F5F;
  mso-font-kerning:0pt'>获取节点的子节点的数据</span><span lang=EN-US style='font-size:
  7.5pt;font-family:Consolas;mso-bidi-font-family:Consolas;mso-font-kerning:
  0pt'><o:p></o:p></span></p>
  <p class=MsoNormal style='line-height:normal;mso-pagination:none;mso-layout-grid-align:
  none;text-autospace:none'><span lang=EN-US style='font-size:7.5pt;font-family:
  Consolas;mso-bidi-font-family:Consolas;color:black;mso-font-kerning:0pt'><span
  style='mso-tab-count:3'>              </span></span><b><span lang=EN-US
  style='font-size:7.5pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  color:#7F0055;mso-font-kerning:0pt'>byte</span></b><span lang=EN-US
  style='font-size:7.5pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  color:black;mso-font-kerning:0pt'>[] </span><span lang=EN-US
  style='font-size:7.5pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  color:#6A3E3E;mso-font-kerning:0pt'>data</span><span lang=EN-US
  style='font-size:7.5pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  color:black;mso-font-kerning:0pt'> = </span><span lang=EN-US
  style='font-size:7.5pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  color:#0000C0;mso-font-kerning:0pt'>zkClient</span><span lang=EN-US
  style='font-size:7.5pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  color:black;mso-font-kerning:0pt'>.getData(</span><span lang=EN-US
  style='font-size:7.5pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  color:#2A00FF;mso-font-kerning:0pt'>&quot;/serverList/&quot;</span><span
  lang=EN-US style='font-size:7.5pt;font-family:Consolas;mso-bidi-font-family:
  Consolas;color:black;mso-font-kerning:0pt'> + </span><span lang=EN-US
  style='font-size:7.5pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  color:#6A3E3E;mso-font-kerning:0pt'>child</span><span lang=EN-US
  style='font-size:7.5pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  color:black;mso-font-kerning:0pt'>, </span><b><span lang=EN-US
  style='font-size:7.5pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  color:#7F0055;mso-font-kerning:0pt'>false</span></b><span lang=EN-US
  style='font-size:7.5pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  color:black;mso-font-kerning:0pt'>, </span><b><span lang=EN-US
  style='font-size:7.5pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  color:#7F0055;mso-font-kerning:0pt'>null</span></b><span lang=EN-US
  style='font-size:7.5pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  color:black;mso-font-kerning:0pt'>); </span><span lang=EN-US
  style='font-size:7.5pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  color:#3F7F5F;mso-font-kerning:0pt'>// false</span><span style='font-size:
  7.5pt;font-family:宋体;mso-ascii-font-family:Consolas;mso-fareast-theme-font:
  minor-fareast;mso-hansi-font-family:Consolas;mso-bidi-font-family:Consolas;
  color:#3F7F5F;mso-font-kerning:0pt'>是不监听，即</span><span lang=EN-US
  style='font-size:7.5pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  color:#3F7F5F;mso-font-kerning:0pt'>/serverList/&quot; + child</span><span
  style='font-size:7.5pt;font-family:宋体;mso-ascii-font-family:Consolas;
  mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:Consolas;
  mso-bidi-font-family:Consolas;color:#3F7F5F;mso-font-kerning:0pt'>的不监听</span><span
  lang=EN-US style='font-size:7.5pt;font-family:Consolas;mso-bidi-font-family:
  Consolas;mso-font-kerning:0pt'><o:p></o:p></span></p>
  <p class=MsoNormal style='line-height:normal;mso-pagination:none;mso-layout-grid-align:
  none;text-autospace:none'><span lang=EN-US style='font-size:7.5pt;font-family:
  Consolas;mso-bidi-font-family:Consolas;color:black;mso-font-kerning:0pt'><span
  style='mso-tab-count:3'>              </span></span><span lang=EN-US
  style='font-size:7.5pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  color:#6A3E3E;mso-font-kerning:0pt'>hostList</span><span lang=EN-US
  style='font-size:7.5pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  color:black;mso-font-kerning:0pt'>.add(</span><b><span lang=EN-US
  style='font-size:7.5pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  color:#7F0055;mso-font-kerning:0pt'>new</span></b><span lang=EN-US
  style='font-size:7.5pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  color:black;mso-font-kerning:0pt'> String(</span><span lang=EN-US
  style='font-size:7.5pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  color:#6A3E3E;mso-font-kerning:0pt'>data</span><span lang=EN-US
  style='font-size:7.5pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  color:black;mso-font-kerning:0pt'>));</span><span lang=EN-US
  style='font-size:7.5pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  mso-font-kerning:0pt'><o:p></o:p></span></p>
  <p class=MsoNormal style='line-height:normal;mso-pagination:none;mso-layout-grid-align:
  none;text-autospace:none'><span lang=EN-US style='font-size:7.5pt;font-family:
  Consolas;mso-bidi-font-family:Consolas;color:black;mso-font-kerning:0pt'><span
  style='mso-tab-count:2'>         </span>}</span><span lang=EN-US
  style='font-size:7.5pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  mso-font-kerning:0pt'><o:p></o:p></span></p>
  <p class=MsoNormal style='line-height:normal;mso-pagination:none;mso-layout-grid-align:
  none;text-autospace:none'><span lang=EN-US style='font-size:7.5pt;font-family:
  Consolas;mso-bidi-font-family:Consolas;color:black;mso-font-kerning:0pt'><span
  style='mso-tab-count:2'>         </span></span><span lang=EN-US
  style='font-size:7.5pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  mso-font-kerning:0pt'><o:p></o:p></span></p>
  <p class=MsoNormal style='line-height:normal;mso-pagination:none;mso-layout-grid-align:
  none;text-autospace:none'><span lang=EN-US style='font-size:7.5pt;font-family:
  Consolas;mso-bidi-font-family:Consolas;color:black;mso-font-kerning:0pt'><span
  style='mso-tab-count:2'>         </span>System.</span><b><i><span lang=EN-US
  style='font-size:7.5pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  color:#0000C0;mso-font-kerning:0pt'>out</span></i></b><span lang=EN-US
  style='font-size:7.5pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  color:black;mso-font-kerning:0pt'>.println(</span><span lang=EN-US
  style='font-size:7.5pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  color:#2A00FF;mso-font-kerning:0pt'>&quot;------------------------------&quot;</span><span
  lang=EN-US style='font-size:7.5pt;font-family:Consolas;mso-bidi-font-family:
  Consolas;color:black;mso-font-kerning:0pt'>);</span><span lang=EN-US
  style='font-size:7.5pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  mso-font-kerning:0pt'><o:p></o:p></span></p>
  <p class=MsoNormal style='line-height:normal;mso-pagination:none;mso-layout-grid-align:
  none;text-autospace:none'><span lang=EN-US style='font-size:7.5pt;font-family:
  Consolas;mso-bidi-font-family:Consolas;color:black;mso-font-kerning:0pt'><span
  style='mso-tab-count:2'>         </span>System.</span><b><i><span lang=EN-US
  style='font-size:7.5pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  color:#0000C0;mso-font-kerning:0pt'>out</span></i></b><span lang=EN-US
  style='font-size:7.5pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  color:black;mso-font-kerning:0pt'>.println(</span><span lang=EN-US
  style='font-size:7.5pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  color:#6A3E3E;mso-font-kerning:0pt'>hostList</span><span lang=EN-US
  style='font-size:7.5pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  color:black;mso-font-kerning:0pt'>);</span><span lang=EN-US style='font-size:
  7.5pt;font-family:Consolas;mso-bidi-font-family:Consolas;mso-font-kerning:
  0pt'><o:p></o:p></span></p>
  <p class=MsoNormal style='line-height:normal;mso-pagination:none;mso-layout-grid-align:
  none;text-autospace:none'><span lang=EN-US style='font-size:7.5pt;font-family:
  Consolas;mso-bidi-font-family:Consolas;color:black;mso-font-kerning:0pt'><span
  style='mso-tab-count:1'>     </span>}</span><span lang=EN-US
  style='font-size:7.5pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  mso-font-kerning:0pt'><o:p></o:p></span></p>
  <p class=MsoNormal style='line-height:normal;mso-pagination:none;mso-layout-grid-align:
  none;text-autospace:none'><span lang=EN-US style='font-size:7.5pt;font-family:
  Consolas;mso-bidi-font-family:Consolas;mso-font-kerning:0pt'><o:p>&nbsp;</o:p></span></p>
  <p class=MsoNormal style='line-height:normal;mso-pagination:none;mso-layout-grid-align:
  none;text-autospace:none'><span lang=EN-US style='font-size:7.5pt;font-family:
  Consolas;mso-bidi-font-family:Consolas;color:black;mso-font-kerning:0pt'>}</span><span
  lang=EN-US style='font-size:7.5pt;font-family:Consolas;mso-bidi-font-family:
  Consolas;mso-font-kerning:0pt'><o:p></o:p></span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='font-size:14.0pt;line-height:125%;
font-family:Consolas;mso-bidi-font-family:Consolas;color:black;background:lightgrey;
mso-highlight:lightgrey;mso-font-kerning:0pt'>DistributeClient2</span><span
lang=EN-US> </span><span style='font-family:宋体;mso-ascii-font-family:Calibri;
mso-ascii-theme-font:minor-latin;mso-fareast-theme-font:minor-fareast;
mso-hansi-font-family:Calibri;mso-hansi-theme-font:minor-latin'>这个与</span><span
lang=EN-US>DistributeClient</span><span style='font-family:宋体;mso-ascii-font-family:
Calibri;mso-ascii-theme-font:minor-latin;mso-fareast-theme-font:minor-fareast;
mso-hansi-font-family:Calibri;mso-hansi-theme-font:minor-latin'>作用一样的，只是监听器的方式不一样。</span></p>

<table class=MsoTableGrid border=1 cellspacing=0 cellpadding=0
 style='border-collapse:collapse;border:none;mso-border-alt:solid windowtext .5pt;
 mso-yfti-tbllook:1184;mso-padding-alt:0cm 5.4pt 0cm 5.4pt'>
 <tr style='mso-yfti-irow:0;mso-yfti-firstrow:yes;mso-yfti-lastrow:yes'>
  <td width=755 valign=top style='width:566.4pt;border:solid windowtext 1.0pt;
  mso-border-alt:solid windowtext .5pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal style='line-height:normal;mso-pagination:none;mso-layout-grid-align:
  none;text-autospace:none'><b><span lang=EN-US style='font-size:7.5pt;
  font-family:Consolas;mso-bidi-font-family:Consolas;color:#7F0055;mso-font-kerning:
  0pt'>package</span></b><span lang=EN-US style='font-size:7.5pt;font-family:
  Consolas;mso-bidi-font-family:Consolas;color:black;mso-font-kerning:0pt'>
  _02;</span><span lang=EN-US style='font-size:7.5pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;mso-font-kerning:0pt'><o:p></o:p></span></p>
  <p class=MsoNormal style='line-height:normal;mso-pagination:none;mso-layout-grid-align:
  none;text-autospace:none'><span lang=EN-US style='font-size:7.5pt;font-family:
  Consolas;mso-bidi-font-family:Consolas;mso-font-kerning:0pt'><o:p>&nbsp;</o:p></span></p>
  <p class=MsoNormal style='line-height:normal;mso-pagination:none;mso-layout-grid-align:
  none;text-autospace:none'><b><span lang=EN-US style='font-size:7.5pt;
  font-family:Consolas;mso-bidi-font-family:Consolas;color:#7F0055;mso-font-kerning:
  0pt'>import</span></b><span lang=EN-US style='font-size:7.5pt;font-family:
  Consolas;mso-bidi-font-family:Consolas;color:black;mso-font-kerning:0pt'>
  java.io.IOException;</span><span lang=EN-US style='font-size:7.5pt;
  font-family:Consolas;mso-bidi-font-family:Consolas;mso-font-kerning:0pt'><o:p></o:p></span></p>
  <p class=MsoNormal style='line-height:normal;mso-pagination:none;mso-layout-grid-align:
  none;text-autospace:none'><b><span lang=EN-US style='font-size:7.5pt;
  font-family:Consolas;mso-bidi-font-family:Consolas;color:#7F0055;mso-font-kerning:
  0pt'>import</span></b><span lang=EN-US style='font-size:7.5pt;font-family:
  Consolas;mso-bidi-font-family:Consolas;color:black;mso-font-kerning:0pt'>
  java.util.ArrayList;</span><span lang=EN-US style='font-size:7.5pt;
  font-family:Consolas;mso-bidi-font-family:Consolas;mso-font-kerning:0pt'><o:p></o:p></span></p>
  <p class=MsoNormal style='line-height:normal;mso-pagination:none;mso-layout-grid-align:
  none;text-autospace:none'><b><span lang=EN-US style='font-size:7.5pt;
  font-family:Consolas;mso-bidi-font-family:Consolas;color:#7F0055;mso-font-kerning:
  0pt'>import</span></b><span lang=EN-US style='font-size:7.5pt;font-family:
  Consolas;mso-bidi-font-family:Consolas;color:black;mso-font-kerning:0pt'>
  java.util.List;</span><span lang=EN-US style='font-size:7.5pt;font-family:
  Consolas;mso-bidi-font-family:Consolas;mso-font-kerning:0pt'><o:p></o:p></span></p>
  <p class=MsoNormal style='line-height:normal;mso-pagination:none;mso-layout-grid-align:
  none;text-autospace:none'><span lang=EN-US style='font-size:7.5pt;font-family:
  Consolas;mso-bidi-font-family:Consolas;mso-font-kerning:0pt'><o:p>&nbsp;</o:p></span></p>
  <p class=MsoNormal style='line-height:normal;mso-pagination:none;mso-layout-grid-align:
  none;text-autospace:none'><b><span lang=EN-US style='font-size:7.5pt;
  font-family:Consolas;mso-bidi-font-family:Consolas;color:#7F0055;mso-font-kerning:
  0pt'>import</span></b><span lang=EN-US style='font-size:7.5pt;font-family:
  Consolas;mso-bidi-font-family:Consolas;color:black;mso-font-kerning:0pt'>
  org.apache.zookeeper.KeeperException;</span><span lang=EN-US
  style='font-size:7.5pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  mso-font-kerning:0pt'><o:p></o:p></span></p>
  <p class=MsoNormal style='line-height:normal;mso-pagination:none;mso-layout-grid-align:
  none;text-autospace:none'><b><span lang=EN-US style='font-size:7.5pt;
  font-family:Consolas;mso-bidi-font-family:Consolas;color:#7F0055;mso-font-kerning:
  0pt'>import</span></b><span lang=EN-US style='font-size:7.5pt;font-family:
  Consolas;mso-bidi-font-family:Consolas;color:black;mso-font-kerning:0pt'>
  org.apache.zookeeper.WatchedEvent;</span><span lang=EN-US style='font-size:
  7.5pt;font-family:Consolas;mso-bidi-font-family:Consolas;mso-font-kerning:
  0pt'><o:p></o:p></span></p>
  <p class=MsoNormal style='line-height:normal;mso-pagination:none;mso-layout-grid-align:
  none;text-autospace:none'><b><span lang=EN-US style='font-size:7.5pt;
  font-family:Consolas;mso-bidi-font-family:Consolas;color:#7F0055;mso-font-kerning:
  0pt'>import</span></b><span lang=EN-US style='font-size:7.5pt;font-family:
  Consolas;mso-bidi-font-family:Consolas;color:black;mso-font-kerning:0pt'>
  org.apache.zookeeper.Watcher;</span><span lang=EN-US style='font-size:7.5pt;
  font-family:Consolas;mso-bidi-font-family:Consolas;mso-font-kerning:0pt'><o:p></o:p></span></p>
  <p class=MsoNormal style='line-height:normal;mso-pagination:none;mso-layout-grid-align:
  none;text-autospace:none'><b><span lang=EN-US style='font-size:7.5pt;
  font-family:Consolas;mso-bidi-font-family:Consolas;color:#7F0055;mso-font-kerning:
  0pt'>import</span></b><span lang=EN-US style='font-size:7.5pt;font-family:
  Consolas;mso-bidi-font-family:Consolas;color:black;mso-font-kerning:0pt'>
  org.apache.zookeeper.ZooKeeper;</span><span lang=EN-US style='font-size:7.5pt;
  font-family:Consolas;mso-bidi-font-family:Consolas;mso-font-kerning:0pt'><o:p></o:p></span></p>
  <p class=MsoNormal style='line-height:normal;mso-pagination:none;mso-layout-grid-align:
  none;text-autospace:none'><span lang=EN-US style='font-size:7.5pt;font-family:
  Consolas;mso-bidi-font-family:Consolas;mso-font-kerning:0pt'><o:p>&nbsp;</o:p></span></p>
  <p class=MsoNormal style='line-height:normal;mso-pagination:none;mso-layout-grid-align:
  none;text-autospace:none'><b><span lang=EN-US style='font-size:7.5pt;
  font-family:Consolas;mso-bidi-font-family:Consolas;color:#7F0055;mso-font-kerning:
  0pt'>public</span></b><span lang=EN-US style='font-size:7.5pt;font-family:
  Consolas;mso-bidi-font-family:Consolas;color:black;mso-font-kerning:0pt'> </span><b><span
  lang=EN-US style='font-size:7.5pt;font-family:Consolas;mso-bidi-font-family:
  Consolas;color:#7F0055;mso-font-kerning:0pt'>class</span></b><span
  lang=EN-US style='font-size:7.5pt;font-family:Consolas;mso-bidi-font-family:
  Consolas;color:black;mso-font-kerning:0pt'> DistributeClient2 {</span><span
  lang=EN-US style='font-size:7.5pt;font-family:Consolas;mso-bidi-font-family:
  Consolas;mso-font-kerning:0pt'><o:p></o:p></span></p>
  <p class=MsoNormal style='line-height:normal;mso-pagination:none;mso-layout-grid-align:
  none;text-autospace:none'><span lang=EN-US style='font-size:7.5pt;font-family:
  Consolas;mso-bidi-font-family:Consolas;mso-font-kerning:0pt'><o:p>&nbsp;</o:p></span></p>
  <p class=MsoNormal style='line-height:normal;mso-pagination:none;mso-layout-grid-align:
  none;text-autospace:none'><span lang=EN-US style='font-size:7.5pt;font-family:
  Consolas;mso-bidi-font-family:Consolas;color:black;mso-font-kerning:0pt'><span
  style='mso-tab-count:1'>     </span></span><b><span lang=EN-US
  style='font-size:7.5pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  color:#7F0055;mso-font-kerning:0pt'>public</span></b><span lang=EN-US
  style='font-size:7.5pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  color:black;mso-font-kerning:0pt'> </span><b><span lang=EN-US
  style='font-size:7.5pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  color:#7F0055;mso-font-kerning:0pt'>static</span></b><span lang=EN-US
  style='font-size:7.5pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  color:black;mso-font-kerning:0pt'> </span><b><span lang=EN-US
  style='font-size:7.5pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  color:#7F0055;mso-font-kerning:0pt'>void</span></b><span lang=EN-US
  style='font-size:7.5pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  color:black;mso-font-kerning:0pt'> main(String[] </span><span lang=EN-US
  style='font-size:7.5pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  color:#6A3E3E;mso-font-kerning:0pt'>args</span><span lang=EN-US
  style='font-size:7.5pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  color:black;mso-font-kerning:0pt'>) </span><b><span lang=EN-US
  style='font-size:7.5pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  color:#7F0055;mso-font-kerning:0pt'>throws</span></b><span lang=EN-US
  style='font-size:7.5pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  color:black;mso-font-kerning:0pt'> Exception {</span><span lang=EN-US
  style='font-size:7.5pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  mso-font-kerning:0pt'><o:p></o:p></span></p>
  <p class=MsoNormal style='line-height:normal;mso-pagination:none;mso-layout-grid-align:
  none;text-autospace:none'><span lang=EN-US style='font-size:7.5pt;font-family:
  Consolas;mso-bidi-font-family:Consolas;color:black;mso-font-kerning:0pt'><span
  style='mso-tab-count:2'>         </span>DistributeClient2 </span><span
  lang=EN-US style='font-size:7.5pt;font-family:Consolas;mso-bidi-font-family:
  Consolas;color:#6A3E3E;mso-font-kerning:0pt'>client</span><span lang=EN-US
  style='font-size:7.5pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  color:black;mso-font-kerning:0pt'> = </span><b><span lang=EN-US
  style='font-size:7.5pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  color:#7F0055;mso-font-kerning:0pt'>new</span></b><span lang=EN-US
  style='font-size:7.5pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  color:black;mso-font-kerning:0pt'> DistributeClient2();</span><span
  lang=EN-US style='font-size:7.5pt;font-family:Consolas;mso-bidi-font-family:
  Consolas;mso-font-kerning:0pt'><o:p></o:p></span></p>
  <p class=MsoNormal style='line-height:normal;mso-pagination:none;mso-layout-grid-align:
  none;text-autospace:none'><span lang=EN-US style='font-size:7.5pt;font-family:
  Consolas;mso-bidi-font-family:Consolas;mso-font-kerning:0pt'><o:p>&nbsp;</o:p></span></p>
  <p class=MsoNormal style='line-height:normal;mso-pagination:none;mso-layout-grid-align:
  none;text-autospace:none'><span lang=EN-US style='font-size:7.5pt;font-family:
  Consolas;mso-bidi-font-family:Consolas;color:black;mso-font-kerning:0pt'><span
  style='mso-tab-count:2'>         </span></span><span lang=EN-US
  style='font-size:7.5pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  color:#3F7F5F;mso-font-kerning:0pt'>// 1</span><span style='font-size:7.5pt;
  font-family:宋体;mso-ascii-font-family:Consolas;mso-fareast-theme-font:minor-fareast;
  mso-hansi-font-family:Consolas;mso-bidi-font-family:Consolas;color:#3F7F5F;
  mso-font-kerning:0pt'>、连接</span><u><span lang=EN-US style='font-size:7.5pt;
  font-family:Consolas;mso-bidi-font-family:Consolas;color:#3F7F5F;mso-font-kerning:
  0pt'>Zookeeper</span></u><span style='font-size:7.5pt;font-family:宋体;
  mso-ascii-font-family:Consolas;mso-fareast-theme-font:minor-fareast;
  mso-hansi-font-family:Consolas;mso-bidi-font-family:Consolas;color:#3F7F5F;
  mso-font-kerning:0pt'>集群</span><span lang=EN-US style='font-size:7.5pt;
  font-family:Consolas;mso-bidi-font-family:Consolas;mso-font-kerning:0pt'><o:p></o:p></span></p>
  <p class=MsoNormal style='line-height:normal;mso-pagination:none;mso-layout-grid-align:
  none;text-autospace:none'><span lang=EN-US style='font-size:7.5pt;font-family:
  Consolas;mso-bidi-font-family:Consolas;color:black;mso-font-kerning:0pt'><span
  style='mso-tab-count:2'>         </span></span><span lang=EN-US
  style='font-size:7.5pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  color:#6A3E3E;mso-font-kerning:0pt'>client</span><span lang=EN-US
  style='font-size:7.5pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  color:black;mso-font-kerning:0pt'>.getConnect();</span><span lang=EN-US
  style='font-size:7.5pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  mso-font-kerning:0pt'><o:p></o:p></span></p>
  <p class=MsoNormal style='line-height:normal;mso-pagination:none;mso-layout-grid-align:
  none;text-autospace:none'><span lang=EN-US style='font-size:7.5pt;font-family:
  Consolas;mso-bidi-font-family:Consolas;mso-font-kerning:0pt'><o:p>&nbsp;</o:p></span></p>
  <p class=MsoNormal style='line-height:normal;mso-pagination:none;mso-layout-grid-align:
  none;text-autospace:none'><span lang=EN-US style='font-size:7.5pt;font-family:
  Consolas;mso-bidi-font-family:Consolas;color:black;mso-font-kerning:0pt'><span
  style='mso-tab-count:2'>         </span></span><span lang=EN-US
  style='font-size:7.5pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  color:#3F7F5F;mso-font-kerning:0pt'>// </span><span style='font-size:7.5pt;
  font-family:宋体;mso-ascii-font-family:Consolas;mso-fareast-theme-font:minor-fareast;
  mso-hansi-font-family:Consolas;mso-bidi-font-family:Consolas;color:#3F7F5F;
  mso-font-kerning:0pt'>睡一下，等待连接（不然，还没有获取到连接，就操作了会报错）</span><span lang=EN-US
  style='font-size:7.5pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  mso-font-kerning:0pt'><o:p></o:p></span></p>
  <p class=MsoNormal style='line-height:normal;mso-pagination:none;mso-layout-grid-align:
  none;text-autospace:none'><span lang=EN-US style='font-size:7.5pt;font-family:
  Consolas;mso-bidi-font-family:Consolas;color:black;mso-font-kerning:0pt'><span
  style='mso-tab-count:2'>         </span>Thread.<i>sleep</i>(5000);</span><span
  lang=EN-US style='font-size:7.5pt;font-family:Consolas;mso-bidi-font-family:
  Consolas;mso-font-kerning:0pt'><o:p></o:p></span></p>
  <p class=MsoNormal style='line-height:normal;mso-pagination:none;mso-layout-grid-align:
  none;text-autospace:none'><span lang=EN-US style='font-size:7.5pt;font-family:
  Consolas;mso-bidi-font-family:Consolas;mso-font-kerning:0pt'><o:p>&nbsp;</o:p></span></p>
  <p class=MsoNormal style='line-height:normal;mso-pagination:none;mso-layout-grid-align:
  none;text-autospace:none'><span lang=EN-US style='font-size:7.5pt;font-family:
  Consolas;mso-bidi-font-family:Consolas;color:black;mso-font-kerning:0pt'><span
  style='mso-tab-count:2'>         </span></span><span lang=EN-US
  style='font-size:7.5pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  color:#3F7F5F;mso-font-kerning:0pt'>// 2</span><span style='font-size:7.5pt;
  font-family:宋体;mso-ascii-font-family:Consolas;mso-fareast-theme-font:minor-fareast;
  mso-hansi-font-family:Consolas;mso-bidi-font-family:Consolas;color:#3F7F5F;
  mso-font-kerning:0pt'>、获取子节点并监听其数据变化</span><span lang=EN-US style='font-size:
  7.5pt;font-family:Consolas;mso-bidi-font-family:Consolas;mso-font-kerning:
  0pt'><o:p></o:p></span></p>
  <p class=MsoNormal style='line-height:normal;mso-pagination:none;mso-layout-grid-align:
  none;text-autospace:none'><span lang=EN-US style='font-size:7.5pt;font-family:
  Consolas;mso-bidi-font-family:Consolas;color:black;mso-font-kerning:0pt'><span
  style='mso-tab-count:2'>         </span></span><span lang=EN-US
  style='font-size:7.5pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  color:#6A3E3E;mso-font-kerning:0pt'>client</span><span lang=EN-US
  style='font-size:7.5pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  color:black;mso-font-kerning:0pt'>.getChildrenAndWatch();</span><span
  lang=EN-US style='font-size:7.5pt;font-family:Consolas;mso-bidi-font-family:
  Consolas;mso-font-kerning:0pt'><o:p></o:p></span></p>
  <p class=MsoNormal style='line-height:normal;mso-pagination:none;mso-layout-grid-align:
  none;text-autospace:none'><span lang=EN-US style='font-size:7.5pt;font-family:
  Consolas;mso-bidi-font-family:Consolas;mso-font-kerning:0pt'><o:p>&nbsp;</o:p></span></p>
  <p class=MsoNormal style='line-height:normal;mso-pagination:none;mso-layout-grid-align:
  none;text-autospace:none'><span lang=EN-US style='font-size:7.5pt;font-family:
  Consolas;mso-bidi-font-family:Consolas;color:black;mso-font-kerning:0pt'><span
  style='mso-tab-count:2'>         </span>Thread.<i>sleep</i>(Integer.</span><b><i><span
  lang=EN-US style='font-size:7.5pt;font-family:Consolas;mso-bidi-font-family:
  Consolas;color:#0000C0;mso-font-kerning:0pt'>MAX_VALUE</span></i></b><span
  lang=EN-US style='font-size:7.5pt;font-family:Consolas;mso-bidi-font-family:
  Consolas;color:black;mso-font-kerning:0pt'>);</span><span lang=EN-US
  style='font-size:7.5pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  mso-font-kerning:0pt'><o:p></o:p></span></p>
  <p class=MsoNormal style='line-height:normal;mso-pagination:none;mso-layout-grid-align:
  none;text-autospace:none'><span lang=EN-US style='font-size:7.5pt;font-family:
  Consolas;mso-bidi-font-family:Consolas;color:black;mso-font-kerning:0pt'><span
  style='mso-tab-count:1'>     </span>}</span><span lang=EN-US
  style='font-size:7.5pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  mso-font-kerning:0pt'><o:p></o:p></span></p>
  <p class=MsoNormal style='line-height:normal;mso-pagination:none;mso-layout-grid-align:
  none;text-autospace:none'><span lang=EN-US style='font-size:7.5pt;font-family:
  Consolas;mso-bidi-font-family:Consolas;mso-font-kerning:0pt'><o:p>&nbsp;</o:p></span></p>
  <p class=MsoNormal style='line-height:normal;mso-pagination:none;mso-layout-grid-align:
  none;text-autospace:none'><span lang=EN-US style='font-size:7.5pt;font-family:
  Consolas;mso-bidi-font-family:Consolas;color:black;mso-font-kerning:0pt'><span
  style='mso-tab-count:1'>     </span></span><span lang=EN-US style='font-size:
  7.5pt;font-family:Consolas;mso-bidi-font-family:Consolas;color:#3F7F5F;
  mso-font-kerning:0pt'>// <u>zk</u></span><span style='font-size:7.5pt;
  font-family:宋体;mso-ascii-font-family:Consolas;mso-fareast-theme-font:minor-fareast;
  mso-hansi-font-family:Consolas;mso-bidi-font-family:Consolas;color:#3F7F5F;
  mso-font-kerning:0pt'>集群</span><span lang=EN-US style='font-size:7.5pt;
  font-family:Consolas;mso-bidi-font-family:Consolas;mso-font-kerning:0pt'><o:p></o:p></span></p>
  <p class=MsoNormal style='line-height:normal;mso-pagination:none;mso-layout-grid-align:
  none;text-autospace:none'><span lang=EN-US style='font-size:7.5pt;font-family:
  Consolas;mso-bidi-font-family:Consolas;color:black;mso-font-kerning:0pt'><span
  style='mso-tab-count:1'>     </span></span><b><span lang=EN-US
  style='font-size:7.5pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  color:#7F0055;mso-font-kerning:0pt'>private</span></b><span lang=EN-US
  style='font-size:7.5pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  color:black;mso-font-kerning:0pt'> String </span><span lang=EN-US
  style='font-size:7.5pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  color:#0000C0;mso-font-kerning:0pt'>connectString</span><span lang=EN-US
  style='font-size:7.5pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  color:black;mso-font-kerning:0pt'> = </span><span lang=EN-US
  style='font-size:7.5pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  color:#2A00FF;mso-font-kerning:0pt'>&quot;192.168.56.101:2181,
  192.168.56.102:2181, 192.168.56.103:2181&quot;</span><span lang=EN-US
  style='font-size:7.5pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  color:black;mso-font-kerning:0pt'>;</span><span lang=EN-US style='font-size:
  7.5pt;font-family:Consolas;mso-bidi-font-family:Consolas;mso-font-kerning:
  0pt'><o:p></o:p></span></p>
  <p class=MsoNormal style='line-height:normal;mso-pagination:none;mso-layout-grid-align:
  none;text-autospace:none'><span lang=EN-US style='font-size:7.5pt;font-family:
  Consolas;mso-bidi-font-family:Consolas;color:black;mso-font-kerning:0pt'><span
  style='mso-tab-count:1'>     </span></span><span lang=EN-US style='font-size:
  7.5pt;font-family:Consolas;mso-bidi-font-family:Consolas;color:#3F7F5F;
  mso-font-kerning:0pt'>// </span><span style='font-size:7.5pt;font-family:
  宋体;mso-ascii-font-family:Consolas;mso-fareast-theme-font:minor-fareast;
  mso-hansi-font-family:Consolas;mso-bidi-font-family:Consolas;color:#3F7F5F;
  mso-font-kerning:0pt'>超时时间</span><span lang=EN-US style='font-size:7.5pt;
  font-family:Consolas;mso-bidi-font-family:Consolas;mso-font-kerning:0pt'><o:p></o:p></span></p>
  <p class=MsoNormal style='line-height:normal;mso-pagination:none;mso-layout-grid-align:
  none;text-autospace:none'><span lang=EN-US style='font-size:7.5pt;font-family:
  Consolas;mso-bidi-font-family:Consolas;color:black;mso-font-kerning:0pt'><span
  style='mso-tab-count:1'>     </span></span><b><span lang=EN-US
  style='font-size:7.5pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  color:#7F0055;mso-font-kerning:0pt'>private</span></b><span lang=EN-US
  style='font-size:7.5pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  color:black;mso-font-kerning:0pt'> </span><b><span lang=EN-US
  style='font-size:7.5pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  color:#7F0055;mso-font-kerning:0pt'>int</span></b><span lang=EN-US
  style='font-size:7.5pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  color:black;mso-font-kerning:0pt'> </span><span lang=EN-US style='font-size:
  7.5pt;font-family:Consolas;mso-bidi-font-family:Consolas;color:#0000C0;
  mso-font-kerning:0pt'>sessionTimeout</span><span lang=EN-US style='font-size:
  7.5pt;font-family:Consolas;mso-bidi-font-family:Consolas;color:black;
  mso-font-kerning:0pt'> = 5000;</span><span lang=EN-US style='font-size:7.5pt;
  font-family:Consolas;mso-bidi-font-family:Consolas;mso-font-kerning:0pt'><o:p></o:p></span></p>
  <p class=MsoNormal style='line-height:normal;mso-pagination:none;mso-layout-grid-align:
  none;text-autospace:none'><span lang=EN-US style='font-size:7.5pt;font-family:
  Consolas;mso-bidi-font-family:Consolas;color:black;mso-font-kerning:0pt'><span
  style='mso-tab-count:1'>     </span></span><span lang=EN-US style='font-size:
  7.5pt;font-family:Consolas;mso-bidi-font-family:Consolas;color:#3F7F5F;
  mso-font-kerning:0pt'>// </span><span style='font-size:7.5pt;font-family:
  宋体;mso-ascii-font-family:Consolas;mso-fareast-theme-font:minor-fareast;
  mso-hansi-font-family:Consolas;mso-bidi-font-family:Consolas;color:#3F7F5F;
  mso-font-kerning:0pt'>对于</span><u><span lang=EN-US style='font-size:7.5pt;
  font-family:Consolas;mso-bidi-font-family:Consolas;color:#3F7F5F;mso-font-kerning:
  0pt'>zk</span></u><span style='font-size:7.5pt;font-family:宋体;mso-ascii-font-family:
  Consolas;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:Consolas;
  mso-bidi-font-family:Consolas;color:#3F7F5F;mso-font-kerning:0pt'>来说，是</span><span
  lang=EN-US style='font-size:7.5pt;font-family:Consolas;mso-bidi-font-family:
  Consolas;color:#3F7F5F;mso-font-kerning:0pt'>Client</span><span lang=EN-US
  style='font-size:7.5pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  mso-font-kerning:0pt'><o:p></o:p></span></p>
  <p class=MsoNormal style='line-height:normal;mso-pagination:none;mso-layout-grid-align:
  none;text-autospace:none'><span lang=EN-US style='font-size:7.5pt;font-family:
  Consolas;mso-bidi-font-family:Consolas;color:black;mso-font-kerning:0pt'><span
  style='mso-tab-count:1'>     </span></span><b><span lang=EN-US
  style='font-size:7.5pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  color:#7F0055;mso-font-kerning:0pt'>private</span></b><span lang=EN-US
  style='font-size:7.5pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  color:black;mso-font-kerning:0pt'> ZooKeeper </span><span lang=EN-US
  style='font-size:7.5pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  color:#0000C0;mso-font-kerning:0pt'>zkClient</span><span lang=EN-US
  style='font-size:7.5pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  color:black;mso-font-kerning:0pt'>;</span><span lang=EN-US style='font-size:
  7.5pt;font-family:Consolas;mso-bidi-font-family:Consolas;mso-font-kerning:
  0pt'><o:p></o:p></span></p>
  <p class=MsoNormal style='line-height:normal;mso-pagination:none;mso-layout-grid-align:
  none;text-autospace:none'><span lang=EN-US style='font-size:7.5pt;font-family:
  Consolas;mso-bidi-font-family:Consolas;mso-font-kerning:0pt'><o:p>&nbsp;</o:p></span></p>
  <p class=MsoNormal style='line-height:normal;mso-pagination:none;mso-layout-grid-align:
  none;text-autospace:none'><span lang=EN-US style='font-size:7.5pt;font-family:
  Consolas;mso-bidi-font-family:Consolas;color:black;mso-font-kerning:0pt'><span
  style='mso-tab-count:1'>     </span></span><b><span lang=EN-US
  style='font-size:7.5pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  color:#7F0055;mso-font-kerning:0pt'>private</span></b><span lang=EN-US
  style='font-size:7.5pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  color:black;mso-font-kerning:0pt'> </span><b><span lang=EN-US
  style='font-size:7.5pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  color:#7F0055;mso-font-kerning:0pt'>void</span></b><span lang=EN-US
  style='font-size:7.5pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  color:black;mso-font-kerning:0pt'> getConnect() </span><b><span lang=EN-US
  style='font-size:7.5pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  color:#7F0055;mso-font-kerning:0pt'>throws</span></b><span lang=EN-US
  style='font-size:7.5pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  color:black;mso-font-kerning:0pt'> IOException {</span><span lang=EN-US
  style='font-size:7.5pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  mso-font-kerning:0pt'><o:p></o:p></span></p>
  <p class=MsoNormal style='line-height:normal;mso-pagination:none;mso-layout-grid-align:
  none;text-autospace:none'><span lang=EN-US style='font-size:7.5pt;font-family:
  Consolas;mso-bidi-font-family:Consolas;color:black;mso-font-kerning:0pt'><span
  style='mso-tab-count:2'>         </span></span><span lang=EN-US
  style='font-size:7.5pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  color:#3F7F5F;mso-font-kerning:0pt'>// null</span><span style='font-size:
  7.5pt;font-family:宋体;mso-ascii-font-family:Consolas;mso-fareast-theme-font:
  minor-fareast;mso-hansi-font-family:Consolas;mso-bidi-font-family:Consolas;
  color:#3F7F5F;mso-font-kerning:0pt'>表示不监听，这里不使用全局监听</span><span lang=EN-US
  style='font-size:7.5pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  mso-font-kerning:0pt'><o:p></o:p></span></p>
  <p class=MsoNormal style='line-height:normal;mso-pagination:none;mso-layout-grid-align:
  none;text-autospace:none'><span lang=EN-US style='font-size:7.5pt;font-family:
  Consolas;mso-bidi-font-family:Consolas;color:black;mso-font-kerning:0pt'><span
  style='mso-tab-count:2'>         </span></span><span lang=EN-US
  style='font-size:7.5pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  color:#0000C0;mso-font-kerning:0pt'>zkClient</span><span lang=EN-US
  style='font-size:7.5pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  color:black;mso-font-kerning:0pt'> = </span><b><span lang=EN-US
  style='font-size:7.5pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  color:#7F0055;mso-font-kerning:0pt'>new</span></b><span lang=EN-US
  style='font-size:7.5pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  color:black;mso-font-kerning:0pt'> ZooKeeper(</span><span lang=EN-US
  style='font-size:7.5pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  color:#0000C0;mso-font-kerning:0pt'>connectString</span><span lang=EN-US
  style='font-size:7.5pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  color:black;mso-font-kerning:0pt'>, </span><span lang=EN-US style='font-size:
  7.5pt;font-family:Consolas;mso-bidi-font-family:Consolas;color:#0000C0;
  mso-font-kerning:0pt'>sessionTimeout</span><span lang=EN-US style='font-size:
  7.5pt;font-family:Consolas;mso-bidi-font-family:Consolas;color:black;
  mso-font-kerning:0pt'>, </span><b><span lang=EN-US style='font-size:7.5pt;
  font-family:Consolas;mso-bidi-font-family:Consolas;color:#7F0055;mso-font-kerning:
  0pt'>null</span></b><span lang=EN-US style='font-size:7.5pt;font-family:Consolas;
  mso-bidi-font-family:Consolas;color:black;mso-font-kerning:0pt'>);</span><span
  lang=EN-US style='font-size:7.5pt;font-family:Consolas;mso-bidi-font-family:
  Consolas;mso-font-kerning:0pt'><o:p></o:p></span></p>
  <p class=MsoNormal style='line-height:normal;mso-pagination:none;mso-layout-grid-align:
  none;text-autospace:none'><span lang=EN-US style='font-size:7.5pt;font-family:
  Consolas;mso-bidi-font-family:Consolas;color:black;mso-font-kerning:0pt'><span
  style='mso-tab-count:1'>     </span>}</span><span lang=EN-US
  style='font-size:7.5pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  mso-font-kerning:0pt'><o:p></o:p></span></p>
  <p class=MsoNormal style='line-height:normal;mso-pagination:none;mso-layout-grid-align:
  none;text-autospace:none'><span lang=EN-US style='font-size:7.5pt;font-family:
  Consolas;mso-bidi-font-family:Consolas;mso-font-kerning:0pt'><o:p>&nbsp;</o:p></span></p>
  <p class=MsoNormal style='line-height:normal;mso-pagination:none;mso-layout-grid-align:
  none;text-autospace:none'><span lang=EN-US style='font-size:7.5pt;font-family:
  Consolas;mso-bidi-font-family:Consolas;color:black;mso-font-kerning:0pt'><span
  style='mso-tab-count:1'>     </span></span><b><span lang=EN-US
  style='font-size:7.5pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  color:#7F0055;mso-font-kerning:0pt'>private</span></b><span lang=EN-US
  style='font-size:7.5pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  color:black;mso-font-kerning:0pt'> </span><b><span lang=EN-US
  style='font-size:7.5pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  color:#7F0055;mso-font-kerning:0pt'>void</span></b><span lang=EN-US
  style='font-size:7.5pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  color:black;mso-font-kerning:0pt'> getChildrenAndWatch() </span><b><span
  lang=EN-US style='font-size:7.5pt;font-family:Consolas;mso-bidi-font-family:
  Consolas;color:#7F0055;mso-font-kerning:0pt'>throws</span></b><span
  lang=EN-US style='font-size:7.5pt;font-family:Consolas;mso-bidi-font-family:
  Consolas;color:black;mso-font-kerning:0pt'> KeeperException,
  InterruptedException {</span><span lang=EN-US style='font-size:7.5pt;
  font-family:Consolas;mso-bidi-font-family:Consolas;mso-font-kerning:0pt'><o:p></o:p></span></p>
  <p class=MsoNormal style='line-height:normal;mso-pagination:none;mso-layout-grid-align:
  none;text-autospace:none'><span lang=EN-US style='font-size:7.5pt;font-family:
  Consolas;mso-bidi-font-family:Consolas;color:black;mso-font-kerning:0pt'><span
  style='mso-tab-count:2'>         </span></span><span lang=EN-US
  style='font-size:7.5pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  color:#3F7F5F;mso-font-kerning:0pt'>// </span><span style='font-size:7.5pt;
  font-family:宋体;mso-ascii-font-family:Consolas;mso-fareast-theme-font:minor-fareast;
  mso-hansi-font-family:Consolas;mso-bidi-font-family:Consolas;color:#3F7F5F;
  mso-font-kerning:0pt'>监听子节点</span><span lang=EN-US style='font-size:7.5pt;
  font-family:Consolas;mso-bidi-font-family:Consolas;mso-font-kerning:0pt'><o:p></o:p></span></p>
  <p class=MsoNormal style='line-height:normal;mso-pagination:none;mso-layout-grid-align:
  none;text-autospace:none'><span lang=EN-US style='font-size:7.5pt;font-family:
  Consolas;mso-bidi-font-family:Consolas;color:black;mso-font-kerning:0pt'><span
  style='mso-tab-count:2'>         </span>List&lt;String&gt; </span><span
  lang=EN-US style='font-size:7.5pt;font-family:Consolas;mso-bidi-font-family:
  Consolas;color:#6A3E3E;mso-font-kerning:0pt'>children</span><span lang=EN-US
  style='font-size:7.5pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  color:black;mso-font-kerning:0pt'> = </span><span lang=EN-US
  style='font-size:7.5pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  color:#0000C0;mso-font-kerning:0pt'>zkClient</span><span lang=EN-US
  style='font-size:7.5pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  color:black;mso-font-kerning:0pt'>.getChildren(</span><span lang=EN-US
  style='font-size:7.5pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  color:#2A00FF;mso-font-kerning:0pt'>&quot;/serverList&quot;</span><span
  lang=EN-US style='font-size:7.5pt;font-family:Consolas;mso-bidi-font-family:
  Consolas;color:black;mso-font-kerning:0pt'>, </span><b><span lang=EN-US
  style='font-size:7.5pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  color:#7F0055;mso-font-kerning:0pt'>new</span></b><span lang=EN-US
  style='font-size:7.5pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  color:black;mso-font-kerning:0pt'> Watcher() {</span><span lang=EN-US
  style='font-size:7.5pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  mso-font-kerning:0pt'><o:p></o:p></span></p>
  <p class=MsoNormal style='line-height:normal;mso-pagination:none;mso-layout-grid-align:
  none;text-autospace:none'><span lang=EN-US style='font-size:7.5pt;font-family:
  Consolas;mso-bidi-font-family:Consolas;mso-font-kerning:0pt'><o:p>&nbsp;</o:p></span></p>
  <p class=MsoNormal style='line-height:normal;mso-pagination:none;mso-layout-grid-align:
  none;text-autospace:none'><span lang=EN-US style='font-size:7.5pt;font-family:
  Consolas;mso-bidi-font-family:Consolas;color:black;mso-font-kerning:0pt'><span
  style='mso-tab-count:3'>              </span></span><b><span lang=EN-US
  style='font-size:7.5pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  color:#7F0055;mso-font-kerning:0pt'>public</span></b><span lang=EN-US
  style='font-size:7.5pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  color:black;mso-font-kerning:0pt'> </span><b><span lang=EN-US
  style='font-size:7.5pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  color:#7F0055;mso-font-kerning:0pt'>void</span></b><span lang=EN-US
  style='font-size:7.5pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  color:black;mso-font-kerning:0pt'> process(WatchedEvent </span><span
  lang=EN-US style='font-size:7.5pt;font-family:Consolas;mso-bidi-font-family:
  Consolas;color:#6A3E3E;mso-font-kerning:0pt'>event</span><span lang=EN-US
  style='font-size:7.5pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  color:black;mso-font-kerning:0pt'>) {</span><span lang=EN-US
  style='font-size:7.5pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  mso-font-kerning:0pt'><o:p></o:p></span></p>
  <p class=MsoNormal style='line-height:normal;mso-pagination:none;mso-layout-grid-align:
  none;text-autospace:none'><span lang=EN-US style='font-size:7.5pt;font-family:
  Consolas;mso-bidi-font-family:Consolas;color:black;mso-font-kerning:0pt'><span
  style='mso-tab-count:4'>                   </span></span><b><span lang=EN-US
  style='font-size:7.5pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  color:#7F0055;mso-font-kerning:0pt'>try</span></b><span lang=EN-US
  style='font-size:7.5pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  color:black;mso-font-kerning:0pt'> {</span><span lang=EN-US style='font-size:
  7.5pt;font-family:Consolas;mso-bidi-font-family:Consolas;mso-font-kerning:
  0pt'><o:p></o:p></span></p>
  <p class=MsoNormal style='line-height:normal;mso-pagination:none;mso-layout-grid-align:
  none;text-autospace:none'><span lang=EN-US style='font-size:7.5pt;font-family:
  Consolas;mso-bidi-font-family:Consolas;color:black;mso-font-kerning:0pt'><span
  style='mso-tab-count:5'>                       </span></span><span
  lang=EN-US style='font-size:7.5pt;font-family:Consolas;mso-bidi-font-family:
  Consolas;color:#3F7F5F;mso-font-kerning:0pt'>// </span><span
  style='font-size:7.5pt;font-family:宋体;mso-ascii-font-family:Consolas;
  mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:Consolas;
  mso-bidi-font-family:Consolas;color:#3F7F5F;mso-font-kerning:0pt'>每次触发监听回调方法，就又重新监听（因为监听是一次生效的，下次要重新监听），即递归</span><span
  lang=EN-US style='font-size:7.5pt;font-family:Consolas;mso-bidi-font-family:
  Consolas;color:#3F7F5F;mso-font-kerning:0pt'>getChildrenAndWatch</span><span
  lang=EN-US style='font-size:7.5pt;font-family:Consolas;mso-bidi-font-family:
  Consolas;mso-font-kerning:0pt'><o:p></o:p></span></p>
  <p class=MsoNormal style='line-height:normal;mso-pagination:none;mso-layout-grid-align:
  none;text-autospace:none'><span lang=EN-US style='font-size:7.5pt;font-family:
  Consolas;mso-bidi-font-family:Consolas;color:black;mso-font-kerning:0pt'><span
  style='mso-tab-count:5'>                       </span>getChildrenAndWatch();</span><span
  lang=EN-US style='font-size:7.5pt;font-family:Consolas;mso-bidi-font-family:
  Consolas;mso-font-kerning:0pt'><o:p></o:p></span></p>
  <p class=MsoNormal style='line-height:normal;mso-pagination:none;mso-layout-grid-align:
  none;text-autospace:none'><span lang=EN-US style='font-size:7.5pt;font-family:
  Consolas;mso-bidi-font-family:Consolas;color:black;mso-font-kerning:0pt'><span
  style='mso-tab-count:4'>                   </span>} </span><b><span
  lang=EN-US style='font-size:7.5pt;font-family:Consolas;mso-bidi-font-family:
  Consolas;color:#7F0055;mso-font-kerning:0pt'>catch</span></b><span
  lang=EN-US style='font-size:7.5pt;font-family:Consolas;mso-bidi-font-family:
  Consolas;color:black;mso-font-kerning:0pt'> (KeeperException </span><span
  lang=EN-US style='font-size:7.5pt;font-family:Consolas;mso-bidi-font-family:
  Consolas;color:#6A3E3E;mso-font-kerning:0pt'>e</span><span lang=EN-US
  style='font-size:7.5pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  color:black;mso-font-kerning:0pt'>) {</span><span lang=EN-US
  style='font-size:7.5pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  mso-font-kerning:0pt'><o:p></o:p></span></p>
  <p class=MsoNormal style='line-height:normal;mso-pagination:none;mso-layout-grid-align:
  none;text-autospace:none'><span lang=EN-US style='font-size:7.5pt;font-family:
  Consolas;mso-bidi-font-family:Consolas;color:black;mso-font-kerning:0pt'><span
  style='mso-tab-count:5'>                       </span></span><span
  lang=EN-US style='font-size:7.5pt;font-family:Consolas;mso-bidi-font-family:
  Consolas;color:#6A3E3E;mso-font-kerning:0pt'>e</span><span lang=EN-US
  style='font-size:7.5pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  color:black;mso-font-kerning:0pt'>.printStackTrace();</span><span lang=EN-US
  style='font-size:7.5pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  mso-font-kerning:0pt'><o:p></o:p></span></p>
  <p class=MsoNormal style='line-height:normal;mso-pagination:none;mso-layout-grid-align:
  none;text-autospace:none'><span lang=EN-US style='font-size:7.5pt;font-family:
  Consolas;mso-bidi-font-family:Consolas;color:black;mso-font-kerning:0pt'><span
  style='mso-tab-count:4'>                   </span>} </span><b><span
  lang=EN-US style='font-size:7.5pt;font-family:Consolas;mso-bidi-font-family:
  Consolas;color:#7F0055;mso-font-kerning:0pt'>catch</span></b><span
  lang=EN-US style='font-size:7.5pt;font-family:Consolas;mso-bidi-font-family:
  Consolas;color:black;mso-font-kerning:0pt'> (InterruptedException </span><span
  lang=EN-US style='font-size:7.5pt;font-family:Consolas;mso-bidi-font-family:
  Consolas;color:#6A3E3E;mso-font-kerning:0pt'>e</span><span lang=EN-US
  style='font-size:7.5pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  color:black;mso-font-kerning:0pt'>) {</span><span lang=EN-US
  style='font-size:7.5pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  mso-font-kerning:0pt'><o:p></o:p></span></p>
  <p class=MsoNormal style='line-height:normal;mso-pagination:none;mso-layout-grid-align:
  none;text-autospace:none'><span lang=EN-US style='font-size:7.5pt;font-family:
  Consolas;mso-bidi-font-family:Consolas;color:black;mso-font-kerning:0pt'><span
  style='mso-tab-count:5'>                       </span></span><span
  lang=EN-US style='font-size:7.5pt;font-family:Consolas;mso-bidi-font-family:
  Consolas;color:#6A3E3E;mso-font-kerning:0pt'>e</span><span lang=EN-US
  style='font-size:7.5pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  color:black;mso-font-kerning:0pt'>.printStackTrace();</span><span lang=EN-US
  style='font-size:7.5pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  mso-font-kerning:0pt'><o:p></o:p></span></p>
  <p class=MsoNormal style='line-height:normal;mso-pagination:none;mso-layout-grid-align:
  none;text-autospace:none'><span lang=EN-US style='font-size:7.5pt;font-family:
  Consolas;mso-bidi-font-family:Consolas;color:black;mso-font-kerning:0pt'><span
  style='mso-tab-count:4'>                   </span>}</span><span lang=EN-US
  style='font-size:7.5pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  mso-font-kerning:0pt'><o:p></o:p></span></p>
  <p class=MsoNormal style='line-height:normal;mso-pagination:none;mso-layout-grid-align:
  none;text-autospace:none'><span lang=EN-US style='font-size:7.5pt;font-family:
  Consolas;mso-bidi-font-family:Consolas;color:black;mso-font-kerning:0pt'><span
  style='mso-tab-count:3'>              </span>}</span><span lang=EN-US
  style='font-size:7.5pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  mso-font-kerning:0pt'><o:p></o:p></span></p>
  <p class=MsoNormal style='line-height:normal;mso-pagination:none;mso-layout-grid-align:
  none;text-autospace:none'><span lang=EN-US style='font-size:7.5pt;font-family:
  Consolas;mso-bidi-font-family:Consolas;color:black;mso-font-kerning:0pt'><span
  style='mso-tab-count:2'>         </span>});</span><span lang=EN-US
  style='font-size:7.5pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  mso-font-kerning:0pt'><o:p></o:p></span></p>
  <p class=MsoNormal style='line-height:normal;mso-pagination:none;mso-layout-grid-align:
  none;text-autospace:none'><span lang=EN-US style='font-size:7.5pt;font-family:
  Consolas;mso-bidi-font-family:Consolas;mso-font-kerning:0pt'><o:p>&nbsp;</o:p></span></p>
  <p class=MsoNormal style='line-height:normal;mso-pagination:none;mso-layout-grid-align:
  none;text-autospace:none'><span lang=EN-US style='font-size:7.5pt;font-family:
  Consolas;mso-bidi-font-family:Consolas;color:black;mso-font-kerning:0pt'><span
  style='mso-tab-count:2'>         </span></span><span lang=EN-US
  style='font-size:7.5pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  color:#3F7F5F;mso-font-kerning:0pt'>// </span><span style='font-size:7.5pt;
  font-family:宋体;mso-ascii-font-family:Consolas;mso-fareast-theme-font:minor-fareast;
  mso-hansi-font-family:Consolas;mso-bidi-font-family:Consolas;color:#3F7F5F;
  mso-font-kerning:0pt'>存储服务器节点主机名集合</span><span lang=EN-US style='font-size:
  7.5pt;font-family:Consolas;mso-bidi-font-family:Consolas;mso-font-kerning:
  0pt'><o:p></o:p></span></p>
  <p class=MsoNormal style='line-height:normal;mso-pagination:none;mso-layout-grid-align:
  none;text-autospace:none'><span lang=EN-US style='font-size:7.5pt;font-family:
  Consolas;mso-bidi-font-family:Consolas;color:black;mso-font-kerning:0pt'><span
  style='mso-tab-count:2'>         </span>List&lt;String&gt; </span><span
  lang=EN-US style='font-size:7.5pt;font-family:Consolas;mso-bidi-font-family:
  Consolas;color:#6A3E3E;mso-font-kerning:0pt'>hostList</span><span lang=EN-US
  style='font-size:7.5pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  color:black;mso-font-kerning:0pt'> = </span><b><span lang=EN-US
  style='font-size:7.5pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  color:#7F0055;mso-font-kerning:0pt'>new</span></b><span lang=EN-US
  style='font-size:7.5pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  color:black;mso-font-kerning:0pt'> ArrayList&lt;String&gt;();</span><span
  lang=EN-US style='font-size:7.5pt;font-family:Consolas;mso-bidi-font-family:
  Consolas;mso-font-kerning:0pt'><o:p></o:p></span></p>
  <p class=MsoNormal style='line-height:normal;mso-pagination:none;mso-layout-grid-align:
  none;text-autospace:none'><span lang=EN-US style='font-size:7.5pt;font-family:
  Consolas;mso-bidi-font-family:Consolas;color:black;mso-font-kerning:0pt'><span
  style='mso-tab-count:2'>         </span></span><b><span lang=EN-US
  style='font-size:7.5pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  color:#7F0055;mso-font-kerning:0pt'>for</span></b><span lang=EN-US
  style='font-size:7.5pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  color:black;mso-font-kerning:0pt'> (String </span><span lang=EN-US
  style='font-size:7.5pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  color:#6A3E3E;mso-font-kerning:0pt'>child</span><span lang=EN-US
  style='font-size:7.5pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  color:black;mso-font-kerning:0pt'> : </span><span lang=EN-US
  style='font-size:7.5pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  color:#6A3E3E;mso-font-kerning:0pt'>children</span><span lang=EN-US
  style='font-size:7.5pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  color:black;mso-font-kerning:0pt'>) {</span><span lang=EN-US
  style='font-size:7.5pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  mso-font-kerning:0pt'><o:p></o:p></span></p>
  <p class=MsoNormal style='line-height:normal;mso-pagination:none;mso-layout-grid-align:
  none;text-autospace:none'><span lang=EN-US style='font-size:7.5pt;font-family:
  Consolas;mso-bidi-font-family:Consolas;color:black;mso-font-kerning:0pt'><span
  style='mso-tab-count:3'>              </span></span><span lang=EN-US
  style='font-size:7.5pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  color:#3F7F5F;mso-font-kerning:0pt'>// </span><span style='font-size:7.5pt;
  font-family:宋体;mso-ascii-font-family:Consolas;mso-fareast-theme-font:minor-fareast;
  mso-hansi-font-family:Consolas;mso-bidi-font-family:Consolas;color:#3F7F5F;
  mso-font-kerning:0pt'>获取节点的子节点的数据</span><span lang=EN-US style='font-size:
  7.5pt;font-family:Consolas;mso-bidi-font-family:Consolas;mso-font-kerning:
  0pt'><o:p></o:p></span></p>
  <p class=MsoNormal style='line-height:normal;mso-pagination:none;mso-layout-grid-align:
  none;text-autospace:none'><span lang=EN-US style='font-size:7.5pt;font-family:
  Consolas;mso-bidi-font-family:Consolas;color:black;mso-font-kerning:0pt'><span
  style='mso-tab-count:3'>              </span></span><b><span lang=EN-US
  style='font-size:7.5pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  color:#7F0055;mso-font-kerning:0pt'>byte</span></b><span lang=EN-US
  style='font-size:7.5pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  color:black;mso-font-kerning:0pt'>[] </span><span lang=EN-US
  style='font-size:7.5pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  color:#6A3E3E;mso-font-kerning:0pt'>data</span><span lang=EN-US
  style='font-size:7.5pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  color:black;mso-font-kerning:0pt'> = </span><span lang=EN-US
  style='font-size:7.5pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  color:#0000C0;mso-font-kerning:0pt'>zkClient</span><span lang=EN-US
  style='font-size:7.5pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  color:black;mso-font-kerning:0pt'>.getData(</span><span lang=EN-US
  style='font-size:7.5pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  color:#2A00FF;mso-font-kerning:0pt'>&quot;/serverList/&quot;</span><span
  lang=EN-US style='font-size:7.5pt;font-family:Consolas;mso-bidi-font-family:
  Consolas;color:black;mso-font-kerning:0pt'> + </span><span lang=EN-US
  style='font-size:7.5pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  color:#6A3E3E;mso-font-kerning:0pt'>child</span><span lang=EN-US
  style='font-size:7.5pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  color:black;mso-font-kerning:0pt'>, </span><b><span lang=EN-US
  style='font-size:7.5pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  color:#7F0055;mso-font-kerning:0pt'>false</span></b><span lang=EN-US
  style='font-size:7.5pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  color:black;mso-font-kerning:0pt'>, </span><b><span lang=EN-US
  style='font-size:7.5pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  color:#7F0055;mso-font-kerning:0pt'>null</span></b><span lang=EN-US
  style='font-size:7.5pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  color:black;mso-font-kerning:0pt'>); </span><span lang=EN-US
  style='font-size:7.5pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  color:#3F7F5F;mso-font-kerning:0pt'>// false</span><span style='font-size:
  7.5pt;font-family:宋体;mso-ascii-font-family:Consolas;mso-fareast-theme-font:
  minor-fareast;mso-hansi-font-family:Consolas;mso-bidi-font-family:Consolas;
  color:#3F7F5F;mso-font-kerning:0pt'>是不监听，即</span><span lang=EN-US
  style='font-size:7.5pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  color:#3F7F5F;mso-font-kerning:0pt'>/serverList/&quot; + child</span><span
  style='font-size:7.5pt;font-family:宋体;mso-ascii-font-family:Consolas;
  mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:Consolas;
  mso-bidi-font-family:Consolas;color:#3F7F5F;mso-font-kerning:0pt'>的不监听</span><span
  lang=EN-US style='font-size:7.5pt;font-family:Consolas;mso-bidi-font-family:
  Consolas;mso-font-kerning:0pt'><o:p></o:p></span></p>
  <p class=MsoNormal style='line-height:normal;mso-pagination:none;mso-layout-grid-align:
  none;text-autospace:none'><span lang=EN-US style='font-size:7.5pt;font-family:
  Consolas;mso-bidi-font-family:Consolas;color:black;mso-font-kerning:0pt'><span
  style='mso-tab-count:3'>              </span></span><span lang=EN-US
  style='font-size:7.5pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  color:#6A3E3E;mso-font-kerning:0pt'>hostList</span><span lang=EN-US
  style='font-size:7.5pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  color:black;mso-font-kerning:0pt'>.add(</span><b><span lang=EN-US
  style='font-size:7.5pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  color:#7F0055;mso-font-kerning:0pt'>new</span></b><span lang=EN-US
  style='font-size:7.5pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  color:black;mso-font-kerning:0pt'> String(</span><span lang=EN-US
  style='font-size:7.5pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  color:#6A3E3E;mso-font-kerning:0pt'>data</span><span lang=EN-US
  style='font-size:7.5pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  color:black;mso-font-kerning:0pt'>));</span><span lang=EN-US
  style='font-size:7.5pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  mso-font-kerning:0pt'><o:p></o:p></span></p>
  <p class=MsoNormal style='line-height:normal;mso-pagination:none;mso-layout-grid-align:
  none;text-autospace:none'><span lang=EN-US style='font-size:7.5pt;font-family:
  Consolas;mso-bidi-font-family:Consolas;color:black;mso-font-kerning:0pt'><span
  style='mso-tab-count:2'>         </span>}</span><span lang=EN-US
  style='font-size:7.5pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  mso-font-kerning:0pt'><o:p></o:p></span></p>
  <p class=MsoNormal style='line-height:normal;mso-pagination:none;mso-layout-grid-align:
  none;text-autospace:none'><span lang=EN-US style='font-size:7.5pt;font-family:
  Consolas;mso-bidi-font-family:Consolas;color:black;mso-font-kerning:0pt'><span
  style='mso-tab-count:2'>         </span></span><span lang=EN-US
  style='font-size:7.5pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  mso-font-kerning:0pt'><o:p></o:p></span></p>
  <p class=MsoNormal style='line-height:normal;mso-pagination:none;mso-layout-grid-align:
  none;text-autospace:none'><span lang=EN-US style='font-size:7.5pt;font-family:
  Consolas;mso-bidi-font-family:Consolas;color:black;mso-font-kerning:0pt'><span
  style='mso-tab-count:2'>         </span>System.</span><b><i><span lang=EN-US
  style='font-size:7.5pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  color:#0000C0;mso-font-kerning:0pt'>out</span></i></b><span lang=EN-US
  style='font-size:7.5pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  color:black;mso-font-kerning:0pt'>.println(</span><span lang=EN-US
  style='font-size:7.5pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  color:#2A00FF;mso-font-kerning:0pt'>&quot;------------------------------&quot;</span><span
  lang=EN-US style='font-size:7.5pt;font-family:Consolas;mso-bidi-font-family:
  Consolas;color:black;mso-font-kerning:0pt'>);</span><span lang=EN-US
  style='font-size:7.5pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  mso-font-kerning:0pt'><o:p></o:p></span></p>
  <p class=MsoNormal style='line-height:normal;mso-pagination:none;mso-layout-grid-align:
  none;text-autospace:none'><span lang=EN-US style='font-size:7.5pt;font-family:
  Consolas;mso-bidi-font-family:Consolas;color:black;mso-font-kerning:0pt'><span
  style='mso-tab-count:2'>         </span>System.</span><b><i><span lang=EN-US
  style='font-size:7.5pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  color:#0000C0;mso-font-kerning:0pt'>out</span></i></b><span lang=EN-US
  style='font-size:7.5pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  color:black;mso-font-kerning:0pt'>.println(</span><span lang=EN-US
  style='font-size:7.5pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  color:#6A3E3E;mso-font-kerning:0pt'>hostList</span><span lang=EN-US
  style='font-size:7.5pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  color:black;mso-font-kerning:0pt'>);</span><span lang=EN-US style='font-size:
  7.5pt;font-family:Consolas;mso-bidi-font-family:Consolas;mso-font-kerning:
  0pt'><o:p></o:p></span></p>
  <p class=MsoNormal style='line-height:normal;mso-pagination:none;mso-layout-grid-align:
  none;text-autospace:none'><span lang=EN-US style='font-size:7.5pt;font-family:
  Consolas;mso-bidi-font-family:Consolas;color:black;mso-font-kerning:0pt'><span
  style='mso-tab-count:1'>     </span>}</span><span lang=EN-US
  style='font-size:7.5pt;font-family:Consolas;mso-bidi-font-family:Consolas;
  mso-font-kerning:0pt'><o:p></o:p></span></p>
  <p class=MsoNormal style='line-height:normal;mso-pagination:none;mso-layout-grid-align:
  none;text-autospace:none'><span lang=EN-US style='font-size:7.5pt;font-family:
  Consolas;mso-bidi-font-family:Consolas;mso-font-kerning:0pt'><o:p>&nbsp;</o:p></span></p>
  <p class=MsoNormal style='line-height:normal;mso-pagination:none;mso-layout-grid-align:
  none;text-autospace:none'><span lang=EN-US style='font-size:7.5pt;font-family:
  Consolas;mso-bidi-font-family:Consolas;color:black;mso-font-kerning:0pt'>}</span><span
  lang=EN-US style='font-size:7.5pt;font-family:Consolas;mso-bidi-font-family:
  Consolas;mso-font-kerning:0pt'><o:p></o:p></span></p>
  <p class=MsoNormal style='line-height:normal'><span lang=EN-US
  style='font-size:7.5pt'><o:p>&nbsp;</o:p></span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<h3><span style='font-family:宋体;mso-ascii-font-family:Calibri;mso-ascii-theme-font:
minor-latin;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:Calibri;
mso-hansi-theme-font:minor-latin'>测试</span></h3>

<p class=MsoNormal><span style='font-size:12.0pt;mso-bidi-font-size:11.0pt;
line-height:125%;font-family:宋体;mso-ascii-font-family:Calibri;mso-ascii-theme-font:
minor-latin;mso-hansi-font-family:Calibri;mso-hansi-theme-font:minor-latin'>先用命令行的方式创建</span><span
style='font-size:12.0pt;mso-bidi-font-size:11.0pt;line-height:125%;mso-fareast-font-family:
宋体'> <span lang=EN-US>/serverList </span></span><span style='font-size:12.0pt;
mso-bidi-font-size:11.0pt;line-height:125%;font-family:宋体;mso-ascii-font-family:
Calibri;mso-ascii-theme-font:minor-latin;mso-hansi-font-family:Calibri;
mso-hansi-theme-font:minor-latin'>节点，因为节点必须要有数据，然后才能继续创建子节点</span><span
lang=EN-US style='font-size:12.0pt;mso-bidi-font-size:11.0pt;line-height:125%;
mso-fareast-font-family:宋体'><o:p></o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='mso-no-proof:yes'><!--[if gte vml 1]><v:shape
 id="图片_x0020_89" o:spid="_x0000_i1046" type="#_x0000_t75" style='width:362.25pt;
 height:29.25pt;visibility:visible;mso-wrap-style:square'>
 <v:imagedata src="04_ZookeeperAppend.files/image125.png" o:title=""/>
</v:shape><![endif]--><![if !vml]><img width=483 height=39
src="04_ZookeeperAppend.files/image125.png" v:shapes="图片_x0020_89"><![endif]></span><span
lang=EN-US style='font-size:12.0pt;mso-bidi-font-size:11.0pt;line-height:125%;
mso-fareast-font-family:宋体'><o:p></o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='font-size:12.0pt;mso-bidi-font-size:
11.0pt;line-height:125%;mso-fareast-font-family:宋体'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span style='font-size:12.0pt;mso-bidi-font-size:11.0pt;
line-height:125%;font-family:宋体;mso-ascii-font-family:Calibri;mso-ascii-theme-font:
minor-latin;mso-hansi-font-family:Calibri;mso-hansi-theme-font:minor-latin'>然后带参数启动</span><span
lang=EN-US style='font-size:12.0pt;mso-bidi-font-size:11.0pt;line-height:125%;
mso-fareast-font-family:宋体'>DistributeServer</span><span style='font-size:12.0pt;
mso-bidi-font-size:11.0pt;line-height:125%;font-family:宋体;mso-ascii-font-family:
Calibri;mso-ascii-theme-font:minor-latin;mso-hansi-font-family:Calibri;
mso-hansi-theme-font:minor-latin'>，由于是带序号的临时节点，所以可以多次启动（即重复创建）</span><span
lang=EN-US style='font-size:12.0pt;mso-bidi-font-size:11.0pt;line-height:125%;
mso-fareast-font-family:宋体'><o:p></o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='mso-no-proof:yes'><!--[if gte vml 1]><v:shape
 id="图片_x0020_90" o:spid="_x0000_i1045" type="#_x0000_t75" style='width:567pt;
 height:614.25pt;visibility:visible;mso-wrap-style:square'>
 <v:imagedata src="04_ZookeeperAppend.files/image126.png" o:title=""/>
</v:shape><![endif]--><![if !vml]><img width=756 height=819
src="04_ZookeeperAppend.files/image126.png" v:shapes="图片_x0020_90"><![endif]></span><span
lang=EN-US style='font-size:12.0pt;mso-bidi-font-size:11.0pt;line-height:125%;
mso-fareast-font-family:宋体'><o:p></o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='font-size:12.0pt;mso-bidi-font-size:
11.0pt;line-height:125%;mso-fareast-font-family:宋体'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span style='font-size:12.0pt;mso-bidi-font-size:11.0pt;
line-height:125%;font-family:宋体;mso-ascii-font-family:Calibri;mso-ascii-theme-font:
minor-latin;mso-hansi-font-family:Calibri;mso-hansi-theme-font:minor-latin'>启动之后打印日志</span><span
lang=EN-US style='font-size:12.0pt;mso-bidi-font-size:11.0pt;line-height:125%;
mso-fareast-font-family:宋体'><o:p></o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='mso-no-proof:yes'><!--[if gte vml 1]><v:shape
 id="图片_x0020_92" o:spid="_x0000_i1044" type="#_x0000_t75" style='width:215.25pt;
 height:31.5pt;visibility:visible;mso-wrap-style:square'>
 <v:imagedata src="04_ZookeeperAppend.files/image127.png" o:title=""/>
</v:shape><![endif]--><![if !vml]><img width=287 height=42
src="04_ZookeeperAppend.files/image127.png" v:shapes="图片_x0020_92"><![endif]></span><span
lang=EN-US style='font-size:12.0pt;mso-bidi-font-size:11.0pt;line-height:125%;
mso-fareast-font-family:宋体'><o:p></o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='font-size:12.0pt;mso-bidi-font-size:
11.0pt;line-height:125%;mso-fareast-font-family:宋体'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span style='font-size:12.0pt;mso-bidi-font-size:11.0pt;
line-height:125%;font-family:宋体;mso-ascii-font-family:Calibri;mso-ascii-theme-font:
minor-latin;mso-hansi-font-family:Calibri;mso-hansi-theme-font:minor-latin'>然后启动</span><span
lang=EN-US style='font-size:12.0pt;mso-bidi-font-size:11.0pt;line-height:125%;
mso-fareast-font-family:宋体'>DistributeClient</span><span style='font-size:12.0pt;
mso-bidi-font-size:11.0pt;line-height:125%;font-family:宋体;mso-ascii-font-family:
Calibri;mso-ascii-theme-font:minor-latin;mso-hansi-font-family:Calibri;
mso-hansi-theme-font:minor-latin'>和</span><span lang=EN-US style='font-size:
12.0pt;mso-bidi-font-size:11.0pt;line-height:125%;mso-fareast-font-family:宋体'>DistributeClient2</span><span
style='font-size:12.0pt;mso-bidi-font-size:11.0pt;line-height:125%;font-family:
宋体;mso-ascii-font-family:Calibri;mso-ascii-theme-font:minor-latin;mso-hansi-font-family:
Calibri;mso-hansi-theme-font:minor-latin'>（这俩的结果是一样的），打印日志如下，可以看到监听到子节点的变化并且打印节点的数据出来（上面是</span><span
lang=EN-US style='font-size:12.0pt;mso-bidi-font-size:11.0pt;line-height:125%;
mso-fareast-font-family:宋体'>104</span><span style='font-size:12.0pt;mso-bidi-font-size:
11.0pt;line-height:125%;font-family:宋体;mso-ascii-font-family:Calibri;
mso-ascii-theme-font:minor-latin;mso-hansi-font-family:Calibri;mso-hansi-theme-font:
minor-latin'>，这里是</span><span lang=EN-US style='font-size:12.0pt;mso-bidi-font-size:
11.0pt;line-height:125%;mso-fareast-font-family:宋体'>101</span><span
style='font-size:12.0pt;mso-bidi-font-size:11.0pt;line-height:125%;font-family:
宋体;mso-ascii-font-family:Calibri;mso-ascii-theme-font:minor-latin;mso-hansi-font-family:
Calibri;mso-hansi-theme-font:minor-latin'>，只是我测试数据不一样而已）</span><span
lang=EN-US style='font-size:12.0pt;mso-bidi-font-size:11.0pt;line-height:125%;
mso-fareast-font-family:宋体'><o:p></o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='mso-no-proof:yes'><!--[if gte vml 1]><v:shape
 id="图片_x0020_93" o:spid="_x0000_i1043" type="#_x0000_t75" style='width:204.75pt;
 height:37.5pt;visibility:visible;mso-wrap-style:square'>
 <v:imagedata src="04_ZookeeperAppend.files/image129.png" o:title=""/>
</v:shape><![endif]--><![if !vml]><img width=273 height=50
src="04_ZookeeperAppend.files/image129.png" v:shapes="图片_x0020_93"><![endif]></span><span
lang=EN-US style='font-size:12.0pt;mso-bidi-font-size:11.0pt;line-height:125%;
mso-fareast-font-family:宋体'><o:p></o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='font-size:12.0pt;mso-bidi-font-size:
11.0pt;line-height:125%;mso-fareast-font-family:宋体'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span style='font-size:12.0pt;mso-bidi-font-size:11.0pt;
line-height:125%;font-family:宋体;mso-ascii-font-family:Calibri;mso-ascii-theme-font:
minor-latin;mso-hansi-font-family:Calibri;mso-hansi-theme-font:minor-latin'>然后启动多个</span><span
lang=EN-US style='font-size:12.0pt;mso-bidi-font-size:11.0pt;line-height:125%;
mso-fareast-font-family:宋体'>DistributeServer</span><span style='font-size:12.0pt;
mso-bidi-font-size:11.0pt;line-height:125%;font-family:宋体;mso-ascii-font-family:
Calibri;mso-ascii-theme-font:minor-latin;mso-hansi-font-family:Calibri;
mso-hansi-theme-font:minor-latin'>，分别改不同的值或者相同的值都行，</span><span lang=EN-US
style='font-size:12.0pt;mso-bidi-font-size:11.0pt;line-height:125%;mso-fareast-font-family:
宋体'>DistributeClient</span><span style='font-size:12.0pt;mso-bidi-font-size:
11.0pt;line-height:125%;font-family:宋体;mso-ascii-font-family:Calibri;
mso-ascii-theme-font:minor-latin;mso-hansi-font-family:Calibri;mso-hansi-theme-font:
minor-latin'>和</span><span lang=EN-US style='font-size:12.0pt;mso-bidi-font-size:
11.0pt;line-height:125%;mso-fareast-font-family:宋体'>DistributeClient2</span><span
style='font-size:12.0pt;mso-bidi-font-size:11.0pt;line-height:125%;font-family:
宋体;mso-ascii-font-family:Calibri;mso-ascii-theme-font:minor-latin;mso-hansi-font-family:
Calibri;mso-hansi-theme-font:minor-latin'>就都能监听到子节点的变化，这就是监听到服务器上线了</span><span
lang=EN-US style='font-size:12.0pt;mso-bidi-font-size:11.0pt;line-height:125%;
mso-fareast-font-family:宋体'><o:p></o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='mso-no-proof:yes'><!--[if gte vml 1]><v:shape
 id="图片_x0020_94" o:spid="_x0000_i1042" type="#_x0000_t75" style='width:566.25pt;
 height:126pt;visibility:visible;mso-wrap-style:square'>
 <v:imagedata src="04_ZookeeperAppend.files/image131.png" o:title=""/>
</v:shape><![endif]--><![if !vml]><img width=755 height=168
src="04_ZookeeperAppend.files/image131.png" v:shapes="图片_x0020_94"><![endif]></span><span
lang=EN-US style='font-size:12.0pt;mso-bidi-font-size:11.0pt;line-height:125%;
mso-fareast-font-family:宋体'><o:p></o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='font-size:12.0pt;mso-bidi-font-size:
11.0pt;line-height:125%;mso-fareast-font-family:宋体'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span style='font-size:12.0pt;mso-bidi-font-size:11.0pt;
line-height:125%;font-family:宋体;mso-ascii-font-family:Calibri;mso-ascii-theme-font:
minor-latin;mso-hansi-font-family:Calibri;mso-hansi-theme-font:minor-latin'>然后关闭</span><span
lang=EN-US style='font-size:12.0pt;mso-bidi-font-size:11.0pt;line-height:125%;
mso-fareast-font-family:宋体'>3</span><span style='font-size:12.0pt;mso-bidi-font-size:
11.0pt;line-height:125%;font-family:宋体;mso-ascii-font-family:Calibri;
mso-ascii-theme-font:minor-latin;mso-hansi-font-family:Calibri;mso-hansi-theme-font:
minor-latin'>个服务器，也能监听到服务器下线了</span><span lang=EN-US style='font-size:12.0pt;
mso-bidi-font-size:11.0pt;line-height:125%;mso-fareast-font-family:宋体'><o:p></o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='mso-no-proof:yes'><!--[if gte vml 1]><v:shape
 id="图片_x0020_95" o:spid="_x0000_i1041" type="#_x0000_t75" style='width:567pt;
 height:132pt;visibility:visible;mso-wrap-style:square'>
 <v:imagedata src="04_ZookeeperAppend.files/image133.png" o:title=""/>
</v:shape><![endif]--><![if !vml]><img width=756 height=176
src="04_ZookeeperAppend.files/image133.png" v:shapes="图片_x0020_95"><![endif]></span><span
lang=EN-US style='font-size:12.0pt;mso-bidi-font-size:11.0pt;line-height:125%;
mso-fareast-font-family:宋体'><o:p></o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='font-size:12.0pt;mso-bidi-font-size:
11.0pt;line-height:125%;mso-fareast-font-family:宋体'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span style='font-size:12.0pt;mso-bidi-font-size:11.0pt;
line-height:125%;font-family:宋体;mso-ascii-font-family:Calibri;mso-ascii-theme-font:
minor-latin;mso-hansi-font-family:Calibri;mso-hansi-theme-font:minor-latin'>命令行查看节点数据</span><span
lang=EN-US style='font-size:12.0pt;mso-bidi-font-size:11.0pt;line-height:125%;
mso-fareast-font-family:宋体'><o:p></o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='mso-no-proof:yes'><!--[if gte vml 1]><v:shape
 id="图片_x0020_91" o:spid="_x0000_i1040" type="#_x0000_t75" style='width:446.25pt;
 height:29.25pt;visibility:visible;mso-wrap-style:square'>
 <v:imagedata src="04_ZookeeperAppend.files/image135.png" o:title=""/>
</v:shape><![endif]--><![if !vml]><img width=595 height=39
src="04_ZookeeperAppend.files/image135.png" v:shapes="图片_x0020_91"><![endif]></span><span
lang=EN-US style='font-size:12.0pt;mso-bidi-font-size:11.0pt;line-height:125%;
mso-fareast-font-family:宋体'><o:p></o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='font-size:12.0pt;mso-bidi-font-size:
11.0pt;line-height:125%;mso-fareast-font-family:宋体'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='font-size:12.0pt;mso-bidi-font-size:
11.0pt;line-height:125%;mso-fareast-font-family:宋体'><o:p>&nbsp;</o:p></span></p>

<h1><span lang=EN-US>5</span><span style='font-family:宋体;mso-ascii-font-family:
Calibri;mso-ascii-theme-font:minor-latin;mso-fareast-theme-font:minor-fareast;
mso-hansi-font-family:Calibri;mso-hansi-theme-font:minor-latin'>、</span><span
lang=EN-US>Zookeeper</span><span style='font-family:宋体;mso-ascii-font-family:
Calibri;mso-ascii-theme-font:minor-latin;mso-fareast-theme-font:minor-fareast;
mso-hansi-font-family:Calibri;mso-hansi-theme-font:minor-latin'>内部原理</span></h1>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<h2><span style='font-family:宋体;mso-ascii-font-family:"Calibri Light";
mso-ascii-theme-font:major-latin;mso-fareast-theme-font:major-fareast;
mso-hansi-font-family:"Calibri Light";mso-hansi-theme-font:major-latin'>选举机制</span></h2>

<p class=MsoNormal><span lang=EN-US style='mso-no-proof:yes'><!--[if gte vml 1]><v:shape
 id="图片_x0020_63" o:spid="_x0000_i1039" type="#_x0000_t75" style='width:412.5pt;
 height:171.75pt;visibility:visible;mso-wrap-style:square'>
 <v:imagedata src="04_ZookeeperAppend.files/image136.png" o:title=""/>
</v:shape><![endif]--><![if !vml]><img width=550 height=229
src="04_ZookeeperAppend.files/image136.png" v:shapes="图片_x0020_63"><![endif]></span></p>

<p class=MsoNormal><span lang=EN-US style='mso-no-proof:yes'><!--[if gte vml 1]><v:shape
 id="图片_x0020_64" o:spid="_x0000_i1038" type="#_x0000_t75" style='width:567pt;
 height:208.5pt;visibility:visible;mso-wrap-style:square'>
 <v:imagedata src="04_ZookeeperAppend.files/image138.png" o:title=""/>
</v:shape><![endif]--><![if !vml]><img width=756 height=278
src="04_ZookeeperAppend.files/image138.png" v:shapes="图片_x0020_64"><![endif]></span></p>

<p class=MsoNormal><span style='font-family:宋体;mso-ascii-font-family:Calibri;
mso-ascii-theme-font:minor-latin;mso-fareast-theme-font:minor-fareast;
mso-hansi-font-family:Calibri;mso-hansi-theme-font:minor-latin'>第一台服务器启动，啥事都不管就选自己为</span><span
lang=EN-US>leader</span><span style='font-family:宋体;mso-ascii-font-family:Calibri;
mso-ascii-theme-font:minor-latin;mso-fareast-theme-font:minor-fareast;
mso-hansi-font-family:Calibri;mso-hansi-theme-font:minor-latin'>，但是台数不够，然后第二个服务器也启动，也选自己为</span><span
lang=EN-US>leader</span><span style='font-family:宋体;mso-ascii-font-family:Calibri;
mso-ascii-theme-font:minor-latin;mso-fareast-theme-font:minor-fareast;
mso-hansi-font-family:Calibri;mso-hansi-theme-font:minor-latin'>，此时第一台服务器就会选举</span><span
lang=EN-US>myid</span><span style='font-family:宋体;mso-ascii-font-family:Calibri;
mso-ascii-theme-font:minor-latin;mso-fareast-theme-font:minor-fareast;
mso-hansi-font-family:Calibri;mso-hansi-theme-font:minor-latin'>最大的服务器作为</span><span
lang=EN-US>leader</span><span style='font-family:宋体;mso-ascii-font-family:Calibri;
mso-ascii-theme-font:minor-latin;mso-fareast-theme-font:minor-fareast;
mso-hansi-font-family:Calibri;mso-hansi-theme-font:minor-latin'>，第三台服务器启动也是选自己为</span><span
lang=EN-US>leader</span><span style='font-family:宋体;mso-ascii-font-family:Calibri;
mso-ascii-theme-font:minor-latin;mso-fareast-theme-font:minor-fareast;
mso-hansi-font-family:Calibri;mso-hansi-theme-font:minor-latin'>，第一、二台选举</span><span
lang=EN-US>myid</span><span style='font-family:宋体;mso-ascii-font-family:Calibri;
mso-ascii-theme-font:minor-latin;mso-fareast-theme-font:minor-fareast;
mso-hansi-font-family:Calibri;mso-hansi-theme-font:minor-latin'>最大的，此时第三台就成了</span><span
lang=EN-US>leader</span><span style='font-family:宋体;mso-ascii-font-family:Calibri;
mso-ascii-theme-font:minor-latin;mso-fareast-theme-font:minor-fareast;
mso-hansi-font-family:Calibri;mso-hansi-theme-font:minor-latin'>了，后面第四、五台启动，都无法改变第三台作为</span><span
lang=EN-US>leader</span><span style='font-family:宋体;mso-ascii-font-family:Calibri;
mso-ascii-theme-font:minor-latin;mso-fareast-theme-font:minor-fareast;
mso-hansi-font-family:Calibri;mso-hansi-theme-font:minor-latin'>的地方。</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<h2><span style='font-family:宋体;mso-ascii-font-family:"Calibri Light";
mso-ascii-theme-font:major-latin;mso-fareast-theme-font:major-fareast;
mso-hansi-font-family:"Calibri Light";mso-hansi-theme-font:major-latin'>节点类型</span></h2>

<p class=MsoNormal><span lang=EN-US style='mso-no-proof:yes'><!--[if gte vml 1]><v:shape
 id="图片_x0020_65" o:spid="_x0000_i1037" type="#_x0000_t75" style='width:411.75pt;
 height:54pt;visibility:visible;mso-wrap-style:square'>
 <v:imagedata src="04_ZookeeperAppend.files/image140.png" o:title=""/>
</v:shape><![endif]--><![if !vml]><img width=549 height=72
src="04_ZookeeperAppend.files/image140.png" v:shapes="图片_x0020_65"><![endif]></span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='mso-no-proof:yes'><!--[if gte vml 1]><v:shape
 id="图片_x0020_66" o:spid="_x0000_i1036" type="#_x0000_t75" style='width:567pt;
 height:256.5pt;visibility:visible;mso-wrap-style:square'>
 <v:imagedata src="04_ZookeeperAppend.files/image142.png" o:title=""/>
</v:shape><![endif]--><![if !vml]><img width=756 height=342
src="04_ZookeeperAppend.files/image142.png" v:shapes="图片_x0020_66"><![endif]></span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span style='font-family:宋体;mso-ascii-font-family:Calibri;
mso-ascii-theme-font:minor-latin;mso-fareast-theme-font:minor-fareast;
mso-hansi-font-family:Calibri;mso-hansi-theme-font:minor-latin'>代码体现</span></p>

<p class=MsoNormal><span lang=EN-US style='mso-no-proof:yes'><!--[if gte vml 1]><v:shape
 id="图片_x0020_75" o:spid="_x0000_i1035" type="#_x0000_t75" style='width:297pt;
 height:72.75pt;visibility:visible;mso-wrap-style:square'>
 <v:imagedata src="04_ZookeeperAppend.files/image144.png" o:title=""/>
</v:shape><![endif]--><![if !vml]><img width=396 height=97
src="04_ZookeeperAppend.files/image144.png" v:shapes="图片_x0020_75"><![endif]></span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='mso-no-proof:yes'><!--[if gte vml 1]><v:shape
 id="图片_x0020_67" o:spid="_x0000_i1034" type="#_x0000_t75" style='width:339pt;
 height:150.75pt;visibility:visible;mso-wrap-style:square'>
 <v:imagedata src="04_ZookeeperAppend.files/image146.png" o:title=""/>
</v:shape><![endif]--><![if !vml]><img width=452 height=201
src="04_ZookeeperAppend.files/image146.png" v:shapes="图片_x0020_67"><![endif]></span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<h2><span lang=EN-US>Stat</span><span style='font-family:宋体;mso-ascii-font-family:
"Calibri Light";mso-ascii-theme-font:major-latin;mso-fareast-theme-font:major-fareast;
mso-hansi-font-family:"Calibri Light";mso-hansi-theme-font:major-latin'>结构体</span></h2>

<p class=MsoNormal><span lang=EN-US>stat / </span><span style='font-family:
宋体;mso-ascii-font-family:Calibri;mso-ascii-theme-font:minor-latin;mso-fareast-theme-font:
minor-fareast;mso-hansi-font-family:Calibri;mso-hansi-theme-font:minor-latin'>可以看到</span><span
lang=EN-US>Stat</span><span style='font-family:宋体;mso-ascii-font-family:Calibri;
mso-ascii-theme-font:minor-latin;mso-fareast-theme-font:minor-fareast;
mso-hansi-font-family:Calibri;mso-hansi-theme-font:minor-latin'>的结构体</span></p>

<p class=MsoNormal><span lang=EN-US style='mso-no-proof:yes'><!--[if gte vml 1]><v:shape
 id="图片_x0020_83" o:spid="_x0000_i1033" type="#_x0000_t75" style='width:305.25pt;
 height:142.5pt;visibility:visible;mso-wrap-style:square'>
 <v:imagedata src="04_ZookeeperAppend.files/image148.png" o:title=""/>
</v:shape><![endif]--><![if !vml]><img width=407 height=190
src="04_ZookeeperAppend.files/image148.png" v:shapes="图片_x0020_83"><![endif]></span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span style='font-family:宋体;mso-ascii-font-family:Calibri;
mso-ascii-theme-font:minor-latin;mso-fareast-theme-font:minor-fareast;
mso-hansi-font-family:Calibri;mso-hansi-theme-font:minor-latin'>解释：</span></p>

<p class=MsoNormal><span lang=EN-US style='mso-no-proof:yes'><!--[if gte vml 1]><v:shape
 id="图片_x0020_84" o:spid="_x0000_i1032" type="#_x0000_t75" style='width:477pt;
 height:307.5pt;visibility:visible;mso-wrap-style:square'>
 <v:imagedata src="04_ZookeeperAppend.files/image150.png" o:title=""/>
</v:shape><![endif]--><![if !vml]><img width=636 height=410
src="04_ZookeeperAppend.files/image150.png" v:shapes="图片_x0020_84"><![endif]></span></p>

<p class=MsoNormal><span lang=EN-US style='mso-no-proof:yes'><!--[if gte vml 1]><v:shape
 id="图片_x0020_85" o:spid="_x0000_i1031" type="#_x0000_t75" style='width:327pt;
 height:73.5pt;visibility:visible;mso-wrap-style:square'>
 <v:imagedata src="04_ZookeeperAppend.files/image152.png" o:title=""/>
</v:shape><![endif]--><![if !vml]><img width=436 height=98
src="04_ZookeeperAppend.files/image152.png" v:shapes="图片_x0020_85"><![endif]></span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<h2><span style='font-family:宋体;mso-ascii-font-family:"Calibri Light";
mso-ascii-theme-font:major-latin;mso-fareast-theme-font:major-fareast;
mso-hansi-font-family:"Calibri Light";mso-hansi-theme-font:major-latin'>监听器原理</span></h2>

<p class=MsoNormal><span lang=EN-US style='mso-no-proof:yes'><!--[if gte vml 1]><v:shape
 id="图片_x0020_86" o:spid="_x0000_i1030" type="#_x0000_t75" style='width:566.25pt;
 height:306pt;visibility:visible;mso-wrap-style:square'>
 <v:imagedata src="04_ZookeeperAppend.files/image154.png" o:title=""/>
</v:shape><![endif]--><![if !vml]><img width=755 height=408
src="04_ZookeeperAppend.files/image154.png" v:shapes="图片_x0020_86"><![endif]></span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<h2><span style='font-family:宋体;mso-ascii-font-family:"Calibri Light";
mso-ascii-theme-font:major-latin;mso-fareast-theme-font:major-fareast;
mso-hansi-font-family:"Calibri Light";mso-hansi-theme-font:major-latin'>写数据流程</span></h2>

<p class=MsoNormal><span lang=EN-US style='mso-no-proof:yes'><!--[if gte vml 1]><v:shape
 id="图片_x0020_87" o:spid="_x0000_i1029" type="#_x0000_t75" style='width:567pt;
 height:269.25pt;visibility:visible;mso-wrap-style:square'>
 <v:imagedata src="04_ZookeeperAppend.files/image156.png" o:title=""/>
</v:shape><![endif]--><![if !vml]><img width=756 height=359
src="04_ZookeeperAppend.files/image156.png" v:shapes="图片_x0020_87"><![endif]></span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='font-size:12.0pt;mso-bidi-font-size:
11.0pt;line-height:125%;mso-fareast-font-family:宋体'><o:p>&nbsp;</o:p></span></p>

<h1><span lang=EN-US>6</span><span style='font-family:宋体;mso-ascii-font-family:
Calibri;mso-ascii-theme-font:minor-latin;mso-fareast-theme-font:minor-fareast;
mso-hansi-font-family:Calibri;mso-hansi-theme-font:minor-latin'>、</span><span
lang=EN-US>CAP</span><span style='font-family:宋体;mso-ascii-font-family:Calibri;
mso-ascii-theme-font:minor-latin;mso-fareast-theme-font:minor-fareast;
mso-hansi-font-family:Calibri;mso-hansi-theme-font:minor-latin'>理论</span><span
lang=EN-US>/paxos</span><span style='font-family:宋体;mso-ascii-font-family:Calibri;
mso-ascii-theme-font:minor-latin;mso-fareast-theme-font:minor-fareast;
mso-hansi-font-family:Calibri;mso-hansi-theme-font:minor-latin'>算法</span></h1>

<h2><span lang=EN-US>CAP</span></h2>

<p class=MsoNormal><span lang=EN-US style='font-size:12.0pt;mso-bidi-font-size:
11.0pt;line-height:125%;mso-fareast-font-family:宋体'>CAP</span><span
style='font-size:12.0pt;mso-bidi-font-size:11.0pt;line-height:125%;font-family:
宋体;mso-ascii-font-family:Calibri;mso-ascii-theme-font:minor-latin;mso-hansi-font-family:
Calibri;mso-hansi-theme-font:minor-latin'>就是</span><span lang=EN-US
style='font-size:12.0pt;mso-bidi-font-size:11.0pt;line-height:125%;mso-fareast-font-family:
宋体'>Consistency</span><span style='font-size:12.0pt;mso-bidi-font-size:11.0pt;
line-height:125%;font-family:宋体;mso-ascii-font-family:Calibri;mso-ascii-theme-font:
minor-latin;mso-hansi-font-family:Calibri;mso-hansi-theme-font:minor-latin'>（一致性）、</span><span
lang=EN-US style='font-size:12.0pt;mso-bidi-font-size:11.0pt;line-height:125%;
mso-fareast-font-family:宋体'>Availability</span><span style='font-size:12.0pt;
mso-bidi-font-size:11.0pt;line-height:125%;font-family:宋体;mso-ascii-font-family:
Calibri;mso-ascii-theme-font:minor-latin;mso-hansi-font-family:Calibri;
mso-hansi-theme-font:minor-latin'>（可用性）、</span><span lang=EN-US
style='font-size:12.0pt;mso-bidi-font-size:11.0pt;line-height:125%;mso-fareast-font-family:
宋体'>Partition Tolerance</span><span style='font-size:12.0pt;mso-bidi-font-size:
11.0pt;line-height:125%;font-family:宋体;mso-ascii-font-family:Calibri;
mso-ascii-theme-font:minor-latin;mso-hansi-font-family:Calibri;mso-hansi-theme-font:
minor-latin'>（容错性），三者只能兼其二，而</span><span lang=EN-US style='font-size:12.0pt;
mso-bidi-font-size:11.0pt;line-height:125%;mso-fareast-font-family:宋体'>P</span><span
style='font-size:12.0pt;mso-bidi-font-size:11.0pt;line-height:125%;font-family:
宋体;mso-ascii-font-family:Calibri;mso-ascii-theme-font:minor-latin;mso-hansi-font-family:
Calibri;mso-hansi-theme-font:minor-latin'>是一定要有的，所以</span><span lang=EN-US
style='font-size:12.0pt;mso-bidi-font-size:11.0pt;line-height:125%;mso-fareast-font-family:
宋体'>C</span><span style='font-size:12.0pt;mso-bidi-font-size:11.0pt;line-height:
125%;font-family:宋体;mso-ascii-font-family:Calibri;mso-ascii-theme-font:minor-latin;
mso-hansi-font-family:Calibri;mso-hansi-theme-font:minor-latin'>与</span><span
lang=EN-US style='font-size:12.0pt;mso-bidi-font-size:11.0pt;line-height:125%;
mso-fareast-font-family:宋体'>A</span><span style='font-size:12.0pt;mso-bidi-font-size:
11.0pt;line-height:125%;font-family:宋体;mso-ascii-font-family:Calibri;
mso-ascii-theme-font:minor-latin;mso-hansi-font-family:Calibri;mso-hansi-theme-font:
minor-latin'>是不可以同时成立的。</span><span lang=EN-US style='font-size:12.0pt;
mso-bidi-font-size:11.0pt;line-height:125%;mso-fareast-font-family:宋体'>Zookeeper</span><span
style='font-size:12.0pt;mso-bidi-font-size:11.0pt;line-height:125%;font-family:
宋体;mso-ascii-font-family:Calibri;mso-ascii-theme-font:minor-latin;mso-hansi-font-family:
Calibri;mso-hansi-theme-font:minor-latin'>是</span><span lang=EN-US
style='font-size:12.0pt;mso-bidi-font-size:11.0pt;line-height:125%;mso-fareast-font-family:
宋体'>CP</span><span style='font-size:12.0pt;mso-bidi-font-size:11.0pt;
line-height:125%;font-family:宋体;mso-ascii-font-family:Calibri;mso-ascii-theme-font:
minor-latin;mso-hansi-font-family:Calibri;mso-hansi-theme-font:minor-latin'>，而</span><span
lang=EN-US style='font-size:12.0pt;mso-bidi-font-size:11.0pt;line-height:125%;
mso-fareast-font-family:宋体'>Eureka</span><span style='font-size:12.0pt;
mso-bidi-font-size:11.0pt;line-height:125%;font-family:宋体;mso-ascii-font-family:
Calibri;mso-ascii-theme-font:minor-latin;mso-hansi-font-family:Calibri;
mso-hansi-theme-font:minor-latin'>是</span><span lang=EN-US style='font-size:
12.0pt;mso-bidi-font-size:11.0pt;line-height:125%;mso-fareast-font-family:宋体'>AP</span><span
style='font-size:12.0pt;mso-bidi-font-size:11.0pt;line-height:125%;font-family:
宋体;mso-ascii-font-family:Calibri;mso-ascii-theme-font:minor-latin;mso-hansi-font-family:
Calibri;mso-hansi-theme-font:minor-latin'>。</span><span lang=EN-US
style='font-size:12.0pt;mso-bidi-font-size:11.0pt;line-height:125%;mso-fareast-font-family:
宋体'><o:p></o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='mso-no-proof:yes'><!--[if gte vml 1]><v:shape
 id="图片_x0020_57" o:spid="_x0000_i1028" type="#_x0000_t75" style='width:307.5pt;
 height:174.75pt;visibility:visible;mso-wrap-style:square'>
 <v:imagedata src="04_ZookeeperAppend.files/image158.png" o:title=""/>
</v:shape><![endif]--><![if !vml]><img width=410 height=233
src="04_ZookeeperAppend.files/image158.png" v:shapes="图片_x0020_57"><![endif]></span><span
lang=EN-US style='font-size:12.0pt;mso-bidi-font-size:11.0pt;line-height:125%;
mso-fareast-font-family:宋体'><o:p></o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='font-size:12.0pt;mso-bidi-font-size:
11.0pt;line-height:125%;mso-fareast-font-family:宋体'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='font-size:12.0pt;mso-bidi-font-size:
11.0pt;line-height:125%;mso-fareast-font-family:宋体'>G1</span><span
style='font-size:12.0pt;mso-bidi-font-size:11.0pt;line-height:125%;font-family:
宋体;mso-ascii-font-family:Calibri;mso-ascii-theme-font:minor-latin;mso-hansi-font-family:
Calibri;mso-hansi-theme-font:minor-latin'>、</span><span lang=EN-US
style='font-size:12.0pt;mso-bidi-font-size:11.0pt;line-height:125%;mso-fareast-font-family:
宋体'>G2</span><span style='font-size:12.0pt;mso-bidi-font-size:11.0pt;
line-height:125%;font-family:宋体;mso-ascii-font-family:Calibri;mso-ascii-theme-font:
minor-latin;mso-hansi-font-family:Calibri;mso-hansi-theme-font:minor-latin'>是两台独立的机子，如果保证</span><span
lang=EN-US style='font-size:12.0pt;mso-bidi-font-size:11.0pt;line-height:125%;
mso-fareast-font-family:宋体'> G2 </span><span style='font-size:12.0pt;
mso-bidi-font-size:11.0pt;line-height:125%;font-family:宋体;mso-ascii-font-family:
Calibri;mso-ascii-theme-font:minor-latin;mso-hansi-font-family:Calibri;
mso-hansi-theme-font:minor-latin'>的一致性，那么</span><span lang=EN-US
style='font-size:12.0pt;mso-bidi-font-size:11.0pt;line-height:125%;mso-fareast-font-family:
宋体'> G1 </span><span style='font-size:12.0pt;mso-bidi-font-size:11.0pt;
line-height:125%;font-family:宋体;mso-ascii-font-family:Calibri;mso-ascii-theme-font:
minor-latin;mso-hansi-font-family:Calibri;mso-hansi-theme-font:minor-latin'>必须在写操作时，锁定</span><span
lang=EN-US style='font-size:12.0pt;mso-bidi-font-size:11.0pt;line-height:125%;
mso-fareast-font-family:宋体'> G2 </span><span style='font-size:12.0pt;
mso-bidi-font-size:11.0pt;line-height:125%;font-family:宋体;mso-ascii-font-family:
Calibri;mso-ascii-theme-font:minor-latin;mso-hansi-font-family:Calibri;
mso-hansi-theme-font:minor-latin'>的读操作和写操作。只有数据同步后，才能重新开放读写。锁定期间，</span><span
lang=EN-US style='font-size:12.0pt;mso-bidi-font-size:11.0pt;line-height:125%;
mso-fareast-font-family:宋体'>G2 </span><span style='font-size:12.0pt;mso-bidi-font-size:
11.0pt;line-height:125%;font-family:宋体;mso-ascii-font-family:Calibri;
mso-ascii-theme-font:minor-latin;mso-hansi-font-family:Calibri;mso-hansi-theme-font:
minor-latin'>不能读写，没有可用性不。如果保证</span><span lang=EN-US style='font-size:12.0pt;
mso-bidi-font-size:11.0pt;line-height:125%;mso-fareast-font-family:宋体'> G2 </span><span
style='font-size:12.0pt;mso-bidi-font-size:11.0pt;line-height:125%;font-family:
宋体;mso-ascii-font-family:Calibri;mso-ascii-theme-font:minor-latin;mso-hansi-font-family:
Calibri;mso-hansi-theme-font:minor-latin'>的可用性，那么势必不能锁定</span><span lang=EN-US
style='font-size:12.0pt;mso-bidi-font-size:11.0pt;line-height:125%;mso-fareast-font-family:
宋体'> G2</span><span style='font-size:12.0pt;mso-bidi-font-size:11.0pt;
line-height:125%;font-family:宋体;mso-ascii-font-family:Calibri;mso-ascii-theme-font:
minor-latin;mso-hansi-font-family:Calibri;mso-hansi-theme-font:minor-latin'>，所以一致性不成立。</span><span
lang=EN-US style='font-size:12.0pt;mso-bidi-font-size:11.0pt;line-height:125%;
mso-fareast-font-family:宋体'><o:p></o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='font-size:12.0pt;mso-bidi-font-size:
11.0pt;line-height:125%;mso-fareast-font-family:宋体'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span style='font-size:12.0pt;mso-bidi-font-size:11.0pt;
line-height:125%;font-family:宋体;mso-ascii-font-family:Calibri;mso-ascii-theme-font:
minor-latin;mso-hansi-font-family:Calibri;mso-hansi-theme-font:minor-latin'>还有老马自创的</span><span
lang=EN-US style='font-size:12.0pt;mso-bidi-font-size:11.0pt;line-height:125%;
mso-fareast-font-family:宋体'>CBP</span><span style='font-size:12.0pt;mso-bidi-font-size:
11.0pt;line-height:125%;font-family:宋体;mso-ascii-font-family:Calibri;
mso-ascii-theme-font:minor-latin;mso-hansi-font-family:Calibri;mso-hansi-theme-font:
minor-latin'>，</span><span lang=EN-US style='font-size:12.0pt;mso-bidi-font-size:
11.0pt;line-height:125%;mso-fareast-font-family:宋体'>Capability</span><span
style='font-size:12.0pt;mso-bidi-font-size:11.0pt;line-height:125%;font-family:
宋体;mso-ascii-font-family:Calibri;mso-ascii-theme-font:minor-latin;mso-hansi-font-family:
Calibri;mso-hansi-theme-font:minor-latin'>（能力）、</span><span lang=EN-US
style='font-size:12.0pt;mso-bidi-font-size:11.0pt;line-height:125%;mso-fareast-font-family:
宋体'>Beauty</span><span style='font-size:12.0pt;mso-bidi-font-size:11.0pt;
line-height:125%;font-family:宋体;mso-ascii-font-family:Calibri;mso-ascii-theme-font:
minor-latin;mso-hansi-font-family:Calibri;mso-hansi-theme-font:minor-latin'>（美貌）、</span><span
lang=EN-US style='font-size:12.0pt;mso-bidi-font-size:11.0pt;line-height:125%;
mso-fareast-font-family:宋体'>Personality</span><span style='font-size:12.0pt;
mso-bidi-font-size:11.0pt;line-height:125%;font-family:宋体;mso-ascii-font-family:
Calibri;mso-ascii-theme-font:minor-latin;mso-hansi-font-family:Calibri;
mso-hansi-theme-font:minor-latin'>（性格）。</span><span lang=EN-US
style='font-size:12.0pt;mso-bidi-font-size:11.0pt;line-height:125%;mso-fareast-font-family:
宋体'><o:p></o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='font-size:12.0pt;mso-bidi-font-size:
11.0pt;line-height:125%;mso-fareast-font-family:宋体'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='font-size:12.0pt;mso-bidi-font-size:
11.0pt;line-height:125%;mso-fareast-font-family:宋体'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='font-size:12.0pt;mso-bidi-font-size:
11.0pt;line-height:125%;mso-fareast-font-family:宋体'><o:p>&nbsp;</o:p></span></p>

<h2><span lang=EN-US>Zookeeper</span><span style='font-family:宋体;mso-ascii-font-family:
"Calibri Light";mso-ascii-theme-font:major-latin;mso-fareast-theme-font:major-fareast;
mso-hansi-font-family:"Calibri Light";mso-hansi-theme-font:major-latin'>灵魂，一个关于</span><span
lang=EN-US>Paxos</span><span style='font-family:宋体;mso-ascii-font-family:"Calibri Light";
mso-ascii-theme-font:major-latin;mso-fareast-theme-font:major-fareast;
mso-hansi-font-family:"Calibri Light";mso-hansi-theme-font:major-latin'>算法的故事</span></h2>

<p class=MsoNormal><span lang=EN-US><a
href="https://baijiahao.baidu.com/s?id=1563167591605955&amp;wfr=spider&amp;for=pc"><span
style='font-size:12.0pt;mso-bidi-font-size:11.0pt;line-height:125%;mso-fareast-font-family:
宋体'>https://baijiahao.baidu.com/s?id=1563167591605955&amp;wfr=spider&amp;for=pc</span></a></span><span
lang=EN-US style='font-size:12.0pt;mso-bidi-font-size:11.0pt;line-height:125%;
mso-fareast-font-family:宋体'> <o:p></o:p></span></p>

<p class=MsoNormal style='background:white'><span lang=EN-US style='font-size:
9.0pt;line-height:125%;font-family:"Arial",sans-serif;mso-fareast-font-family:
宋体;color:black'><o:p>&nbsp;</o:p></span></p>

<p style='margin:0cm;margin-bottom:.0001pt;text-align:justify;text-justify:
inter-ideograph;line-height:18.0pt;background:white'><span style='mso-ascii-font-family:
Arial;mso-hansi-font-family:Arial;mso-bidi-font-family:Arial;color:#333333'>　　</span><span
lang=EN-US style='font-family:"Arial",sans-serif;color:#333333'>Zookeeper</span><span
style='mso-ascii-font-family:Arial;mso-hansi-font-family:Arial;mso-bidi-font-family:
Arial;color:#333333'>默认采用</span><span lang=EN-US style='font-family:"Arial",sans-serif;
color:#333333'>FastLeaderElection</span><span style='mso-ascii-font-family:
Arial;mso-hansi-font-family:Arial;mso-bidi-font-family:Arial;color:#333333'>算法</span><span
lang=EN-US style='font-family:"Arial",sans-serif;color:#333333'>,</span><span
style='mso-ascii-font-family:Arial;mso-hansi-font-family:Arial;mso-bidi-font-family:
Arial;color:#333333'>然而</span><span lang=EN-US style='font-family:"Arial",sans-serif;
color:#333333'>FastLeaderElection</span><span style='mso-ascii-font-family:
Arial;mso-hansi-font-family:Arial;mso-bidi-font-family:Arial;color:#333333'>对于</span><span
lang=EN-US style='font-family:"Arial",sans-serif;color:#333333'>Zookeeper</span><span
style='mso-ascii-font-family:Arial;mso-hansi-font-family:Arial;mso-bidi-font-family:
Arial;color:#333333'>来讲只是相当于</span><span lang=EN-US style='font-family:"Arial",sans-serif;
color:#333333'>paxos</span><span style='mso-ascii-font-family:Arial;mso-hansi-font-family:
Arial;mso-bidi-font-family:Arial;color:#333333'>中的</span><span lang=EN-US
style='font-family:"Arial",sans-serif;color:#333333'>leader</span><span
style='mso-ascii-font-family:Arial;mso-hansi-font-family:Arial;mso-bidi-font-family:
Arial;color:#333333'>选举。</span><span lang=EN-US style='font-family:"Arial",sans-serif;
color:#333333'><o:p></o:p></span></p>

<p style='margin-top:16.5pt;margin-right:0cm;margin-bottom:0cm;margin-left:
0cm;margin-bottom:.0001pt;text-align:justify;text-justify:inter-ideograph;
line-height:18.0pt;background:white'><span style='mso-ascii-font-family:Arial;
mso-hansi-font-family:Arial;mso-bidi-font-family:Arial;color:#333333'>　　下面我们用最简单的方式加以描述并建立起</span><span
lang=EN-US style='font-family:"Arial",sans-serif;color:#333333'>Paxos</span><span
style='mso-ascii-font-family:Arial;mso-hansi-font-family:Arial;mso-bidi-font-family:
Arial;color:#333333'>和</span><span lang=EN-US style='font-family:"Arial",sans-serif;
color:#333333'>ZKServer</span><span style='mso-ascii-font-family:Arial;
mso-hansi-font-family:Arial;mso-bidi-font-family:Arial;color:#333333'>的对应关系。</span><span
lang=EN-US style='font-family:"Arial",sans-serif;color:#333333'><o:p></o:p></span></p>

<p style='margin-top:16.5pt;margin-right:0cm;margin-bottom:0cm;margin-left:
0cm;margin-bottom:.0001pt;text-align:justify;text-justify:inter-ideograph;
line-height:18.0pt;background:white'><span style='mso-ascii-font-family:Arial;
mso-hansi-font-family:Arial;mso-bidi-font-family:Arial;color:#333333'>　　</span><span
lang=EN-US style='font-family:"Arial",sans-serif;color:#333333'>Paxos</span><span
style='mso-ascii-font-family:Arial;mso-hansi-font-family:Arial;mso-bidi-font-family:
Arial;color:#333333'>描述了这样一个场景</span><span lang=EN-US style='font-family:"Arial",sans-serif;
color:#333333'>:<o:p></o:p></span></p>

<p class=MsoNormal style='background:white'><span lang=EN-US style='font-size:
9.0pt;line-height:125%;font-family:"Arial",sans-serif;color:black;mso-no-proof:
yes'><!--[if gte vml 1]><v:shape id="图片_x0020_3" o:spid="_x0000_i1027" type="#_x0000_t75"
 alt="https://ss2.baidu.com/6ONYsjip0QIZ8tyhnq/it/u=3998786123,1549356376&amp;fm=170&amp;s=5383C2A4521911C65AA394100300D0FB&amp;w=450&amp;h=241&amp;img.JPEG"
 style='width:270.75pt;height:144.75pt;visibility:visible;mso-wrap-style:square'>
 <v:imagedata src="04_ZookeeperAppend.files/image159.png" o:title="u=3998786123,1549356376&amp;fm=170&amp;s=5383C2A4521911C65AA394100300D0FB&amp;w=450&amp;h=241&amp;img"/>
</v:shape><![endif]--><![if !vml]><img border=0 width=361 height=193
src="04_ZookeeperAppend.files/image160.jpg"
alt="https://ss2.baidu.com/6ONYsjip0QIZ8tyhnq/it/u=3998786123,1549356376&amp;fm=170&amp;s=5383C2A4521911C65AA394100300D0FB&amp;w=450&amp;h=241&amp;img.JPEG"
v:shapes="图片_x0020_3"><![endif]></span><span lang=EN-US style='font-size:9.0pt;
line-height:125%;font-family:"Arial",sans-serif;color:black'><o:p></o:p></span></p>

<p style='margin-top:19.5pt;margin-right:0cm;margin-bottom:0cm;margin-left:
0cm;margin-bottom:.0001pt;text-align:justify;text-justify:inter-ideograph;
line-height:18.0pt;background:white'><span style='mso-ascii-font-family:Arial;
mso-hansi-font-family:Arial;mso-bidi-font-family:Arial;color:#333333'>　　</span><span
lang=EN-US style='font-family:"Arial",sans-serif;color:#333333'>1</span><span
style='mso-ascii-font-family:Arial;mso-hansi-font-family:Arial;mso-bidi-font-family:
Arial;color:#333333'>、有一个叫做</span><span lang=EN-US style='font-family:"Arial",sans-serif;
color:#333333'>Paxos</span><span style='mso-ascii-font-family:Arial;mso-hansi-font-family:
Arial;mso-bidi-font-family:Arial;color:#333333'>的小岛</span><span lang=EN-US
style='font-family:"Arial",sans-serif;color:#333333'>(Island)</span><span
style='mso-ascii-font-family:Arial;mso-hansi-font-family:Arial;mso-bidi-font-family:
Arial;color:#333333'>上面住了一批居民，岛上面所有的事情由一些特殊的人决定，他们叫做议员</span><span lang=EN-US
style='font-family:"Arial",sans-serif;color:#333333'>(Senator)</span><span
style='mso-ascii-font-family:Arial;mso-hansi-font-family:Arial;mso-bidi-font-family:
Arial;color:#333333'>。</span><span lang=EN-US style='font-family:"Arial",sans-serif;
color:#333333'><o:p></o:p></span></p>

<p style='margin-top:16.5pt;margin-right:0cm;margin-bottom:0cm;margin-left:
0cm;margin-bottom:.0001pt;text-align:justify;text-justify:inter-ideograph;
line-height:18.0pt;background:white'><span style='mso-ascii-font-family:Arial;
mso-hansi-font-family:Arial;mso-bidi-font-family:Arial;color:#333333'>　　</span><span
lang=EN-US style='font-family:"Arial",sans-serif;color:#333333'>2</span><span
style='mso-ascii-font-family:Arial;mso-hansi-font-family:Arial;mso-bidi-font-family:
Arial;color:#333333'>、议员的总数</span><span lang=EN-US style='font-family:"Arial",sans-serif;
color:#333333'>(SenatorCount)</span><span style='mso-ascii-font-family:Arial;
mso-hansi-font-family:Arial;mso-bidi-font-family:Arial;color:#333333'>是确定的，不能更改。</span><span
lang=EN-US style='font-family:"Arial",sans-serif;color:#333333'><o:p></o:p></span></p>

<p style='margin-top:16.5pt;margin-right:0cm;margin-bottom:0cm;margin-left:
0cm;margin-bottom:.0001pt;text-align:justify;text-justify:inter-ideograph;
line-height:18.0pt;background:white'><span style='mso-ascii-font-family:Arial;
mso-hansi-font-family:Arial;mso-bidi-font-family:Arial;color:#333333'>　　</span><span
lang=EN-US style='font-family:"Arial",sans-serif;color:#333333'>3</span><span
style='mso-ascii-font-family:Arial;mso-hansi-font-family:Arial;mso-bidi-font-family:
Arial;color:#333333'>、岛上每次环境事务的变更都需要通过一个提议</span><span lang=EN-US
style='font-family:"Arial",sans-serif;color:#333333'>(Proposal)</span><span
style='mso-ascii-font-family:Arial;mso-hansi-font-family:Arial;mso-bidi-font-family:
Arial;color:#333333'>，每个提议都有一个编号</span><span lang=EN-US style='font-family:
"Arial",sans-serif;color:#333333'>(PID)</span><span style='mso-ascii-font-family:
Arial;mso-hansi-font-family:Arial;mso-bidi-font-family:Arial;color:#333333'>，这个编号是一直增长的，不能倒退。</span><span
lang=EN-US style='font-family:"Arial",sans-serif;color:#333333'><o:p></o:p></span></p>

<p style='margin-top:16.5pt;margin-right:0cm;margin-bottom:0cm;margin-left:
0cm;margin-bottom:.0001pt;text-align:justify;text-justify:inter-ideograph;
line-height:18.0pt;background:white'><span style='mso-ascii-font-family:Arial;
mso-hansi-font-family:Arial;mso-bidi-font-family:Arial;color:#333333'>　　</span><span
lang=EN-US style='font-family:"Arial",sans-serif;color:#333333'>4</span><span
style='mso-ascii-font-family:Arial;mso-hansi-font-family:Arial;mso-bidi-font-family:
Arial;color:#333333'>、每个提议都需要超过半数</span><span lang=EN-US style='font-family:
"Arial",sans-serif;color:#333333'>((SenatorCount)/2+1)</span><span
style='mso-ascii-font-family:Arial;mso-hansi-font-family:Arial;mso-bidi-font-family:
Arial;color:#333333'>的议员同意才能生效。</span><span lang=EN-US style='font-family:"Arial",sans-serif;
color:#333333'><o:p></o:p></span></p>

<p style='margin-top:16.5pt;margin-right:0cm;margin-bottom:0cm;margin-left:
0cm;margin-bottom:.0001pt;text-align:justify;text-justify:inter-ideograph;
line-height:18.0pt;background:white'><span style='mso-ascii-font-family:Arial;
mso-hansi-font-family:Arial;mso-bidi-font-family:Arial;color:#333333'>　　</span><span
lang=EN-US style='font-family:"Arial",sans-serif;color:#333333'>5</span><span
style='mso-ascii-font-family:Arial;mso-hansi-font-family:Arial;mso-bidi-font-family:
Arial;color:#333333'>、每个议员只会同意大于当前编号的提议，包括已生效的和未生效的。</span><span lang=EN-US
style='font-family:"Arial",sans-serif;color:#333333'><o:p></o:p></span></p>

<p style='margin-top:16.5pt;margin-right:0cm;margin-bottom:0cm;margin-left:
0cm;margin-bottom:.0001pt;text-align:justify;text-justify:inter-ideograph;
line-height:18.0pt;background:white'><span style='mso-ascii-font-family:Arial;
mso-hansi-font-family:Arial;mso-bidi-font-family:Arial;color:#333333'>　　</span><span
lang=EN-US style='font-family:"Arial",sans-serif;color:#333333'>6</span><span
style='mso-ascii-font-family:Arial;mso-hansi-font-family:Arial;mso-bidi-font-family:
Arial;color:#333333'>、如果议员收到小于等于当前编号的提议，他会拒绝，并告知对方：你的提议已经有人提过了。这里的当前编号是每个议员在自己记事本上面记录的编号，他不断更新这个编号。整个议会不能保证所有议员记事本上的编号总是相同的。</span><span
lang=EN-US style='font-family:"Arial",sans-serif;color:#333333'><o:p></o:p></span></p>

<p style='margin-top:16.5pt;margin-right:0cm;margin-bottom:0cm;margin-left:
0cm;margin-bottom:.0001pt;text-align:justify;text-justify:inter-ideograph;
line-height:18.0pt;background:white'><span style='mso-ascii-font-family:Arial;
mso-hansi-font-family:Arial;mso-bidi-font-family:Arial;color:#333333'>　　现在议会有一个目标：保证所有的议员对于提议都能达成一致的看法。</span><span
lang=EN-US style='font-family:"Arial",sans-serif;color:#333333'><o:p></o:p></span></p>

<p style='margin-top:16.5pt;margin-right:0cm;margin-bottom:0cm;margin-left:
0cm;margin-bottom:.0001pt;text-align:justify;text-justify:inter-ideograph;
line-height:18.0pt;background:white'><span style='mso-ascii-font-family:Arial;
mso-hansi-font-family:Arial;mso-bidi-font-family:Arial;color:#333333'>　　好，现在议会开始运作，所有议员一开始记事本上面记录的编号都是</span><span
lang=EN-US style='font-family:"Arial",sans-serif;color:#333333'>0</span><span
style='mso-ascii-font-family:Arial;mso-hansi-font-family:Arial;mso-bidi-font-family:
Arial;color:#333333'>。</span><span lang=EN-US style='font-family:"Arial",sans-serif;
color:#333333'><o:p></o:p></span></p>

<p style='margin-top:16.5pt;margin-right:0cm;margin-bottom:0cm;margin-left:
0cm;margin-bottom:.0001pt;text-align:justify;text-justify:inter-ideograph;
line-height:18.0pt;background:white'><span style='mso-ascii-font-family:Arial;
mso-hansi-font-family:Arial;mso-bidi-font-family:Arial;color:#333333'>　　有一个议员发了一个提议：</span><span
lang=EN-US style='font-family:"Arial",sans-serif;color:#333333'><o:p></o:p></span></p>

<p style='margin-top:16.5pt;margin-right:0cm;margin-bottom:0cm;margin-left:
0cm;margin-bottom:.0001pt;text-align:justify;text-justify:inter-ideograph;
line-height:18.0pt;background:white'><span style='mso-ascii-font-family:Arial;
mso-hansi-font-family:Arial;mso-bidi-font-family:Arial;color:#333333'>　　将电费设定为</span><span
lang=EN-US style='font-family:"Arial",sans-serif;color:#333333'>1</span><span
style='mso-ascii-font-family:Arial;mso-hansi-font-family:Arial;mso-bidi-font-family:
Arial;color:#333333'>元</span><span lang=EN-US style='font-family:"Arial",sans-serif;
color:#333333'>/</span><span style='mso-ascii-font-family:Arial;mso-hansi-font-family:
Arial;mso-bidi-font-family:Arial;color:#333333'>度。他首先看了一下记事本，嗯，当前提议编号是</span><span
lang=EN-US style='font-family:"Arial",sans-serif;color:#333333'>0</span><span
style='mso-ascii-font-family:Arial;mso-hansi-font-family:Arial;mso-bidi-font-family:
Arial;color:#333333'>，那么我的这个提议的编号就是</span><span lang=EN-US style='font-family:
"Arial",sans-serif;color:#333333'>1</span><span style='mso-ascii-font-family:
Arial;mso-hansi-font-family:Arial;mso-bidi-font-family:Arial;color:#333333'>，于是他给所有议员发消息：</span><span
lang=EN-US style='font-family:"Arial",sans-serif;color:#333333'>1</span><span
style='mso-ascii-font-family:Arial;mso-hansi-font-family:Arial;mso-bidi-font-family:
Arial;color:#333333'>号提议，设定电费</span><span lang=EN-US style='font-family:"Arial",sans-serif;
color:#333333'>1</span><span style='mso-ascii-font-family:Arial;mso-hansi-font-family:
Arial;mso-bidi-font-family:Arial;color:#333333'>元</span><span lang=EN-US
style='font-family:"Arial",sans-serif;color:#333333'>/</span><span
style='mso-ascii-font-family:Arial;mso-hansi-font-family:Arial;mso-bidi-font-family:
Arial;color:#333333'>度。其他议员收到消息以后查了一下记事本，哦，当前提议编号是</span><span lang=EN-US
style='font-family:"Arial",sans-serif;color:#333333'>0</span><span
style='mso-ascii-font-family:Arial;mso-hansi-font-family:Arial;mso-bidi-font-family:
Arial;color:#333333'>，这个提议可接受，于是他记录下这个提议并回复：我接受你的</span><span lang=EN-US
style='font-family:"Arial",sans-serif;color:#333333'>1</span><span
style='mso-ascii-font-family:Arial;mso-hansi-font-family:Arial;mso-bidi-font-family:
Arial;color:#333333'>号提议，同时他在记事本上记录：当前提议编号为</span><span lang=EN-US
style='font-family:"Arial",sans-serif;color:#333333'>1</span><span
style='mso-ascii-font-family:Arial;mso-hansi-font-family:Arial;mso-bidi-font-family:
Arial;color:#333333'>。发起提议的议员收到了超过半数的回复，立即给所有人发通知：</span><span lang=EN-US
style='font-family:"Arial",sans-serif;color:#333333'>1</span><span
style='mso-ascii-font-family:Arial;mso-hansi-font-family:Arial;mso-bidi-font-family:
Arial;color:#333333'>号提议生效！收到的议员会修改他的记事本，将</span><span lang=EN-US
style='font-family:"Arial",sans-serif;color:#333333'>1</span><span
style='mso-ascii-font-family:Arial;mso-hansi-font-family:Arial;mso-bidi-font-family:
Arial;color:#333333'>好提议由记录改成正式的法令，当有人问他电费为多少时，他会查看法令并告诉对方：</span><span
lang=EN-US style='font-family:"Arial",sans-serif;color:#333333'>1</span><span
style='mso-ascii-font-family:Arial;mso-hansi-font-family:Arial;mso-bidi-font-family:
Arial;color:#333333'>元</span><span lang=EN-US style='font-family:"Arial",sans-serif;
color:#333333'>/</span><span style='mso-ascii-font-family:Arial;mso-hansi-font-family:
Arial;mso-bidi-font-family:Arial;color:#333333'>度。</span><span lang=EN-US
style='font-family:"Arial",sans-serif;color:#333333'><o:p></o:p></span></p>

<p style='margin-top:16.5pt;margin-right:0cm;margin-bottom:0cm;margin-left:
0cm;margin-bottom:.0001pt;text-align:justify;text-justify:inter-ideograph;
line-height:18.0pt;background:white'><span style='mso-ascii-font-family:Arial;
mso-hansi-font-family:Arial;mso-bidi-font-family:Arial;color:#333333'>　　现在看冲突的解决：</span><span
lang=EN-US style='font-family:"Arial",sans-serif;color:#333333'><o:p></o:p></span></p>

<p class=MsoNormal style='background:white'><span lang=EN-US style='font-size:
9.0pt;line-height:125%;font-family:"Arial",sans-serif;color:black;mso-no-proof:
yes'><!--[if gte vml 1]><v:shape id="图片_x0020_2" o:spid="_x0000_i1026" type="#_x0000_t75"
 alt="https://ss1.baidu.com/6ONXsjip0QIZ8tyhnq/it/u=883546729,2281418288&amp;fm=170&amp;s=34F6683241E26F0510D8D07A0300D071&amp;w=423&amp;h=312&amp;img.JPG"
 style='width:253.5pt;height:187.5pt;visibility:visible;mso-wrap-style:square'>
 <v:imagedata src="04_ZookeeperAppend.files/image161.png" o:title="u=883546729,2281418288&amp;fm=170&amp;s=34F6683241E26F0510D8D07A0300D071&amp;w=423&amp;h=312&amp;img"/>
</v:shape><![endif]--><![if !vml]><img border=0 width=338 height=250
src="04_ZookeeperAppend.files/image162.jpg"
alt="https://ss1.baidu.com/6ONXsjip0QIZ8tyhnq/it/u=883546729,2281418288&amp;fm=170&amp;s=34F6683241E26F0510D8D07A0300D071&amp;w=423&amp;h=312&amp;img.JPG"
v:shapes="图片_x0020_2"><![endif]></span><span lang=EN-US style='font-size:9.0pt;
line-height:125%;font-family:"Arial",sans-serif;color:black'><o:p></o:p></span></p>

<p style='margin-top:19.5pt;margin-right:0cm;margin-bottom:0cm;margin-left:
0cm;margin-bottom:.0001pt;text-align:justify;text-justify:inter-ideograph;
line-height:18.0pt;background:white'><span style='mso-ascii-font-family:Arial;
mso-hansi-font-family:Arial;mso-bidi-font-family:Arial;color:#333333'>　　假设总共有三个议员</span><span
lang=EN-US style='font-family:"Arial",sans-serif;color:#333333'>S1-S3</span><span
style='mso-ascii-font-family:Arial;mso-hansi-font-family:Arial;mso-bidi-font-family:
Arial;color:#333333'>，</span><span lang=EN-US style='font-family:"Arial",sans-serif;
color:#333333'>S1</span><span style='mso-ascii-font-family:Arial;mso-hansi-font-family:
Arial;mso-bidi-font-family:Arial;color:#333333'>和</span><span lang=EN-US
style='font-family:"Arial",sans-serif;color:#333333'>S2</span><span
style='mso-ascii-font-family:Arial;mso-hansi-font-family:Arial;mso-bidi-font-family:
Arial;color:#333333'>同时发起了一个提议</span><span lang=EN-US style='font-family:"Arial",sans-serif;
color:#333333'>:1</span><span style='mso-ascii-font-family:Arial;mso-hansi-font-family:
Arial;mso-bidi-font-family:Arial;color:#333333'>号提议，设定电费。</span><span
lang=EN-US style='font-family:"Arial",sans-serif;color:#333333'>S1</span><span
style='mso-ascii-font-family:Arial;mso-hansi-font-family:Arial;mso-bidi-font-family:
Arial;color:#333333'>想设为</span><span lang=EN-US style='font-family:"Arial",sans-serif;
color:#333333'>1</span><span style='mso-ascii-font-family:Arial;mso-hansi-font-family:
Arial;mso-bidi-font-family:Arial;color:#333333'>元</span><span lang=EN-US
style='font-family:"Arial",sans-serif;color:#333333'>/</span><span
style='mso-ascii-font-family:Arial;mso-hansi-font-family:Arial;mso-bidi-font-family:
Arial;color:#333333'>度</span><span lang=EN-US style='font-family:"Arial",sans-serif;
color:#333333'>,S2</span><span style='mso-ascii-font-family:Arial;mso-hansi-font-family:
Arial;mso-bidi-font-family:Arial;color:#333333'>想设为</span><span lang=EN-US
style='font-family:"Arial",sans-serif;color:#333333'>2</span><span
style='mso-ascii-font-family:Arial;mso-hansi-font-family:Arial;mso-bidi-font-family:
Arial;color:#333333'>元</span><span lang=EN-US style='font-family:"Arial",sans-serif;
color:#333333'>/</span><span style='mso-ascii-font-family:Arial;mso-hansi-font-family:
Arial;mso-bidi-font-family:Arial;color:#333333'>度。结果</span><span lang=EN-US
style='font-family:"Arial",sans-serif;color:#333333'>S3</span><span
style='mso-ascii-font-family:Arial;mso-hansi-font-family:Arial;mso-bidi-font-family:
Arial;color:#333333'>先收到了</span><span lang=EN-US style='font-family:"Arial",sans-serif;
color:#333333'>S1</span><span style='mso-ascii-font-family:Arial;mso-hansi-font-family:
Arial;mso-bidi-font-family:Arial;color:#333333'>的提议，于是他做了和前面同样的操作。紧接着他又收到了</span><span
lang=EN-US style='font-family:"Arial",sans-serif;color:#333333'>S2</span><span
style='mso-ascii-font-family:Arial;mso-hansi-font-family:Arial;mso-bidi-font-family:
Arial;color:#333333'>的提议，结果他一查记事本，咦，这个提议的编号小于等于我的当前编号</span><span lang=EN-US
style='font-family:"Arial",sans-serif;color:#333333'>1</span><span
style='mso-ascii-font-family:Arial;mso-hansi-font-family:Arial;mso-bidi-font-family:
Arial;color:#333333'>，于是他拒绝了这个提议：对不起，这个提议先前提过了。于是</span><span lang=EN-US
style='font-family:"Arial",sans-serif;color:#333333'>S2</span><span
style='mso-ascii-font-family:Arial;mso-hansi-font-family:Arial;mso-bidi-font-family:
Arial;color:#333333'>的提议被拒绝，</span><span lang=EN-US style='font-family:"Arial",sans-serif;
color:#333333'>S1</span><span style='mso-ascii-font-family:Arial;mso-hansi-font-family:
Arial;mso-bidi-font-family:Arial;color:#333333'>正式发布了提议</span><span lang=EN-US
style='font-family:"Arial",sans-serif;color:#333333'>:1</span><span
style='mso-ascii-font-family:Arial;mso-hansi-font-family:Arial;mso-bidi-font-family:
Arial;color:#333333'>号提议生效。</span><span lang=EN-US style='font-family:"Arial",sans-serif;
color:#333333'>S2</span><span style='mso-ascii-font-family:Arial;mso-hansi-font-family:
Arial;mso-bidi-font-family:Arial;color:#333333'>向</span><span lang=EN-US
style='font-family:"Arial",sans-serif;color:#333333'>S1</span><span
style='mso-ascii-font-family:Arial;mso-hansi-font-family:Arial;mso-bidi-font-family:
Arial;color:#333333'>或者</span><span lang=EN-US style='font-family:"Arial",sans-serif;
color:#333333'>S3</span><span style='mso-ascii-font-family:Arial;mso-hansi-font-family:
Arial;mso-bidi-font-family:Arial;color:#333333'>打听并更新了</span><span lang=EN-US
style='font-family:"Arial",sans-serif;color:#333333'>1</span><span
style='mso-ascii-font-family:Arial;mso-hansi-font-family:Arial;mso-bidi-font-family:
Arial;color:#333333'>号法令的内容，然后他可以选择继续发起</span><span lang=EN-US
style='font-family:"Arial",sans-serif;color:#333333'>2</span><span
style='mso-ascii-font-family:Arial;mso-hansi-font-family:Arial;mso-bidi-font-family:
Arial;color:#333333'>号提议。</span><span lang=EN-US style='font-family:"Arial",sans-serif;
color:#333333'><o:p></o:p></span></p>

<p style='margin-top:16.5pt;margin-right:0cm;margin-bottom:0cm;margin-left:
0cm;margin-bottom:.0001pt;text-align:justify;text-justify:inter-ideograph;
line-height:18.0pt;background:white'><span style='mso-ascii-font-family:Arial;
mso-hansi-font-family:Arial;mso-bidi-font-family:Arial;color:#333333'>　　好，我觉得</span><span
lang=EN-US style='font-family:"Arial",sans-serif;color:#333333'>Paxos</span><span
style='mso-ascii-font-family:Arial;mso-hansi-font-family:Arial;mso-bidi-font-family:
Arial;color:#333333'>的精华就这么多内容。现在让我们来对号入座，看看在</span><span lang=EN-US
style='font-family:"Arial",sans-serif;color:#333333'>ZKServer</span><span
style='mso-ascii-font-family:Arial;mso-hansi-font-family:Arial;mso-bidi-font-family:
Arial;color:#333333'>里面</span><span lang=EN-US style='font-family:"Arial",sans-serif;
color:#333333'>Paxos</span><span style='mso-ascii-font-family:Arial;mso-hansi-font-family:
Arial;mso-bidi-font-family:Arial;color:#333333'>是如何得以贯彻实施的。</span><span
lang=EN-US style='font-family:"Arial",sans-serif;color:#333333'><o:p></o:p></span></p>

<p style='margin-top:16.5pt;margin-right:0cm;margin-bottom:0cm;margin-left:
0cm;margin-bottom:.0001pt;text-align:justify;text-justify:inter-ideograph;
line-height:18.0pt;background:white'><span style='mso-ascii-font-family:Arial;
mso-hansi-font-family:Arial;mso-bidi-font-family:Arial;color:#333333'>　　小岛</span><span
lang=EN-US style='font-family:"Arial",sans-serif;color:#333333'>(Island)——ZKServerCluster<o:p></o:p></span></p>

<p style='margin-top:16.5pt;margin-right:0cm;margin-bottom:0cm;margin-left:
0cm;margin-bottom:.0001pt;text-align:justify;text-justify:inter-ideograph;
line-height:18.0pt;background:white'><span style='mso-ascii-font-family:Arial;
mso-hansi-font-family:Arial;mso-bidi-font-family:Arial;color:#333333'>　　议员</span><span
lang=EN-US style='font-family:"Arial",sans-serif;color:#333333'>(Senator)——ZKServer<o:p></o:p></span></p>

<p style='margin-top:16.5pt;margin-right:0cm;margin-bottom:0cm;margin-left:
0cm;margin-bottom:.0001pt;text-align:justify;text-justify:inter-ideograph;
line-height:18.0pt;background:white'><span style='mso-ascii-font-family:Arial;
mso-hansi-font-family:Arial;mso-bidi-font-family:Arial;color:#333333'>　　提议</span><span
lang=EN-US style='font-family:"Arial",sans-serif;color:#333333'>(Proposal)——ZNodeChange(Create/Delete/SetData…)<o:p></o:p></span></p>

<p style='margin-top:16.5pt;margin-right:0cm;margin-bottom:0cm;margin-left:
0cm;margin-bottom:.0001pt;text-align:justify;text-justify:inter-ideograph;
line-height:18.0pt;background:white'><span style='mso-ascii-font-family:Arial;
mso-hansi-font-family:Arial;mso-bidi-font-family:Arial;color:#333333'>　　提议编号</span><span
lang=EN-US style='font-family:"Arial",sans-serif;color:#333333'>(PID)——Zxid(ZooKeeperTransactionId)<o:p></o:p></span></p>

<p style='margin-top:16.5pt;margin-right:0cm;margin-bottom:0cm;margin-left:
0cm;margin-bottom:.0001pt;text-align:justify;text-justify:inter-ideograph;
line-height:18.0pt;background:white'><span style='mso-ascii-font-family:Arial;
mso-hansi-font-family:Arial;mso-bidi-font-family:Arial;color:#333333'>　　正式法令</span><span
lang=EN-US style='font-family:"Arial",sans-serif;color:#333333'>——</span><span
style='mso-ascii-font-family:Arial;mso-hansi-font-family:Arial;mso-bidi-font-family:
Arial;color:#333333'>所有</span><span lang=EN-US style='font-family:"Arial",sans-serif;
color:#333333'>ZNode</span><span style='mso-ascii-font-family:Arial;mso-hansi-font-family:
Arial;mso-bidi-font-family:Arial;color:#333333'>及其数据：</span><span lang=EN-US
style='font-family:"Arial",sans-serif;color:#333333'><o:p></o:p></span></p>

<p class=MsoNormal style='background:white'><span lang=EN-US style='font-size:
9.0pt;line-height:125%;font-family:"Arial",sans-serif;color:black;mso-no-proof:
yes'><!--[if gte vml 1]><v:shape id="图片_x0020_1" o:spid="_x0000_i1025" type="#_x0000_t75"
 alt="https://ss0.baidu.com/6ONWsjip0QIZ8tyhnq/it/u=1293651924,3390881524&amp;fm=170&amp;s=B190E833554E76E80E4DF4E50300E030&amp;w=469&amp;h=329&amp;img.JPG"
 style='width:281.25pt;height:197.25pt;visibility:visible;mso-wrap-style:square'>
 <v:imagedata src="04_ZookeeperAppend.files/image163.png" o:title="u=1293651924,3390881524&amp;fm=170&amp;s=B190E833554E76E80E4DF4E50300E030&amp;w=469&amp;h=329&amp;img"/>
</v:shape><![endif]--><![if !vml]><img border=0 width=375 height=263
src="04_ZookeeperAppend.files/image164.jpg"
alt="https://ss0.baidu.com/6ONWsjip0QIZ8tyhnq/it/u=1293651924,3390881524&amp;fm=170&amp;s=B190E833554E76E80E4DF4E50300E030&amp;w=469&amp;h=329&amp;img.JPG"
v:shapes="图片_x0020_1"><![endif]></span><span lang=EN-US style='font-size:9.0pt;
line-height:125%;font-family:"Arial",sans-serif;color:black'><o:p></o:p></span></p>

<p style='margin-top:19.5pt;margin-right:0cm;margin-bottom:0cm;margin-left:
0cm;margin-bottom:.0001pt;text-align:justify;text-justify:inter-ideograph;
line-height:18.0pt;background:white'><span style='mso-ascii-font-family:Arial;
mso-hansi-font-family:Arial;mso-bidi-font-family:Arial;color:#333333'>　　貌似关键的概念都能一一对应上，但是等一下，</span><span
lang=EN-US style='font-family:"Arial",sans-serif;color:#333333'>Paxos</span><span
style='mso-ascii-font-family:Arial;mso-hansi-font-family:Arial;mso-bidi-font-family:
Arial;color:#333333'>岛上的议员应该是人人平等的吧，而</span><span lang=EN-US style='font-family:
"Arial",sans-serif;color:#333333'>ZKServer</span><span style='mso-ascii-font-family:
Arial;mso-hansi-font-family:Arial;mso-bidi-font-family:Arial;color:#333333'>好像有一个</span><span
lang=EN-US style='font-family:"Arial",sans-serif;color:#333333'>Leader</span><span
style='mso-ascii-font-family:Arial;mso-hansi-font-family:Arial;mso-bidi-font-family:
Arial;color:#333333'>的概念。没错，其实</span><span lang=EN-US style='font-family:"Arial",sans-serif;
color:#333333'>Leader</span><span style='mso-ascii-font-family:Arial;
mso-hansi-font-family:Arial;mso-bidi-font-family:Arial;color:#333333'>的概念也应该属于</span><span
lang=EN-US style='font-family:"Arial",sans-serif;color:#333333'>Paxos</span><span
style='mso-ascii-font-family:Arial;mso-hansi-font-family:Arial;mso-bidi-font-family:
Arial;color:#333333'>范畴的。如果议员人人平等，在某种情况下会由于提议的冲突而产生一个</span><span lang=EN-US
style='font-family:"Arial",sans-serif;color:#333333'>“</span><span
style='mso-ascii-font-family:Arial;mso-hansi-font-family:Arial;mso-bidi-font-family:
Arial;color:#333333'>活锁</span><span lang=EN-US style='font-family:"Arial",sans-serif;
color:#333333'>”</span><span style='mso-ascii-font-family:Arial;mso-hansi-font-family:
Arial;mso-bidi-font-family:Arial;color:#333333'>（所谓活锁我的理解是大家都没有死，都在动，但是一直解决不了冲突问题）。</span><span
lang=EN-US style='font-family:"Arial",sans-serif;color:#333333'>Paxos</span><span
style='mso-ascii-font-family:Arial;mso-hansi-font-family:Arial;mso-bidi-font-family:
Arial;color:#333333'>的作者</span><span lang=EN-US style='font-family:"Arial",sans-serif;
color:#333333'>Lamport</span><span style='mso-ascii-font-family:Arial;
mso-hansi-font-family:Arial;mso-bidi-font-family:Arial;color:#333333'>在他的文章</span><span
lang=EN-US style='font-family:"Arial",sans-serif;color:#333333'>”ThePart-TimeParliament“</span><span
style='mso-ascii-font-family:Arial;mso-hansi-font-family:Arial;mso-bidi-font-family:
Arial;color:#333333'>中阐述了这个问题并给出了解决方案</span><span lang=EN-US style='font-family:
"Arial",sans-serif;color:#333333'>——</span><span style='mso-ascii-font-family:
Arial;mso-hansi-font-family:Arial;mso-bidi-font-family:Arial;color:#333333'>在所有议员中设立一个总统，只有总统有权发出提议，如果议员有自己的提议，必须发给总统并由总统来提出。好，我们又多了一个角色：总统。</span><span
lang=EN-US style='font-family:"Arial",sans-serif;color:#333333'><o:p></o:p></span></p>

<p style='margin-top:16.5pt;margin-right:0cm;margin-bottom:0cm;margin-left:
0cm;margin-bottom:.0001pt;text-align:justify;text-justify:inter-ideograph;
line-height:18.0pt;background:white'><span style='mso-ascii-font-family:Arial;
mso-hansi-font-family:Arial;mso-bidi-font-family:Arial;color:#333333'>　　总统</span><span
lang=EN-US style='font-family:"Arial",sans-serif;color:#333333'>——ZKServerLeader<o:p></o:p></span></p>

<p style='margin-top:16.5pt;margin-right:0cm;margin-bottom:0cm;margin-left:
0cm;margin-bottom:.0001pt;text-align:justify;text-justify:inter-ideograph;
line-height:18.0pt;background:white'><span style='mso-ascii-font-family:Arial;
mso-hansi-font-family:Arial;mso-bidi-font-family:Arial;color:#333333'>　　又一个问题产生了，总统怎么选出来的？</span><span
lang=EN-US style='font-family:"Arial",sans-serif;color:#333333'><o:p></o:p></span></p>

<p style='margin-top:16.5pt;margin-right:0cm;margin-bottom:0cm;margin-left:
0cm;margin-bottom:.0001pt;text-align:justify;text-justify:inter-ideograph;
line-height:18.0pt;background:white'><span style='mso-ascii-font-family:Arial;
mso-hansi-font-family:Arial;mso-bidi-font-family:Arial;color:#333333'>　　现在我们假设总统已经选好了，下面看看</span><span
lang=EN-US style='font-family:"Arial",sans-serif;color:#333333'>ZKServer</span><span
style='mso-ascii-font-family:Arial;mso-hansi-font-family:Arial;mso-bidi-font-family:
Arial;color:#333333'>是怎么实施的。</span><span lang=EN-US style='font-family:"Arial",sans-serif;
color:#333333'><o:p></o:p></span></p>

<p style='margin-top:16.5pt;margin-right:0cm;margin-bottom:0cm;margin-left:
0cm;margin-bottom:.0001pt;text-align:justify;text-justify:inter-ideograph;
line-height:18.0pt;background:white'><span style='mso-ascii-font-family:Arial;
mso-hansi-font-family:Arial;mso-bidi-font-family:Arial;color:#333333'>　　情况一：</span><span
lang=EN-US style='font-family:"Arial",sans-serif;color:#333333'><o:p></o:p></span></p>

<p style='margin-top:16.5pt;margin-right:0cm;margin-bottom:0cm;margin-left:
0cm;margin-bottom:.0001pt;text-align:justify;text-justify:inter-ideograph;
line-height:18.0pt;background:white'><span style='mso-ascii-font-family:Arial;
mso-hansi-font-family:Arial;mso-bidi-font-family:Arial;color:#333333'>　　屁民甲</span><span
lang=EN-US style='font-family:"Arial",sans-serif;color:#333333'>(Client)</span><span
style='mso-ascii-font-family:Arial;mso-hansi-font-family:Arial;mso-bidi-font-family:
Arial;color:#333333'>到某个议员</span><span lang=EN-US style='font-family:"Arial",sans-serif;
color:#333333'>(ZKServer)</span><span style='mso-ascii-font-family:Arial;
mso-hansi-font-family:Arial;mso-bidi-font-family:Arial;color:#333333'>那里询问</span><span
lang=EN-US style='font-family:"Arial",sans-serif;color:#333333'>(Get)</span><span
style='mso-ascii-font-family:Arial;mso-hansi-font-family:Arial;mso-bidi-font-family:
Arial;color:#333333'>某条法令的情况</span><span lang=EN-US style='font-family:"Arial",sans-serif;
color:#333333'>(ZNode</span><span style='mso-ascii-font-family:Arial;
mso-hansi-font-family:Arial;mso-bidi-font-family:Arial;color:#333333'>的数据</span><span
lang=EN-US style='font-family:"Arial",sans-serif;color:#333333'>)</span><span
style='mso-ascii-font-family:Arial;mso-hansi-font-family:Arial;mso-bidi-font-family:
Arial;color:#333333'>，议员毫不犹豫的拿出他的记事本</span><span lang=EN-US style='font-family:
"Arial",sans-serif;color:#333333'>(localstorage)</span><span style='mso-ascii-font-family:
Arial;mso-hansi-font-family:Arial;mso-bidi-font-family:Arial;color:#333333'>，查阅法令并告诉他结果，同时声明：我的数据不一定是最新的。你想要最新的数据？没问题，等着，等我找总统</span><span
lang=EN-US style='font-family:"Arial",sans-serif;color:#333333'>Sync</span><span
style='mso-ascii-font-family:Arial;mso-hansi-font-family:Arial;mso-bidi-font-family:
Arial;color:#333333'>一下再告诉你。</span><span lang=EN-US style='font-family:"Arial",sans-serif;
color:#333333'><o:p></o:p></span></p>

<p style='margin-top:16.5pt;margin-right:0cm;margin-bottom:0cm;margin-left:
0cm;margin-bottom:.0001pt;text-align:justify;text-justify:inter-ideograph;
line-height:18.0pt;background:white'><span style='mso-ascii-font-family:Arial;
mso-hansi-font-family:Arial;mso-bidi-font-family:Arial;color:#333333'>　　情况二：</span><span
lang=EN-US style='font-family:"Arial",sans-serif;color:#333333'><o:p></o:p></span></p>

<p style='margin-top:16.5pt;margin-right:0cm;margin-bottom:0cm;margin-left:
0cm;margin-bottom:.0001pt;text-align:justify;text-justify:inter-ideograph;
line-height:18.0pt;background:white'><span style='mso-ascii-font-family:Arial;
mso-hansi-font-family:Arial;mso-bidi-font-family:Arial;color:#333333'>　　屁民乙</span><span
lang=EN-US style='font-family:"Arial",sans-serif;color:#333333'>(Client)</span><span
style='mso-ascii-font-family:Arial;mso-hansi-font-family:Arial;mso-bidi-font-family:
Arial;color:#333333'>到某个议员</span><span lang=EN-US style='font-family:"Arial",sans-serif;
color:#333333'>(ZKServer)</span><span style='mso-ascii-font-family:Arial;
mso-hansi-font-family:Arial;mso-bidi-font-family:Arial;color:#333333'>那里要求政府归还欠他的一万元钱，议员让他在办公室等着，自己将问题反映给了总统，总统询问所有议员的意见，多数议员表示欠屁民的钱一定要还，于是总统发表声明，从国库中拿出一万元还债，国库总资产由</span><span
lang=EN-US style='font-family:"Arial",sans-serif;color:#333333'>100</span><span
style='mso-ascii-font-family:Arial;mso-hansi-font-family:Arial;mso-bidi-font-family:
Arial;color:#333333'>万变成</span><span lang=EN-US style='font-family:"Arial",sans-serif;
color:#333333'>99</span><span style='mso-ascii-font-family:Arial;mso-hansi-font-family:
Arial;mso-bidi-font-family:Arial;color:#333333'>万。屁民乙拿到钱回去了</span><span
lang=EN-US style='font-family:"Arial",sans-serif;color:#333333'>(Client</span><span
style='mso-ascii-font-family:Arial;mso-hansi-font-family:Arial;mso-bidi-font-family:
Arial;color:#333333'>函数返回</span><span lang=EN-US style='font-family:"Arial",sans-serif;
color:#333333'>)</span><span style='mso-ascii-font-family:Arial;mso-hansi-font-family:
Arial;mso-bidi-font-family:Arial;color:#333333'>。</span><span lang=EN-US
style='font-family:"Arial",sans-serif;color:#333333'><o:p></o:p></span></p>

<p style='margin-top:16.5pt;margin-right:0cm;margin-bottom:0cm;margin-left:
0cm;margin-bottom:.0001pt;text-align:justify;text-justify:inter-ideograph;
line-height:18.0pt;background:white'><span style='mso-ascii-font-family:Arial;
mso-hansi-font-family:Arial;mso-bidi-font-family:Arial;color:#333333'>　　情况三：</span><span
lang=EN-US style='font-family:"Arial",sans-serif;color:#333333'><o:p></o:p></span></p>

<p style='margin-top:16.5pt;margin-right:0cm;margin-bottom:0cm;margin-left:
0cm;margin-bottom:.0001pt;text-align:justify;text-justify:inter-ideograph;
line-height:18.0pt;background:white'><span style='mso-ascii-font-family:Arial;
mso-hansi-font-family:Arial;mso-bidi-font-family:Arial;color:#333333'>　　总统突然挂了，议员接二连三的发现联系不上总统，于是各自发表声明，推选新的总统，总统大选期间政府停业，拒绝屁民的请求。</span><span
lang=EN-US style='font-family:"Arial",sans-serif;color:#333333'><o:p></o:p></span></p>

<p style='margin-top:16.5pt;margin-right:0cm;margin-bottom:0cm;margin-left:
0cm;margin-bottom:.0001pt;text-align:justify;text-justify:inter-ideograph;
line-height:18.0pt;background:white'><span style='mso-ascii-font-family:Arial;
mso-hansi-font-family:Arial;mso-bidi-font-family:Arial;color:#333333'>　　到此为止吧，当然还有很多其他的情况，但这些情况总是能在</span><span
lang=EN-US style='font-family:"Arial",sans-serif;color:#333333'>Paxos</span><span
style='mso-ascii-font-family:Arial;mso-hansi-font-family:Arial;mso-bidi-font-family:
Arial;color:#333333'>的算法中找到原型并加以解决。这也正是我们认为</span><span lang=EN-US
style='font-family:"Arial",sans-serif;color:#333333'>Paxos</span><span
style='mso-ascii-font-family:Arial;mso-hansi-font-family:Arial;mso-bidi-font-family:
Arial;color:#333333'>是</span><span lang=EN-US style='font-family:"Arial",sans-serif;
color:#333333'>Zookeeper</span><span style='mso-ascii-font-family:Arial;
mso-hansi-font-family:Arial;mso-bidi-font-family:Arial;color:#333333'>的灵魂的原因。当然</span><span
lang=EN-US style='font-family:"Arial",sans-serif;color:#333333'>ZKServer</span><span
style='mso-ascii-font-family:Arial;mso-hansi-font-family:Arial;mso-bidi-font-family:
Arial;color:#333333'>还有很多属于自己特性的东西：</span><span lang=EN-US style='font-family:
"Arial",sans-serif;color:#333333'>Session,Watcher</span><span style='mso-ascii-font-family:
Arial;mso-hansi-font-family:Arial;mso-bidi-font-family:Arial;color:#333333'>，</span><span
lang=EN-US style='font-family:"Arial",sans-serif;color:#333333'>Version</span><span
style='mso-ascii-font-family:Arial;mso-hansi-font-family:Arial;mso-bidi-font-family:
Arial;color:#333333'>等等，需要我们花更多的时间去研究和学习。</span><span lang=EN-US
style='font-family:"Arial",sans-serif;color:#333333'><o:p></o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='font-size:12.0pt;mso-bidi-font-size:
11.0pt;line-height:125%;mso-fareast-font-family:宋体'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='font-size:12.0pt;mso-bidi-font-size:
11.0pt;line-height:125%;mso-fareast-font-family:宋体'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='font-size:12.0pt;mso-bidi-font-size:
11.0pt;line-height:125%;mso-fareast-font-family:宋体'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='font-size:12.0pt;mso-bidi-font-size:
11.0pt;line-height:125%;mso-fareast-font-family:宋体'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='font-size:12.0pt;mso-bidi-font-size:
11.0pt;line-height:125%;mso-fareast-font-family:宋体'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='font-size:12.0pt;mso-bidi-font-size:
11.0pt;line-height:125%;mso-fareast-font-family:宋体'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='font-size:12.0pt;mso-bidi-font-size:
11.0pt;line-height:125%;mso-fareast-font-family:宋体'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='font-size:12.0pt;mso-bidi-font-size:
11.0pt;line-height:125%;mso-fareast-font-family:宋体'><o:p>&nbsp;</o:p></span></p>

</div>

</body>

</html>
